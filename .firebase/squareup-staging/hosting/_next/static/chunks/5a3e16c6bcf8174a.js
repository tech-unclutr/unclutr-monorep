(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7486,e=>{"use strict";let t=(0,e.i(75254).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);e.s(["Building2",()=>t],7486)},99023,e=>{"use strict";let t=(0,e.i(75254).default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>t],99023)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},21218,e=>{"use strict";let t=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>t],21218)},16715,e=>{"use strict";let t=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},67881,91918,25913,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(20783),a=Symbol.for("react.lazy"),i=s[" use ".trim().toString()];function n(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===a&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function l(e){var a;let l,o=(a=e,(l=s.forwardRef((e,t)=>{let{children:a,...l}=e;if(n(a)&&"function"==typeof i&&(a=i(a._payload)),s.isValidElement(a)){var o;let e,i,n=(o=a,(i=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(i=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),c=function(e,t){let s={...t};for(let r in t){let a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?s[r]=(...e)=>{let t=i(...e);return a(...e),t}:a&&(s[r]=a):"style"===r?s[r]={...a,...i}:"className"===r&&(s[r]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}(l,a.props);return a.type!==s.Fragment&&(c.ref=t?(0,r.composeRefs)(t,n):n),s.cloneElement(a,c)}return s.Children.count(a)>1?s.Children.only(null):null})).displayName=`${a}.SlotClone`,l),c=s.forwardRef((e,r)=>{let{children:a,...l}=e;n(a)&&"function"==typeof i&&(a=i(a._payload));let c=s.Children.toArray(a),h=c.find(d);if(h){let e=h.props.children,a=c.map(t=>t!==h?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,t.jsx)(o,{...l,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,a):null})}return(0,t.jsx)(o,{...l,ref:r,children:a})});return c.displayName=`${e}.Slot`,c}var o=l("Slot"),c=Symbol("radix.slottable");function d(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}e.s(["Slot",()=>o,"createSlot",()=>l],91918);var h=e.i(7670);let u=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,m=h.clsx,x=(e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return m(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:a,defaultVariants:i}=t,n=Object.keys(a).map(e=>{let t=null==s?void 0:s[e],r=null==i?void 0:i[e];if(null===t)return null;let n=u(t)||u(r);return a[e][n]}),l=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return m(e,n,null==t||null==(r=t.compoundVariants)?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...i,...l}[t]):({...i,...l})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)};e.s(["cva",0,x],25913);var p=e.i(47163);let f=x("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground transition-all active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),g=s.forwardRef(({className:e,variant:s,size:r,asChild:a=!1,...i},n)=>(0,t.jsx)(a?o:"button",{className:(0,p.cn)(f({variant:s,size:r,className:e})),ref:n,...i}));g.displayName="Button",e.s(["Button",()=>g,"buttonVariants",()=>f],67881)},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(71645),r=e.i(31178),a=e.i(47414),i=e.i(74008),n=e.i(21476),l=e.i(72846),o=s,c=e.i(37806);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class h extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,l.isHTMLElement)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u({children:e,isPresent:r,anchorX:a,root:i}){let n=(0,o.useId)(),l=(0,o.useRef)(null),u=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:m}=(0,o.useContext)(c.MotionConfigContext),x=function(...e){return s.useCallback(function(...e){return t=>{let s=!1,r=e.map(e=>{let r=d(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():d(e[t],null)}}}}(...e),e)}(l,e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:o,right:c}=u.current;if(r||!l.current||!e||!t)return;let d="left"===a?`left: ${o}`:`right: ${c}`;l.current.dataset.motionPopId=n;let h=document.createElement("style");m&&(h.nonce=m);let x=i??document.head;return x.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${d}px !important;
            top: ${s}px !important;
          }
        `),()=>{x.contains(h)&&x.removeChild(h)}},[r]),(0,t.jsx)(h,{isPresent:r,childRef:l,sizeRef:u,children:o.cloneElement(e,{ref:x})})}let m=({children:e,initial:r,isPresent:i,onExitComplete:l,custom:o,presenceAffectsLayout:c,mode:d,anchorX:h,root:m})=>{let p=(0,a.useConstant)(x),f=(0,s.useId)(),g=!0,v=(0,s.useMemo)(()=>(g=!1,{id:f,initial:r,isPresent:i,custom:o,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;l&&l()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[i,p,l]);return c&&g&&(v={...v}),(0,s.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[i]),s.useEffect(()=>{i||p.size||!l||l()},[i]),"popLayout"===d&&(e=(0,t.jsx)(u,{isPresent:i,anchorX:h,root:m,children:e})),(0,t.jsx)(n.PresenceContext.Provider,{value:v,children:e})};function x(){return new Map}var p=e.i(64978);let f=e=>e.key||"";function g(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let v=({children:e,custom:n,initial:l=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:h=!1,anchorX:u="left",root:x})=>{let[v,w]=(0,p.usePresence)(h),y=(0,s.useMemo)(()=>g(e),[e]),b=h&&!v?[]:y.map(f),j=(0,s.useRef)(!0),N=(0,s.useRef)(y),C=(0,a.useConstant)(()=>new Map),[k,S]=(0,s.useState)(y),[_,E]=(0,s.useState)(y);(0,i.useIsomorphicLayoutEffect)(()=>{j.current=!1,N.current=y;for(let e=0;e<_.length;e++){let t=f(_[e]);b.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[_,b.length,b.join("-")]);let M=[];if(y!==k){let e=[...y];for(let t=0;t<_.length;t++){let s=_[t],r=f(s);b.includes(r)||(e.splice(t,0,s),M.push(s))}return"wait"===d&&M.length&&(e=M),E(g(e)),S(y),null}let{forceRender:R}=(0,s.useContext)(r.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:_.map(e=>{let s=f(e),r=(!h||!!v)&&(y===_||b.includes(s));return(0,t.jsx)(m,{isPresent:r,initial:(!j.current||!!l)&&void 0,custom:n,presenceAffectsLayout:c,mode:d,root:x,onExitComplete:r?void 0:()=>{if(!C.has(s))return;C.set(s,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(R?.(),E(N.current),h&&w?.(),o&&o())},anchorX:u,children:e},s)})})};e.s(["AnimatePresence",()=>v],88653)},54858,e=>{"use strict";var t=e.i(47167),s=e.i(76009);let r=t.default.env.NEXT_PUBLIC_API_URL?`${t.default.env.NEXT_PUBLIC_API_URL}/api/v1`:"/api/v1";class a extends Error{status;data;constructor(e,t,s){super(e),this.name="ApiError",this.status=t,this.data=s}}e.s(["api",0,{async request(e,t={}){let i=s.auth.currentUser,n=i?await i.getIdToken():null,l=localStorage.getItem("unclutr_company_id"),o={"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{},...l?{"X-Company-ID":l}:{},...t.headers||{}};!l&&e.startsWith("/execution")&&console.warn(`DEBUG: API Request to ${e} missing X-Company-ID. LocalStorage 'unclutr_company_id' is:`,l);let c=`${r}${e}`,d=await fetch(c,{...t,cache:"no-store",headers:o});if(!d.ok){let e=await d.json().catch(()=>({detail:"Unknown error"}));throw console.error("DEBUG: API Error",{url:c,status:d.status,errorData:e}),new a(e.detail||d.statusText,d.status,e)}return d.json()},get(e,t){return this.request(e,{method:"GET",headers:t})},post(e,t={},s){return this.request(e,{method:"POST",body:JSON.stringify(t),headers:s})},patch(e,t={},s){return this.request(e,{method:"PATCH",body:JSON.stringify(t),headers:s})},put(e,t={},s){return this.request(e,{method:"PUT",body:JSON.stringify(t),headers:s})},delete(e,t){return this.request(e,{method:"DELETE",headers:t})}}])},58041,e=>{"use strict";let t=(0,e.i(75254).default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["Database",()=>t],58041)},39312,e=>{"use strict";let t=(0,e.i(75254).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],39312)},70065,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(47163);let a=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("rounded-xl border bg-card text-card-foreground",e),...s}));a.displayName="Card";let i=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let n=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));n.displayName="CardTitle";let l=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",e),...s}));l.displayName="CardDescription";let o=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent",s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>a,"CardContent",()=>o,"CardDescription",()=>l,"CardHeader",()=>i,"CardTitle",()=>n])},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},75558,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["ArrowUp",()=>t],75558)},32058,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(67881),a=e.i(92270),i=e.i(39312),n=e.i(75254);let l=(0,n.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var o=e.i(61911),c=e.i(21218);let d=(0,n.default)("workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);var h=e.i(60858),u=e.i(18566),m=e.i(54858),x=e.i(46932);let p=(0,n.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var f=e.i(75558),g=e.i(99023);function v({label:e,value:s,trend:r,trendLabel:a,icon:i,color:n="indigo",loading:l=!1,subValue:o}){return(0,t.jsxs)(x.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-xl border border-white/5 bg-white/[0.02] overflow-hidden relative group",children:[(0,t.jsx)("div",{className:`absolute -right-10 -top-10 w-32 h-32 rounded-full bg-${n}-500/5 blur-3xl group-hover:bg-${n}-500/10 transition-all duration-500`}),(0,t.jsxs)("div",{className:"p-5 relative z-10",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white/60",children:e}),i&&(0,t.jsx)("div",{className:`p-2 rounded-lg bg-gradient-to-br ${(e=>{switch(e){case"emerald":return"from-emerald-500/20 to-emerald-500/5 text-emerald-400";case"rose":return"from-rose-500/20 to-rose-500/5 text-rose-400";case"amber":return"from-amber-500/20 to-amber-500/5 text-amber-400";case"blue":return"from-blue-500/20 to-blue-500/5 text-blue-400";default:return"from-indigo-500/20 to-indigo-500/5 text-indigo-400"}})(n)}`,children:(0,t.jsx)(i,{className:"w-4 h-4"})})]}),l?(0,t.jsxs)("div",{className:"space-y-2 animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 w-24 bg-white/10 rounded"}),(0,t.jsx)("div",{className:"h-4 w-16 bg-white/5 rounded"})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white tracking-tight mb-1",children:s}),(void 0!==r||o)&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[void 0!==r&&(0,t.jsxs)("div",{className:`flex items-center gap-1 font-medium ${r>0?"text-emerald-400":r<0?"text-rose-400":"text-white/40"}`,children:[r>0?(0,t.jsx)(f.ArrowUp,{className:"w-3 h-3"}):r<0?(0,t.jsx)(p,{className:"w-3 h-3"}):(0,t.jsx)(g.Minus,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:[Math.abs(r),"%"]})]}),a&&(0,t.jsx)("span",{className:"text-white/30",children:a}),o&&(0,t.jsx)("span",{className:"text-white/40",children:o})]})]})]})]})}var w=e.i(7486),y=e.i(25652);function b(){let[e,r]=(0,s.useState)(null),[a,i]=(0,s.useState)(!0),n=async()=>{i(!0);try{let e=await m.api.get("/metrics/overview");r(e)}catch(e){console.error("Failed to fetch overview metrics:",e)}finally{i(!1)}};return(0,s.useEffect)(()=>{n();let e=setInterval(n,6e4);return()=>clearInterval(e)},[]),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(v,{label:"Total Users",value:e?.total_users?.toLocaleString()||"0",subValue:`${e?.active_users_7d||0} active (7d)`,icon:o.Users,color:"orange",loading:a,trend:5,trendLabel:"vs last month"}),(0,t.jsx)(v,{label:"Companies",value:e?.total_companies?.toLocaleString()||"0",icon:w.Building2,color:"rose",loading:a,trend:10*!!e?.total_companies,trendLabel:"growth"}),(0,t.jsx)(v,{label:"Onboarding Rate",value:`${Math.round(e?.avg_onboarding_completion||0)}%`,icon:y.TrendingUp,color:"emerald",loading:a,trend:2,trendLabel:"completion"}),(0,t.jsx)(v,{label:"Integrations",value:e?.total_integrations?.toLocaleString()||"0",subValue:`${e?.total_datasources||0} supported`,icon:d,color:"amber",loading:a,trend:0,trendLabel:"active"})]})}var j=e.i(40160);let N=(0,n.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var C=e.i(16715),k=e.i(70065);function S(){let[e,a]=(0,s.useState)([]),[i,n]=(0,s.useState)(!0),[l,o]=(0,s.useState)(0),c=async()=>{n(!0);try{let e=await m.api.get("/metrics/customers?limit=20&offset=0");a(e.customers),o(e.total)}catch(e){console.error("Failed to fetch customers:",e)}finally{n(!1)}},d=async()=>{try{await m.api.request("/auth/token",{method:"GET"}).catch(()=>null),await m.api.request("/metrics/export/customers",{method:"GET"}),alert("Export started... (Implementation pending correct blob handling in api.ts)")}catch(e){console.error(e)}};return(0,s.useEffect)(()=>{c()},[]),(0,t.jsxs)(k.Card,{className:"bg-white/[0.02] border-white/5",children:[(0,t.jsxs)(k.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k.CardTitle,{className:"text-lg",children:"Customer Management"}),(0,t.jsxs)(k.CardDescription,{children:["View and manage ",l," customer accounts"]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:c,className:"bg-white/5 border-white/10 hover:bg-white/10 text-white/70",children:[(0,t.jsx)(C.RefreshCw,{className:`w-4 h-4 mr-2 ${i?"animate-spin":""}`}),"Refresh"]}),(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:d,className:"bg-orange-500/10 border-orange-500/20 hover:bg-orange-500/20 text-orange-400",children:[(0,t.jsx)(j.Download,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]}),(0,t.jsx)(k.CardContent,{children:(0,t.jsx)("div",{className:"rounded-md border border-white/10 overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,t.jsx)("thead",{className:"text-xs uppercase bg-white/5 text-white/50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 font-medium",children:"Company"}),(0,t.jsx)("th",{className:"px-6 py-3 font-medium",children:"Joined"}),(0,t.jsx)("th",{className:"px-6 py-3 font-medium text-center",children:"Members"}),(0,t.jsx)("th",{className:"px-6 py-3 font-medium text-center",children:"Workspaces"}),(0,t.jsx)("th",{className:"px-6 py-3 font-medium text-center",children:"Integrations"}),(0,t.jsx)("th",{className:"px-6 py-3 font-medium text-center",children:"Health"}),(0,t.jsx)("th",{className:"px-6 py-3 font-medium text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-white/5",children:i&&0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-white/30",children:"Loading customer data..."})}):0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-white/30",children:"No customers found."})}):e.map(e=>{var s;return(0,t.jsxs)("tr",{className:"hover:bg-white/[0.02] transition-colors",children:[(0,t.jsxs)("td",{className:"px-6 py-4 font-medium text-white/80",children:[e.name,(0,t.jsxs)("div",{className:"text-xs text-white/30 font-mono mt-0.5",children:[e.id.slice(0,8),"..."]})]}),(0,t.jsx)("td",{className:"px-6 py-4 text-white/60",children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)("td",{className:"px-6 py-4 text-center text-white/60",children:e.member_count}),(0,t.jsx)("td",{className:"px-6 py-4 text-center text-white/60",children:e.workspace_count}),(0,t.jsx)("td",{className:"px-6 py-4 text-center text-white/60",children:e.integration_count}),(0,t.jsx)("td",{className:"px-6 py-4 text-center",children:(0,t.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${(s=e.health_score)>=80?"text-emerald-400 bg-emerald-500/10 border-emerald-500/20":s>=50?"text-amber-400 bg-amber-500/10 border-amber-500/20":"text-rose-400 bg-rose-500/10 border-rose-500/20"}`,children:[e.health_score,"%"]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsx)(r.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 hover:bg-white/10 text-white/40 hover:text-white",children:(0,t.jsx)(N,{className:"w-4 h-4"})})})]},e.id)})})]})})})})]})}var _=e.i(47167),E=e.i(88653);function M(){let[e,r]=(0,s.useState)([]),a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=_.default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1",t=new EventSource(`${e}/dev/events`);return a.current=t,t.addEventListener("audit_log",e=>{try{let t=JSON.parse(e.data);r(e=>[t,...e].slice(0,50))}catch(e){console.error("Failed to parse log",e)}}),t.onerror=e=>{console.error("SSE Error:",e),t.close()},()=>{t.close()}},[]),(0,t.jsxs)(k.Card,{className:"flex-1 bg-white/[0.02] border-white/5 flex flex-col min-h-[400px] overflow-hidden h-full",children:[(0,t.jsx)(k.CardHeader,{className:"p-6 shrink-0 border-b border-white/5",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-orange-500/10 text-orange-400",children:(0,t.jsx)(c.Activity,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(k.CardTitle,{className:"text-lg text-white",children:"Live Activity Stream"}),(0,t.jsx)(k.CardDescription,{className:"text-white/30 text-xs",children:"Real-time system events"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex gap-1",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"w-1 h-3 bg-orange-500/50 rounded-full animate-bounce",style:{animationDelay:`${.1*e}s`}},e))}),(0,t.jsx)("span",{className:"text-[10px] text-orange-400 uppercase font-bold tracking-widest leading-none",children:"Live"})]})]})}),(0,t.jsx)(k.CardContent,{className:"p-0 overflow-y-auto flex-1 scrollbar-hide",children:(0,t.jsx)("div",{className:"divide-y divide-white/5",children:(0,t.jsx)(E.AnimatePresence,{initial:!1,children:0===e.length?(0,t.jsx)("div",{className:"p-12 text-center",children:(0,t.jsx)("p",{className:"text-white/20 text-sm font-medium",children:"Waiting for system events..."})}):e.map(e=>(0,t.jsxs)(x.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"p-4 hover:bg-white/[0.02] transition-colors flex items-start gap-4",children:[(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${e.action.includes("created")?"bg-orange-500":e.action.includes("deleted")?"bg-rose-500":e.action.includes("updated")?"bg-amber-500":"bg-white/20"}`})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-white/90 font-mono tracking-tight",children:e.action}),(0,t.jsx)("span",{className:"text-[10px] text-white/20 font-mono",children:new Date(e.created_at).toLocaleTimeString([],{hour12:!0})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs text-white/40",children:[(0,t.jsx)("span",{className:"px-2 py-0.5 rounded bg-white/5 border border-white/10 uppercase tracking-widest text-[9px] font-bold",children:e.resource_type}),(0,t.jsxs)("span",{className:"font-mono text-[10px] truncate max-w-[150px]",children:["ID: ",e.id.split("-")[0],"..."]}),(0,t.jsx)("span",{className:"text-[10px] truncate max-w-[100px]",children:"system"===e.actor_id?"System":`User: ${e.actor_id.slice(0,4)}...`})]})]})]},e.id))})})})]})}var R=e.i(58041);let L=(0,n.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);function A(){let[e,r]=(0,s.useState)(null),[a,n]=(0,s.useState)(!0),l=async()=>{n(!0);try{let e=await m.api.get("/health/full");r(e)}catch(e){console.error("Failed to fetch health status:",e)}finally{n(!1)}};(0,s.useEffect)(()=>{l();let e=setInterval(l,3e4);return()=>clearInterval(e)},[]);let o=[{title:"Backend API",icon:c.Activity,status:e?.api},{title:"Primary DB",icon:R.Database,status:e?.database},{title:"Auth Layer",icon:L,status:e?.firebase},{title:"Intelligence",icon:i.Zap,status:e?.vertex_ai}];return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map((s,r)=>{var i;let n;return(0,t.jsx)(k.Card,{className:"bg-white/[0.02] border-white/5 overflow-hidden group hover:border-white/10 transition-colors",children:(0,t.jsxs)(k.CardContent,{className:"p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-white/5 text-white/40 group-hover:text-white/80 transition-colors",children:(0,t.jsx)(s.icon,{className:"w-4 h-4"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-white/80",children:s.title})]}),e||!a?(n="online"===(i=s.status||"offline")||"connected"===i,(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`w-2 h-2 rounded-full animate-pulse ${n?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]":"bg-red-500"}`}),(0,t.jsx)("span",{className:`text-[10px] font-medium uppercase tracking-wider ${n?"text-emerald-500":"text-red-500"}`,children:n?"Operational":"Offline"})]})):(0,t.jsx)("div",{className:"h-4 w-12 bg-white/5 animate-pulse rounded"})]})},r)})})}var P=e.i(47163);function $({tabs:e,activeTab:s,onChange:r,className:a}){return(0,t.jsx)("div",{className:(0,P.cn)("flex space-x-1 bg-white/5 p-1 rounded-xl",a),children:e.map(e=>(0,t.jsxs)("button",{onClick:()=>r(e.id),className:(0,P.cn)("relative flex items-center gap-2 px-4 py-2 text-sm font-medium transition-colors rounded-lg z-10",s===e.id?"text-white":"text-white/50 hover:text-white/70"),children:[s===e.id&&(0,t.jsx)(x.motion.div,{layoutId:"active-tab",className:"absolute inset-0 bg-white/10 rounded-lg -z-10",transition:{type:"spring",bounce:.2,duration:.6}}),e.icon&&(0,t.jsx)("span",{className:"w-4 h-4",children:e.icon}),e.label]},e.id))})}function I({id:e,activeTab:s,children:r,className:a}){return e!==s?null:(0,t.jsx)(x.motion.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.2},className:a,children:r})}function T(){let[e,n]=(0,s.useState)("overview"),[m,x]=(0,s.useState)(!1),p=(0,u.useRouter)(),f=async()=>{x(!0);try{await (0,h.logout)(),p.push("/login")}catch(e){console.error("Logout failed:",e)}finally{x(!1)}},g=[{id:"overview",label:"Overview",icon:(0,t.jsx)(l,{className:"w-4 h-4"})},{id:"customers",label:"Customers",icon:(0,t.jsx)(o.Users,{className:"w-4 h-4"})},{id:"product",label:"Product Health",icon:(0,t.jsx)(c.Activity,{className:"w-4 h-4"})},{id:"integrations",label:"Integrations",icon:(0,t.jsx)(d,{className:"w-4 h-4"})}];return(0,t.jsxs)("div",{className:"min-h-screen bg-[#050505] text-white selection:bg-orange-500/30 font-sans p-6 overflow-hidden flex flex-col",children:[(0,t.jsxs)("header",{className:"max-w-[1600px] mx-auto w-full flex items-center justify-between mb-8 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-tr from-orange-600 to-orange-400 flex items-center justify-center shadow-lg shadow-orange-500/20",children:(0,t.jsx)(i.Zap,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Control Tower"}),(0,t.jsx)("p",{className:"text-white/40 text-xs uppercase tracking-[0.2em] font-bold",children:"Unclutr System Operations"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 border border-white/5",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_8px_rgba(16,185,129,0.5)]"}),(0,t.jsx)("span",{className:"text-xs font-medium text-emerald-400 uppercase tracking-wider",children:"System Operational"})]}),(0,t.jsx)("div",{className:"h-4 w-px bg-white/10"}),(0,t.jsxs)(r.Button,{onClick:f,disabled:m,variant:"ghost",className:"text-red-400 hover:text-red-300 hover:bg-red-500/10 h-9",children:[(0,t.jsx)(a.LogOut,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]}),(0,t.jsxs)("main",{className:"max-w-[1600px] mx-auto w-full grid grid-cols-12 gap-8 flex-1 min-h-0",children:[(0,t.jsxs)("div",{className:"col-span-12 lg:col-span-9 flex flex-col gap-8 min-h-0 overflow-y-auto pr-2 scrollbar-hide pb-10",children:[(0,t.jsx)(b,{}),(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)($,{tabs:g,activeTab:e,onChange:n})}),(0,t.jsxs)("div",{className:"flex-1 min-h-[400px]",children:[(0,t.jsxs)(I,{id:"overview",activeTab:e,className:"space-y-6",children:[(0,t.jsx)(A,{}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"h-64 rounded-xl border border-white/5 bg-white/[0.02] flex items-center justify-center text-white/20 text-sm",children:"Revenue Chart (Coming Soon)"}),(0,t.jsx)("div",{className:"h-64 rounded-xl border border-white/5 bg-white/[0.02] flex items-center justify-center text-white/20 text-sm",children:"User Growth Chart (Coming Soon)"})]})]}),(0,t.jsx)(I,{id:"customers",activeTab:e,children:(0,t.jsx)(S,{})}),(0,t.jsx)(I,{id:"product",activeTab:e,children:(0,t.jsxs)("div",{className:"p-12 text-center border border-white/5 rounded-xl bg-white/[0.02]",children:[(0,t.jsx)(c.Activity,{className:"w-12 h-12 text-white/10 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-white/50",children:"Product Health Metrics"}),(0,t.jsx)("p",{className:"text-sm text-white/30 mt-2",children:"Detailed charts for engagement, retention, and feature usage coming in Phase 4.1"})]})}),(0,t.jsx)(I,{id:"integrations",activeTab:e,children:(0,t.jsxs)("div",{className:"p-12 text-center border border-white/5 rounded-xl bg-white/[0.02]",children:[(0,t.jsx)(d,{className:"w-12 h-12 text-white/10 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-white/50",children:"Integration Status"}),(0,t.jsx)("p",{className:"text-sm text-white/30 mt-2",children:"Sync health, error rates, and API performance metrics coming in Phase 4.1"})]})})]})]}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-3 h-full min-h-[500px]",children:(0,t.jsx)(M,{})})]})]})}e.s(["default",()=>T],32058)}]);