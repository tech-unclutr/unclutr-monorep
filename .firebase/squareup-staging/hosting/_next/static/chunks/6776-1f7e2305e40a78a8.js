"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6776],{71128:(e,t,a)=>{a.d(t,{L:()=>e4});var r=a(95155),s=a(12115),i=a(28633),n=a(71226),l=a(30113),c=a(29691),d=a(68158),o=a(17778),x=a(5176),m=a(7410),h=a(14505),g=a(30098),p=a(66889),u=a(29191),b=a(32423),f=a(22725),j=a(40767),v=a(33473),N=a(23950),w=a(59676),k=a(25858),z=a(14085),y=a(30814),_=a(29602),A=a(99257),C=a(42640),E=a(1466),S=a(6452),I=a(96609),D=a(67072),R=a(23888),L=a(7837),T=a(72309),P=a(63898),O=a(39286),F=a(9246);function U(e){let{isOpen:t,onClose:a,agent:s,agentName:l,leadName:c,index:d,events:o}=e,x=s&&["speaking","connected","ringing"].includes(s.status);return(0,r.jsx)(L.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,r.jsxs)(L.Cf,{className:"max-w-2xl bg-zinc-950 border-zinc-800 text-white p-0 overflow-hidden rounded-[32px] shadow-2xl shadow-orange-500/20",children:[(0,r.jsxs)(T.s,{children:[(0,r.jsxs)(L.L3,{children:[l," Live Update"]}),(0,r.jsxs)(L.rr,{children:["Real-time status and neural logs for AI Agent ",l,"."]})]}),(0,r.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,rgba(99,102,241,0.1),transparent)] pointer-events-none"}),(0,r.jsx)("div",{className:"relative z-10 p-8 pb-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:(0,_.cn)("absolute inset-0 blur-2xl opacity-40 rounded-full",x?"bg-orange-500 animate-pulse":"bg-zinc-500")}),(0,r.jsxs)(P.eu,{className:"w-20 h-20 border-2 border-zinc-800 relative z-10 shadow-xl",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(l,"&backgroundColor=e0e7ff")}),(0,r.jsx)(P.q5,{children:l.slice(0,2).toUpperCase()})]}),(0,r.jsx)("div",{className:(0,_.cn)("absolute -bottom-1 -right-1 w-7 h-7 rounded-full border-4 border-zinc-950 flex items-center justify-center relative z-20",x?"bg-emerald-500":"bg-zinc-600"),children:(0,r.jsx)(m.A,{className:"w-4 h-4 text-white"})})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("h2",{className:"text-2xl font-black tracking-tight leading-none",children:l}),(0,r.jsx)(O.E,{className:(0,_.cn)("px-2 py-0 text-[10px] uppercase font-black tracking-widest border-0",x?"bg-emerald-500/10 text-emerald-400":"bg-zinc-800 text-zinc-400"),children:(null==s?void 0:s.status)||"Idle"})]}),(0,r.jsx)("p",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-[0.2em]",children:"AI Agent"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs font-medium text-zinc-400",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(A.A,{className:"w-3.5 h-3.5 text-orange-500"}),(0,r.jsx)("span",{children:"Neural Model v4.2"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(C.A,{className:"w-3.5 h-3.5 text-orange-500"}),(0,r.jsx)("span",{children:"Secure Uplink"})]})]})]})]}),(0,r.jsx)("button",{onClick:a,className:"p-2 hover:bg-zinc-900 rounded-full transition-colors text-zinc-500 hover:text-white",children:(0,r.jsx)(j.A,{className:"w-6 h-6"})})]})}),(0,r.jsxs)("div",{className:"mx-8 p-4 rounded-2xl bg-zinc-900/50 border border-zinc-800/50 backdrop-blur-sm flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center",children:(0,r.jsx)(E.A,{className:"w-5 h-5 text-orange-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest",children:"Active Target"}),(0,r.jsx)("p",{className:"text-sm font-bold",children:c||(null==s?void 0:s.lead_name)||"Scanning for leads..."})]})]}),x&&s&&(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest",children:"Duration"}),(0,r.jsxs)("p",{className:"text-sm font-mono text-orange-400",children:[Math.floor(s.duration/60),":",(s.duration%60).toString().padStart(2,"0")]})]}),(0,r.jsx)("div",{className:"w-px h-8 bg-zinc-800 mx-2"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(S.A,{className:"w-4 h-4 text-emerald-500 animate-pulse"}),(0,r.jsx)("span",{className:"text-[10px] font-black text-emerald-500 uppercase",children:"Live"})]})]})]}),(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(I.A,{className:"w-4 h-4 text-orange-500"}),(0,r.jsx)("h3",{className:"text-[10px] uppercase font-black text-zinc-500 tracking-[0.2em]",children:"Neural Logs & Thoughts"})]}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 animate-pulse"}),(0,r.jsx)("span",{className:"text-[9px] font-bold text-zinc-500 uppercase",children:"Syncing"})]})})]}),(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.1)_50%),linear-gradient(90deg,rgba(99,102,241,0.03),rgba(16,185,129,0.01),rgba(99,102,241,0.03))] bg-[length:100%_2px,3px_100%] pointer-events-none opacity-50 z-10"}),(0,r.jsx)("div",{className:"h-[300px] w-full bg-black rounded-2xl border border-zinc-800 p-6 font-mono text-[11px] overflow-y-auto scrollbar-hide space-y-3 shadow-inner",children:(0,r.jsx)(i.N,{initial:!1,children:o.length>0?o.map((e,t)=>(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-start gap-4 group/log",children:[(0,r.jsx)("span",{className:"text-zinc-700 shrink-0 group-hover/log:text-zinc-500 transition-colors cursor-help",children:(0,r.jsx)(F.Bc,{children:(0,r.jsxs)(F.m_,{children:[(0,r.jsx)(F.k$,{asChild:!0,children:(0,r.jsxs)("span",{children:["[",(0,_.sY)(e.timestamp).toLocaleTimeString([],{hour12:!0,hour:"2-digit",minute:"2-digit",second:"2-digit"}),"]"]})}),(0,r.jsx)(F.ZI,{className:"z-[9999]",side:"top",children:(0,r.jsx)("p",{children:new Date(e.timestamp).toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit"})})})]})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("span",{className:(0,_.cn)("font-bold mr-2 uppercase","system"===e.type?"text-orange-400":"thought"===e.type?"text-amber-500":"text-emerald-500"),children:["system"===e.type?">> CORE":"thought"===e.type?">> THOUGHT":">> ".concat(l.split(" ")[0]),":"]}),(0,r.jsx)("span",{className:"text-zinc-300 leading-relaxed uppercase tracking-tight",children:e.message})]})]},e.id+t)):(0,r.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-zinc-700 space-y-4",children:[(0,r.jsx)(M,{className:"w-8 h-8 animate-spin opacity-20"}),(0,r.jsx)("p",{className:"uppercase tracking-[0.3em] text-[9px] font-black",children:"Establishing Neural Link..."})]})})})]})]}),(0,r.jsxs)("div",{className:"px-8 pb-8 flex items-center justify-between text-[9px] font-black text-zinc-600 uppercase tracking-widest",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(D.A,{className:"w-3 h-3 text-orange-500"}),(0,r.jsx)("span",{children:"Performance: 1.2ms latency"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(R.A,{className:"w-3 h-3 text-emerald-500"}),(0,r.jsx)("span",{children:"Quality: 98.4%"})]})]}),(0,r.jsxs)("div",{children:["Node ID: UNCLN-@",d+1]})]})]})})}function M(e){let{className:t}=e;return(0,r.jsx)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})}var q=a(81556),H=a(45686),W=a(21773),B=a(44641),J=a(26336),Y=a(46967),G=a(69323),$=a(75340),V=a(43831),Q=a(61594),K=a(24854),X=a(11864),Z=a(25739),ee=a(3392),et=a(92098);et.bL,et.l9,s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:i=4,...n}=e;return(0,r.jsx)(et.UC,{ref:t,align:s,sideOffset:i,className:(0,_.cn)("z-50 w-64 rounded-xl border border-zinc-200 bg-white p-4 text-zinc-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",a),...n})}).displayName=et.UC.displayName;var ea=a(94147);s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:i=!0,...n}=e;return(0,r.jsx)(ea.b,{ref:t,decorative:i,orientation:s,className:(0,_.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...n})}).displayName=ea.b.displayName;var er=a(92823);function es(e){let{cohort:t,variant:a="default",className:s,animate:i=!0}=e;if(!t)return null;let l="inline-flex items-center gap-1.5 font-black uppercase tracking-wider transition-all duration-300",c={default:"bg-indigo-500/10 text-indigo-600 dark:text-indigo-400 border border-indigo-500/20 px-3 py-1 rounded-full text-[10px]",mini:"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-500 border border-zinc-200 dark:border-zinc-700/50 px-2 py-0.5 rounded-lg text-[9px]",glass:"bg-white/40 dark:bg-indigo-500/10 backdrop-blur-md text-indigo-600 dark:text-indigo-300 border border-indigo-500/30 px-3 py-1 rounded-full text-[10px] shadow-sm shadow-indigo-500/5"},d=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(er.A,{className:(0,_.cn)("mini"===a?"w-2.5 h-2.5":"w-3 h-3","opacity-70 group-hover:opacity-100 transition-opacity")}),(0,r.jsx)("span",{className:"truncate max-w-[120px]",children:t})]});return i?(0,r.jsx)(n.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{scale:1.05,y:-1},className:(0,_.cn)(l,c[a],"group cursor-default",s),children:d}):(0,r.jsx)("div",{className:(0,_.cn)(l,c[a],"group",s),children:d})}let ei=[{name:"Alex",seed:"Alex",tagline:"Customer Screening Specialist"},{name:"Sarah",seed:"Sarah",tagline:"Customer Screening Specialist"},{name:"Rohan",seed:"Rohan",tagline:"Customer Screening Specialist"},{name:"Maya",seed:"Maya",tagline:"Customer Screening Specialist"},{name:"Jordan",seed:"Jordan",tagline:"Customer Screening Specialist"},{name:"Priya",seed:"Priya",tagline:"Customer Screening Specialist"}];var en=a(26164),el=a(68285),ec=a(27065),ed=a(19418),eo=a(84858),ex=a(51124);function em(e){var t;let{agent:a,events:i,index:l}=e,c=(a.status||"idle").toLowerCase(),d=["speaking","connected","ringing","listening","processing","initiated","in-progress","queued"].includes(c),o=(0,s.useRef)(null);(0,s.useEffect)(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[i]);let[x,m]=(0,s.useState)(a.duration);(0,s.useEffect)(()=>{m(a.duration)},[a.duration]),(0,s.useEffect)(()=>{if(!d)return;let e=setInterval(()=>{m(e=>e+1)},1e3);return()=>clearInterval(e)},[d]);let h=(e=>{switch(e){case"speaking":return{color:"text-orange-500",bg:"bg-orange-500",border:"border-orange-200",ring:"ring-orange-500",icon:en.A,label:"Speaking",gradient:"from-orange-500/20"};case"listening":return{color:"text-emerald-500",bg:"bg-emerald-500",border:"border-emerald-200",ring:"ring-emerald-500",icon:el.A,label:"Listening",gradient:"from-emerald-500/20"};case"processing":return{color:"text-orange-500",bg:"bg-orange-500",border:"border-orange-200",ring:"ring-orange-500",icon:ec.A,label:"Thinking",gradient:"from-orange-500/20"};case"ringing":return{color:"text-amber-500",bg:"bg-amber-500",border:"border-amber-200",ring:"ring-amber-500",icon:V.A,label:"Ringing",gradient:"from-amber-500/20"};case"initiated":return{color:"text-blue-500",bg:"bg-blue-500",border:"border-blue-200",ring:"ring-blue-500",icon:V.A,label:"Dialing",gradient:"from-blue-500/20"};case"completed":return{color:"text-green-600",bg:"bg-green-600",border:"border-green-200",ring:"ring-green-500",icon:J.A,label:"Completed",gradient:"from-green-500/20"};case"failed":return{color:"text-red-500",bg:"bg-red-500",border:"border-red-200",ring:"ring-red-500",icon:$.A,label:"Failed",gradient:"from-red-500/20"};case"voicemail":return{color:"text-orange-500",bg:"bg-orange-500",border:"border-orange-200",ring:"ring-orange-500",icon:ed.A,label:"Voicemail",gradient:"from-orange-500/20"};default:return{color:"text-zinc-500",bg:"bg-zinc-500",border:"border-zinc-200",ring:"ring-zinc-400",icon:eo.A,label:e,gradient:"from-zinc-500/10"}}})(c),p=i.filter(e=>"thought"===e.type).slice(-1);return(0,r.jsxs)("div",{className:(0,_.cn)("relative h-full w-full overflow-hidden rounded-[24px] border transition-all duration-700 flex flex-col justify-between",d?"bg-white dark:bg-zinc-950 border-white/50 dark:border-zinc-800 shadow-xl":"bg-zinc-50 dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800"),children:[d&&(0,r.jsxs)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden transition-colors duration-1000",children:[(0,r.jsx)(n.P.div,{className:(0,_.cn)("absolute -top-[50%] -right-[50%] w-[150%] h-[150%] rounded-full blur-[120px] opacity-15 transition-colors duration-1000",h.bg),animate:{scale:[1,1.1,1],opacity:[.1,.15,.1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),(0,r.jsx)(n.P.div,{className:(0,_.cn)("absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t opacity-10 transition-colors duration-1000",h.gradient,"to-transparent")})]}),(0,r.jsxs)("div",{className:"relative z-20 px-6 py-5 flex items-center justify-between border-b border-zinc-50 dark:border-zinc-800/50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)(P.eu,{className:"w-10 h-10 border border-white dark:border-zinc-800 shadow-sm",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(a.agent_name||"agent","&backgroundColor=e0e7ff")}),(0,r.jsx)(P.q5,{className:"bg-orange-50 text-orange-600 text-[10px] font-bold",children:"AI"})]}),d&&(0,r.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-orange-500 rounded-full border-2 border-white dark:border-zinc-950"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100 leading-none",children:a.agent_name})}),(0,r.jsx)("p",{className:"text-[10px] font-medium text-zinc-400 dark:text-zinc-500 uppercase tracking-wide mt-0.5",children:"Screening Specialist"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(O.E,{variant:"outline",className:(0,_.cn)("text-[10px] h-6 pl-1.5 pr-2.5 gap-1.5 border transition-colors duration-500",d?"bg-white/50 dark:bg-zinc-900/50":"bg-transparent",h.color,h.border),children:[(0,r.jsx)("div",{className:(0,_.cn)("w-1.5 h-1.5 rounded-full animate-pulse",h.bg)}),(0,r.jsx)("span",{className:"uppercase tracking-wider font-bold",children:h.label})]}),(0,r.jsx)("div",{className:"text-[11px] font-mono font-medium text-zinc-400 tabular-nums",children:(e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(x)})]})]}),(0,r.jsxs)("div",{className:"relative z-20 flex-1 flex flex-col items-center justify-center p-6 gap-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:(0,_.cn)("absolute inset-0 rounded-full blur-xl opacity-30 transition-colors duration-500",d?h.bg:"bg-transparent")}),(0,r.jsx)("div",{className:"relative z-10 p-1 rounded-full bg-white dark:bg-zinc-900 shadow-2xl",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)(P.eu,{className:"w-24 h-24 border-4 border-zinc-50 dark:border-zinc-800",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(a.lead_id||"customer","&backgroundColor=f0fdf4")}),(0,r.jsx)(P.q5,{className:"bg-emerald-50 text-emerald-600 font-bold text-2xl",children:(a.lead_name||"??").slice(0,2)})]}),d&&(0,r.jsx)("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2",children:(0,r.jsx)(O.E,{className:"bg-emerald-500 text-white border-2 border-white dark:border-zinc-950 text-[9px] px-2 h-5 font-black uppercase tracking-wider shadow-sm hover:bg-emerald-600",children:"Live"})})]})})]}),(0,r.jsxs)("div",{className:"text-center space-y-1",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:a.lead_name||"Unknown Lead"}),(0,r.jsx)("p",{className:"text-xs font-medium text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:a.cohort||"Campaign Target"})]})]}),(0,r.jsx)("div",{className:"relative z-30 p-4 pt-0",children:(0,r.jsxs)("div",{className:(0,_.cn)("rounded-2xl border p-1 pr-2 flex items-center gap-2 transition-all duration-500",d?"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-md shadow-sm border-zinc-100 dark:border-zinc-800":"bg-transparent border-transparent"),children:[(0,r.jsx)("div",{className:"h-10 w-24 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl flex items-center justify-center gap-0.5 px-3 overflow-hidden",children:d?[...Array(8)].map((e,t)=>(0,r.jsx)(n.P.div,{className:(0,_.cn)("w-1 rounded-full",h.bg),animate:{height:"speaking"===c?[4,20,4]:"listening"===c?[4,12,4]:[4,6,4],opacity:[.4,.8,.4]},transition:{duration:.5,repeat:1/0,repeatType:"mirror",delay:.05*t}},t)):(0,r.jsx)("div",{className:"w-full h-[1px] bg-zinc-200 dark:bg-zinc-700"})}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:i.length>0?(0,r.jsxs)("div",{className:"text-[11px] text-zinc-600 dark:text-zinc-300 truncate font-medium",children:[(0,r.jsx)("span",{className:(0,_.cn)("mr-2 font-bold","agent_action"===i[i.length-1].type?"text-orange-500":"text-emerald-500"),children:"agent_action"===i[i.length-1].type?"AI:":"User:"}),null===(t=i[i.length-1].message)||void 0===t?void 0:t.replace(/^.*: "/,"").replace(/"$/,"")]}):(0,r.jsx)("div",{className:"text-[10px] text-zinc-400 italic",children:"Connecting..."})}),(0,r.jsxs)(ex.AM,{children:[(0,r.jsx)(ex.Wv,{asChild:!0,children:(0,r.jsx)("button",{className:"w-8 h-8 rounded-xl bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 flex items-center justify-center transition-colors",children:(0,r.jsx)(I.A,{className:"w-4 h-4 text-zinc-500"})})}),(0,r.jsx)(ex.hl,{side:"top",align:"center",className:"w-[400px] p-0 rounded-[20px] shadow-2xl border-orange-100 dark:border-zinc-800",children:(0,r.jsxs)("div",{className:"flex flex-col max-h-[500px] bg-white dark:bg-zinc-950 rounded-[20px] overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-4 py-3 border-b border-zinc-100 dark:border-zinc-900 bg-zinc-50/50 flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Live Transcript"}),p.length>0&&(0,r.jsx)(O.E,{variant:"secondary",className:"text-[9px] bg-orange-50 text-orange-600 border-orange-100 h-5",children:"Thinking"})]}),(0,r.jsx)(ee.F,{className:"flex-1 min-h-[200px] max-h-[400px]",children:(0,r.jsxs)("div",{className:"p-4 space-y-3",children:[p[0]&&(0,r.jsxs)("div",{className:"p-3 rounded-xl bg-orange-50/50 dark:bg-orange-900/20 border border-orange-100 dark:border-orange-900/30 text-xs text-orange-700 dark:text-orange-300 italic mb-4",children:[(0,r.jsx)(g.A,{className:"w-3 h-3 inline mr-1.5 align-text-top"}),'"',p[0].message,'"']}),i.filter(e=>"thought"!==e.type).slice(-15).map((e,t)=>(0,r.jsxs)("div",{className:"flex gap-3 text-xs group",children:[(0,r.jsx)("div",{className:(0,_.cn)("w-1.5 h-1.5 rounded-full mt-1.5 shrink-0 transition-opacity opacity-40 group-hover:opacity-100","agent_action"===e.type?"bg-orange-500":"bg-emerald-500")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:(0,_.cn)("font-bold text-[10px] uppercase tracking-wider block mb-0.5","agent_action"===e.type?"text-orange-500":"text-emerald-500"),children:"agent_action"===e.type?"AI Agent":"Lead"}),(0,r.jsx)("p",{className:"text-zinc-700 dark:text-zinc-300 leading-relaxed",children:e.message.replace(/^.*: "/,"").replace(/"$/,"")})]})]},t))]})})]})})]})]})})]})}var eh=a(35007),eg=a(30770),ep=a(23920),eu=a(2818);let eb={INTENT_YES:{color:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20",Icon:J.A},INTERESTED:{color:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20",Icon:J.A},NOT_INTERESTED:{color:"bg-orange-500/10 text-orange-600 border-orange-500/20",Icon:Q.A},DNC:{color:"bg-red-500/10 text-red-600 border-red-500/20",Icon:$.A},SCHEDULED:{color:"bg-blue-500/10 text-blue-600 border-blue-500/20",Icon:J.A},VOICEMAIL:{color:"bg-zinc-500/10 text-zinc-600 border-zinc-500/20",Icon:eg.A},NO_ANSWER:{color:"bg-zinc-500/10 text-zinc-600 border-zinc-500/20",Icon:eg.A},BUSY:{color:"bg-amber-500/10 text-amber-600 border-amber-500/20",Icon:eg.A},FAILED:{color:"bg-red-500/10 text-red-600 border-red-500/20",Icon:$.A},CONNECTED:{color:"bg-blue-500/10 text-blue-600 border-blue-500/20",Icon:K.A},AMBIGUOUS:{color:"bg-orange-500/10 text-orange-600 border-orange-500/20",Icon:Q.A},DISCONNECTED:{color:"bg-zinc-500/10 text-zinc-600 border-zinc-500/20",Icon:p.A}},ef=e=>{let{history:t,onSelectCall:a,onCopyToQueue:l}=e,[c,d]=s.useState({}),o=async e=>{try{let t=window.location.pathname.split("/").pop();await Z.F.post("/execution/campaign/".concat(t,"/lead/").concat(e.lead_id,"/copy-to-queue"),{call_log_id:e.call_log_id,preferred_slot:e.preferred_slot}),y.oR.success("Copied to Queue",{description:"Lead ".concat(e.name," has been added to your personal follow-up queue.")}),l&&l()}catch(e){y.oR.error("Copy Failed",{description:"Could not add lead to queue. Please try again."})}},x=e=>{let t=window.location.pathname.split("/").pop(),a="".concat(eu.env.NEXT_PUBLIC_API_URL||"http://localhost:8000","/api/v1/execution/campaign/").concat(t,"/lead/").concat(e.lead_id,"/book-call");window.open(a,"_blank"),y.oR.info("Booking Link Opened",{description:"Calendar booking page opened in a new tab."})},m=s.useMemo(()=>{let e=[],a=new Map;return t.forEach((t,r)=>{let s=a.get(t.lead_id),i=!1;if(s){let e=s.calls[s.calls.length-1],a=(0,_.sY)(t.timestamp).getTime();Math.abs((0,_.sY)(e.timestamp).getTime()-a)/6e4<=30&&(i=!0)}if(i&&s)s.calls.push(t);else{let s={lead_id:t.lead_id,calls:[t],id:"".concat(t.lead_id,"-").concat(r)};e.push(s),a.set(t.lead_id,s)}}),e},[t]);s.useEffect(()=>{d(e=>{let t={...e};return m.forEach(e=>{void 0===t[e.id]&&(t[e.id]=e.calls.length>1)}),t})},[m]);let h=(e,t)=>{t.stopPropagation(),d(t=>({...t,[e]:!t[e]}))},g=e=>{if(1===e.length)return e[0];let t=e.find(e=>{var t;return(null===(t=e.agreement_status)||void 0===t?void 0:t.status)==="yes"});if(t)return t;let a=e.find(e=>{var t;return(null===(t=e.intent_priority)||void 0===t?void 0:t.level)==="high"});if(a)return a;let r=e.find(e=>["INTENT_YES","INTERESTED","SCHEDULED"].includes(e.outcome||e.status||""));return r?r:e.find(e=>"CONNECTED"===(e.outcome||e.status))||e[0]};return 0===t.length?(0,r.jsx)("div",{className:"h-[300px] flex flex-col items-center justify-center p-8 text-center",children:(0,r.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,ease:"easeOut"},className:"flex flex-col items-center gap-6",children:[(0,r.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,r.jsx)(n.P.div,{animate:{scale:[1,1.5,1],opacity:[.3,.6,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute -inset-4 bg-zinc-500/30 blur-2xl rounded-full"}),(0,r.jsx)(n.P.div,{animate:{scale:[1,1.15,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,r.jsx)(R.A,{className:"relative w-8 h-8 text-zinc-400 dark:text-zinc-500 opacity-90",strokeWidth:1.5})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-zinc-900 dark:text-zinc-100 tracking-tight",children:"No activity yet"}),(0,r.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-500 font-normal",children:"Waiting for the first connection."})]})]})}):(0,r.jsx)("div",{className:"space-y-3 pb-4",children:m.slice(0,20).map(e=>{let t=c[e.id],s=g(e.calls),l=e.calls.length>1;return(0,r.jsxs)(n.P.div,{initial:!1,animate:t?"collapsed":"expanded",className:"relative",children:[(0,r.jsx)(i.N,{children:l&&t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.P.div,{initial:{scale:.95,y:0,opacity:0,rotateX:0},animate:{scale:.95,y:6,opacity:.9,rotateX:-2},exit:{scale:1,y:0,opacity:0,rotateX:0},transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-x-2 bottom-0 h-full bg-white dark:bg-zinc-900 rounded-2xl border border-zinc-200/80 dark:border-zinc-800/80 shadow-lg z-0",style:{transformOrigin:"center bottom"}}),(0,r.jsx)(n.P.div,{initial:{scale:.9,y:0,opacity:0,rotateX:0},animate:{scale:.9,y:12,opacity:.7,rotateX:-3},exit:{scale:1,y:0,opacity:0,rotateX:0},transition:{type:"spring",stiffness:300,damping:30,delay:.02},className:"absolute inset-x-4 bottom-0 h-full bg-white dark:bg-zinc-900 rounded-2xl border border-zinc-200/60 dark:border-zinc-800/60 shadow-md -z-10",style:{transformOrigin:"center bottom"}})]})}),(0,r.jsx)(eh.Zp,{className:(0,_.cn)("relative z-10 overflow-hidden transition-all duration-300 bg-white dark:bg-zinc-950 rounded-2xl border border-zinc-100 dark:border-zinc-800/60",l&&"cursor-pointer hover:border-orange-200 dark:hover:border-orange-500/30 hover:shadow-lg",!l&&"hover:shadow-md hover:-translate-y-0.5 shadow-sm"),onClick:t=>l?h(e.id,t):a(s),children:t?(0,r.jsxs)("div",{className:"p-3 group",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 rounded-full overflow-hidden border-2 border-white dark:border-zinc-800 shadow-sm shrink-0 bg-zinc-50 dark:bg-zinc-900",children:(0,r.jsx)("img",{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(s.avatar_seed),alt:s.name,className:"w-full h-full object-contain scale-125 translate-y-1"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsxs)("h3",{className:"text-[13px] font-semibold text-zinc-900 dark:text-zinc-100 truncate flex items-center gap-1.5",children:[s.name,l&&(0,r.jsx)(O.E,{variant:"secondary",className:"text-[8px] px-1.5 h-3.5 bg-orange-50 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400 border-0",children:e.calls.length})]}),(0,r.jsx)("span",{className:"text-[10px] text-zinc-400 font-medium whitespace-nowrap",children:(0,_.fw)(s.timestamp)})]}),(0,r.jsx)(ej,{call:s,showDetails:!1})]})]}),l&&(0,r.jsx)("div",{className:"mt-2 flex items-center justify-center",children:(0,r.jsxs)(n.P.div,{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200 dark:border-zinc-800 opacity-0 group-hover:opacity-100 transition-opacity",whileHover:{scale:1.05},children:[(0,r.jsx)("span",{className:"text-[8px] text-zinc-500 font-bold uppercase tracking-wider",children:"Expand"}),(0,r.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-zinc-400",children:(0,r.jsx)("polyline",{points:"6 9 12 15 18 9"})})]})})]}):(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:(0,_.cn)("p-3 pb-2 border-b border-zinc-100 dark:border-zinc-800/50 flex items-center justify-between bg-zinc-50/80 dark:bg-zinc-900/50 backdrop-blur-sm",l&&"cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-900 transition-colors"),onClick:t=>l&&h(e.id,t),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-7 h-7 rounded-full overflow-hidden border border-white dark:border-zinc-800 shadow-sm shrink-0 bg-zinc-50 dark:bg-zinc-900",children:(0,r.jsx)("img",{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(e.calls[0].avatar_seed),alt:e.calls[0].name,className:"w-full h-full object-contain scale-125 translate-y-1"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-[13px] font-bold text-zinc-900 dark:text-zinc-100 leading-none",children:e.calls[0].name}),(0,r.jsxs)("p",{className:"text-[9px] text-zinc-500 dark:text-zinc-400 mt-0.5",children:[e.calls.length," Call",e.calls.length>1?"s":""," Sequence"]})]})]}),l&&(0,r.jsx)(n.P.div,{className:"flex items-center justify-center w-6 h-6 rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,r.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-zinc-400",children:(0,r.jsx)("polyline",{points:"18 15 12 9 6 15"})})})]}),(0,r.jsx)("div",{className:"flex flex-col",children:e.calls.map((t,i)=>(0,r.jsx)("div",{className:(0,_.cn)("p-4 hover:bg-zinc-50 dark:hover:bg-zinc-900/40 transition-colors cursor-pointer border-b border-zinc-50 dark:border-zinc-800/50 last:border-0",t===s&&"bg-orange-50/30 dark:bg-orange-500/5"),onClick:e=>{e.stopPropagation(),a(t)},children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center self-stretch w-4 pt-1.5",children:[(0,r.jsx)("div",{className:(0,_.cn)("w-2 h-2 rounded-full ring-2 ring-white dark:ring-zinc-950",(t.outcome||"").includes("YES")||(t.outcome||"").includes("INTERESTED")?"bg-emerald-500":"bg-zinc-300 dark:bg-zinc-700")}),i<e.calls.length-1&&(0,r.jsx)("div",{className:"w-[1px] flex-1 bg-zinc-200 dark:bg-zinc-800 my-1"})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsx)("span",{className:"text-[10px] uppercase font-bold text-zinc-400",children:(0,_.fw)(t.timestamp)}),t===s&&(0,r.jsx)(O.E,{variant:"outline",className:"text-[8px] h-4 border-orange-200 text-orange-500",children:"Key Context"})]}),(0,r.jsx)(ej,{call:t,showDetails:!0,onCopyToQueue:o,onBookCall:x})]})]})},"".concat(t.lead_id,"-").concat(i)))})]})})]},e.id)})})},ej=e=>{var t,a,s,i;let{call:n,showDetails:l,onCopyToQueue:c,onBookCall:d}=e,o=n.key_insight&&/[\u0900-\u097F]+/.test(n.key_insight),x=(e=>{var t;if((null===(t=e.agreement_status)||void 0===t?void 0:t.status)==="yes")return{label:"AGREED",color:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20",Icon:J.A};let a=(e.outcome||e.status||"FAILED").toUpperCase(),r=eb[a]||{color:"bg-zinc-500/10 text-zinc-600 border-zinc-500/20",Icon:p.A};return{label:"AMBIGUOUS"===a?"Unclear":a.replace(/_/g," "),color:r.color,Icon:r.Icon}})(n);return(0,r.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,r.jsxs)(O.E,{className:(0,_.cn)("text-[9px] font-black uppercase px-2 py-0.5 rounded-full border shadow-sm flex items-center gap-1 cursor-default",x.color),children:[(0,r.jsx)(x.Icon,{className:"w-2.5 h-2.5"}),x.label]}),(0,r.jsx)("span",{className:"text-[10px] text-zinc-400",children:(e=>{let t=Math.floor(e/60),a=e%60;return 0===t?"".concat(a,"s"):"".concat(t,"m ").concat(a.toString().padStart(2,"0"),"s")})(n.duration)})]}),(0,r.jsxs)("p",{className:(0,_.cn)("text-sm leading-relaxed line-clamp-2",(null===(t=n.intent_priority)||void 0===t?void 0:t.level)==="high"?"text-zinc-900 dark:text-zinc-100 font-medium":"text-zinc-600 dark:text-zinc-400"),children:[n.intent_priority&&(0,r.jsx)("span",{className:"mr-1.5 text-[10px] opacity-60",children:"●"}),n.key_insight||"—"]}),n.next_step&&(0,r.jsxs)("div",{className:"flex items-start gap-2 mt-1.5",children:[(0,r.jsx)("div",{className:"mt-[3px] text-orange-500 dark:text-orange-400 shrink-0",children:(0,r.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M7 7l10 10"}),(0,r.jsx)("path",{d:"M17 7v10h-10"})]})}),(0,r.jsx)("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-300 leading-snug",children:n.next_step})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5 mt-1",children:[o&&(0,r.jsx)(O.E,{className:"bg-orange-50 text-orange-500 dark:bg-orange-500/10 dark:text-orange-400 text-[9px] font-bold px-1.5 py-0 border-0",children:"Hindi"}),n.critical_signal&&(0,r.jsx)(O.E,{className:(0,_.cn)("text-[9px] font-bold px-1.5 py-0 border-0 shadow-none","critical"===n.critical_signal.severity?"bg-red-50 text-red-500 dark:bg-red-500/10 dark:text-red-400":"bg-amber-50 text-amber-600 dark:bg-amber-500/10 dark:text-amber-400"),children:n.critical_signal.label}),(null===(a=n.agreement_status)||void 0===a?void 0:a.status)==="yes"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(O.E,{className:(0,_.cn)("text-[9px] font-bold px-1.5 py-0 border-0 shadow-none","high"===n.agreement_status.confidence?"bg-green-500/20 text-green-600 dark:text-green-400":"bg-green-500/10 text-green-600 dark:text-green-400"),children:["CONFIDENCE: ",n.agreement_status.confidence]}),(0,r.jsx)(O.E,{className:"bg-blue-500/10 text-blue-600 dark:text-blue-400 text-[9px] font-bold px-1.5 py-0 border-0 shadow-none",children:"OPEN"})]})]}),l&&(n.should_copy_to_queue||n.copied_to_queue_at||(null===(s=n.preferred_slot)||void 0===s?void 0:s.is_outside_window))&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-3 pt-2 border-t border-zinc-100 dark:border-zinc-800/60 w-full",children:[n.should_copy_to_queue&&!n.copied_to_queue_at&&c&&(0,r.jsxs)(z.$,{size:"sm",variant:"outline",onClick:e=>{e.stopPropagation(),c(n)},className:"h-6 text-[9px] font-black uppercase tracking-widest gap-1.5 border-orange-500/20 text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-950/30",children:[(0,r.jsx)(ep.A,{className:"w-3 h-3"}),"Copy"]}),n.copied_to_queue_at&&(0,r.jsxs)("div",{className:"flex items-center gap-1.5 px-2 h-6 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),(0,r.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest text-emerald-600 dark:text-emerald-400",children:"In User Queue"})]}),(null===(i=n.preferred_slot)||void 0===i?void 0:i.is_outside_window)&&d&&(0,r.jsxs)(z.$,{size:"sm",variant:"outline",onClick:e=>{e.stopPropagation(),d(n)},className:"h-6 text-[9px] font-black uppercase tracking-widest gap-1.5 border-blue-500/20 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-950/30",children:[(0,r.jsx)(b.A,{className:"w-3 h-3"}),"Book"]})]})]})};var ev=a(98677),eN=a(38207),ew=a(63348);function ek(e){var t,a,s,l;let{campaignId:c,isActive:d,events:o}=e,x=o[0];return(0,r.jsxs)("div",{className:"mt-8 relative pb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4 px-2",children:[(0,r.jsx)(I.A,{className:"w-4 h-4 text-orange-500"}),(0,r.jsx)("h4",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-widest flex-1",children:"Processing Last Calls"})]}),(0,r.jsxs)("div",{className:"relative group/feed",children:[(0,r.jsx)("div",{className:"bg-white/80 dark:bg-zinc-950/50 backdrop-blur-xl rounded-[24px] border border-zinc-200 dark:border-zinc-800/50 p-2 pl-3 shadow-xl overflow-hidden transition-all duration-500 hover:border-orange-500/30",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"shrink-0 relative",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-2xl overflow-hidden border border-orange-500/20 bg-orange-50/50 dark:bg-orange-950/10 relative z-10",children:(0,r.jsx)("img",{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat((null==x?void 0:x.agent_name)||"core","&backgroundColor=fff7ed"),alt:"Agent",className:"w-full h-full object-contain scale-125 translate-y-1"})}),(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 flex items-center justify-center z-20 shadow-sm",children:(e=>{switch(null==e?void 0:e.toLowerCase()){case"thought":return(0,r.jsx)(eN.A,{className:"w-3 h-3 text-amber-500"});case"user_reply":return(0,r.jsx)(E.A,{className:"w-3 h-3 text-orange-500"});case"agent_action":return(0,r.jsx)(ew.A,{className:"w-3 h-3 text-emerald-500"});case"system":return(0,r.jsx)(I.A,{className:"w-3 h-3 text-zinc-400"});default:return(0,r.jsx)(R.A,{className:"w-3 h-3 text-zinc-400"})}})((null==x?void 0:x.type)||"system")})]}),(0,r.jsxs)("div",{className:"flex-1 flex items-center justify-between min-w-0 pr-4",children:[(0,r.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,r.jsx)("span",{className:"text-[10px] font-black text-orange-500 uppercase tracking-widest whitespace-nowrap",children:(null==x?void 0:x.agent_name)||"CORE"}),(0,r.jsx)("span",{className:"w-1 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"}),(0,r.jsx)("span",{className:(0,_.cn)("text-[8px] font-bold uppercase tracking-wider",(null==x?void 0:null===(t=x.type)||void 0===t?void 0:t.toLowerCase())==="thought"?"text-amber-500/70":(null==x?void 0:null===(a=x.type)||void 0===a?void 0:a.toLowerCase())==="user_reply"?"text-orange-500/70":(null==x?void 0:null===(s=x.type)||void 0===s?void 0:s.toLowerCase())==="agent_action"?"text-emerald-500/70":"text-zinc-500/70"),children:(null==x?void 0:x.type)||"system"})]}),(0,r.jsx)(i.N,{mode:"wait",children:(0,r.jsx)(n.P.p,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:(0,_.cn)("text-[13px] font-medium truncate dark:text-zinc-200",(null==x?void 0:null===(l=x.type)||void 0===l?void 0:l.toLowerCase())==="thought"&&"italic text-zinc-500"),children:(null==x?void 0:x.message)||"Standing by for live telemetry..."},(null==x?void 0:x.id)||"empty")})]}),x&&(0,r.jsxs)("div",{className:"shrink-0 ml-4 flex flex-col items-end",children:[(0,r.jsx)("span",{className:"text-[9px] font-mono text-zinc-400 tabular-nums",children:(0,_.sY)(x.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}),x.status&&(0,r.jsx)(O.E,{variant:"outline",className:"text-[7px] h-3.5 px-1 py-0 border-zinc-100 dark:border-zinc-800 text-orange-400 uppercase tracking-tighter",children:x.status})]})]})]})}),(0,r.jsx)("div",{className:"absolute -bottom-6 inset-x-0 px-4 flex items-center justify-between opacity-40 group-hover/feed:opacity-100 transition-opacity duration-300",children:(0,r.jsxs)("div",{className:"flex items-center gap-3 text-[7px] text-zinc-400 uppercase tracking-[0.2em] font-black",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-1 h-1 rounded-full bg-orange-500 animate-pulse"}),(0,r.jsx)("span",{children:"Sync: Stable"})]}),(0,r.jsx)("span",{children:"Core Relay v3.0"})]})})]}),(0,r.jsx)("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-4/5 h-4 bg-orange-500/10 blur-xl pointer-events-none"})]})}function ez(e){var t;let{activeAgents:a,upcomingLeads:l,historyItems:c,allLeadsByCohort:d,allEvents:o,maxConcurrency:x=2,isCompleted:u=!1,isPaused:b=!1,isResetting:f=!1,completionData:v,onClose:w,onReset:E,isExhausted:S=!1,onReplenish:I,onLeadAction:L,onRefreshQueue:T,onUserQueueRefresh:U,feedEvents:M=[],onClearFeed:et,feedViewMode:ea="live",onFeedViewModeChange:er,className:en}=e,[el,ec]=(0,s.useState)(null),[ed,eo]=(0,s.useState)(!1),[ex,eh]=(0,s.useState)(!1),[eg,ep]=(0,s.useState)(!1),[eu,eb]=(0,s.useState)("all"),[ej,eN]=(0,s.useState)(new Set),[ew,ez]=(0,s.useState)(new Set),[ey,e_]=(0,s.useState)(!1),[eA,eC]=(0,s.useState)(!1),[eE,eS]=(0,s.useState)(null),eI=Object.values(d).flat(),eD=eI.filter(e=>"FAILED"===e.status),eR=eD.length>0;eI.some(e=>["BACKLOG","READY","NEXT"].includes(e.status))||l.length>0||a.length;let eL=!!v&&v.total_targets>0&&v.total_completed>=v.total_targets,eT=!!v&&((v.total_completed||0)>0||(v.total_calls||0)>0),eP=eL||(u||S)&&eT,eO=window.location.pathname.split("/").pop(),eF=e=>{},eU=async()=>{if(E)try{eF("click");let e=E();e instanceof Promise&&await e,eh(!1);return}catch(e){console.error("Reset delegation failed",e)}if(eO)try{eF("click"),await Z.F.post("/execution/campaign/".concat(eO,"/reset")),y.oR.success("Campaign Reset",{description:"Retrying failed/unanswered calls. Completed conversations are preserved."}),eh(!1)}catch(e){y.oR.error("Reset Failed",{description:"Could not reset the campaign. Please try again."})}},eM=async()=>{if(eO)try{eC(!0),eF("click"),await Z.F.post("/execution/campaign/".concat(eO,"/hard-reset")),y.oR.success("Campaign Wiped",{description:"All call data has been permanently deleted."}),e_(!1),E&&window.location.reload()}catch(e){y.oR.error("Hard Reset Failed",{description:"Could not wipe campaign data. Please try again."})}finally{eC(!1)}},eq=async e=>{if(L){L("retry",e);return}if(eO)try{eF("click"),await Z.F.post("/execution/campaign/".concat(eO,"/retry/").concat(e)),y.oR.success("Retry Initiated",{description:"Lead has been re-queued for dialing."})}catch(e){y.oR.error("Retry Failed",{description:"Could not re-queue the lead. Please try again."})}},eH=async e=>{try{eN(t=>new Set(t).add(e)),await Z.F.delete("/intelligence/leads/".concat(e)),y.oR.success("Lead Removed",{description:"Contact removed from queue and moved back to roster."})}catch(t){eN(t=>{let a=new Set(t);return a.delete(e),a}),y.oR.error("Removal Failed",{description:"Could not remove the lead. Please try again."})}},eW=async e=>{let t=Object.values(d).flat().find(t=>t.lead_id===e);if(t&&(t.execution_count||0)>=2){eS(e);return}await eB(e)},eB=async e=>{try{ez(t=>new Set(t).add(e)),eS(null),await Z.F.post("/intelligence/leads/".concat(e,"/promote")),y.oR.success("Lead Promoted",{description:"Contact added back to the upcoming queue."})}catch(t){ez(t=>{let a=new Set(t);return a.delete(e),a}),y.oR.error("Promotion Failed",{description:"Could not promote the lead. Please try again."})}},eJ=async()=>{if(T)try{ep(!0),eF("click");let e=T();e instanceof Promise&&await e,y.oR.success("Queue Refreshed",{description:"Upcoming queue data updated."})}catch(e){y.oR.error("Refresh Failed",{description:"Could not refresh the queue."})}finally{ep(!1)}};return(0,r.jsxs)("div",{className:(0,_.cn)("flex flex-col min-h-full bg-zinc-50/50 dark:bg-zinc-900/50 rounded-[32px] overflow-hidden border border-zinc-200 dark:border-zinc-800",en),children:[(0,r.jsx)(k.Lt,{open:ex,onOpenChange:eh,children:(0,r.jsxs)(k.EO,{className:"bg-white dark:bg-zinc-950 border-zinc-200 dark:border-zinc-800",children:[(0,r.jsxs)(k.wd,{children:[(0,r.jsx)(k.r7,{children:"Reset Campaign Progress?"}),(0,r.jsxs)(k.$v,{className:"text-zinc-500",children:["This will re-queue all contacts who didn't pick up, failed, or had technical issues.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"font-bold text-zinc-700 dark:text-zinc-300",children:"Safe Reset:"})," Users who already spoke with the agent (Interested/Not Interested) or asked for a callback will ",(0,r.jsx)("span",{className:"underline",children:"NOT"})," be contacted again."]})]}),(0,r.jsxs)(k.ck,{children:[(0,r.jsx)(k.Zr,{className:"border-0",children:"Cancel"}),(0,r.jsx)(k.Rx,{onClick:eU,disabled:f,className:"bg-indigo-600 hover:bg-indigo-700 text-white min-w-[100px]",children:f?(0,r.jsx)(h.A,{className:"w-4 h-4 animate-spin"}):"Confirm Reset"})]})]})}),(0,r.jsx)(k.Lt,{open:ey,onOpenChange:e_,children:(0,r.jsxs)(k.EO,{className:"bg-white dark:bg-zinc-950 border-zinc-200 dark:border-zinc-800",children:[(0,r.jsxs)(k.wd,{children:[(0,r.jsxs)(k.r7,{className:"text-red-600 dark:text-red-500 flex items-center gap-2",children:[(0,r.jsx)(N.A,{className:"w-5 h-5"}),"Delete All Campaign Data?"]}),(0,r.jsx)(k.$v,{className:"text-zinc-500",asChild:!0,children:(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-bold text-red-600 dark:text-red-400",children:"WARNING: DESTRUCTIVE ACTION."}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"This will permanently delete:",(0,r.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,r.jsx)("li",{children:"All Call Logs & Recordings"}),(0,r.jsx)("li",{children:"All Analytics & Metrics"}),(0,r.jsx)("li",{children:"All Queue Progress"})]}),(0,r.jsx)("br",{}),"The campaign will cease all activity and return to DRAFT state. This cannot be undone."]})})]}),(0,r.jsxs)(k.ck,{children:[(0,r.jsx)(k.Zr,{className:"border-0",children:"Cancel"}),(0,r.jsx)(k.Rx,{onClick:eM,disabled:eA,className:"bg-red-600 hover:bg-red-700 text-white min-w-[100px]",children:eA?(0,r.jsx)(h.A,{className:"w-4 h-4 animate-spin"}):"Delete Everything"})]})]})}),(0,r.jsx)(k.Lt,{open:!!eE,onOpenChange:e=>!e&&eS(null),children:(0,r.jsxs)(k.EO,{className:"bg-white dark:bg-zinc-950 border-zinc-200 dark:border-zinc-800",children:[(0,r.jsxs)(k.wd,{children:[(0,r.jsxs)(k.r7,{className:"text-amber-600 dark:text-amber-500 flex items-center gap-2",children:[(0,r.jsx)(N.A,{className:"w-5 h-5"}),"Override Retry Limit?"]}),(0,r.jsxs)(k.$v,{className:"text-zinc-500",children:["This lead has already been called ",(0,r.jsx)("span",{className:"font-bold text-zinc-900 dark:text-zinc-100",children:"2 or more times"}),".",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"Promoting them will ",(0,r.jsx)("span",{className:"font-bold",children:"reset their retry counter"})," and call them again immediately. This overrides the safety limit designed to prevent harassment."]})]}),(0,r.jsxs)(k.ck,{children:[(0,r.jsx)(k.Zr,{className:"border-0",onClick:()=>eS(null),children:"Cancel"}),(0,r.jsx)(k.Rx,{onClick:()=>eE&&eB(eE),className:"bg-amber-500 hover:bg-amber-600 text-white min-w-[100px]",children:"Promote Anyway"})]})]})}),(0,r.jsxs)("div",{className:(0,_.cn)("relative z-10 p-8 pb-6 border-b border-zinc-200 dark:border-zinc-800/50 flex items-center justify-between shrink-0 bg-white/50 dark:bg-zinc-950/50 backdrop-blur-md transition-all duration-500",eP&&"p-4 px-8 pb-4"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:(0,_.cn)("p-3 bg-indigo-500/10 rounded-2xl shadow-inner transition-all",eP&&"p-2"),children:(0,r.jsx)(m.A,{className:(0,_.cn)("w-8 h-8 text-indigo-500 dark:text-indigo-400",eP&&"w-6 h-6")})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:(0,_.cn)("text-3xl font-black tracking-tight leading-none mb-1 text-zinc-900 dark:text-zinc-100",eP&&"text-xl"),children:"AI Agent Intelligence"}),(0,r.jsx)("p",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Real-time Autonomous Dialing Queue"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)("div",{className:"hidden md:flex items-center gap-6 text-xs font-medium border-r border-zinc-200 dark:border-zinc-800 pr-6 mr-6 h-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(A.A,{className:"w-4 h-4 text-indigo-500"}),(0,r.jsx)("span",{className:"uppercase tracking-widest font-black text-[9px] text-zinc-500 dark:text-zinc-400",children:"Neural Model v4.2"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(D.A,{className:"w-4 h-4 text-orange-500"}),(0,r.jsx)("span",{className:"uppercase tracking-widest font-black text-[9px] text-zinc-500 dark:text-zinc-400",children:"Latency: 1.2ms"})]})]}),(0,r.jsxs)(z.$,{variant:"outline",size:"sm",disabled:f,className:"h-9 px-4 border-zinc-200 dark:border-zinc-800 hover:bg-zinc-100 dark:hover:bg-zinc-900 text-zinc-600 dark:text-zinc-400 font-bold text-[10px] uppercase tracking-widest gap-2",onClick:()=>eh(!0),children:[f?(0,r.jsx)(q.A,{className:"w-3.5 h-3.5 animate-spin"}):(0,r.jsx)(q.A,{className:"w-3.5 h-3.5"}),f?"Resetting...":"Reset Campaign"]}),(0,r.jsx)(z.$,{variant:"ghost",size:"sm",disabled:eA,className:"h-9 px-3 hover:bg-red-50 dark:hover:bg-red-950/20 text-red-400 hover:text-red-500 font-bold text-[10px] uppercase tracking-widest gap-2 transition-colors",onClick:()=>e_(!0),title:"Delete All Data (Hard Reset)",children:(0,r.jsx)(H.A,{className:"w-3.5 h-3.5"})}),w&&(0,r.jsx)("button",{onClick:w,className:"p-2 -mr-2 text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors",children:(0,r.jsx)(j.A,{className:"w-6 h-6"})})]})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden p-6 gap-6 bg-zinc-50/50 dark:bg-transparent",children:[(0,r.jsxs)("div",{className:"flex-[1.4] flex gap-6 overflow-hidden min-h-0",children:[(0,r.jsxs)("div",{className:"w-[340px] flex flex-col gap-4 min-h-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.A,{className:"w-4 h-4 text-zinc-400 dark:text-zinc-500"}),(0,r.jsx)("h3",{className:"text-[10px] uppercase font-black text-zinc-500 tracking-[0.2em]",children:"Upcoming Queue"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[T&&(0,r.jsx)("button",{onClick:eJ,disabled:eg,className:"p-1.5 rounded-lg text-zinc-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all disabled:opacity-50",title:"Refresh Queue",children:(0,r.jsx)(W.A,{className:(0,_.cn)("w-3.5 h-3.5",eg&&"animate-spin")})}),(0,r.jsx)(O.E,{variant:"outline",className:"text-[10px] bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 text-zinc-600 dark:text-zinc-400 font-bold shrink-0",children:l.length})]})]}),(0,r.jsx)(ee.F,{className:"flex-1 bg-white dark:bg-zinc-900/30 rounded-[28px] border border-zinc-200 dark:border-zinc-800/50 shadow-sm",children:(0,r.jsx)("div",{className:(0,_.cn)("p-4 min-h-full flex flex-col",0===l.filter(e=>!ej.has(e.lead_id)).length&&"items-center justify-center"),children:l.filter(e=>!ej.has(e.lead_id)).length>0?(0,r.jsx)("div",{className:"space-y-2 w-full",children:(0,r.jsx)(i.N,{mode:"popLayout",children:l.filter(e=>!ej.has(e.lead_id)).slice(0,7).map((e,t)=>{let a=t<x,s=e.scheduled_for,i=s?new Date(e.scheduled_for).toLocaleTimeString([],{hour12:!0,hour:"2-digit",minute:"2-digit"}):"";return(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10,height:0},className:(0,_.cn)("group relative flex items-center gap-3 p-3 rounded-2xl border transition-all cursor-default",a?"bg-white dark:bg-zinc-800/80 border-indigo-500/20 shadow-sm":"bg-zinc-50/50 dark:bg-zinc-900/50 border-zinc-100 dark:border-zinc-800/80"),children:[(0,r.jsx)(n.P.div,{layoutId:"upcoming-avatar-".concat(e.lead_id),children:(0,r.jsxs)(P.eu,{className:"w-10 h-10 border-2 border-white dark:border-zinc-800 shadow-sm shrink-0",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(e.avatar_seed)}),(0,r.jsx)(P.q5,{children:e.name.slice(0,2).toUpperCase()})]})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0 grid grid-cols-[1fr_auto] gap-4 items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-0.5 overflow-hidden",children:[(0,r.jsx)("p",{className:"text-[13px] font-bold text-zinc-800 dark:text-zinc-200 truncate leading-tight",children:e.name}),e.cohort&&(0,r.jsx)(es,{cohort:e.cohort,variant:"mini"})]}),(0,r.jsx)("div",{className:"shrink-0 flex items-center justify-end",children:(0,r.jsx)(O.E,{className:(0,_.cn)("text-[8px] px-2 py-0 h-5 border-0 uppercase font-black tracking-widest text-center min-w-[70px]",s?"bg-amber-500/10 text-amber-600 dark:text-amber-500":a?"bg-indigo-500/10 text-indigo-600 dark:text-indigo-400":"bg-zinc-500/10 text-zinc-500 dark:text-zinc-500"),children:s?(0,r.jsx)(F.Bc,{children:(0,r.jsxs)(F.m_,{children:[(0,r.jsx)(F.k$,{asChild:!0,children:(0,r.jsxs)("span",{className:"flex items-center gap-1 cursor-help",children:[(0,r.jsx)(p.A,{className:"w-2.5 h-2.5"}),i]})}),(0,r.jsx)(F.ZI,{className:"z-[9999]",side:"top",children:(0,r.jsx)("p",{children:new Date(e.scheduled_for).toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})})})]})}):a?"Up Next":"Queue"})})]}),(0,r.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 scale-90 group-hover:scale-100 z-20",children:(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),eH(e.lead_id)},className:"p-2 bg-white dark:bg-zinc-900 text-zinc-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-950/30 rounded-xl shadow-lg border border-zinc-100 dark:border-zinc-800 transition-all",title:"Remove from queue",children:(0,r.jsx)(H.A,{className:"w-4 h-4"})})})]},"upcoming-".concat(e.lead_id,"-").concat(t))})})}):(0,r.jsx)("div",{className:"flex flex-col items-center justify-center p-8 text-center flex-1",children:(0,r.jsxs)(n.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"relative p-8 flex flex-col items-center gap-4 max-w-[280px]",children:[(0,r.jsxs)("div",{className:"relative mb-2",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-indigo-500/20 blur-xl rounded-full"}),(0,r.jsx)("div",{className:"relative w-16 h-16 bg-gradient-to-tr from-white to-zinc-50 dark:from-zinc-800 dark:to-zinc-900 rounded-full border border-white/50 dark:border-zinc-700 shadow-sm flex items-center justify-center",children:(0,r.jsx)(g.A,{className:"w-7 h-7 text-indigo-500 dark:text-indigo-400",strokeWidth:1.5})}),(0,r.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,r.jsx)("div",{className:"w-4 h-4 bg-white dark:bg-zinc-900 rounded-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})})})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"text-xs font-black tracking-[0.2em] text-zinc-900 dark:text-zinc-100 uppercase",children:"Queue Clear"}),(0,r.jsx)("p",{className:"text-[11px] font-medium text-zinc-500 dark:text-zinc-400 leading-relaxed max-w-[200px]",children:"All leads processed. System standing by for new entries."})]})]})})})})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 px-2",children:[(0,r.jsx)(R.A,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-400"}),(0,r.jsx)("h3",{className:"text-[10px] uppercase font-black text-zinc-500 tracking-[0.2em]",children:"Real-time Engagement Matrix"}),!u&&!b&&(0,r.jsx)("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse ml-1"}),b&&(0,r.jsx)("div",{className:"w-2 h-2 bg-amber-500 rounded-full ml-1"})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto pr-2 relative",children:b?(0,r.jsxs)("div",{className:"h-full rounded-[32px] border-2 border-dashed border-zinc-200 dark:border-zinc-800 flex flex-col items-center justify-center p-8 text-center bg-zinc-50/30",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-amber-100 dark:bg-amber-900/20 flex items-center justify-center mb-4",children:(0,r.jsx)(B.A,{className:"w-5 h-5 text-amber-500"})}),(0,r.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:"Agents Waiting"}),(0,r.jsx)("p",{className:"text-xs text-zinc-500 max-w-[200px] mt-1",children:"Campaign is currently paused. Resuming will re-activate neural mesh uplinks."})]}):a&&a.length>0?(0,r.jsx)("div",{className:"h-full overflow-y-auto pr-2 scrollbar-hide",children:(0,r.jsx)("div",{className:"flex flex-col h-full",children:(0,r.jsx)("div",{className:(0,_.cn)("grid gap-6 mb-6","grid-cols-1 lg:grid-cols-2"),children:Array.from({length:x}).map((e,t)=>{let s=a[t];if(s){let e=Object.values(d).flat().find(e=>e.lead_id===s.lead_id),a={...s,cohort:(null==e?void 0:e.cohort)||s.cohort};return(0,r.jsx)("div",{className:"min-h-[400px] h-full transition-all duration-700 ease-[cubic-bezier(0.25,1,0.5,1)]",children:(0,r.jsx)(em,{agent:a,events:o.filter(e=>e.agent_id?e.agent_id===s.agent_id:e.agent_name===s.agent_name),index:t})},s.agent_id||"active-".concat(t))}let i=ei[t%ei.length];return(0,r.jsxs)("div",{className:"min-h-[400px] h-full rounded-[32px] border border-dashed border-zinc-200 dark:border-zinc-800 bg-white/40 dark:bg-zinc-900/10 flex flex-col items-center justify-center p-8 text-center transition-all group hover:bg-white/60 dark:hover:bg-zinc-900/20",children:[(0,r.jsxs)("div",{className:"relative mb-6",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-indigo-500/10 blur-2xl rounded-full scale-150 animate-pulse"}),(0,r.jsxs)(P.eu,{className:"w-20 h-20 border-2 border-white dark:border-zinc-800 shadow-xl relative z-10 transition-transform group-hover:scale-105 duration-500",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(i.seed,"&backgroundColor=e0e7ff")}),(0,r.jsx)(P.q5,{className:"bg-indigo-50 text-indigo-600 font-bold",children:i.name.slice(0,2)})]}),(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-white dark:bg-zinc-950 rounded-full border border-zinc-100 dark:border-zinc-800 flex items-center justify-center z-20 shadow-sm",children:(0,r.jsx)("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"})})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("h3",{className:"text-xl font-black text-zinc-900 dark:text-zinc-100 tracking-tight",children:["Agent ",i.name]}),(0,r.jsx)("p",{className:"text-[11px] font-bold text-indigo-500 uppercase tracking-[0.2em]",children:i.tagline})]}),(0,r.jsx)("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 font-medium max-w-[180px] mt-4 leading-relaxed",children:"System online and awaiting next lead sequence..."}),(0,r.jsxs)("div",{className:"mt-8 px-4 py-2 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-100 dark:border-zinc-800/50 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-1 h-1 rounded-full bg-zinc-300 dark:bg-zinc-600"}),(0,r.jsx)("span",{className:"text-[9px] font-black text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Autonomous Standby"})]})]},"placeholder-".concat(t))})})})}):u||S?(0,r.jsxs)("div",{className:"h-full rounded-[32px] border-2 border-dashed border-zinc-200 dark:border-zinc-800 flex flex-col items-center justify-center p-8 text-center bg-zinc-50/30",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:(0,r.jsx)(J.A,{className:"w-5 h-5 text-zinc-400"})}),(0,r.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:eR?"Campaign Suspended":"Campaign Ended"}),(0,r.jsx)("p",{className:"text-xs text-zinc-500 max-w-[200px] mt-1 mb-6",children:eR?"".concat(eD.length," leads failed to connect."):"No valid leads remaining in queue."}),(0,r.jsxs)(z.$,{onClick:()=>eh(!0),disabled:f,variant:"outline",className:"h-9 px-6 rounded-full border-zinc-200 dark:border-zinc-800 hover:bg-zinc-100 dark:hover:bg-zinc-900 text-zinc-600 dark:text-zinc-400 font-bold text-[10px] uppercase tracking-widest gap-2",children:[f?(0,r.jsx)(q.A,{className:"w-3.5 h-3.5 animate-spin"}):(0,r.jsx)(q.A,{className:"w-3.5 h-3.5"}),f?"Resetting...":"Reset Metrics"]})]}):(0,r.jsxs)("div",{className:"h-full rounded-[32px] border-2 border-dashed border-zinc-200 dark:border-zinc-800 flex flex-col items-center justify-center p-8 text-center bg-zinc-50/30",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:(0,r.jsx)(h.A,{className:"w-5 h-5 text-zinc-400 animate-spin"})}),(0,r.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:"Initializing Neural Mesh"}),(0,r.jsx)("p",{className:"text-xs text-zinc-500 max-w-[200px] mt-1",children:"Establishing secure uplinks with active AI agents..."}),S&&eR&&(0,r.jsxs)(z.$,{onClick:()=>eh(!0),disabled:f,className:"h-12 px-8 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold transition-all shadow-lg shadow-indigo-500/20 gap-2",children:[f?(0,r.jsx)(q.A,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(q.A,{className:"w-4 h-4"}),f?"Resetting...":"Retry ".concat(eD.length," Failed Leads")]})]})})]})]}),(0,r.jsxs)("div",{className:(0,_.cn)("flex-[1.2] flex gap-6 border-t border-zinc-200 dark:border-zinc-800/50 pt-6 min-h-0 shrink-0",1===a.filter(Boolean).length?"min-h-[400px]":"min-h-[450px]"),children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(R.A,{className:"w-4 h-4 text-zinc-400 dark:text-zinc-500"}),(0,r.jsx)("h3",{className:"text-[10px] uppercase font-black text-zinc-500 tracking-[0.2em]",children:"Campaign Activity"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("h4",{className:"text-[9px] font-black text-zinc-300 dark:text-zinc-600 uppercase tracking-tighter",children:"Outcome Ledger"}),eO&&c.length>0&&(0,r.jsxs)("a",{href:"/campaigns/".concat(eO,"/history"),className:"group flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-indigo-50 to-orange-50 dark:from-indigo-950/30 dark:to-orange-950/30 border border-indigo-100 dark:border-indigo-900/50 hover:border-indigo-200 dark:hover:border-indigo-800 transition-all hover:shadow-md hover:scale-105",children:[(0,r.jsxs)("span",{className:"text-[9px] font-black text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:["See all ",c.length.toLocaleString()]}),(0,r.jsx)(Y.A,{className:"w-3 h-3 text-indigo-500 dark:text-indigo-400 group-hover:translate-x-0.5 transition-transform"})]})]})]}),(0,r.jsx)(ee.F,{className:"flex-1 bg-white dark:bg-zinc-900/30 rounded-[28px] border border-zinc-200 dark:border-zinc-800/50 p-4 shadow-sm transition-all duration-500 ease-in-out",children:(0,r.jsx)(ef,{history:c.map(e=>({...e,phone_number:e.phone_number||"Unknown",timestamp:e.timestamp||new Date().toISOString(),duration:e.duration||0,outcome:e.outcome||"Pending"})),onSelectCall:e=>{ec(e),eo(!0)},onCopyToQueue:U})})]}),(0,r.jsxs)("div",{className:"w-[360px] flex flex-col gap-4 h-[450px]",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(G.A,{className:"w-4 h-4 text-zinc-400 dark:text-zinc-500"}),(0,r.jsx)("h3",{className:"text-[10px] uppercase font-black text-zinc-500 tracking-[0.2em]",children:"Full Roster"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h4",{className:"text-[9px] font-black text-zinc-300 dark:text-zinc-600 uppercase tracking-tighter hidden sm:block",children:"Segmented View"}),(0,r.jsx)(O.E,{variant:"outline",className:"text-[10px] bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 text-zinc-600 dark:text-zinc-400 font-bold shrink-0",children:"all"===eu?Object.values(d).flat().length:(null===(t=d[eu])||void 0===t?void 0:t.length)||0})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto px-2 pb-2 scrollbar-none snap-x mask-linear-fade",children:[(0,r.jsx)("button",{onClick:()=>eb("all"),className:(0,_.cn)("shrink-0 text-[10px] font-bold px-3 py-1 rounded-full transition-all snap-start border","all"===eu?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800/50 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-all"),children:"All"}),Object.keys(d).map(e=>(0,r.jsx)("button",{onClick:()=>eb(e),className:(0,_.cn)("shrink-0 text-[10px] font-bold px-2.5 py-1 rounded-full transition-all snap-start border",eu===e?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800/50 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-all"),children:e},e))]})]}),(0,r.jsx)(ee.F,{className:"flex-1 bg-white dark:bg-zinc-900/30 rounded-[28px] border border-zinc-200 dark:border-zinc-800/50 p-4 shadow-sm",children:(0,r.jsx)("div",{className:"space-y-6 pb-12",children:Object.entries(d).filter(e=>{let[t]=e;return"all"===eu||eu===t}).map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{id:"cohort-".concat(t.replace(/\s+/g,"-")),className:"space-y-2.5 scroll-mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between sticky top-0 bg-white dark:bg-zinc-950/80 backdrop-blur-sm py-1 z-10 px-1 border-b border-dashed border-zinc-200 dark:border-zinc-800/50",children:[(0,r.jsx)("span",{className:"text-[10px] font-black text-indigo-600 dark:text-indigo-400 uppercase tracking-widest",children:t}),(0,r.jsx)(O.E,{variant:"secondary",className:"text-[9px] h-4 px-1",children:a.length})]}),(0,r.jsx)("div",{className:"space-y-1.5 pt-1",children:a.map((e,a)=>(0,r.jsxs)("div",{className:"group flex items-center gap-3 p-2 rounded-xl bg-zinc-50/30 dark:bg-black/20 border border-zinc-100 dark:border-zinc-800/30",children:[(0,r.jsx)(n.P.div,{layoutId:"roster-avatar-".concat(e.lead_id),children:(0,r.jsxs)(P.eu,{className:"w-6 h-6 border border-zinc-200 dark:border-zinc-800",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(e.avatar_seed)}),(0,r.jsx)(P.q5,{className:"text-[6px]",children:e.name.slice(0,2)})]})}),(0,r.jsx)("p",{className:"text-[11px] font-bold text-zinc-700 dark:text-zinc-300 truncate flex-1",children:e.name}),(()=>{var t;let a=(e.status||"").toLowerCase(),s="bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500",i=p.A,n=e.status;return"completed"===a||"intent_yes"===a||"scheduled"===a?(s="bg-emerald-500/10 text-emerald-600 dark:text-emerald-500",i=J.A):"failed"===a||"intent_no"===a||"dnc"===a||"failed_connect"===a?(s="bg-red-500/10 text-red-600 dark:text-red-500",i=$.A):"ready"===a?(s="bg-indigo-500/10 text-indigo-600 dark:text-indigo-500",i=V.A,n="NEXT"):"pending_availability"===a||"ambiguous"===a?(s="bg-orange-500/10 text-orange-600 dark:text-orange-500",i=Q.A,n="pending_availability"===a?"REVIEW":"UNCLEAR"):("speaking"===a||"connected"===a||"ringing"===a)&&(s="bg-blue-500/10 text-blue-600 dark:text-blue-500",i=K.A),(0,r.jsx)(F.Bc,{children:(0,r.jsxs)(F.m_,{children:[(0,r.jsx)(F.k$,{asChild:!0,children:(0,r.jsxs)(O.E,{className:(0,_.cn)("text-[8px] px-1.5 py-0 h-4 border-0 font-black uppercase tracking-tighter flex items-center gap-1 transition-transform hover:scale-105 active:scale-95 cursor-default",s),children:[(0,r.jsx)(i,{className:"w-2.5 h-2.5"}),n]})}),(e.outcome||"ambiguous"===a)&&(0,r.jsx)(F.ZI,{side:"top",className:(0,_.cn)("z-[100] bg-zinc-950/90 backdrop-blur-xl border border-white/10 shadow-[0_20px_50px_rgba(0,0,0,0.5)] p-4 rounded-2xl max-w-[240px]",(()=>{var t;let a=null===(t=e.status)||void 0===t?void 0:t.toLowerCase();return"failed"===a||"intent_no"===a||"dnc"===a||"failed_connect"===a?"border-red-500/20 shadow-[0_0_20px_rgba(239,68,68,0.1)]":""})()),children:(0,r.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 border-b border-white/5 pb-2",children:[(()=>{var t;let a=null===(t=e.status)||void 0===t?void 0:t.toLowerCase(),s=["failed","intent_no","dnc","failed_connect"].includes(a),i="ambiguous"===a;return(0,r.jsx)("div",{className:(0,_.cn)("p-1 rounded-md",s?"bg-red-500/20 text-red-400":i?"bg-amber-500/20 text-amber-400":"bg-indigo-500/20 text-indigo-400"),children:(0,r.jsx)(Q.A,{className:"w-3 h-3"})})})(),(0,r.jsx)("span",{className:"font-black uppercase tracking-[0.2em] text-[10px] text-white/50",children:(null===(t=e.status)||void 0===t?void 0:t.toLowerCase())==="ambiguous"?"Neural Insight":"Status Detail"})]}),(0,r.jsx)("p",{className:"text-[11px] leading-relaxed font-semibold text-white/90",children:e.outcome||"AI connected but intent was unclear. Manual review suggested."})]})})]})})})(),!["READY","PENDING","INITIATED","RINGING","CONNECTED","SPEAKING"].includes(e.status)&&!ew.has(e.lead_id)&&(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),eW(e.lead_id)},className:"p-1 rounded-md text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-950/30 transition-all",title:"Promote to Queue",children:(0,r.jsx)(X.A,{className:"w-3.5 h-3.5"})}),ew.has(e.lead_id)&&(0,r.jsx)(O.E,{className:"bg-amber-500/10 text-amber-500 text-[8px] h-3.5 px-1 border-0",children:"QUEUED"}),"FAILED"===e.status&&!ew.has(e.lead_id)&&(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),eq(e.lead_id)},className:"p-1 rounded-md text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-950/30 opacity-0 group-hover:opacity-100 transition-all ml-1",title:"Retry Call",children:(0,r.jsx)(q.A,{className:"w-3 h-3"})})]},"roster-".concat(t,"-").concat(e.lead_id,"-").concat(a)))})]},t)})})})]})]}),(0,r.jsx)("div",{className:"shrink-0 border-t border-zinc-200 dark:border-zinc-800/50 pt-6 pb-4",children:(0,r.jsx)(ek,{campaignId:eO||"",isActive:!b&&!u,events:M,onClear:et,viewMode:ea,onViewModeChange:er})})]}),(0,r.jsxs)("div",{className:"shrink-0 h-12 bg-zinc-50/50 dark:bg-zinc-900 px-8 flex items-center justify-between text-[10px] font-black text-zinc-400 dark:text-zinc-600 uppercase tracking-[0.2em] border-t border-zinc-200 dark:border-zinc-800/50 shadow-[0_-4px_24px_-12px_rgba(0,0,0,0.05)]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 group cursor-help",children:[(0,r.jsx)(C.A,{className:"w-3.5 h-3.5 text-indigo-500 transition-transform group-hover:scale-110"}),(0,r.jsx)("span",{className:"group-hover:text-zinc-600 dark:group-hover:text-zinc-400 transition-colors",children:"Security: Verified Uplink"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 group cursor-help",children:[(0,r.jsx)(R.A,{className:"w-3.5 h-3.5 text-emerald-500 transition-transform group-hover:scale-110"}),(0,r.jsx)("span",{className:"group-hover:text-zinc-600 dark:group-hover:text-zinc-400 transition-colors",children:"Quality: 98.4%"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-zinc-300 dark:text-zinc-700",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"NODE CLUSTER: UNCLN-@",a.filter(e=>null!==e).length," ACTIVE"]})]}),(0,r.jsx)(ev.F,{call:el,isOpen:ed,onClose:()=>eo(!1),campaignId:eO||void 0})]})}function ey(e){let{isOpen:t,onClose:a,activeAgents:s,upcomingLeads:i,historyItems:n,allLeadsByCohort:l,allEvents:c,maxConcurrency:d,isPaused:o,isResetting:x,onReset:m,onLeadAction:h,onRefreshQueue:g}=e;return(0,r.jsx)(L.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,r.jsxs)(L.Cf,{className:"max-w-7xl w-[98vw] h-[90vh] bg-transparent border-0 p-0 overflow-hidden shadow-2xl shadow-orange-500/10 dark:shadow-orange-500/20 flex flex-col transition-colors duration-300",children:[(0,r.jsxs)(T.s,{children:[(0,r.jsx)(L.L3,{children:"AI Agent Queue Control"}),(0,r.jsx)(L.rr,{children:"Unified view of upcoming, active, and historical agent activity."})]}),(0,r.jsx)(ez,{activeAgents:s,upcomingLeads:i,historyItems:n,allLeadsByCohort:l,allEvents:c,maxConcurrency:d,isPaused:o,isResetting:x,onClose:a,onReset:m,onLeadAction:h,onRefreshQueue:g,className:"h-full bg-white dark:bg-zinc-950 border-zinc-200 dark:border-zinc-800"})]})})}var e_=a(39196),eA=a(41498),eC=a(12947),eE=a(98867),eS=a(87364),eI=a(92991),eD=a(73519),eR=a(48686),eL=a(23817),eT=a(73239),eP=a(54947),eO=a(98220),eF=a(99053),eU=a(31091);let eM=e=>{let{strength:t}=e;return(0,r.jsxs)("div",{className:(0,_.cn)("flex items-center gap-1.5 px-2.5 py-1 rounded-full border text-[10px] font-black uppercase tracking-wider",t>=80?"bg-emerald-500/10 text-emerald-600 border-emerald-500/20":t>=60?"bg-amber-500/10 text-amber-600 border-amber-500/20":"bg-zinc-500/10 text-zinc-600 border-zinc-500/20"),children:[(0,r.jsx)(g.A,{className:"w-3 h-3"}),Math.round(t),"% Intent"]})},eq=e=>{let{targetTime:t,label:a="CALL IN"}=e,[i,n]=(0,s.useState)(""),[l,c]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=()=>{let e=new Date,a=new Date(t).getTime()-e.getTime();if(a<=0){n("NOW"),c(!0);return}let r=Math.floor(a/1e3/60);if(r<30&&c(!0),r<60)n("".concat(r,"m"));else{let e=Math.floor(r/60);n("".concat(e,"h ").concat(r%60,"m"))}};e();let a=setInterval(e,6e4);return()=>clearInterval(a)},[t]),(0,r.jsxs)("div",{className:(0,_.cn)("flex items-center gap-2 px-3 py-1.5 rounded-xl border font-bold text-xs tabular-nums",l?"bg-red-500/10 text-red-600 border-red-500/20 animate-pulse":"bg-orange-500/10 text-orange-600 border-orange-500/20"),children:[(0,r.jsx)(p.A,{className:"w-3.5 h-3.5"}),l&&t<new Date().toISOString()?"PAST DUE":"".concat(a," ").concat(i)]})},eH=e=>{let{item:t,onContact:a,onViewContext:i,isContactMode:l=!1,onCancelContact:c,onLogOutcome:d}=e;t.status;let o="RESCHEDULED"===t.status,[x,h]=(0,s.useState)(!1),u=()=>{navigator.clipboard.writeText(t.contact_number),h(!0),y.oR.success("Number Copied"),setTimeout(()=>h(!1),2e3)};return(0,r.jsxs)(n.P.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex-shrink-0 w-full md:w-[480px] bg-white dark:bg-zinc-950 rounded-[2.5rem] border border-emerald-500/30 shadow-[0_32px_64px_-16px_rgba(16,185,129,0.15)] overflow-hidden flex flex-col group relative transition-all duration-500",children:[!l&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 via-transparent to-transparent opacity-50 pointer-events-none"}),(0,r.jsxs)("div",{className:"p-8 space-y-6 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute -inset-1.5 bg-emerald-500/20 blur-md rounded-full"}),(0,r.jsxs)(P.eu,{className:"w-16 h-16 border-4 border-white dark:border-zinc-900 shadow-xl",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(t.lead_id)}),(0,r.jsx)(P.q5,{children:t.lead_name.slice(0,2).toUpperCase()})]}),!l&&(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-emerald-500 border-2 border-white dark:border-zinc-900 flex items-center justify-center text-white",children:(0,r.jsx)("span",{className:"text-[10px] font-black",children:"#1"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight leading-none mb-1 group-hover:text-emerald-500 transition-colors",children:t.lead_name}),!l&&(0,r.jsxs)("p",{className:"text-sm font-bold text-zinc-400",children:[t.contact_number.replace(/.(?=.{4})/g,"•")," "]})]})]}),!l&&(0,r.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,r.jsx)(eM,{strength:100*t.intent_strength}),t.confirmation_slot&&(0,r.jsx)(eq,{targetTime:t.confirmation_slot}),o&&t.retry_scheduled_for&&(0,r.jsx)(eq,{targetTime:t.retry_scheduled_for,label:"RETRY IN"})]})]}),l?(0,r.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,r.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-3xl p-6 border border-zinc-200 dark:border-zinc-800 text-center space-y-4 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-emerald-500/5 dark:bg-emerald-500/10 pointer-events-none"}),(0,r.jsx)("p",{className:"text-xs font-black text-zinc-400 uppercase tracking-widest",children:"Primary Contact"}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,r.jsx)("button",{onClick:u,className:"text-3xl md:text-4xl font-black text-zinc-900 dark:text-white tracking-tight hover:scale-105 transition-transform active:scale-95 cursor-copy",children:(0,_.n4)(t.contact_number)}),(0,r.jsx)(z.$,{size:"icon",variant:"ghost",onClick:u,className:"rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-800 text-zinc-400",children:x?(0,r.jsx)(eE.A,{className:"w-5 h-5 text-emerald-500"}):(0,r.jsx)(ep.A,{className:"w-5 h-5"})})]}),(0,r.jsx)("div",{className:"flex justify-center gap-2",children:(0,r.jsxs)(O.E,{variant:"outline",className:"bg-white dark:bg-black border-zinc-200 text-zinc-500 px-3 py-1",children:["Local Time: ",new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"bg-emerald-50/50 dark:bg-emerald-950/20 rounded-2xl p-4 border border-emerald-100/50 dark:border-emerald-500/10",children:[(0,r.jsx)("p",{className:"text-[10px] font-black text-emerald-600/70 dark:text-emerald-400 uppercase tracking-wider mb-1",children:"AI Summary"}),(0,r.jsx)("p",{className:"text-xs font-semibold text-zinc-700 dark:text-zinc-300 line-clamp-3",children:t.ai_summary||"Highly interested customer."})]}),(0,r.jsxs)("div",{className:"bg-zinc-50/50 dark:bg-zinc-900/30 rounded-2xl p-4 border border-zinc-100 dark:border-zinc-800",children:[(0,r.jsx)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-wider mb-1",children:"Attempts"}),(0,r.jsxs)("p",{className:"text-xl font-black text-zinc-700 dark:text-zinc-200",children:[t.user_call_count+1," ",(0,r.jsx)("span",{className:"text-xs font-bold text-zinc-400",children:"Current"})]})]})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-emerald-50/50 dark:bg-emerald-950/20 rounded-3xl p-5 border border-emerald-100/50 dark:border-emerald-500/10 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:(0,r.jsx)(m.A,{className:"w-12 h-12"})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded-full bg-white dark:bg-emerald-900/50 flex items-center justify-center shadow-sm",children:(0,r.jsx)(g.A,{className:"w-3 h-3 text-emerald-500"})}),(0,r.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-emerald-600/70 dark:text-emerald-400",children:"AI Call Summary"})]}),(0,r.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 font-semibold leading-relaxed line-clamp-3",children:t.ai_summary||"Highly interested customer. Expecting a follow-up call."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-4 border border-zinc-100 dark:border-zinc-800/50 flex items-center gap-3",children:[(0,r.jsx)(p.A,{className:"w-5 h-5 text-zinc-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest leading-none mb-1",children:t.last_ai_call_at?"AI Call":"Detected"}),(0,r.jsx)("p",{className:"text-xs font-bold text-zinc-700 dark:text-zinc-200",children:t.last_ai_call_at?(0,eU.m)(new Date(t.last_ai_call_at))+" ago":(0,eU.m)(new Date(t.detected_at))+" ago"})]})]}),(0,r.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-4 border border-zinc-100 dark:border-zinc-800/50 flex items-center gap-3",children:[(0,r.jsx)(K.A,{className:"w-5 h-5 text-zinc-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest leading-none mb-1",children:"Retry Count"}),(0,r.jsxs)("p",{className:"text-xs font-bold text-zinc-700 dark:text-zinc-200",children:[t.user_call_count," Attempts"]})]})]})]})]}),!l&&t.cohort&&(0,r.jsx)("div",{className:"flex items-center gap-2 px-1",children:(0,r.jsx)(es,{cohort:t.cohort,variant:"glass"})})]}),(0,r.jsx)("div",{className:"p-4 bg-zinc-50/50 dark:bg-zinc-900/30 border-t border-zinc-100 dark:border-zinc-800/50 flex gap-3",children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(z.$,{variant:"outline",onClick:c,className:"flex-1 h-14 rounded-[1.5rem] border-zinc-200 dark:border-zinc-800 text-zinc-500 font-bold hover:bg-zinc-100",children:[(0,r.jsx)(eS.A,{className:"w-4 h-4 mr-2"}),"CANCEL"]}),(0,r.jsxs)(z.$,{onClick:d,className:"flex-[2] bg-zinc-900 dark:bg-white text-white dark:text-black font-black h-14 rounded-[1.5rem] shadow-xl text-lg transition-transform hover:scale-[1.02] active:scale-[0.98]",children:[(0,r.jsx)(J.A,{className:"w-5 h-5 mr-3"}),"LOG OUTCOME"]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(z.$,{onClick:a,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white font-black h-14 rounded-[1.5rem] shadow-xl shadow-emerald-500/20 text-lg transition-transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:grayscale",children:[(0,r.jsx)(V.A,{className:"w-5 h-5 mr-3"}),o?"RETRY CONTACT":"CONTACT"]}),(0,r.jsx)(z.$,{variant:"outline",className:"w-14 h-14 rounded-[1.5rem] border-zinc-200 dark:border-zinc-800",onClick:i,children:(0,r.jsx)(eo.A,{className:"w-6 h-6 text-zinc-500"})})]})})]})},eW=e=>{let{item:t,index:a,onClick:s,onSwap:i}=e;return(0,r.jsxs)(n.P.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},onClick:s,className:"flex-shrink-0 w-full bg-white/70 dark:bg-zinc-900/70 backdrop-blur-md rounded-[2rem] border border-zinc-100 dark:border-zinc-800 p-5 flex flex-col gap-4 group hover:bg-white dark:hover:bg-zinc-900 transition-all hover:shadow-xl hover:-translate-y-1 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(P.eu,{className:"w-10 h-10 ring-2 ring-emerald-500/10",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(t.lead_id)}),(0,r.jsx)(P.q5,{children:t.lead_name.slice(0,2).toUpperCase()})]}),(0,r.jsxs)("div",{className:"overflow-hidden",children:[(0,r.jsx)("h4",{className:"font-bold text-zinc-900 dark:text-white truncate group-hover:text-emerald-500 transition-colors",children:t.lead_name}),(0,r.jsxs)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:["#",a+2," IN QUEUE"]})]})]}),(0,r.jsx)("div",{className:"bg-zinc-50/50 dark:bg-black/20 rounded-2xl p-3 border border-zinc-100/50 dark:border-zinc-800/30",children:(0,r.jsxs)("p",{className:"text-[11px] text-zinc-500 dark:text-zinc-400 font-semibold line-clamp-2 leading-snug italic",children:['"',t.ai_summary||"Ready for follow-up",'"']})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-auto",children:[(0,r.jsxs)(O.E,{variant:"outline",className:"text-[9px] font-black uppercase tracking-tighter rounded-lg border-zinc-200",children:[Math.round(100*t.intent_strength),"% Intent"]}),t.confirmation_slot&&(0,r.jsx)("span",{className:"text-[10px] font-black text-red-500 animate-pulse",children:"DUE SOON"}),"RESCHEDULED"===t.status&&(0,r.jsx)("span",{className:"text-[10px] font-black text-amber-500",children:"RETRY"})]}),(0,r.jsx)("div",{className:"absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsx)(F.Bc,{children:(0,r.jsxs)(F.m_,{children:[(0,r.jsx)(F.k$,{asChild:!0,children:(0,r.jsx)(z.$,{variant:"ghost",size:"icon",onClick:i,className:"h-8 w-8 rounded-full text-zinc-400 hover:text-emerald-600 hover:bg-emerald-50",children:(0,r.jsx)(eI.A,{className:"w-4 h-4"})})}),(0,r.jsx)(F.ZI,{children:(0,r.jsx)("p",{children:"Prioritize Lead"})})]})})})]})},eB=e=>{let{campaignId:t,campaignStatus:a="ACTIVE",isStarted:l=!1,onCallClick:c,onContextClick:d,onStart:o,refreshTrigger:x,historyItems:f=[],maxConcurrency:j=2}=e,[v,N]=(0,s.useState)([]),[w,k]=(0,s.useState)(!0),A=(0,s.useRef)(null),[C,E]=(0,s.useState)(null),[S,I]=(0,s.useState)({x:0,y:0}),[D,R]=(0,s.useState)(null),L=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];k(!0),R(null);try{let a=await Z.F.get(e?"/user-queue/".concat(t,"?refresh=true"):"/user-queue/".concat(t));N(a),e&&a.length>0?y.oR.success("Queue Refreshed",{description:"Found ".concat(a.length," leads waiting for you.")}):e&&y.oR.info("All Caught Up",{description:"No new leads found at this time."})}catch(t){R("Unable to load queue. Please check your connection."),e&&y.oR.error("Refresh Failed")}finally{k(!1)}};(0,s.useEffect)(()=>{L(!!x);let e=setInterval(()=>L(),3e4);return()=>clearInterval(e)},[t,x]);let T=async e=>{e.locked_by_user_id&&e.locked_by_user_id;try{var a;let r=await Z.F.get("/user-queue/".concat(t,"/next?user_id=me"));(null===(a=r.item)||void 0===a?void 0:a.id)===e.id?E(e.id):(y.oR.warning("Queue moved",{description:"The lead you selected is no longer available."}),L(!0))}catch(e){423===e.status?(y.oR.error("Lead Locked",{description:"This lead is currently being handled by another agent."}),L(!0)):y.oR.error(e.message||"Failed to prepare contact.")}},U=e=>{c&&(c(e),E(null))},M=async(e,t)=>{t.stopPropagation();try{await Z.F.post("/user-queue/".concat(e.id,"/boost"),{}),y.oR.success("Lead Prioritized",{description:"".concat(e.lead_name," moved to top of queue")}),L(!0)}catch(e){y.oR.error("Swap Failed",{description:"Could not prioritize this lead."})}};if(D&&0===v.length)return(0,r.jsxs)("div",{className:"w-full h-64 flex flex-col items-center justify-center bg-red-50 dark:bg-red-900/10 rounded-[3rem] border border-red-200 dark:border-red-900/30 p-8 text-center space-y-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/50 flex items-center justify-center",children:(0,r.jsx)(eD.A,{className:"w-8 h-8 text-red-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black text-red-700 dark:text-red-400",children:"Connection Error"}),(0,r.jsx)("p",{className:"text-sm text-red-600/80 dark:text-red-400/70",children:D})]}),(0,r.jsxs)(z.$,{onClick:()=>L(!0),variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",children:[(0,r.jsx)(W.A,{className:"w-4 h-4 mr-2"}),"Try Again"]})]});if(0===v.length)return l?(0,r.jsxs)("div",{className:"w-full bg-emerald-50/80 dark:bg-emerald-950/20 rounded-[3rem] p-8 md:p-12 flex flex-col relative overflow-hidden group border border-emerald-100 dark:border-emerald-500/20 shadow-xl shadow-emerald-500/5",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-gradient-to-br from-emerald-200/20 via-emerald-100/10 to-transparent dark:from-emerald-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-gradient-to-tr from-emerald-200/20 via-emerald-100/10 to-transparent dark:from-emerald-500/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 pointer-events-none"}),(0,r.jsx)("div",{className:"flex items-center justify-between mb-16 z-20 relative",children:(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)("div",{className:"flex -space-x-4",children:[...Array(j)].map((e,t)=>(0,r.jsx)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"relative",children:(0,r.jsxs)(P.eu,{className:"w-12 h-12 border-[3px] border-white dark:border-zinc-950 shadow-md grayscale-[0.8] transition-all duration-500 group-hover:grayscale-0 group-hover:scale-110 z-10",children:[(0,r.jsx)(P.BK,{src:"/images/avatars/notionists/full_body/avatar_".concat(t%5+1,".png"),className:"object-cover object-top"}),(0,r.jsx)(P.q5,{children:"AI"})]})},t))}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,r.jsx)("h2",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight",children:"Human Action Pipeline"}),(0,r.jsx)(O.E,{className:(0,_.cn)("font-black px-2.5 py-0.5 text-[10px] tracking-widest rounded-lg border backdrop-blur-md transition-colors",w?"bg-emerald-500/10 text-emerald-600 border-emerald-500/20 animate-pulse":"bg-white/60 dark:bg-zinc-800/60 text-zinc-400 border-zinc-200 dark:border-zinc-800"),children:w?"SYNCING LIVE":"WAITING FOR LEADS"})]}),(0,r.jsx)("p",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 tracking-wide",children:w?"Establishing secure connection to AI agents...":"Monitoring AI conversations for handover opportunities..."})]})]})}),(0,r.jsx)("div",{className:"absolute -right-24 top-1/2 -translate-y-1/2 opacity-[0.06] dark:opacity-[0.08] pointer-events-none transition-transform duration-[4000ms] ease-in-out group-hover:rotate-12 group-hover:scale-110",children:(0,r.jsx)(eT.A,{className:"w-[600px] h-[600px] text-emerald-600 dark:text-emerald-400",strokeWidth:.8})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center -mt-8 relative z-10",children:[(0,r.jsxs)(n.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},className:"relative mb-10",children:[(0,r.jsx)("div",{className:(0,_.cn)("absolute inset-0 bg-emerald-500 rounded-full blur-xl opacity-20",w?"animate-pulse":"hidden")}),(0,r.jsxs)("div",{className:"w-28 h-28 rounded-[2.5rem] bg-white dark:bg-zinc-900 shadow-[0_32px_64px_-16px_rgba(16,185,129,0.25)] flex items-center justify-center relative border border-emerald-100 dark:border-emerald-500/20",children:[w&&(0,r.jsx)("div",{className:"absolute inset-0 rounded-[2.5rem] border-2 border-emerald-500/30 border-t-emerald-500 animate-spin"}),(0,r.jsx)(g.A,{className:(0,_.cn)("w-12 h-12 text-emerald-500 transition-all duration-500",!w&&"group-hover:scale-110 group-hover:rotate-12")})]}),(0,r.jsx)("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"bg-emerald-500 text-white text-[10px] font-black px-3 py-1 rounded-full shadow-lg flex items-center gap-1.5",children:[(0,r.jsx)("div",{className:(0,_.cn)("w-1.5 h-1.5 rounded-full bg-white",w?"animate-ping":"opacity-50")}),w?"LISTENING":"READY"]})})]}),(0,r.jsx)("h3",{className:"text-5xl md:text-6xl font-black text-zinc-900 dark:text-white mb-6 tracking-tighter text-center bg-clip-text text-transparent bg-gradient-to-br from-zinc-900 to-zinc-600 dark:from-white dark:to-zinc-400",children:w?"Syncing Pipeline...":"All Caught Up"}),(0,r.jsxs)("p",{className:"text-zinc-500 dark:text-zinc-400 font-medium text-base md:text-lg max-w-lg text-center leading-relaxed",children:["The AI agents are scouting for new opportunities.",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400 font-bold",children:"We will notify you"})," immediately when a lead requires your attention."]}),(0,r.jsx)(z.$,{onClick:()=>L(!0),disabled:w,className:(0,_.cn)("mt-14 h-16 px-12 rounded-[2rem] font-black text-xs tracking-[0.2em] transition-all duration-300 shadow-xl","bg-white hover:bg-zinc-50 text-emerald-600 border border-emerald-100","dark:bg-zinc-900 dark:hover:bg-zinc-800 dark:text-emerald-400 dark:border-emerald-900/50","hover:shadow-emerald-500/10 hover:-translate-y-1 hover:scale-105 active:scale-95",w&&"opacity-80 cursor-not-allowed"),children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.A,{className:"w-4 h-4 mr-3 animate-spin"}),"ESTABLISHING LINK..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.A,{className:"w-4 h-4 mr-3"}),"CHECK FOR UPDATES"]})})]}),!w&&f.length>0&&(0,r.jsxs)("div",{className:"w-full max-w-4xl mx-auto mt-12 bg-white/50 dark:bg-zinc-950/50 rounded-[3rem] border border-zinc-200/50 dark:border-zinc-800/50 p-8 shadow-sm backdrop-blur-sm z-10",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6 px-2",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-zinc-100 dark:bg-zinc-900 flex items-center justify-center text-zinc-500",children:(0,r.jsx)(eP.A,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black text-zinc-900 dark:text-white",children:"Conversation History"}),(0,r.jsx)("p",{className:"text-xs font-bold text-zinc-400",children:"Your recent interactions"})]})]}),(0,r.jsx)("div",{className:"space-y-3",children:f.slice(0,5).map((e,t)=>{var a,s,i,n;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-100 dark:border-zinc-800/50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(P.eu,{className:"w-10 h-10 border-2 border-white dark:border-zinc-800",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(e.lead_id)}),(0,r.jsx)(P.q5,{children:null===(a=e.name)||void 0===a?void 0:a.slice(0,2)})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("p",{className:"font-bold text-zinc-900 dark:text-white",children:e.name}),(0,r.jsx)(O.E,{variant:"outline",className:"text-[10px] h-5 px-1.5 border-zinc-200 text-zinc-500",children:(0,_.n4)(e.phone_number||"Unknown")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,r.jsx)("span",{className:(0,_.cn)("text-[10px] font-black uppercase tracking-wider","CONNECTED"===e.status?"text-emerald-600":"VOICEMAIL"===e.status?"text-amber-600":"text-zinc-500"),children:null===(s=e.status)||void 0===s?void 0:s.replace("_"," ")}),e.duration&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-zinc-300",children:"•"}),(0,r.jsxs)("span",{className:"text-[10px] font-medium text-zinc-400 flex items-center gap-1",children:[(0,r.jsx)(eO.A,{className:"w-3 h-3"}),Math.floor(e.duration/60),"m ",e.duration%60,"s"]})]})]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-1",children:"Outcome"}),(0,r.jsx)(O.E,{className:(0,_.cn)("font-bold border-0",(null===(i=e.outcome)||void 0===i?void 0:i.includes("WON"))?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400"),children:(null===(n=e.outcome)||void 0===n?void 0:n.replace("CLOSE_",""))||"LOGGED"})]})]},t)})})]})]}):(0,r.jsxs)("div",{onMouseMove:e=>{let t=e.currentTarget.getBoundingClientRect();I({x:(e.clientX-t.left)/t.width-.5,y:(e.clientY-t.top)/t.height-.5})},onMouseLeave:()=>I({x:0,y:0}),className:"w-full min-h-[480px] bg-zinc-50 dark:bg-[#030712] rounded-[3rem] p-8 md:p-10 flex flex-col relative overflow-hidden group border border-zinc-200 dark:border-white/5 shadow-2xl dark:shadow-[0_0_120px_rgba(30,58,138,0.25)] transition-all duration-700",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-[0.03] dark:opacity-[0.15] mix-blend-overlay pointer-events-none"}),(0,r.jsx)(n.P.div,{animate:{x:40*S.x,y:40*S.y,scale:[1,1.1,1],opacity:[.08,.15,.08]},transition:{duration:15,repeat:1/0,ease:"easeInOut",x:{type:"spring",damping:20},y:{type:"spring",damping:20}},className:"absolute top-[-25%] right-[-15%] w-[900px] h-[900px] bg-gradient-to-br from-indigo-500/20 via-violet-500/10 to-transparent dark:from-indigo-600/30 dark:via-purple-600/20 rounded-full blur-[140px] pointer-events-none"}),(0,r.jsx)(n.P.div,{animate:{x:-30*S.x,y:-30*S.y,scale:[1,1.2,1],opacity:[.05,.1,.05]},transition:{duration:20,repeat:1/0,ease:"easeInOut",x:{type:"spring",damping:25},y:{type:"spring",damping:25}},className:"absolute bottom-[-25%] left-[-15%] w-[800px] h-[800px] bg-gradient-to-tr from-cyan-500/20 via-emerald-500/10 to-transparent dark:from-blue-600/30 dark:via-teal-600/20 rounded-full blur-[120px] pointer-events-none"}),(0,r.jsx)(n.P.div,{animate:{opacity:[.01,.03,.01]},transition:{duration:4,repeat:1/0},className:"absolute inset-0 bg-gradient-to-b from-transparent via-zinc-900/[0.02] dark:via-white/[0.04] to-transparent bg-[length:100%_4px] animate-scanline pointer-events-none"}),(0,r.jsx)("div",{className:"absolute inset-0 opacity-[0.02] dark:opacity-[0.05] pointer-events-none bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:40px_40px]"}),(0,r.jsxs)("div",{className:"flex justify-between items-start mb-10 relative z-20 w-full px-2",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-2.5 px-4 py-1.5 rounded-full bg-white/40 dark:bg-white/5 border border-zinc-900/5 dark:border-white/10 backdrop-blur-2xl shadow-sm",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"}),(0,r.jsx)("div",{className:"absolute inset-0 w-1.5 h-1.5 rounded-full bg-amber-500 animate-ping opacity-75"})]}),(0,r.jsx)("span",{className:"text-[10px] font-black tracking-[0.2em] text-zinc-500 dark:text-zinc-400 uppercase",children:"System: Standby"})]}),(0,r.jsx)("span",{className:"text-[10px] font-black text-zinc-400 dark:text-zinc-600 mt-1 px-1 tracking-widest uppercase",children:"ID: UNIT_ZERO_ALPHA"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,r.jsx)("p",{className:"text-[9px] font-black text-zinc-400 dark:text-white/40 tracking-widest uppercase mb-0.5 opacity-60",children:"Tactical Link"}),(0,r.jsx)("p",{className:"text-[10px] font-black text-zinc-500",children:"READY"})]}),(0,r.jsx)(n.P.div,{whileHover:{scale:1.1,rotate:10},className:"w-9 h-9 rounded-xl bg-white/40 dark:bg-white/5 border border-zinc-900/5 dark:border-white/10 flex items-center justify-center backdrop-blur-md shadow-sm",children:(0,r.jsx)(eR.A,{className:"w-3.5 h-3.5 text-zinc-400 dark:text-zinc-500"})})]})]}),(0,r.jsxs)(n.P.div,{animate:{x:-15*S.x,y:-15*S.y},transition:{type:"spring",damping:30},className:"flex-1 flex flex-col items-center justify-center relative z-20 -mt-8",children:[(0,r.jsxs)("div",{className:"relative mb-16",children:[[1,2,3].map(e=>(0,r.jsx)(n.P.div,{animate:{rotate:e%2==0?360:-360,scale:[1,1.02,1]},transition:{rotate:{duration:15+5*e,repeat:1/0,ease:"linear"},scale:{duration:4,repeat:1/0,ease:"easeInOut",delay:e}},className:(0,_.cn)("absolute inset-0 rounded-full border border-dashed",1===e?"-m-14 border-zinc-900/10 dark:border-white/10 opacity-60":2===e?"-m-10 border-zinc-900/5 dark:border-white/[0.05] opacity-40":"-m-6 border-emerald-500/10 dark:border-emerald-500/5 opacity-80")},e)),(0,r.jsx)("div",{className:"absolute inset-0 -m-20 animate-spin-slow pointer-events-none",children:(0,r.jsx)(n.P.div,{animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:3,repeat:1/0},className:"w-2.5 h-2.5 bg-indigo-500 rounded-full absolute top-1/4 left-0 shadow-[0_0_20px_rgba(99,102,241,1)]"})}),(0,r.jsx)("div",{className:"absolute inset-0 -m-20 animate-spin-reverse-slow pointer-events-none",children:(0,r.jsx)(n.P.div,{animate:{scale:[1,1.3,1],opacity:[.3,.7,.3]},transition:{duration:4,repeat:1/0,delay:1},className:"w-2 h-2 bg-emerald-500 rounded-full absolute bottom-1/4 right-0 shadow-[0_0_15px_rgba(16,185,129,0.8)]"})}),(0,r.jsxs)(n.P.div,{whileHover:"hover",whileTap:"press",className:"relative group/core",children:[(0,r.jsx)(n.P.div,{variants:{hover:{scale:1.4,opacity:.25},press:{scale:.9,opacity:.1}},className:"absolute inset-0 bg-indigo-500 dark:bg-white rounded-full blur-[80px] opacity-0 transition-opacity duration-1000"}),(0,r.jsxs)(z.$,{onClick:o,className:(0,_.cn)("w-32 h-32 rounded-full flex flex-col items-center justify-center gap-1.5 border-[8px] transition-all duration-500 relative z-30","bg-zinc-900 dark:bg-white text-white dark:text-black","border-zinc-50 dark:border-zinc-900/10 shadow-xl dark:shadow-[0_0_60px_rgba(255,255,255,0.05)]","hover:border-zinc-800 dark:hover:border-zinc-200 hover:shadow-indigo-500/30","active:scale-95 active:duration-100"),children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-zinc-50/10 dark:bg-zinc-900/10 flex items-center justify-center group-hover/core:scale-110 group-hover/core:bg-zinc-50/20 transition-all duration-500",children:(0,r.jsx)(u.A,{className:"w-5 h-5 fill-current ml-0.5"})}),(0,r.jsx)("span",{className:"text-[9px] font-black tracking-[0.3em] uppercase opacity-80 group-hover/core:opacity-100 transition-opacity text-current dark:text-black",children:"Initialize"}),(0,r.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-tr from-transparent via-white/5 to-transparent pointer-events-none"})]}),(0,r.jsx)("div",{className:"absolute -inset-2.5 border border-zinc-900/5 dark:border-white/5 rounded-full pointer-events-none"})]})]}),(0,r.jsx)(n.P.h3,{animate:{y:-3*S.y},className:"text-4xl md:text-5xl font-black text-zinc-900 dark:text-white mb-4 tracking-tighter text-center",children:"Mission Control"}),(0,r.jsxs)("p",{className:"text-zinc-400 dark:text-zinc-500 font-bold text-base md:text-xl max-w-lg text-center leading-relaxed",children:["Your agent swarm is calibrated and ready.",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-zinc-900 dark:text-zinc-200 font-black",children:"Authorize the ignition"})," to begin the harvest."]})]}),(0,r.jsxs)("div",{className:"mt-12 pt-10 border-t border-zinc-200 dark:border-white/5 flex flex-col sm:flex-row items-center justify-between w-full relative z-20 gap-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-8",children:[(0,r.jsx)("div",{className:"flex -space-x-3.5",children:[...Array(j)].map((e,t)=>(0,r.jsxs)(n.P.div,{whileHover:{y:-5,scale:1.1},className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-indigo-500/20 blur-md rounded-full opacity-0 group-hover:opacity-100 transition-opacity"}),(0,r.jsxs)(P.eu,{className:"w-11 h-11 border-[3px] border-white dark:border-zinc-900 grayscale-[0.6] hover:grayscale-0 transition-all shadow-lg",children:[(0,r.jsx)(P.BK,{src:"/images/avatars/notionists/full_body/avatar_".concat(t%5+1,".png"),className:"object-cover object-top"}),(0,r.jsx)(P.q5,{children:"AI"})]}),(0,r.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-zinc-100 dark:bg-zinc-800 rounded-full border-2 border-white dark:border-zinc-900 flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"})})]},t))}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-[10px] font-black text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em] leading-none mb-1.5",children:"Intelligence Fleet"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-xs font-black text-zinc-900 dark:text-zinc-300",children:[j," AGENTS"]}),(0,r.jsx)(O.E,{variant:"outline",className:"text-[9px] font-black border-zinc-200 dark:border-zinc-800 text-zinc-400 h-4 px-1.5",children:"STANDBY"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-8",children:[(0,r.jsx)("div",{className:"h-10 w-px bg-zinc-200 dark:bg-white/5 hidden sm:block"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-end",children:[(0,r.jsx)("span",{className:"text-[10px] font-black text-zinc-400 dark:text-zinc-600 uppercase tracking-[0.2em] mb-1",children:"Encrypted Link"}),(0,r.jsx)("span",{className:"text-xs font-black text-emerald-600 dark:text-emerald-500 tracking-tight",children:"SECURE ESTABLISHED"})]}),(0,r.jsx)("div",{className:"w-11 h-11 rounded-2xl bg-emerald-500/5 dark:bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center shadow-inner",children:(0,r.jsx)(eL.A,{className:"w-5 h-5 text-emerald-500"})})]})]})]})]});let q=v.filter(e=>"RESCHEDULED"!==e.status),H=v.filter(e=>"RESCHEDULED"===e.status),B=q[0],J=q.slice(1);return(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsxs)("div",{className:"w-full bg-gradient-to-br from-emerald-500/10 via-emerald-400/5 to-transparent dark:from-emerald-500/20 dark:via-transparent dark:to-transparent rounded-[4rem] p-10 border border-emerald-500/20 shadow-2xl relative overflow-hidden group/panel",children:[(0,r.jsx)("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-emerald-500/10 blur-[120px] rounded-full -translate-y-1/2 pointer-events-none"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-1/4 w-96 h-96 bg-orange-500/5 blur-[120px] rounded-full translate-y-1/2 pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-10 px-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-5",children:[(0,r.jsxs)("div",{className:"flex -space-x-3 transition-transform hover:scale-105 duration-300",children:[[...Array(j)].map((e,t)=>(0,r.jsxs)(P.eu,{className:"w-12 h-12 border-4 border-white dark:border-zinc-900 grayscale opacity-40 hover:grayscale-0 hover:opacity-100 transition-all cursor-help",children:[(0,r.jsx)(P.BK,{src:"/images/avatars/notionists/full_body/avatar_".concat(t%5+1,".png")}),(0,r.jsx)(P.q5,{children:"AI"})]},t)),(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-white dark:bg-zinc-800 border-4 border-white dark:border-zinc-900 flex items-center justify-center text-zinc-400 shadow-lg",children:(0,r.jsx)(m.A,{className:"w-6 h-6"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h2",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight",children:"Human Action Pipeline"}),(0,r.jsxs)(O.E,{className:"bg-emerald-500 text-white font-black px-3 py-1 rounded-full text-[10px] tracking-widest shadow-lg shadow-emerald-500/20 animate-bounce",children:[v.length," READY"]})]}),(0,r.jsx)("p",{className:"text-sm font-bold text-emerald-600/70 dark:text-emerald-400/70",children:"Leads transitioned from AI Team for your closing touch"})]})]}),(0,r.jsx)(F.Bc,{children:(0,r.jsxs)(F.m_,{children:[(0,r.jsx)(F.k$,{asChild:!0,children:(0,r.jsx)(z.$,{variant:"ghost",className:"rounded-2xl h-12 w-12 p-0 text-zinc-400 hover:text-emerald-500 hover:bg-emerald-500/10 transition-colors",children:(0,r.jsx)(W.A,{className:"w-5 h-5",onClick:()=>L(!0)})})}),(0,r.jsx)(F.ZI,{children:"Refresh Queue"})]})})]}),(0,r.jsxs)("div",{className:"flex items-start gap-10",children:[(0,r.jsx)("div",{className:"hidden lg:flex flex-col items-center justify-center gap-3 ml-4",children:(0,r.jsx)(n.P.div,{animate:{x:[0,8,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,r.jsx)(eF.A,{className:"w-8 h-8 text-emerald-500/30"})})}),(0,r.jsx)(eH,{item:B,onContact:()=>T(B),onViewContext:()=>null==d?void 0:d(B),isContactMode:C===B.id,onCancelContact:()=>{E(null)},onLogOutcome:()=>U(B)}),(0,r.jsxs)("div",{className:"flex-1 min-w-0 h-full py-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4 ml-2",children:[(0,r.jsx)("span",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-[0.3em]",children:"Upcoming Conveyor"}),(0,r.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-zinc-200 via-zinc-200/50 to-transparent dark:from-zinc-800 dark:via-zinc-800/50"})]}),(0,r.jsx)("div",{ref:A,className:"flex flex-col gap-4 h-[450px] overflow-y-auto scrollbar-subtle pb-4 px-2",style:{perspective:"1000px"},children:(0,r.jsx)(i.N,{mode:"popLayout",children:J.length>0?J.map((e,t)=>(0,r.jsx)(eW,{item:e,index:t,onClick:()=>null==d?void 0:d(e),onSwap:t=>M(e,t)},e.id)):(0,r.jsx)("div",{className:"w-full flex items-center justify-center p-8 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-[2rem] text-zinc-400 italic font-medium",children:"No more leads in pipeline..."})})})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4 px-10 border-l border-emerald-500/20",children:[(0,r.jsxs)("div",{className:"relative group/user",children:[(0,r.jsx)("div",{className:"absolute -inset-4 bg-emerald-500/20 blur-2xl rounded-full opacity-0 group-hover/user:opacity-100 transition-opacity animate-pulse"}),(0,r.jsxs)(P.eu,{className:"w-24 h-24 border-8 border-white dark:border-zinc-950 shadow-2xl relative z-10 transition-transform group-hover/user:scale-105",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=User&backgroundColor=d1fae5"}),(0,r.jsx)(P.q5,{children:"YOU"})]}),(0,r.jsx)("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-full bg-emerald-500 border-4 border-white dark:border-zinc-950 flex items-center justify-center text-white z-20 shadow-xl",children:(0,r.jsx)(K.A,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"text-center z-10",children:[(0,r.jsx)("h4",{className:"text-xs font-black text-zinc-400 uppercase tracking-[0.2em] mb-1",children:"DESTINATION"}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"w-3 h-3 rounded-full bg-emerald-500 animate-pulse"}),(0,r.jsx)("span",{className:"text-xl font-black text-zinc-900 dark:text-white tracking-tight",children:"YOU"})]})]})]})]}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 flex overflow-hidden opacity-30",children:(0,r.jsxs)(n.P.div,{animate:{x:["0%","-50%"]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"flex whitespace-nowrap",children:[[...Array(20)].map((e,t)=>(0,r.jsx)("div",{className:"w-12 h-1 bg-emerald-500 mx-8 rounded-full"},t)),[...Array(20)].map((e,t)=>(0,r.jsx)("div",{className:"w-12 h-1 bg-emerald-500 mx-8 rounded-full"},t))]})})]}),H.length>0&&(0,r.jsxs)("div",{className:"w-full bg-gradient-to-br from-amber-500/10 via-amber-400/5 to-transparent dark:from-amber-500/20 dark:via-transparent dark:to-transparent rounded-[3rem] border border-amber-500/20 p-8 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6 px-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-600",children:(0,r.jsx)(b.A,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black text-zinc-900 dark:text-white",children:"Rescheduled Follow-ups"}),(0,r.jsx)("p",{className:"text-xs font-bold text-amber-600/70 dark:text-amber-400/70",children:"Leads scheduled for future contact"})]})]}),(0,r.jsxs)(O.E,{className:"bg-amber-500 text-white font-black px-3 py-1 rounded-full text-[10px] tracking-widest",children:[H.length," SCHEDULED"]})]}),(0,r.jsx)("div",{className:"space-y-3",children:H.map((e,t)=>{var a;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-white dark:bg-zinc-900 border border-amber-200 dark:border-amber-800/30 hover:border-amber-400 dark:hover:border-amber-600 transition-colors cursor-pointer",onClick:()=>null==d?void 0:d(e),children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(P.eu,{className:"w-10 h-10 border-2 border-amber-200 dark:border-amber-800",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(e.lead_id)}),(0,r.jsx)(P.q5,{children:null===(a=e.lead_name)||void 0===a?void 0:a.slice(0,2)})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("p",{className:"font-bold text-zinc-900 dark:text-white",children:e.lead_name}),(0,r.jsx)(O.E,{variant:"outline",className:"text-[10px] h-5 px-1.5 border-amber-200 text-amber-600",children:(0,_.n4)(e.contact_number)})]}),e.retry_scheduled_for&&(0,r.jsxs)("p",{className:"text-xs text-amber-600 dark:text-amber-400 font-semibold mt-0.5",children:["Scheduled: ",new Date(e.retry_scheduled_for).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})]})]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(p.A,{className:"w-4 h-4 text-amber-500"})})]},e.id)})})]}),f.length>0&&(0,r.jsxs)("div",{className:"w-full bg-white dark:bg-zinc-950 rounded-[3rem] border border-zinc-200 dark:border-zinc-800 p-8 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6 px-2",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-zinc-100 dark:bg-zinc-900 flex items-center justify-center text-zinc-500",children:(0,r.jsx)(eP.A,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black text-zinc-900 dark:text-white",children:"Conversation History"}),(0,r.jsx)("p",{className:"text-xs font-bold text-zinc-400",children:"Your recent interactions"})]})]}),(0,r.jsx)("div",{className:"space-y-3",children:f.slice(0,5).map((e,t)=>{var a,s,i,n;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-100 dark:border-zinc-800/50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(P.eu,{className:"w-10 h-10 border-2 border-white dark:border-zinc-800",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(e.lead_id)}),(0,r.jsx)(P.q5,{children:null===(a=e.name)||void 0===a?void 0:a.slice(0,2)})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("p",{className:"font-bold text-zinc-900 dark:text-white",children:e.name}),(0,r.jsx)(O.E,{variant:"outline",className:"text-[10px] h-5 px-1.5 border-zinc-200 text-zinc-500",children:(0,_.n4)(e.phone_number||"Unknown")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,r.jsx)("span",{className:(0,_.cn)("text-[10px] font-black uppercase tracking-wider","CONNECTED"===e.status?"text-emerald-600":"VOICEMAIL"===e.status?"text-amber-600":"text-zinc-500"),children:null===(s=e.status)||void 0===s?void 0:s.replace("_"," ")}),e.duration&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-zinc-300",children:"•"}),(0,r.jsxs)("span",{className:"text-[10px] font-medium text-zinc-400 flex items-center gap-1",children:[(0,r.jsx)(eO.A,{className:"w-3 h-3"}),Math.floor(e.duration/60),"m ",e.duration%60,"s"]})]})]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-1",children:"Outcome"}),(0,r.jsx)(O.E,{className:(0,_.cn)("font-bold border-0",(null===(i=e.outcome)||void 0===i?void 0:i.includes("WON"))?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400"),children:(null===(n=e.outcome)||void 0===n?void 0:n.replace("CLOSE_",""))||"LOGGED"})]})]},t)})})]})]})};var eJ=a(15785),eY=a(10371),eG=a(50745),e$=a(80843);let eV=[{value:"CONNECTED",label:"Connected",icon:J.A,color:"text-emerald-500"},{value:"VOICEMAIL",label:"Voicemail",icon:ed.A,color:"text-amber-500"},{value:"NO_ANSWER",label:"No Answer",icon:eD.A,color:"text-zinc-500"},{value:"BUSY",label:"Busy",icon:p.A,color:"text-blue-500"},{value:"WRONG_PERSON",label:"Wrong Person",icon:e$.A,color:"text-red-500"},{value:"NOT_INTERESTED",label:"Not Interested",icon:$.A,color:"text-red-600"}],eQ=[{value:"CLOSE_WON",label:"Booked / Won",icon:w.A,color:"text-emerald-600"},{value:"CLOSE_LOST",label:"Closed / Lost",icon:$.A,color:"text-red-600"},{value:"RETRY_NOW",label:"Retry Immediately (AI)",icon:W.A,color:"text-orange-600"},{value:"RETRY_SCHEDULED",label:"Schedule Follow-up",icon:b.A,color:"text-amber-600"}],eK=e=>{let{isOpen:t,onClose:a,lead:l,onSuccess:c}=e,[o,x]=(0,s.useState)(""),[m,h]=(0,s.useState)(0),[f,j]=(0,s.useState)(""),[v,N]=(0,s.useState)(""),[k,A]=(0,s.useState)(void 0),[C,E]=(0,s.useState)(!1),[S,I]=(0,s.useState)("context"),[D,R]=(0,s.useState)(!1),[T,P]=(0,s.useState)([]),[O,F]=(0,s.useState)(null);(0,s.useEffect)(()=>{t&&l.item_id&&(R(!0),Z.F.get("/user-queue/".concat(l.item_id,"/context")).then(e=>{P(e.history||[]),F(e.ai_call_history||{})}).catch(e=>console.error("Failed to fetch lead context",e)).finally(()=>R(!1)))},[t,l.item_id]);let U=async()=>{if(!o){y.oR.error("Please select a call status");return}E(!0);try{let e={status:o,duration:m,notes:f,next_action:v,retry_scheduled_for:null==k?void 0:k.toISOString(),user_id:"me"};await Z.F.post("/user-queue/".concat(l.item_id,"/call-status"),e),y.oR.success("Call outcome logged successfully"),c(),a(),x(""),h(0),j(""),N(""),A(void 0),I("context")}catch(e){y.oR.error(e.message||"Failed to log call outcome")}finally{E(!1)}};return(0,r.jsx)(L.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,r.jsxs)(L.Cf,{className:"max-w-4xl rounded-[2.5rem] border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-950 p-0 overflow-hidden flex flex-col h-[85vh]",children:[(0,r.jsxs)("div",{className:"bg-emerald-600 p-8 text-white relative flex-shrink-0",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:(0,r.jsx)(K.A,{className:"w-24 h-24"})}),(0,r.jsx)(L.c7,{children:(0,r.jsxs)(L.L3,{className:"text-3xl font-black tracking-tight flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center text-white backdrop-blur-sm",children:(0,r.jsx)("span",{className:"text-2xl",children:l.name.charAt(0)})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:l.name}),(0,r.jsxs)("div",{className:"text-lg font-medium opacity-80 mt-1 flex items-center gap-3",children:[(0,r.jsx)(K.A,{className:"w-4 h-4"})," ",l.id]})]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-8 bg-black/20 p-1 rounded-xl w-fit",children:[(0,r.jsx)("button",{onClick:()=>I("context"),className:(0,_.cn)("px-6 py-2 rounded-lg text-sm font-bold transition-all","context"===S?"bg-white text-emerald-600 shadow-lg":"text-white/70 hover:text-white"),children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)(ew.A,{className:"w-4 h-4"}),"Context & Scripts"]})}),(0,r.jsx)("button",{onClick:()=>I("history"),className:(0,_.cn)("px-6 py-2 rounded-lg text-sm font-bold transition-all","history"===S?"bg-white text-emerald-600 shadow-lg":"text-white/70 hover:text-white"),children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.A,{className:"w-4 h-4"}),"Call History"]})})]})]}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,r.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8 bg-white dark:bg-zinc-900 border-r border-zinc-200 dark:border-zinc-800",children:D?(0,r.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,r.jsx)(W.A,{className:"w-8 h-8 animate-spin text-zinc-300"})}):"context"===S?(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 mb-4 flex items-center gap-2",children:[(0,r.jsx)(g.A,{className:"w-4 h-4 text-emerald-500"}),"Latest AI Transcript"]}),(0,r.jsx)("div",{className:"space-y-4",children:(()=>{let e=T.find(e=>"AI"===e.type);if(!e||!e.full_transcript)return(0,r.jsx)("div",{className:"p-8 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-3xl text-center text-zinc-400",children:"No transcript available for this lead."});let t=[];try{if(Array.isArray(e.full_transcript))t=e.full_transcript;else if("string"==typeof e.full_transcript){if(!e.full_transcript.trim().startsWith("["))return(0,r.jsx)("div",{className:"whitespace-pre-wrap text-sm font-mono text-zinc-600 dark:text-zinc-400 leading-relaxed bg-zinc-50 dark:bg-zinc-950 p-6 rounded-3xl border border-zinc-100 dark:border-zinc-800",children:e.full_transcript});t=JSON.parse(e.full_transcript)}}catch(e){return(0,r.jsx)("div",{className:"text-sm text-red-500",children:"Error parsing transcript"})}return(0,r.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,r.jsx)("div",{className:(0,_.cn)("flex gap-4 p-4 rounded-2xl text-sm leading-relaxed max-w-2xl","assistant"===e.role||"agent"===e.role?"bg-emerald-50 dark:bg-emerald-900/10 text-emerald-900 dark:text-emerald-200 mr-auto rounded-tl-none border border-emerald-100 dark:border-emerald-900/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 ml-auto rounded-tr-none"),children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"text-[10px] font-bold uppercase tracking-wider opacity-50 mb-1",children:e.role}),e.content]})},t))})})()})]}),(null==O?void 0:O.extracted_data)&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 mb-4 mt-8 flex items-center gap-2",children:[(0,r.jsx)(w.A,{className:"w-4 h-4 text-emerald-500"}),"Extracted Data"]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(O.extracted_data).map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl border border-zinc-100 dark:border-zinc-800",children:[(0,r.jsx)("div",{className:"text-[10px] font-bold uppercase text-zinc-400 mb-1",children:t.replace(/_/g," ")}),(0,r.jsx)("div",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-200 truncate",title:String(a),children:String(a)})]},t)})})]})]}):(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"relative border-l-2 border-zinc-100 dark:border-zinc-800 ml-3 space-y-8 py-2",children:[T.map((e,t)=>(0,r.jsxs)("div",{className:"relative pl-8",children:[(0,r.jsx)("div",{className:(0,_.cn)("absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white dark:border-zinc-900 shadow-sm","AI"===e.type?"bg-emerald-500":"bg-blue-500")}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:(0,_.cn)("text-[10px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full","AI"===e.type?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"),children:[e.type," CALL"]}),(0,r.jsx)("span",{className:"text-xs font-medium text-zinc-400",children:(0,d.GP)(new Date(e.created_at),"MMM d, h:mm a")})]}),(0,r.jsx)("div",{className:"text-xs font-bold text-zinc-500",children:e.status})]}),(0,r.jsxs)("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-100 dark:border-zinc-800/50",children:[e.summary&&(0,r.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 mb-3 leading-relaxed",children:e.summary}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs font-medium text-zinc-400 border-t border-zinc-200/50 dark:border-zinc-700/50 pt-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(p.A,{className:"w-3.5 h-3.5"}),e.duration,"s"]}),e.recording_url&&(0,r.jsxs)("a",{href:e.recording_url,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1.5 text-emerald-600 hover:underline",children:[(0,r.jsx)(u.A,{className:"w-3.5 h-3.5 fill-current"}),"Recording"]})]})]})]},t)),0===T.length&&(0,r.jsx)("div",{className:"text-center py-12 text-zinc-400",children:"No call history found."})]})})}),(0,r.jsxs)("div",{className:"w-[400px] bg-zinc-50/50 dark:bg-zinc-950/50 p-8 flex flex-col gap-6 overflow-y-auto border-l border-zinc-100 dark:border-zinc-800",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(eJ.J,{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 pl-1",children:"Call Result"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:eV.map(e=>(0,r.jsxs)("button",{onClick:()=>x(e.value),className:(0,_.cn)("flex flex-col items-center justify-center gap-1.5 p-3 rounded-2xl border-2 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",o===e.value?"border-emerald-500 bg-emerald-500/5 shadow-md shadow-emerald-500/10":"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 hover:border-zinc-300 dark:hover:border-zinc-700"),children:[(0,r.jsx)(e.icon,{className:(0,_.cn)("w-5 h-5",o===e.value?"text-emerald-500":e.color)}),(0,r.jsx)("span",{className:(0,_.cn)("text-[9px] font-black uppercase tracking-wider",o===e.value?"text-emerald-600":"text-zinc-500"),children:e.label})]},e.value))})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(eJ.J,{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 pl-1",children:"Duration (min)"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(p.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-400"}),(0,r.jsx)("input",{type:"number",value:m,onChange:e=>h(parseInt(e.target.value)||0),className:"w-full pl-12 pr-4 h-12 rounded-2xl bg-white dark:bg-zinc-900 border-2 border-zinc-200 dark:border-zinc-800 font-bold focus:border-emerald-500 transition-all outline-none text-sm"})]})]}),(0,r.jsxs)("div",{className:"space-y-3 flex-1 flex flex-col",children:[(0,r.jsx)(eJ.J,{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 pl-1",children:"Internal Notes"}),(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(ew.A,{className:"absolute left-4 top-4 w-4 h-4 text-zinc-400"}),(0,r.jsx)(eY.T,{placeholder:"Details...",value:f,onChange:e=>j(e.target.value),className:"w-full h-full pl-12 pr-4 pt-4 rounded-3xl bg-white dark:bg-zinc-900 border-2 border-zinc-200 dark:border-zinc-800 font-medium focus:border-emerald-500 transition-all outline-none resize-none text-sm"})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(eJ.J,{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 pl-1",children:"Next Action"}),(0,r.jsxs)(eG.l6,{value:v,onValueChange:N,children:[(0,r.jsx)(eG.bq,{className:"h-12 rounded-2xl border-2 border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 font-bold text-sm",children:(0,r.jsx)(eG.yv,{placeholder:"What's next?"})}),(0,r.jsx)(eG.gC,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800",children:eQ.map(e=>(0,r.jsx)(eG.eb,{value:e.value,className:"h-10 font-bold focus:bg-emerald-500/10 focus:text-emerald-600",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(e.icon,{className:(0,_.cn)("w-4 h-4",e.color)}),e.label]})},e.value))})]})]}),(0,r.jsx)(i.N,{children:"RETRY_SCHEDULED"===v&&(0,r.jsxs)(n.P.div,{initial:{opacity:0,scale:.95,height:0},animate:{opacity:1,scale:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[(0,r.jsx)(eJ.J,{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 pl-1",children:"Follow-up"}),(0,r.jsxs)(ex.AM,{children:[(0,r.jsx)(ex.Wv,{asChild:!0,children:(0,r.jsxs)(z.$,{variant:"outline",className:(0,_.cn)("w-full h-12 rounded-2xl border-2 border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 font-bold text-left justify-start text-sm",!k&&"text-muted-foreground"),children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4"}),k?(0,d.GP)(k,"PPP 'at' HH:mm"):(0,r.jsx)("span",{children:"Pick a time"})]})}),(0,r.jsx)(ex.hl,{className:"w-auto p-4 rounded-3xl overflow-hidden bg-white dark:bg-zinc-950 border-2 border-zinc-100 dark:border-zinc-800",align:"start",children:(0,r.jsx)("input",{type:"datetime-local",className:"w-full bg-transparent font-bold outline-none",onChange:e=>A(new Date(e.target.value))})})]})]})}),(0,r.jsx)(z.$,{onClick:U,disabled:C,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-black h-14 rounded-3xl text-lg shadow-xl shadow-emerald-500/20 transition-all hover:scale-[1.02] active:scale-[0.98] mt-2",children:C?(0,r.jsx)(W.A,{className:"w-6 h-6 animate-spin"}):(0,r.jsx)(r.Fragment,{children:"SAVE & NEXT LEAD"})})]})]})]})})};var eX=a(91902),eZ=a(51719),e0=a(48617);let e1=e=>{let{structuredContext:t,aiSummary:a,className:s}=e;if(!t)return(0,r.jsx)("div",{className:(0,_.cn)("space-y-3",s),children:a?(0,r.jsx)("div",{className:"p-3 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-100 dark:border-zinc-700 text-[11px] font-medium leading-relaxed text-zinc-700 dark:text-zinc-300",children:a}):(0,r.jsx)("p",{className:"text-xs text-zinc-400 italic",children:"No summary available."})});let i=[{icon:w.A,label:"Intent",value:t.intent,color:"text-orange-500",bgColor:"bg-orange-50 dark:bg-orange-500/10",borderColor:"border-orange-200 dark:border-orange-500/20"},{icon:J.A,label:"Key Needs",value:t.key_needs,color:"text-emerald-500",bgColor:"bg-emerald-50 dark:bg-emerald-500/10",borderColor:"border-emerald-200 dark:border-emerald-500/20",isList:!0},{icon:p.A,label:"Timeline",value:t.timeline,color:"text-blue-500",bgColor:"bg-blue-50 dark:bg-blue-500/10",borderColor:"border-blue-200 dark:border-blue-500/20"},{icon:Q.A,label:"Constraints",value:t.constraints,color:"text-amber-500",bgColor:"bg-amber-50 dark:bg-amber-500/10",borderColor:"border-amber-200 dark:border-amber-500/20",isList:!0},{icon:eF.A,label:"Next Action",value:t.next_action,color:"text-purple-500",bgColor:"bg-purple-50 dark:bg-purple-500/10",borderColor:"border-purple-200 dark:border-purple-500/20",highlight:!0}];return(0,r.jsxs)("div",{className:(0,_.cn)("space-y-3",s),children:[i.map((e,t)=>{let a=e.icon;return(e.isList?Array.isArray(e.value)&&e.value.length>0:e.value&&"Not specified"!==e.value&&"Not mentioned"!==e.value)?(0,r.jsx)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:(0,_.cn)("p-3 rounded-xl border transition-all",e.bgColor,e.borderColor,e.highlight&&"ring-2 ring-purple-500/20"),children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(a,{className:(0,_.cn)("w-4 h-4 mt-0.5 shrink-0",e.color)}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-500",children:e.label}),e.highlight&&(0,r.jsx)(O.E,{className:"h-4 px-1.5 text-[8px] font-black bg-purple-500 text-white border-0",children:"RECOMMENDED"})]}),e.isList?(0,r.jsx)("ul",{className:"space-y-1",children:e.value.map((t,a)=>(0,r.jsxs)("li",{className:"text-[11px] font-semibold text-zinc-700 dark:text-zinc-300 flex items-start gap-1.5",children:[(0,r.jsx)("span",{className:(0,_.cn)("mt-1.5 w-1 h-1 rounded-full shrink-0",e.color.replace("text-","bg-"))}),(0,r.jsx)("span",{children:t})]},a))}):(0,r.jsx)("p",{className:"text-[11px] font-semibold text-zinc-700 dark:text-zinc-300 leading-relaxed",children:e.value})]})]})},e.label):null}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-1.5 pt-2",children:[(0,r.jsx)(g.A,{className:"w-3 h-3 text-zinc-400"}),(0,r.jsx)("span",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-wider",children:"AI-Extracted Insights"})]})]})},e5=e=>{var t,a,i,l,c,o,x;let{isOpen:p,onClose:u,leadId:f,itemId:j,leadName:v}=e,[N,w]=(0,s.useState)(!0),[k,y]=(0,s.useState)(null),[A,C]=(0,s.useState)(null),S=async()=>{w(!0);try{let e=await Z.F.get("/user-queue/".concat(j,"/context"));y(e)}catch(e){}finally{w(!1)}};(0,s.useEffect)(()=>{p&&(j?S():(w(!1),y(null)))},[p,j]);let I=[];return k&&(k.ai_call_history&&(Array.isArray(k.ai_call_history)?k.ai_call_history:[k.ai_call_history]).forEach((e,t)=>{e&&0!==Object.keys(e).length&&I.push({id:"ai-".concat(t),type:"AI_CALL",timestamp:e.created_at||e.timestamp,duration:e.call_duration||e.duration,agent_name:e.agent_id||"Maya",summary:e.transcript_summary||e.summary,outcome:e.call_status||e.outcome,transcript:e.transcript})}),k.user_call_logs&&k.user_call_logs.forEach(e=>{I.push({id:e.id,type:"USER_CALL",timestamp:e.created_at,duration:e.duration,agent_name:"You",summary:e.notes,outcome:e.status})}),I.sort((e,t)=>{let a=e.timestamp?new Date(e.timestamp).getTime():0,r=t.timestamp?new Date(t.timestamp).getTime():0;return(isNaN(r)?0:r)-(isNaN(a)?0:a)})),(0,r.jsx)(L.lG,{open:p,onOpenChange:e=>!e&&u(),children:(0,r.jsxs)(L.Cf,{className:"max-w-3xl rounded-[3rem] border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 p-0 overflow-hidden h-[85vh] flex flex-col",children:[(0,r.jsxs)(L.L3,{className:"sr-only",children:["Call Context for ",v]}),(0,r.jsx)(L.rr,{className:"sr-only",children:"View execution history and details for this lead."}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-orange-600 to-orange-800 p-8 text-white",children:(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)(P.eu,{className:"w-20 h-20 border-4 border-white/20 shadow-2xl",children:[(0,r.jsx)(P.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(f)}),(0,r.jsx)(P.q5,{children:v.slice(0,2).toUpperCase()})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h2",{className:"text-4xl font-black tracking-tight",children:v}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(O.E,{className:"bg-white/20 hover:bg-white/30 text-white border-white/10 font-black",children:(0,_.n4)(null==k?void 0:null===(t=k.lead)||void 0===t?void 0:t.contact_number)}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 text-orange-100 text-sm font-bold",children:[(0,r.jsx)(g.A,{className:"w-4 h-4"}),Math.round(100*((null==k?void 0:null===(a=k.user_queue_item)||void 0===a?void 0:a.intent_strength)||0)),"% Intent Strength"]})]})]})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col",children:N?(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsx)(h.A,{className:"w-10 h-10 animate-spin text-orange-500"})}):(0,r.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row divide-x divide-zinc-100 dark:divide-zinc-800",children:[(0,r.jsxs)("div",{className:"w-full md:w-64 p-6 space-y-8 bg-zinc-50/50 dark:bg-zinc-900/10",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-zinc-400 mb-4",children:"Engagement Stats"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-xs font-bold text-zinc-500",children:"AI Attempts"}),(0,r.jsx)("span",{className:"text-xs font-black text-zinc-900 dark:text-white",children:(null==k?void 0:null===(i=k.ai_call_history)||void 0===i?void 0:i.length)||0})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-xs font-bold text-zinc-500",children:"User Attempts"}),(0,r.jsx)("span",{className:"text-xs font-black text-zinc-900 dark:text-white",children:(null==k?void 0:null===(l=k.user_call_logs)||void 0===l?void 0:l.length)||0})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-xs font-bold text-zinc-500",children:"Total Duration"}),(0,r.jsx)("span",{className:"text-xs font-black text-zinc-900 dark:text-white",children:"~12 mins"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-zinc-400 mb-4",children:"Confirmed Time"}),(null==k?void 0:null===(c=k.user_queue_item)||void 0===c?void 0:c.confirmation_slot)?(0,r.jsxs)("div",{className:"p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-2xl flex items-center gap-3",children:[(0,r.jsx)(b.A,{className:"w-5 h-5 text-emerald-600"}),(0,r.jsxs)("div",{className:"leading-tight",children:[(0,r.jsx)("p",{className:"text-xs font-black text-emerald-700",children:(0,d.GP)(new Date(k.user_queue_item.confirmation_slot),"MMM do")}),(0,r.jsx)("p",{className:"text-[10px] font-bold text-emerald-600",children:(0,d.GP)(new Date(k.user_queue_item.confirmation_slot),"h:mm a")})]})]}):(0,r.jsx)("p",{className:"text-xs text-zinc-400 font-medium italic",children:"No preferred slot detected."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-zinc-400 mb-4",children:"Extracted Context"}),(0,r.jsx)(e1,{structuredContext:null==k?void 0:null===(o=k.user_queue_item)||void 0===o?void 0:o.structured_context,aiSummary:null==k?void 0:null===(x=k.user_queue_item)||void 0===x?void 0:x.ai_summary})]})]}),(0,r.jsxs)("div",{className:"flex-1 p-6 overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,r.jsx)(eP.A,{className:"w-5 h-5 text-orange-500"}),(0,r.jsx)("h4",{className:"text-base font-black text-zinc-900 dark:text-white tracking-tight",children:"Timeline & Interactions"})]}),(0,r.jsx)(ee.F,{className:"flex-1 pr-4",children:(0,r.jsx)("div",{className:"space-y-6 relative ml-4 border-l-2 border-zinc-100 dark:border-zinc-800 pl-8",children:I.map(e=>(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:(0,_.cn)("absolute -left-[45px] top-4 w-8 h-8 rounded-full border-4 border-white dark:border-zinc-950 flex items-center justify-center shadow-lg transition-transform group-hover:scale-110","AI_CALL"===e.type?"bg-orange-500":"bg-emerald-500"),children:"AI_CALL"===e.type?(0,r.jsx)(m.A,{className:"w-4 h-4 text-white"}):(0,r.jsx)(E.A,{className:"w-4 h-4 text-white"})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-sm font-black text-zinc-900 dark:text-white",children:e.agent_name}),(0,r.jsx)(O.E,{variant:"secondary",className:(0,_.cn)("text-[9px] font-black uppercase tracking-widest px-2 py-0","AI_CALL"===e.type?"bg-orange-50 text-orange-600":"bg-emerald-50 text-emerald-600"),children:"AI_CALL"===e.type?"AI Agent":"Human Agent"})]}),(0,r.jsx)("span",{className:"text-[10px] font-bold text-zinc-400",children:(()=>{try{if(!e.timestamp)return"N/A";let t=new Date(e.timestamp);if(isNaN(t.getTime()))return"Invalid Date";return(0,d.GP)(t,"MMM d, h:mm a")}catch(e){return"N/A"}})()})]}),(0,r.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-3xl p-5 border border-zinc-100 dark:border-zinc-800 group-hover:border-orange-500/20 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:(0,_.cn)("w-2 h-2 rounded-full",["CONNECTED","CONNECTED_SUCCESS","SUCCESS","WON"].includes(e.outcome)?"bg-emerald-500":"bg-amber-500")}),(0,r.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:e.outcome})]}),(0,r.jsxs)("p",{className:"text-xs font-bold text-zinc-400",children:[e.duration," seconds"]})]}),e.transcript&&(0,r.jsxs)(z.$,{variant:"ghost",size:"sm",className:"h-8 rounded-xl text-orange-500 font-bold text-[10px]",onClick:()=>C(A===e.id?null:e.id),children:[A===e.id?"Hide Transcript":"View Details",A===e.id?(0,r.jsx)(eX.A,{className:"w-3 h-3 ml-1"}):(0,r.jsx)(eZ.A,{className:"w-3 h-3 ml-1"})]})]}),(0,r.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 font-semibold leading-relaxed",children:e.summary||"No specific details logged for this interaction."}),A===e.id&&(0,r.jsxs)(n.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-6 pt-6 border-t border-zinc-100 dark:border-zinc-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(ew.A,{className:"w-3.5 h-3.5 text-zinc-400"}),(0,r.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:"Transcript Preview"})]}),(0,r.jsx)("div",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 space-y-2 whitespace-pre-wrap italic",children:e.transcript})]})]})]})]},e.id))})})]})]})}),(0,r.jsxs)("div",{className:"p-6 bg-zinc-50 dark:bg-zinc-900/50 border-t border-zinc-100 dark:border-zinc-800 flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-xs font-bold text-zinc-400 flex items-center gap-2",children:[(0,r.jsx)(e0.A,{className:"w-4 h-4"}),"This log is immutable and generated in real-time."]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(z.$,{variant:"ghost",className:"rounded-2xl font-bold h-12 px-6",onClick:u,children:"Close"}),(0,r.jsxs)(z.$,{className:"rounded-2xl bg-orange-600 hover:bg-orange-700 text-white font-black h-12 px-8 shadow-xl shadow-orange-500/20",children:[(0,r.jsx)(K.A,{className:"w-4 h-4 mr-2"}),"RESUME CALL FLOW"]})]})]})]})})},e2=e=>{let{status:t,activeAgents:a,executionWindows:i}=e,n=(0,s.useMemo)(()=>{if(!i||0===i.length)return"No Upcoming Windows";let e=new Date,t=null,a=[];i.forEach(r=>{try{let s=(0,l.H)("".concat(r.day,"T").concat(r.start)),i=(0,l.H)("".concat(r.day,"T").concat(r.end));(0,c.v)(e,{start:s,end:i})?t=r:s>e&&a.push({...r,_startDt:s})}catch(e){console.warn("Invalid window processing",r)}});let r=t;if(!r&&a.length>0&&(a.sort((e,t)=>e._startDt.getTime()-t._startDt.getTime()),r=a[0]),r)try{let e=(0,l.H)("".concat(r.day,"T").concat(r.start)),t=(0,l.H)("".concat(r.day,"T").concat(r.end)),a=(0,d.GP)(e,"MMM d");(0,o.c)(e)?a="Today":(0,x.e)(e)&&(a="Tomorrow");let s="".concat((0,d.GP)(e,"h:mm a")," - ").concat((0,d.GP)(t,"h:mm a"));return"".concat(a,", ").concat(s)}catch(e){return"".concat(r.day," ").concat(r.start)}return"No Upcoming Windows"},[i]);return(0,r.jsxs)("div",{className:"flex items-center justify-between bg-zinc-900/5 dark:bg-zinc-50/5 rounded-xl px-4 py-3 border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.A,{className:"w-5 h-5 text-orange-500"}),("WARMUP"===t||t.includes("ACTIVE"))&&(0,r.jsx)("span",{className:"absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full animate-pulse border-2 border-white dark:border-zinc-950"})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-wider",children:"Success Team"}),(0,r.jsx)("span",{className:"text-sm font-bold text-zinc-700 dark:text-zinc-200",children:"IDLE"===t?"Offline":"PAUSED"===t&&0===a?"Agents Ready":"".concat(a," Agents Active")})]})]}),(0,r.jsx)("div",{className:"h-8 w-px bg-zinc-200 dark:bg-zinc-800 mx-2"}),(0,r.jsxs)("div",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 flex items-center gap-2",children:["WARMUP"===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.A,{className:"w-3 h-3 animate-spin"}),(0,r.jsx)("span",{children:"Warming up connection pool..."})]}),"ACTIVE_EMPTY"===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.A,{className:"w-3 h-3 animate-spin text-orange-500"}),(0,r.jsx)("span",{className:"text-orange-600 dark:text-orange-400",children:"Buffer depleting - Finding fresh leads..."})]}),"ACTIVE_READY"===t&&(0,r.jsxs)("span",{className:"text-emerald-600 dark:text-emerald-400 flex items-center gap-1.5",children:[(0,r.jsx)(g.A,{className:"w-3 h-3"}),"System Active. Dialing in background."]}),"PAUSED"===t&&(0,r.jsxs)("span",{className:"text-orange-600 dark:text-orange-400 flex items-center gap-1.5",children:[(0,r.jsx)(m.A,{className:"w-3 h-3"}),"Standby Mode. Agents primed and ready."]})]})]}),n&&(0,r.jsxs)("div",{className:"flex flex-col items-end sm:flex-row sm:items-center gap-2 sm:gap-3 px-4 py-2 bg-white dark:bg-zinc-900 rounded-lg border border-zinc-200/50 dark:border-zinc-800/50 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"p-1.5 rounded-md bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400",children:(0,r.jsx)(p.A,{className:"w-3.5 h-3.5"})}),(0,r.jsx)("span",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-wider",children:"Booking Window"})]}),(0,r.jsx)("div",{className:"h-4 w-px bg-zinc-200 dark:bg-zinc-800 hidden sm:block"}),(0,r.jsx)("span",{className:"text-xs font-bold text-zinc-700 dark:text-zinc-200 tabular-nums",children:n})]})]})};function e4(e){var t,a,c;let{campaignId:o,campaignStatus:x,hasStrategy:A=!0,wasLeadsUpdated:C=!1,onStatusChange:E,onModalStateChange:S,onEditStrategy:I,onScheduleUpdate:D}=e,{user:R,companyId:L,loading:T}=(0,e_.A)();console.log("DEBUG: ExecutionPanel Render",{campaignId:o,campaignStatus:x,hasStrategy:A,wasLeadsUpdated:C});let[P,O]=(0,s.useState)("IDLE"),[F,M]=(0,s.useState)([]),[q,H]=(0,s.useState)([]),[W,B]=(0,s.useState)([]),[J,Y]=(0,s.useState)([]),[G,$]=(0,s.useState)({}),[V,Q]=(0,s.useState)(2),[K,X]=(0,s.useState)([]),[ee,et]=(0,s.useState)(!1),[ea,er]=(0,s.useState)(!1),[es,ei]=(0,s.useState)(!1),[en,el]=(0,s.useState)(null),[ec,ed]=(0,s.useState)([]),[eo,ex]=(0,s.useState)(!1),[em,eh]=(0,s.useState)(!1),[eg,ep]=(0,s.useState)(!1),[eu,eb]=(0,s.useState)([]),[ef,ej]=(0,s.useState)(null),[ev,eN]=(0,s.useState)({connected:!1}),[ew,ek]=(0,s.useState)(!1),[eE,eS]=(0,s.useState)(null),[eI,eD]=(0,s.useState)(null),[eR,eL]=(0,s.useState)(!1),[eT,eP]=(0,s.useState)(!1),[eO,eF]=(0,s.useState)(!1),[eU,eM]=(0,s.useState)(!1),[eq,eH]=(0,s.useState)(!1),[eW,eJ]=(0,s.useState)(null),[eY,eG]=(0,s.useState)(!1),[e$,eV]=(0,s.useState)(0),[eQ,eX]=(0,s.useState)(null),[eZ,e0]=(0,s.useState)(!1),[e1,e4]=(0,s.useState)(!1),e3=(0,s.useRef)(0),e9=(0,s.useRef)(!1);(0,s.useEffect)(()=>{Date.now()-e3.current<3e3||("IN_PROGRESS"===x||"ACTIVE"===x?("IDLE"===P||"PAUSED"===P)&&O("ACTIVE_READY"):"COMPLETED"===x?"COMPLETED"!==P&&O("COMPLETED"):"SCHEDULED"===x?"SCHEDULED"!==P&&O("SCHEDULED"):"PAUSED"===x?"PAUSED"!==P&&O("PAUSED"):"DRAFT"===x&&"IDLE"!==P&&O("IDLE"))},[x,P]);let e6=s.useCallback(async()=>{if(R&&L)try{let e=await Z.F.get("/execution/campaign/".concat(o,"/active-status"),{"X-Company-ID":L});e.max_concurrency&&Q(e.max_concurrency),e.upcoming_leads&&H(t=>JSON.stringify(t)===JSON.stringify(e.upcoming_leads)?t:e.upcoming_leads),e.history&&B(t=>JSON.stringify(t)===JSON.stringify(e.history)?t:e.history),e.all_leads_by_cohort&&$(t=>JSON.stringify(t)===JSON.stringify(e.all_leads_by_cohort)?t:e.all_leads_by_cohort),e.execution_windows&&ed(t=>JSON.stringify(t)===JSON.stringify(e.execution_windows)?t:e.execution_windows)}catch(e){console.error("Failed to fetch initial execution config",e)}},[o,R,L]);(0,s.useEffect)(()=>{e6()},[e6]),(0,s.useEffect)(()=>{S&&S(eo)},[eo,S]);let e8=async()=>{if(R&&L)try{let e=await Z.F.get("/intelligence/calendar/status",{"X-Company-ID":L});eN(e)}catch(e){console.error("Failed to fetch calendar status",e)}};(0,s.useEffect)(()=>{e8()},[R,L]);let e7=async()=>{try{let e=await Z.F.get("/intelligence/calendar/google/login",{"X-Company-ID":L});e.url&&(window.location.href=e.url)}catch(e){y.oR.error("Failed to initiate calendar connection")}},{data:te,isConnected:tt}=(0,eA.T)(o),ta=(0,s.useRef)(!1),tr=(0,s.useRef)(new Map);(0,s.useEffect)(()=>{if(!te)return;let e=te.agents||[],t=tr.current,a=new Set(e.map(e=>e.agent_id));for(let e of t.keys())a.has(e)||t.delete(e);let r=new Set(t.values());e.forEach(e=>{if(!t.has(e.agent_id)){for(let a=0;a<V;a++)if(!r.has(a)){t.set(e.agent_id,a),r.add(a);break}}});let s=Array(V).fill(null);if(e.forEach(e=>{let a=t.get(e.agent_id);void 0!==a&&a<V&&(s[a]=e)}),M(s),H(e=>{let t=te.upcoming_leads||[];return JSON.stringify(e)===JSON.stringify(t)?e:t}),te.next_leads){let e=te.next_leads;Y(t=>JSON.stringify(t)===JSON.stringify(e)?t:e)}if(te.events){let e=te.events;X(t=>JSON.stringify(t)===JSON.stringify(e)?t:e)}if(te.history&&B(e=>JSON.stringify(e)===JSON.stringify(te.history)?e:te.history),te.all_leads_by_cohort&&$(e=>JSON.stringify(e)===JSON.stringify(te.all_leads_by_cohort)?e:te.all_leads_by_cohort),Q(e=>e===(te.max_concurrency||2)?e:te.max_concurrency||2),void 0!==te.is_completed&&et(e=>e===te.is_completed?e:te.is_completed),te.completion_data&&el(e=>JSON.stringify(e)===JSON.stringify(te.completion_data)?e:te.completion_data),te.execution_windows){let e=te.execution_windows;ed(t=>JSON.stringify(t)===JSON.stringify(e)?t:e)}te.campaign_status&&!(Date.now()-e3.current<3e3)&&("PAUSED"===te.campaign_status&&"PAUSED"!==P?(O("PAUSED"),E("PAUSED")):"COMPLETED"===te.campaign_status&&"COMPLETED"!==P?(O("COMPLETED"),E("COMPLETED")):("ACTIVE"===te.campaign_status||"IN_PROGRESS"===te.campaign_status)&&"IDLE"===P&&(O("ACTIVE_READY"),E(te.campaign_status))),"WARMUP"===P&&(te.agents||[]).length>0&&O("ACTIVE_READY")},[te,P,E]),(0,s.useEffect)(()=>{(null==te?void 0:te.event)==="user_queue_update"&&(e6(),eV(Date.now()))},[null==te?void 0:te.event,e6]),(0,s.useEffect)(()=>{(async()=>{if(R&&L&&(ee||"COMPLETED"===x)&&!en)try{let e=await Z.F.get("/execution/campaign/".concat(o,"/completion-data"),{"X-Company-ID":L});e&&Object.keys(e).length>0&&el(e)}catch(e){console.error("[ExecutionPanel] Failed to fetch completion data:",e)}})()},[ee,x,en,o,R,L]),(0,s.useEffect)(()=>{(async()=>{let e=!!en&&en.total_completed>=en.total_targets;if((ee||e)&&("ACTIVE_READY"===P||"IN_CALL"===P||"WARMUP"===P))try{await tc()}catch(e){console.error("Failed to auto-pause on completion/target hit",e)}})()},[ee,en,P]),(0,s.useEffect)(()=>{let e=async()=>{if("IDLE"!==P&&!tt&&!ta.current&&R&&L)try{ta.current=!0;let[e,t]=await Promise.all([Z.F.get("/execution/campaign/".concat(o,"/next-leads"),{"X-Company-ID":L}),Z.F.get("/execution/campaign/".concat(o,"/events"),{"X-Company-ID":L})]);Y(t=>JSON.stringify(t)===JSON.stringify(e||[])?t:e||[]),X(e=>JSON.stringify(e)===JSON.stringify(t||[])?e:t||[])}catch(e){console.error("Failed to fetch initial side data",e)}};"IDLE"===P||"COMPLETED"===P||"SCHEDULED"===P||tt||e()},[P,o,R,L,tt]);let ts=(0,s.useRef)(ec);(0,s.useEffect)(()=>{ts.current=ec},[ec]);let ti=e=>{if(!e||0===e.length)return{isInWindow:!0,nextWindow:null};let t=new Date,a=!1,r=[];e.forEach(e=>{try{let s=(0,l.H)("".concat(e.day,"T").concat(e.start)),i=(0,l.H)("".concat(e.day,"T").concat(e.end)),n=new Date(s.getTime()-12e4),c=new Date(i.getTime()-18e5);t>=n&&t<=i?t<c&&(a=!0):n>t&&r.push({...e,_startDt:n})}catch(t){console.warn("Invalid window format",e)}});let s=r.length>0?r.sort((e,t)=>e._startDt.getTime()-t._startDt.getTime())[0]:null;return{isInWindow:a,nextWindow:s}},tn=()=>{let{isInWindow:e}=ti(ts.current);return e},tl=async()=>{if(R){if(e3.current=Date.now(),C||"DRAFT"===x){ei(!0);return}if(!e9.current&&!tn()){ej(()=>tl),eb(JSON.parse(JSON.stringify(ec))),ex(!0);return}e9.current=!1;try{let e=await Z.F.post("/execution/campaign/".concat(o,"/pause"));if(e&&e.data){let t=e.data;t.agents&&M(t.agents),t.upcoming_leads&&H(t.upcoming_leads),t.history&&B(t.history),t.all_leads_by_cohort&&$(t.all_leads_by_cohort),t.events&&X(t.events),t.next_leads&&Y(t.next_leads)}y.oR.success("AI Agents Initialized",{description:"Session is ready. Agents are standing by and lead buffer is being prepared."}),e4(!0),E("PAUSED"),O("PAUSED")}catch(s){var e,t;let a=s.message||"",r=null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail;a.toLowerCase().includes("execution window")||"string"==typeof r&&r.toLowerCase().includes("execution window")?(ej(()=>tl),eb(JSON.parse(JSON.stringify(ec))),ex(!0)):(null==r?void 0:r.toLowerCase().includes("strategy"))||(null==a?void 0:a.toLowerCase().includes("strategy"))?eH(!0):(console.error("Failed to start session",s),y.oR.error("Failed to initialize session"))}}},tc=async()=>{if(R){e3.current=Date.now();try{await Z.F.post("/execution/campaign/".concat(o,"/pause")),E("PAUSED"),O("PAUSED")}catch(e){console.error("Failed to pause session",e)}}},td=async()=>{if(R){if(e3.current=Date.now(),C||"DRAFT"===x){ei(!0);return}if(!e9.current&&!tn()){ej(()=>td),eb(JSON.parse(JSON.stringify(ec))),ex(!0);return}e9.current=!1;try{await Z.F.post("/execution/campaign/".concat(o,"/start")),e4(!0),E("IN_PROGRESS"),O("ACTIVE_READY")}catch(s){var e,t;let a=s.message||"",r=null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail;a.toLowerCase().includes("execution window")||"string"==typeof r&&r.toLowerCase().includes("execution window")?(ej(()=>td),eb(JSON.parse(JSON.stringify(ec))),ex(!0)):(null==r?void 0:r.toLowerCase().includes("strategy"))||(null==a?void 0:a.toLowerCase().includes("strategy"))?eH(!0):(console.error("Failed to resume session",s),y.oR.error("Failed to resume session"))}}},to=async()=>{if(R){ep(!0),e3.current=Date.now();try{let e=await Z.F.post("/execution/campaign/".concat(o,"/reset"));if(y.oR.success("Campaign Reset",{description:"All failures have been cleared. Agents are ready to start fresh."}),e&&e.data){let t=e.data;t.agents&&M(t.agents),t.upcoming_leads&&H(t.upcoming_leads),t.history&&B(t.history),t.all_leads_by_cohort&&$(t.all_leads_by_cohort),void 0!==t.is_exhausted&&er(t.is_exhausted),et(!1),el(null)}O("PAUSED"),E("PAUSED")}catch(e){console.error("Failed to reset campaign",e),y.oR.error("Failed to reset campaign")}finally{ep(!1)}}},tx=async e=>{eh(!0);try{if(await Z.F.patch("/intelligence/campaigns/".concat(o,"/settings"),{execution_windows:eu}),ed(eu),ts.current=eu,ev.connected)try{let t=Intl.DateTimeFormat().resolvedOptions().timeZone;await Z.F.post("/intelligence/campaigns/".concat(o,"/calendar-sync"),{timezone:t});let a=e&&!!ef;y.oR.success(a?"Schedule Saved & Starting...":"Schedule Updated",{description:a?"Agents are starting now.":"Campaign is queued for the next window."})}catch(e){console.error("Calendar sync failed",e),y.oR.warning("Schedule Updated",{description:"Windows saved, but calendar sync failed."})}else{let t=e&&!!ef;y.oR.success(t?"Schedule Saved & Starting...":"Schedule Updated",{description:t?"Agents are starting now.":"Campaign is queued for the next window."})}ex(!1),eF(!1),eM(!1),D&&D(eu),e&&ef&&(y.oR.info("Auto-starting session...",{duration:2e3}),e9.current=!0,await ef()),ej(null)}catch(e){console.error("Failed to update schedule",e),y.oR.error("Failed to update execution schedule")}finally{eh(!1)}},tm=async(e,t)=>{try{"approve"===e?(await Z.F.patch("/execution/lead/".concat(t,"/approve")),y.oR.success("Lead Approved",{description:"Moving to scheduled queue."})):"retry"===e?(await Z.F.post("/execution/campaign/".concat(o,"/retry/").concat(t)),y.oR.success("Retry Initiated",{description:"Lead has been re-queued for dialing."})):y.oR.info("Reschedule clicked",{description:"Manual rescheduling interface coming soon."})}catch(t){y.oR.error("Action Failed",{description:"Could not ".concat("retry"===e?"retry":"update"," lead status.")})}},th=F.filter(e=>null!==e).length,tg=["WARMUP","ACTIVE_EMPTY","ACTIVE_READY","IN_CALL","OUTCOME","PAUSED","COMPLETED"].includes(P),[tp,tu]=(0,s.useState)("live"),[tb,tf]=(0,s.useState)(0);(0,s.useEffect)(()=>{let e=localStorage.getItem("unclutr_feed_cleared_at_".concat(o));e&&tf(parseInt(e,10))},[o]);let tj=(0,s.useMemo)(()=>"all"!==tp&&tb?K.filter(e=>(0,_.sY)(e.timestamp).getTime()>tb):K,[K,tb,tp]),tv=async()=>{ep(!0);try{await Z.F.post("/execution/campaign/".concat(o,"/replenish")),y.oR.success("Replenishing Queue",{description:"Short calls (<10s) have been reset and added back."})}catch(e){y.oR.error("Replenish Failed",{description:"Could not replenish leads. Please try again."})}finally{ep(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.N,{mode:"wait",children:["IDLE"===P&&(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,filter:"blur(10px)"},transition:{duration:.5,ease:"easeOut"},className:"relative w-full overflow-hidden rounded-[32px] border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 shadow-2xl shadow-orange-500/10",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-orange-50/50 via-white to-white dark:from-orange-950/20 dark:via-zinc-950 dark:to-zinc-950 pointer-events-none"}),(0,r.jsx)("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-orange-500/5 blur-[120px] rounded-full pointer-events-none mix-blend-multiply dark:mix-blend-screen"}),(0,r.jsxs)("div",{className:"relative z-10 px-12 py-16 flex flex-col md:flex-row items-center justify-between gap-12",children:[(0,r.jsxs)("div",{className:"flex-1 space-y-8 max-w-2xl",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-orange-500 blur-lg opacity-20 animate-pulse"}),(0,r.jsx)("div",{className:"relative w-12 h-12 rounded-2xl bg-gradient-to-br from-orange-500 to-violet-600 flex items-center justify-center text-white shadow-lg shadow-orange-500/25 ring-4 ring-orange-50 dark:ring-orange-900/20",children:(0,r.jsx)(g.A,{className:"w-6 h-6"})})]}),(0,r.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-zinc-200 to-transparent dark:from-zinc-800"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.P.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-4xl md:text-5xl font-black text-zinc-900 dark:text-white mb-4 tracking-tight leading-[1.1]",children:A?(0,r.jsxs)(r.Fragment,{children:["Ready to ",(0,r.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-violet-600 dark:from-orange-400 dark:to-violet-400",children:"Execute?"})]}):(0,r.jsxs)(r.Fragment,{children:["Strategy ",(0,r.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-amber-500 to-orange-600 dark:from-amber-400 dark:to-orange-400",children:"Required"})]})}),(0,r.jsx)(n.P.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-lg text-zinc-500 dark:text-zinc-400 font-medium leading-relaxed max-w-lg",children:A?(0,r.jsxs)(r.Fragment,{children:["Initializing this session will spin up ",(0,r.jsxs)("span",{className:"font-bold text-zinc-900 dark:text-zinc-200 border-b-2 border-orange-500/20",children:[V," AI Agents"]})," to autonomously dial, qualify, and transfer high-intent prospects from your list."]}):(0,r.jsxs)(r.Fragment,{children:["Your campaign leads have changed. You must re-configure your ",(0,r.jsx)("span",{className:"font-bold text-zinc-900 dark:text-zinc-200 border-b-2 border-amber-500/20",children:"Campaign Strategy"})," (cohorts and targets) before executing."]})})]})]}),(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"flex items-center gap-6",children:[(0,r.jsxs)("div",{className:"flex -space-x-3",children:[Array.from({length:V}).map((e,t)=>(0,r.jsxs)("div",{className:"w-10 h-10 rounded-full border-2 border-white dark:border-zinc-950 bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center relative overflow-hidden",children:[(0,r.jsx)(m.A,{className:"w-5 h-5 text-zinc-400"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-orange-500/10"})]},t)),(0,r.jsxs)("div",{className:"w-10 h-10 rounded-full border-2 border-white dark:border-zinc-950 bg-orange-50 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400 text-xs font-bold",children:["+",V]})]}),(0,r.jsx)("span",{className:"text-sm font-semibold text-zinc-400",children:"Agents typically connect in < 2 mins"})]})]}),(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-orange-500 to-violet-500 rounded-full blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"}),(0,r.jsxs)(z.$,{size:"lg",onClick:A&&"DRAFT"!==x?tl:I,className:(0,_.cn)("relative h-20 px-12 text-xl rounded-full transition-all shadow-2xl font-bold flex items-center gap-4 overflow-hidden","bg-zinc-900 dark:bg-white text-white dark:text-black hover:bg-zinc-800 hover:scale-[1.02] shadow-orange-500/20"),children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/0 via-white/10 to-orange-500/0 translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),(0,r.jsx)("div",{className:(0,_.cn)("w-12 h-12 rounded-full flex items-center justify-center bg-white/10"),children:(0,r.jsx)(u.A,{className:"w-6 h-6 fill-current"})}),A&&"DRAFT"!==x?"Start Session":"Finalize Strategy"]})]})]})]},"idle"),"SCHEDULED"===P&&(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"w-full bg-orange-50/50 dark:bg-orange-950/10 rounded-[32px] border border-orange-200/60 dark:border-orange-900/30 p-8 shadow-sm flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-orange-100 dark:bg-orange-900/20 flex items-center justify-center text-orange-600 dark:text-orange-400 shadow-inner",children:(0,r.jsx)(b.A,{className:"w-8 h-8"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-black text-zinc-900 dark:text-white mb-1",children:"Scheduled for Execution"}),(0,r.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium",children:"Campaign is queued to start automatically. Agents will spin up at the designated time."})]})]}),(0,r.jsx)(z.$,{variant:"outline",className:"h-14 px-8 text-base rounded-full border-orange-200 dark:border-orange-800 text-orange-700 dark:text-orange-400 hover:bg-orange-100 dark:hover:bg-orange-900/30 font-bold",onClick:()=>{eb(JSON.parse(JSON.stringify(ec))),ex(!0)},children:"View Schedule"})]},"scheduled"),tg&&(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"w-full bg-white/80 dark:bg-zinc-950/80 backdrop-blur-xl rounded-[32px] border border-zinc-200/50 dark:border-zinc-800/50 p-6 shadow-2xl shadow-orange-500/5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,r.jsx)(z.$,{variant:"outline",size:"icon",onClick:"PAUSED"===P||"COMPLETED"===P?td:tc,className:"h-12 w-12 rounded-2xl border-2 border-zinc-100 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-900 shrink-0",children:"PAUSED"===P||"COMPLETED"===P?(0,r.jsx)(u.A,{className:"w-5 h-5 fill-current"}):(0,r.jsx)(f.A,{className:"w-5 h-5 fill-current"})}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(e2,{status:P,activeAgents:th,executionWindows:ec})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-6 mb-6",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)(ez,{activeAgents:F,upcomingLeads:q,historyItems:W,allLeadsByCohort:G,allEvents:K,maxConcurrency:V,isCompleted:"COMPLETED"===P||ee,isPaused:"PAUSED"===P,isResetting:eg,completionData:en,onReset:to,isExhausted:null==te?void 0:te.is_exhausted,onReplenish:tv,onLeadAction:tm,onUserQueueRefresh:()=>eV(Date.now()),feedEvents:tj,onClearFeed:()=>{let e=Date.now();tf(e),localStorage.setItem("unclutr_feed_cleared_at_".concat(o),e.toString()),y.oR.success("Feed Cleared",{description:"Mission Control Feed has been reset locally."})},feedViewMode:tp,onFeedViewModeChange:tu,className:"bg-white/50 dark:bg-zinc-900/50 backdrop-blur-sm border-zinc-200/50 dark:border-zinc-800/50 min-h-[500px]"})}),(0,r.jsx)(eB,{campaignId:o,campaignStatus:"ACTIVE_READY"===P||"WARMUP"===P||"IN_CALL"===P?"ACTIVE":"PAUSED",isStarted:"PAUSED"!==P,refreshTrigger:e$,historyItems:W,maxConcurrency:V,onStart:td,onCallClick:e=>{eJ(e),eG(!0)},onContextClick:e=>{eX({id:e.lead_id,item_id:e.id,name:e.lead_name}),e0(!0)}})]}),(0,r.jsx)(U,{isOpen:eR,onClose:()=>eL(!1),agent:F.find(e=>(null==e?void 0:e.agent_id)===eE)||null,agentName:(null===(t=F.find(e=>(null==e?void 0:e.agent_id)===eE))||void 0===t?void 0:t.agent_name)||(null==eI?void 0:eI.name)||"",leadName:(null===(a=F.find(e=>(null==e?void 0:e.agent_id)===eE))||void 0===a?void 0:a.lead_name)||(null==eI?void 0:eI.leadName),index:null!==(c=null==eI?void 0:eI.index)&&void 0!==c?c:0,events:K.filter(e=>{let t=F.find(e=>(null==e?void 0:e.agent_id)===eE),a=(null==t?void 0:t.lead_id)||(null==eI?void 0:eI.leadId),r=(null==t?void 0:t.agent_name)||(null==eI?void 0:eI.name);return e.lead_id&&a?String(e.lead_id)===String(a):r&&e.agent_name===r})}),(0,r.jsx)(ey,{isOpen:eT,onClose:()=>eP(!1),activeAgents:F,upcomingLeads:q,historyItems:W,allLeadsByCohort:G,allEvents:K,maxConcurrency:V,isPaused:"PAUSED"===P,isResetting:eg,onReset:to,onLeadAction:(e,t)=>{console.log("Queue Action",e,t)},onRefreshQueue:e6})]},"active")]}),(0,r.jsx)(i.N,{children:eo&&(0,r.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,r.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{em||(ex(!1),ej(null))},className:"absolute inset-0 bg-zinc-950/60 backdrop-blur-xl"}),(0,r.jsxs)(n.P.div,{initial:{opacity:0,scale:.95,y:30,filter:"blur(10px)"},animate:{opacity:1,scale:1,y:0,filter:"blur(0px)"},exit:{opacity:0,scale:.95,y:30,filter:"blur(10px)"},className:"relative w-full max-w-2xl overflow-hidden rounded-[40px] border border-white/20 dark:border-white/5 bg-white/90 dark:bg-zinc-900/95 backdrop-blur-3xl shadow-[0_30px_100px_-10px_rgba(0,0,0,0.3)] p-1",children:[(0,r.jsx)("div",{className:"absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-white/50 dark:via-white/20 to-transparent opacity-50"}),(0,r.jsx)("div",{className:"p-8 md:p-10 space-y-8",children:(0,r.jsx)(i.N,{mode:"wait",children:eU?(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center text-center space-y-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-[2rem] bg-amber-50 dark:bg-amber-900/20 flex items-center justify-center text-amber-600 dark:text-amber-500 border border-amber-100 dark:border-amber-900/30 shadow-xl shadow-amber-500/10",children:(0,r.jsx)(N.A,{className:"w-10 h-10"})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white tracking-tight",children:"Outside Window"}),(0,r.jsxs)("p",{className:"text-zinc-500 dark:text-zinc-400 font-medium max-w-sm leading-relaxed",children:["The current time is outside of your scheduled windows. If you continue, the campaign will remain ",(0,r.jsx)("span",{className:"text-zinc-900 dark:text-white font-bold",children:"Paused"})," until the next slot."]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[(0,r.jsx)(z.$,{variant:"outline",onClick:()=>eM(!1),className:"h-16 rounded-[1.5rem] border-2 border-zinc-100 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-900 font-black text-zinc-600 dark:text-zinc-400 transition-all active:scale-[0.98]",children:"Go Back & Edit"}),(0,r.jsx)(z.$,{onClick:()=>tx(!1),disabled:em,className:"h-16 rounded-[1.5rem] bg-orange-600 hover:bg-orange-700 text-white font-black shadow-xl shadow-orange-600/20 transition-all active:scale-[0.98]",children:"Schedule for Later"})]})]},"warning"):(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-[1.5rem] bg-gradient-to-br from-orange-500/10 to-violet-500/5 dark:from-orange-500/20 dark:to-violet-500/10 flex items-center justify-center text-orange-500 dark:text-orange-400 border border-orange-200/50 dark:border-orange-500/20 shadow-sm",children:(0,r.jsx)(p.A,{className:"w-8 h-8"})}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white tracking-tight",children:"Update Schedule"}),(0,r.jsx)("p",{className:(0,_.cn)("font-medium transition-colors duration-300",ti(eu).isInWindow?"text-emerald-600 dark:text-emerald-400":"text-zinc-500 dark:text-zinc-400"),children:ti(eu).isInWindow?"Current time is now covered. Ready to start.":"Your campaign is currently outside its execution window."})]})]}),(0,r.jsx)(z.$,{variant:"ghost",size:"icon",disabled:em,onClick:()=>{ex(!1),ej(null),eM(!1)},className:"w-12 h-12 rounded-2xl hover:bg-zinc-100 dark:hover:bg-white/10 hover:rotate-90 transition-all duration-300",children:(0,r.jsx)(j.A,{className:"w-6 h-6 text-zinc-400"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between pb-3 border-b border-zinc-100 dark:border-zinc-800",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{className:"text-xs font-bold text-zinc-400 uppercase tracking-widest",children:"Active Windows"}),ev.connected?(0,r.jsxs)("div",{className:"flex items-center gap-1.5 mt-1",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),(0,r.jsx)("span",{className:"text-[10px] font-black text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:"Google Calendar Synced"})]}):(0,r.jsxs)("div",{className:"flex items-center gap-1.5 mt-1",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500"}),(0,r.jsx)("span",{className:"text-[10px] font-black text-amber-600 dark:text-amber-400 uppercase tracking-wider",children:"Calendar Not Connected"})]})]}),!ev.connected&&(0,r.jsxs)(z.$,{size:"sm",variant:"ghost",onClick:e7,className:"text-[10px] font-black uppercase tracking-wider text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-full px-4 h-8 gap-2 border border-orange-100 dark:border-orange-900/40",children:[(0,r.jsx)(b.A,{className:"w-3 h-3"}),"Connect to Block"]})]}),(0,r.jsxs)("div",{className:"space-y-3 max-h-[350px] overflow-y-auto pr-2 custom-scrollbar p-1",children:[(()=>{let e=new Date,t=eu.map((e,t)=>({...e,_originalIndex:t})),a=[],s=[],n=[];return t.forEach(t=>{try{let r=(0,l.H)("".concat(t.day,"T").concat(t.start)),i=(0,l.H)("".concat(t.day,"T").concat(t.end));if(e>i)n.push(t);else if(e>=r&&e<=i){let r=Math.max(0,Math.round((i.getTime()-e.getTime())/6e4));a.push({...t,_durationLabel:"".concat(r," MINS LEFT"),_isInvalid:r<30})}else s.push(t)}catch(e){s.push(t)}}),s.sort((e,t)=>(0,l.H)("".concat(e.day,"T").concat(e.start)).getTime()-(0,l.H)("".concat(t.day,"T").concat(t.start)).getTime()),n.sort((e,t)=>(0,l.H)("".concat(t.day,"T").concat(t.start)).getTime()-(0,l.H)("".concat(e.day,"T").concat(e.start)).getTime()),(0,r.jsxs)(r.Fragment,{children:[a.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h4",{className:"text-[10px] font-black text-orange-600 dark:text-orange-400 uppercase tracking-[0.2em] mb-4 flex items-center gap-2.5",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-orange-500 animate-pulse shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),"Current Window"]}),(0,r.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,r.jsx)(eC.x,{day:e.day,start:e.start,end:e.end,allWindows:eu,currentIndex:e._originalIndex,customDurationLabel:e._durationLabel,isInvalid:e._isInvalid,onChange:t=>{let a=[...eu];a[e._originalIndex]={...a[e._originalIndex],...t},eb(a)},onDelete:()=>{eb(eu.filter((t,a)=>a!==e._originalIndex))}},"".concat(e.day,"-").concat(e.start,"-").concat(e._originalIndex)))})]}),s.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"text-[10px] font-black text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em] mb-4",children:"Upcoming Windows"}),(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsx)(i.N,{children:s.map(e=>(0,r.jsx)(eC.x,{day:e.day,start:e.start,end:e.end,allWindows:eu,currentIndex:e._originalIndex,onChange:t=>{let a=[...eu];a[e._originalIndex]={...a[e._originalIndex],...t},eb(a)},onDelete:()=>{eb(eu.filter((t,a)=>a!==e._originalIndex))}},"".concat(e.day,"-").concat(e.start,"-").concat(e._originalIndex)))})})]}),n.length>0&&(0,r.jsxs)("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-800/50",children:[(0,r.jsx)("h4",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-[0.2em] mb-4",children:"Past Windows"}),(0,r.jsx)("div",{className:"opacity-40 grayscale hover:opacity-100 hover:grayscale-0 transition-all duration-300 space-y-3",children:(0,r.jsx)(i.N,{children:n.map(e=>(0,r.jsx)(eC.x,{day:e.day,start:e.start,end:e.end,allWindows:eu,currentIndex:e._originalIndex,onChange:t=>{let a=[...eu];a[e._originalIndex]={...a[e._originalIndex],...t},eb(a)},onDelete:()=>{eb(eu.filter((t,a)=>a!==e._originalIndex))}},"".concat(e.day,"-").concat(e.start,"-").concat(e._originalIndex)))})})]})]})})(),(0,r.jsxs)(n.P.button,{whileHover:{scale:1.01,borderColor:"rgb(99, 102, 241, 0.5)"},whileTap:{scale:.98},onClick:()=>{let e=new Date,t=(0,d.GP)(e,"yyyy-MM-dd"),a=(0,d.GP)(e,"HH:00"),r=new Date(e);r.setHours(r.getHours()+1),eb([...eu,{day:t,start:a,end:(0,d.GP)(r,"HH:00")}])},className:"w-full h-16 rounded-[1.5rem] border-2 border-dashed border-zinc-100 dark:border-zinc-800/60 flex items-center justify-center gap-3 text-zinc-400 hover:text-orange-500 hover:bg-orange-50/30 dark:hover:bg-orange-950/20 transition-all font-black text-sm uppercase tracking-widest",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded-full bg-zinc-50 dark:bg-zinc-800 flex items-center justify-center border border-zinc-100 dark:border-zinc-700",children:(0,r.jsx)(v.A,{className:"w-3.5 h-3.5"})}),"Add Slot"]})]})]}),(0,r.jsx)("div",{className:"flex flex-col gap-4 pt-4",children:(0,r.jsx)(z.$,{onClick:()=>{let e=0;if(eu.find(t=>{try{let a=(0,l.H)("".concat(t.day,"T").concat(t.start)),r=((0,l.H)("".concat(t.day,"T").concat(t.end)).getTime()-a.getTime())/6e4;if(r<30)return e=r,!0;return!1}catch(e){return!0}})){y.oR.error("Invalid Slot Duration",{description:"Slot is only ".concat(e," min. Execution windows must be at least 30 minutes.")});return}let{isInWindow:t}=ti(eu);JSON.stringify(eu),JSON.stringify(ec),t?tx(!0):eM(!0)},disabled:em||0===eu.length,className:"h-16 rounded-[1.5rem] bg-zinc-900 dark:bg-white text-white dark:text-black font-black text-lg hover:scale-[1.02] active:scale-[0.98] transition-all gap-3 relative overflow-hidden group shadow-2xl shadow-orange-500/20",children:em?(0,r.jsx)(h.A,{className:"w-6 h-6 animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.A,{className:"w-5 h-5"}),ef?"Save & Start Session":"Save Schedule"]})})})]},"editor")})})]})]},"extend-modal")}),(0,r.jsx)(k.Lt,{open:eq,onOpenChange:eH,children:(0,r.jsxs)(k.EO,{className:"rounded-[3rem] border-zinc-200 dark:border-zinc-800 bg-white/95 dark:bg-zinc-950/95 backdrop-blur-xl shadow-2xl",children:[(0,r.jsxs)(k.wd,{children:[(0,r.jsxs)(k.r7,{className:"text-2xl font-black text-zinc-900 dark:text-white flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2.5 bg-amber-100 dark:bg-amber-900/30 rounded-2xl text-amber-600 dark:text-amber-400",children:(0,r.jsx)(w.A,{className:"w-5 h-5"})}),"Strategy Required"]}),(0,r.jsx)(k.$v,{className:"text-zinc-500 dark:text-zinc-400 text-[15px] font-medium leading-relaxed py-2",children:"A campaign strategy must be defined before execution can begin. You need to configure targets and protocols for each cohort segment."})]}),(0,r.jsxs)(k.ck,{className:"gap-3 sm:gap-2",children:[(0,r.jsx)(k.Zr,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800 text-zinc-500 dark:text-zinc-400 font-bold hover:bg-zinc-50 dark:hover:bg-zinc-900/50 h-12 px-6",children:"Not Now"}),(0,r.jsx)(k.Rx,{onClick:()=>{eH(!1),I&&I()},className:"rounded-2xl bg-zinc-900 dark:bg-white text-white dark:text-black font-bold h-12 px-8 shadow-xl transition-all hover:scale-[1.02] active:scale-[0.98]",children:"Configure Strategy"})]})]})}),(0,r.jsx)(k.Lt,{open:es,onOpenChange:ei,children:(0,r.jsxs)(k.EO,{className:"rounded-[3rem] border-zinc-200 dark:border-zinc-800 bg-white/95 dark:bg-zinc-950/95 backdrop-blur-xl shadow-2xl",children:[(0,r.jsxs)(k.wd,{children:[(0,r.jsxs)(k.r7,{className:"text-2xl font-black text-zinc-900 dark:text-white flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2.5 bg-orange-100 dark:bg-orange-900/30 rounded-2xl text-orange-600 dark:text-orange-400",children:(0,r.jsx)(g.A,{className:"w-5 h-5"})}),"Initialization Required"]}),(0,r.jsx)(k.$v,{className:"text-zinc-500 dark:text-zinc-400 text-[15px] font-medium leading-relaxed py-2",children:"New leads have been added to this campaign. To ensure Alex behaves correctly with the new data, you must finalize the campaign strategy before starting the session."})]}),(0,r.jsxs)(k.ck,{className:"gap-3 sm:gap-2",children:[(0,r.jsx)(k.Zr,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800 text-zinc-500 dark:text-zinc-400 font-bold hover:bg-zinc-50 dark:hover:bg-zinc-900/50 h-12 px-6",children:"Not Now"}),(0,r.jsx)(k.Rx,{onClick:()=>{ei(!1),I&&I()},className:"rounded-2xl bg-zinc-900 dark:bg-white text-white dark:text-black font-bold h-12 px-8 shadow-xl transition-all hover:scale-[1.02] active:scale-[0.98]",children:"Finalize Strategy"})]})]})}),eW&&(0,r.jsx)(eK,{isOpen:eY,onClose:()=>eG(!1),lead:{id:eW.lead_id,name:eW.lead_name,item_id:eW.id,campaign_id:o},onSuccess:()=>{e6(),eV(Date.now())}}),eQ&&(0,r.jsx)(e5,{isOpen:eZ,onClose:()=>e0(!1),leadId:eQ.id,itemId:eQ.item_id,leadName:eQ.name})]})}},67557:(e,t,a)=>{a.d(t,{Q:()=>s});var r=a(41498);function s(e){let{data:t,isConnected:a,error:s}=(0,r.T)(e);return{campaign:(null==t?void 0:t.campaign_metadata)||null,executionWindows:(null==t?void 0:t.execution_windows)||[],isConnected:a,error:s}}}}]);