(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[468],{69348:(e,t,a)=>{Promise.resolve().then(a.bind(a,18398))},18398:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var r=a(95155),s=a(12115),n=a(78831),i=a(73748),o=a(17432),c=a(47738),l=a(50234),d=a(14085),g=a(39286),x=a(9955),h=a(21773),u=a(30098),m=a(23817),p=a(20853),y=a(40767),f=a(33473),b=a(69323),v=a(30814),k=a(28633),j=a(71226),w=a(76046),N=a(13001),z=a(39196),C=a(18064);function S(){let e=(0,w.useRouter)(),{user:t,companyId:a,loading:S}=(0,z.A)(),[_,A]=(0,s.useState)([]),[R,F]=(0,s.useState)(!0),[E,L]=(0,s.useState)(!1),[P,T]=(0,s.useState)(null),[I,D]=(0,s.useState)(!1),M=s.useRef(null),O=_.find(e=>e.id===P)||null,W=async()=>{L(!0);try{await (0,N.M)(),v.oR.success("Ready for edits",{description:"Opening the stack configuration suite."}),e.push("/onboarding/basics")}catch(e){console.error(e),v.oR.error("Couldn't open editor",{description:"We hit a snag preparing the onboarding suite. Try again?"})}finally{L(!1)}},[U,V]=(0,s.useState)(!1),[H,K]=(0,s.useState)(!1),[Y,$]=(0,s.useState)(void 0),[q,Q]=(0,s.useState)(""),B=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!a||"null"===a||"undefined"===a){console.warn("[Integrations] Skipping fetch: No valid companyId in context.",{companyId:a}),e||F(!1);return}try{e||F(!0);let t=await (0,n.listIntegrations)(a);return A(t),t}catch(a){if(console.error("[Integrations] Error fetching integrations:",a),!e){var t,r;let e=(null===(t=a.message)||void 0===t?void 0:t.toLowerCase().includes("auth"))||(null===(r=a.message)||void 0===r?void 0:r.toLowerCase().includes("authorized"));v.oR.error(e?"Authentication Session Expired":"Integration Hub Unavailable",{description:e?"Please try logging in again to restore your session.":"We couldn't reach the command center. Try refreshing?"})}}finally{e||F(!1)}};(0,s.useEffect)(()=>{S||(t&&a?B().then(e=>{e&&Array.isArray(e)&&e.forEach(async e=>{if(("active"===e.status||"ACTIVE"===e.status)&&new Date(e.last_sync_at?e.last_sync_at:0)<new Date(Date.now()-36e5))try{console.log("Triggering auto-delta sync for ".concat(e.id)),await (0,n.syncIntegration)(a,e.id,!0),B(!0)}catch(e){console.error("Auto-sync failed",e)}})}):F(!1))},[t,S,a]),(0,s.useEffect)(()=>{let e;return _.some(e=>"syncing"===e.status)&&(e=setInterval(()=>{B(!0)},5e3)),()=>{e&&clearInterval(e)}},[_,a]),(0,s.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("success"),a=e.get("shop"),r=e.get("error");if("true"===t)$(a||void 0),K(!0),window.history.replaceState({},"",window.location.pathname),B();else if(r){let e="Connection Failed",t="There was an issue linking your Shopify store. Let's try once more?";switch(r){case"hmac_invalid":e="Security Verification Failed",t="The connection request couldn't be verified. This might be a security issue. Please try again.";break;case"state_invalid":e="Session Expired",t="Your connection session expired. Please start the connection process again.";break;case"handshake_failed":e="Handshake Failed",t="We couldn't complete the connection with Shopify. Please check your store settings and try again.";break;default:e="Connection Slipped",t="There was an issue linking your Shopify store. Let's try once more?"}v.oR.error(e,{description:t,duration:6e3}),window.history.replaceState({},"",window.location.pathname)}},[]);let X=async t=>{if("shopify"===t.toLowerCase()){e.push("/integrations/shopify/connect");return}v.oR.info("Flow coming soon",{description:"We're currently perfecting this automated connection flow. Stay tuned!"})},G=async e=>{if(a)try{v.oR.loading("Refreshing Pulse",{description:"Recalibrating your data metrics...",id:"sync"}),A(t=>t.map(t=>t.id===e?{...t,status:"syncing"}:t)),await (0,n.syncIntegration)(a,e),v.oR.success("Sync in Motion",{description:"Your dashboard will update with the latest figures shortly.",id:"sync"}),B(!0)}catch(e){v.oR.error("Sync hit a snag",{description:"We couldn't refresh the data. Try again in a minute?",id:"sync"})}},J=async e=>{if(a)try{v.oR.loading("Severing Connection",{description:"Disconnecting source from your pulse...",id:"disconnect"}),await (0,n.disconnectIntegration)(a,e),v.oR.success("Connection Severed",{description:"This source is no longer syncing with Unclutr.",id:"disconnect"}),D(!1),B()}catch(e){v.oR.error("Disconnect Failed",{description:"We couldn't break the link. Try one more time?",id:"disconnect"})}},Z=async(e,t)=>{if(a)try{await (0,n.addManualSource)(a,e,t),v.oR.success("Stack Updated",{description:"".concat(e," is now part of your operational stack.")}),V(!1),B()}catch(e){v.oR.error("Couldn't add source",{description:"Try adding this tool to your stack again."})}},ee=e=>{T(e.id),D(!0)};(0,s.useEffect)(()=>{let e=e=>{if("k"===e.key&&(e.metaKey||e.ctrlKey)){var t;e.preventDefault(),null===(t=M.current)||void 0===t||t.focus()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);let et=0===_.length;if(R)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)(h.A,{className:"w-8 h-8 text-[#FF8A4C] animate-spin"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-400 dark:text-zinc-500",children:"Loading your operational stack..."})]})});if(et)return(0,r.jsxs)("div",{className:"p-8 max-w-6xl mx-auto min-h-[80vh] flex flex-col items-center justify-center relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[600px] bg-[#FF8A4C]/5 blur-[120px] rounded-full pointer-events-none"}),(0,r.jsxs)("div",{className:"relative z-10 w-full max-w-4xl",children:[(0,r.jsxs)("div",{className:"text-center mb-12 space-y-4",children:[(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-orange-500/10 border border-orange-500/20 text-[#FF8A4C] text-xs font-bold uppercase tracking-widest mb-4",children:[(0,r.jsx)(u.A,{className:"w-3.5 h-3.5"}),"Ready for your first pulse"]}),(0,r.jsxs)("h1",{className:"text-5xl font-bold text-gray-900 dark:text-white tracking-tight leading-tight",children:["Connect your tools, ",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#FF8A4C] to-orange-600",children:"Unclutr the Magic."})]}),(0,r.jsx)("p",{className:"text-zinc-500 dark:text-zinc-400 text-lg max-w-xl mx-auto",children:"Setup your operational stack to unlock real-time profitability tracking and automated insights."})]}),(0,r.jsx)(C.X,{}),(0,r.jsxs)("div",{className:"mt-16 flex flex-col items-center gap-6 opacity-60 hover:opacity-100 transition-opacity duration-700",children:[(0,r.jsx)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-zinc-400",children:"Trusted by 50+ D2C Brands"}),(0,r.jsxs)("div",{className:"flex items-center gap-2.5 px-4 py-2 rounded-full border border-gray-200 dark:border-zinc-800 bg-white/50 dark:bg-zinc-900/50 backdrop-blur-sm shadow-sm",children:[(0,r.jsx)(m.A,{className:"w-4 h-4 text-emerald-500"}),(0,r.jsx)("span",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400",children:"SOC2 Type II"}),(0,r.jsx)(g.E,{variant:"outline",className:"h-4.5 px-1.5 text-[9px] font-bold border-orange-200 text-orange-600 bg-orange-50 dark:border-orange-900/50 dark:bg-orange-900/20 dark:text-orange-400 tracking-wide uppercase shadow-none ml-1",children:"Coming Soon"})]})]})]})]});let ea=_.filter(e=>e.datasource.name.toLowerCase().includes(q.toLowerCase())||e.datasource.category.toLowerCase().includes(q.toLowerCase())),er=ea.filter(e=>e.in_stack),es=ea.filter(e=>!e.in_stack&&e.datasource.is_implemented),en=_.filter(e=>e.in_stack).filter(e=>["active","syncing","error"].includes((e.status||"").toLowerCase())).length,ei=er.filter(e=>e.datasource.is_implemented),eo=er.filter(e=>!e.datasource.is_implemented),ec=e=>({"Storefront (D2C)":e.filter(e=>"selling_channel_d2c"===e.datasource.category||"Storefront"===e.datasource.category),Marketplace:e.filter(e=>"selling_channel_marketplace"===e.datasource.category||"Marketplace"===e.datasource.category),"Quick Commerce":e.filter(e=>"selling_channel_qcom"===e.datasource.category||"QuickCommerce"===e.datasource.category),Payments:e.filter(e=>"stack_payments"===e.datasource.category||"Payment"===e.datasource.category),Logistics:e.filter(e=>"stack_shipping"===e.datasource.category||"Logistics"===e.datasource.category),Marketing:e.filter(e=>"stack_marketing"===e.datasource.category||"Marketing"===e.datasource.category),"Analytics & CRM":e.filter(e=>"stack_analytics"===e.datasource.category||"Analytics"===e.datasource.category),Accounting:e.filter(e=>"stack_finance"===e.datasource.category||"Accounting"===e.datasource.category)}),el=ec(ei),ed=ec(eo),eg=ec(es);return(0,r.jsxs)("div",{className:"p-4 sm:p-8 max-w-[1920px] mx-auto pb-24 space-y-12",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-6 relative z-10",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-[#E4E4E7] tracking-tight font-display",children:"Toolkit"}),(0,r.jsxs)(g.E,{variant:"outline",className:"bg-emerald-500/5 border-emerald-500/20 text-emerald-500 h-6 font-bold px-2.5 rounded-lg",children:[en," Active"]})]}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-[#71717A] text-sm max-w-md leading-relaxed",children:"Manage your connected apps and integrations."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[(0,r.jsxs)("div",{className:"relative w-full md:w-80 group",children:[(0,r.jsx)("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2 flex items-center gap-2 pointer-events-none z-10",children:(0,r.jsx)(p.A,{className:"w-4 h-4 text-gray-400 group-focus-within:text-[#FF8A4C] transition-colors"})}),(0,r.jsx)(x.p,{ref:M,placeholder:"Find an app...",className:"pl-10 pr-12 h-11 bg-white/40 dark:bg-black/20 backdrop-blur-md border-gray-200/50 dark:border-white/5 rounded-xl focus:ring-4 focus:ring-[#FF8A4C]/10 focus:border-[#FF8A4C]/50 transition-all duration-300 placeholder:text-gray-400 dark:placeholder:text-zinc-600 font-medium",value:q,onChange:e=>Q(e.target.value)}),(0,r.jsxs)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-1.5",children:[(0,r.jsx)(k.N,{children:q&&(0,r.jsx)(j.P.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:()=>Q(""),className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-zinc-800 text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:(0,r.jsx)(y.A,{className:"w-3.5 h-3.5"})})}),(0,r.jsxs)("kbd",{className:"hidden sm:inline-flex h-5 select-none items-center gap-1 rounded border border-gray-200 dark:border-zinc-800 bg-gray-50 dark:bg-zinc-900 px-1.5 font-mono text-[10px] font-medium text-gray-500 dark:text-zinc-500 opacity-100 group-focus-within:opacity-0 transition-opacity",children:[(0,r.jsx)("span",{className:"text-xs",children:"âŒ˜"}),"K"]})]})]}),(0,r.jsx)(j.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,r.jsxs)(d.$,{className:"bg-gradient-to-br from-[#FF8A4C] to-[#F97316] hover:from-[#ff9e6b] hover:to-[#fb923c] text-white font-bold h-11 px-6 rounded-xl shadow-[0_8px_16px_-6px_rgba(249,115,22,0.3)] hover:shadow-[0_12px_20px_-8px_rgba(249,115,22,0.4)] transition-all flex items-center gap-2 border-0",onClick:()=>V(!0),children:[(0,r.jsx)(f.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"hidden md:inline",children:"Add Source"})]})})]})]}),(0,r.jsx)("div",{className:"space-y-8",children:0===er.length?(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("div",{onClick:E?void 0:W,className:"group relative overflow-hidden rounded-2xl border border-dashed border-gray-200 dark:border-zinc-800 bg-gray-50/30 dark:bg-zinc-900/30 p-12 flex flex-col items-center justify-center text-center transition-all duration-300 hover:bg-gray-50 dark:hover:bg-zinc-900 hover:border-orange-500/30 dark:hover:border-orange-500/30 cursor-pointer",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-orange-500/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,r.jsxs)("div",{className:"relative z-10 w-16 h-16 rounded-2xl bg-white dark:bg-zinc-800 shadow-sm border border-gray-100 dark:border-zinc-700 flex items-center justify-center mb-6 group-hover:scale-110 group-hover:rotate-3 transition-all duration-300 ease-out",children:[(0,r.jsx)(b.A,{className:"w-8 h-8 text-gray-400 dark:text-zinc-500 group-hover:text-orange-500 transition-colors duration-300"}),(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-orange-500 flex items-center justify-center text-white border-2 border-white dark:border-zinc-800 shadow-sm",children:(0,r.jsx)(f.A,{className:"w-3.5 h-3.5 font-bold"})})]}),(0,r.jsx)("h3",{className:"relative z-10 text-lg font-bold text-gray-900 dark:text-gray-100 mb-2 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors",children:"Start building your Toolkit"}),(0,r.jsx)("p",{className:"relative z-10 text-sm text-gray-500 dark:text-gray-400 max-w-sm leading-relaxed mb-8",children:"Connect your sales channels and tech stack to unify your business data."}),(0,r.jsx)(d.$,{variant:"outline",size:"sm",className:"relative z-10 h-10 px-6 text-xs font-bold border-orange-200 dark:border-orange-900/50 text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-950/20 hover:bg-orange-100 dark:hover:bg-orange-900/40 hover:text-orange-700 dark:hover:text-orange-300 transition-all border-dashed rounded-xl",disabled:E,children:E?"Loading...":"Setup Stack"})]})}):(0,r.jsxs)("div",{className:"space-y-10",children:[ei.length>0&&(0,r.jsx)("div",{className:"space-y-10",children:Object.entries(el).map(e=>{let[t,a]=e;return 0===a.length?null:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500/50"}),(0,r.jsx)("h3",{className:"text-xs font-bold text-gray-400 dark:text-zinc-500 uppercase tracking-widest",children:t})]}),(0,r.jsx)(j.P.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:(0,r.jsx)(k.N,{mode:"popLayout",children:a.map(e=>(0,r.jsx)(j.P.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:(0,r.jsx)(i.f,{integration:e,onConnect:X,onViewDetails:ee,onAdd:Z,onRemove:J,onRefresh:()=>B(!0),onSync:G})},e.id))})})]},t)})}),eo.length>0&&(0,r.jsxs)("div",{className:"space-y-8 pt-8 border-t border-dashed border-gray-200 dark:border-zinc-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("h3",{className:"text-sm font-bold text-gray-500 dark:text-zinc-400",children:"Coming Soon"}),(0,r.jsx)(g.E,{variant:"outline",className:"bg-gray-100 dark:bg-zinc-800 text-gray-500 dark:text-zinc-500 h-5 text-[10px] font-bold rounded-md",children:"Not Yet Implemented"})]}),(0,r.jsx)("div",{className:"space-y-10 opacity-75 grayscale-[0.5] hover:grayscale-0 transition-all duration-500",children:Object.entries(ed).map(e=>{let[t,a]=e;return 0===a.length?null:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-xs font-bold text-gray-400 dark:text-zinc-500 uppercase tracking-widest pl-1",children:t}),(0,r.jsx)(j.P.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:(0,r.jsx)(k.N,{mode:"popLayout",children:a.map(e=>(0,r.jsx)(j.P.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:(0,r.jsx)(i.f,{integration:e,onConnect:X,onViewDetails:ee})},e.id))})})]},t)})})]})]})}),es.length>0&&(0,r.jsxs)("div",{className:"space-y-8 pt-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 pb-2 border-b border-gray-100 dark:border-zinc-800/50",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-zinc-100",children:"Available Integrations"}),(0,r.jsx)(g.E,{variant:"outline",className:"bg-zinc-100 dark:bg-zinc-800 border-zinc-200 dark:border-zinc-700 text-zinc-600 dark:text-zinc-400 h-6 font-bold px-2 rounded-lg",children:es.length})]}),es.length>0?(0,r.jsx)("div",{className:"space-y-10",children:Object.entries(eg).map(e=>{let[t,a]=e;return 0===a.length?null:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-zinc-300 dark:bg-zinc-700"}),(0,r.jsx)("h3",{className:"text-xs font-bold text-gray-400 dark:text-zinc-500 uppercase tracking-widest",children:t})]}),(0,r.jsx)(j.P.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:(0,r.jsx)(k.N,{mode:"popLayout",children:a.map(e=>(0,r.jsx)(j.P.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:(0,r.jsx)(i.f,{integration:e,onConnect:X,onViewDetails:ee,onAdd:Z,onRemove:J,onRefresh:()=>B(!0),onSync:G})},e.id||e.datasource&&e.datasource.id))})})]},t)})}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center opacity-60",children:[(0,r.jsx)(p.A,{className:"w-8 h-8 text-gray-300 dark:text-zinc-600 mb-2"}),(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:['No integrations found matching "',q,'"']})]})]}),q&&0===ea.length&&(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-24 text-center opacity-60",children:[(0,r.jsx)(p.A,{className:"w-12 h-12 text-gray-200 dark:text-zinc-800 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"No matches found"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["We couldn't find any integration matching \"",q,'"']}),(0,r.jsx)(d.$,{variant:"link",onClick:()=>Q(""),className:"mt-2 text-[#FF8A4C]",children:"Clear Search"})]}),(0,r.jsx)(o.P,{integration:O,open:I,onOpenChange:D,onSync:G,onDisconnect:J,onConnect:X,onRefresh:()=>B(!0)}),(0,r.jsx)(c.P,{open:U,onOpenChange:V,onAdd:Z}),(0,r.jsx)(l.p,{isOpen:H,onClose:()=>{K(!1),B()},shopName:Y})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5563,1431,1226,24,763,4158,814,9943,1053,9609,5901,9866,8441,1517,7358],()=>t(69348)),_N_E=e.O()}]);