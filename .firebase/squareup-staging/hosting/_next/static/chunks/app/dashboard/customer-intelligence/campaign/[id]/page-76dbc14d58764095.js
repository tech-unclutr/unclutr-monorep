(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1981],{63601:(e,a,t)=>{Promise.resolve().then(t.bind(t,74987))},74987:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>G});var r=t(95155),i=t(12115),n=t(76046),s=t(71226),c=t(28633),d=t(14505),l=t(98867),o=t(66889),x=t(62455),h=t(60872),m=t(32423),g=t(22725),b=t(29191),u=t(87364),p=t(45686),k=t(59676),v=t(4839),f=t(1466),j=t(27065),w=t(69323),N=t(23075),z=t(63348),y=t(23950),A=t(14085),S=t(39286),C=t(25858),E=t(29602),D=t(25739),P=t(30814),R=t(31091),_=t(68158),I=t(9246),T=t(64104),L=t(20016),O=t(8807),F=t(71128),B=t(48048),M=t(35901),U=t(67557),$=t(2818);function G(){let e=(0,n.useParams)(),a=(0,n.useRouter)(),t=null==e?void 0:e.id,{loading:G,companyId:W}=(0,M.A)(),[Y,Z]=(0,i.useState)(null),[J,V]=(0,i.useState)(!0),[X,q]=(0,i.useState)(!1),[H,K]=(0,i.useState)(!1),[Q,ee]=(0,i.useState)(0),[ea,et]=(0,i.useState)(!1),[er,ei]=(0,i.useState)(!1),[en,es]=(0,i.useState)(!1),[ec,ed]=(0,i.useState)(!1),[el,eo]=(0,i.useState)("IDENTITY"),[ex,eh]=(0,i.useState)(!1),[em,eg]=(0,i.useState)(!1),[eb,eu]=(0,i.useState)(!1),{campaign:ep,isConnected:ek}=(0,U.Q)(t),ev=(0,i.useRef)(0),ef=async()=>{if(!G){if(!W||!t){V(!1);return}try{Y||V(!0);let e=Date.now(),a=await D.F.get("/intelligence/campaigns/".concat(t));if(e<ev.current){console.log("Ignoring stale campaign data from poll");return}Z(e=>JSON.stringify(e)===JSON.stringify(a)?e:a)}catch(e){console.error("Failed to fetch campaign:",e),404===e.status?(P.oR.error("Campaign not found"),a.push("/dashboard-new/customer-intelligence")):Y||P.oR.error(e.message||"Failed to load campaign")}finally{V(!1)}}};(0,i.useEffect)(()=>{!G&&W&&t&&!Y&&ef()},[t,G,W]),(0,i.useEffect)(()=>{ep&&(Z(e=>{let a={...e,...ep,id:t,status:(null==e?void 0:e.status)||ep.status||"DRAFT"};return JSON.stringify(e)===JSON.stringify(a)?e:a}),ev.current=Date.now())},[ep,t]),(0,i.useEffect)(()=>{let e=()=>{((null==Y?void 0:Y.status)==="ACTIVE"||(null==Y?void 0:Y.status)==="IN_PROGRESS")&&fetch("".concat($.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1","/execution/campaign/").concat(t,"/pause"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},keepalive:!0}).catch(e=>console.error("Auto-pause failed",e))};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[t,null==Y?void 0:Y.status]);let ej=()=>{if((null==Y?void 0:Y.status)==="IN_PROGRESS"||(null==Y?void 0:Y.status)==="WARMUP"){ei(!0);return}a.push("/dashboard-new/customer-intelligence")},ew=async()=>{ed(!0);try{await D.F.patch("/intelligence/campaigns/".concat(t),{status:"PAUSED"}),P.oR.success("Campaign paused successfully"),ev.current=Date.now(),setTimeout(()=>{a.push("/dashboard-new/customer-intelligence")},500)}catch(e){console.error("Failed to pause campaign:",e),P.oR.error(e.message||"Failed to pause campaign"),ed(!1),ei(!1)}},eN=async()=>{es(!0);try{await D.F.delete("/intelligence/campaigns/".concat(t)),P.oR.success("Campaign deleted successfully"),et(!1),setTimeout(()=>{a.push("/dashboard-new/customer-intelligence")},500)}catch(e){throw console.error("Failed to delete campaign:",e),P.oR.error(e.message||"Failed to delete campaign"),es(!1),e}};if(G||J)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-zinc-50 to-white dark:from-zinc-950 dark:to-black",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)(d.A,{className:"w-8 h-8 animate-spin text-orange-500"}),(0,r.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium",children:G?"Authenticating...":"Loading campaign..."})]})});if(!Y)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-zinc-50 to-white dark:from-zinc-950 dark:to-black",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Campaign not found"}),(0,r.jsx)(A.$,{onClick:ej,className:"mt-4",children:"Return to Intelligence Lab"})]})});let{name:ez,created_at:ey,updated_at:eA,status:eS,brand_context:eC,customer_context:eE,team_member_context:eD,cohort_config:eP={},selected_cohorts:eR=[],cohort_data:e_={},cohort_questions:eI={},cohort_incentives:eT={},preliminary_questions:eL=[],incentive:eO,execution_windows:eF=[],call_duration:eB,total_call_target:eM}=Y,eU="COMPLETED"===eS,e$=Object.values(eP).reduce((e,a)=>e+a,0)||eM||0,eG=(null==eR?void 0:eR.length)||Object.keys(eP).length||0,eW=eB?Math.floor(eB/60):10,eY=(null==eF?void 0:eF.length)||0,eZ={COMPLETED:{label:"Completed",color:"text-emerald-600",bg:"bg-emerald-500/10",border:"border-emerald-500/20",icon:l.A},IN_PROGRESS:{label:"Active",color:"text-blue-600",bg:"bg-blue-500/10",border:"border-blue-500/20",icon:o.A},ACTIVE:{label:"Active",color:"text-blue-600",bg:"bg-blue-500/10",border:"border-blue-500/20",icon:o.A},FAILED:{label:"Attention",color:"text-red-600",bg:"bg-red-500/10",border:"border-red-500/20",icon:x.A},DRAFT:{label:"Draft",color:"text-zinc-500",bg:"bg-zinc-500/10",border:"border-zinc-500/20",icon:h.A},SCHEDULED:{label:"Scheduled",color:"text-orange-600",bg:"bg-orange-500/10",border:"border-orange-500/20",icon:m.A},PAUSED:{label:"Paused",color:"text-amber-600",bg:"bg-amber-500/10",border:"border-amber-500/20",icon:g.A},READY:{label:"Ready",color:"text-emerald-600",bg:"bg-emerald-500/10",border:"border-emerald-500/20",icon:b.A}},eJ=eZ[eS]||eZ.DRAFT,eV=eJ.icon,eX=eR.length>0?eR:Object.keys(eP),eq=(0,B.X)(eX);return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-zinc-50 to-white dark:from-zinc-950 dark:to-black",children:[(0,r.jsxs)("div",{className:(0,E.cn)("max-w-7xl mx-auto p-6 md:p-8 transition-all duration-500",eU&&"py-4 md:py-6"),children:[(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:(0,E.cn)("mb-8",eU&&"mb-4"),children:[(0,r.jsxs)(A.$,{variant:"ghost",onClick:ej,className:(0,E.cn)("mb-6 text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 -ml-2",eU&&"mb-2 transform scale-90 origin-left"),children:[(0,r.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Back to Intelligence Lab"]}),(0,r.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:(0,E.cn)("flex items-center gap-3 mb-4",eU&&"mb-2"),children:[(0,r.jsxs)("div",{className:(0,E.cn)("flex items-center gap-2 pl-1 pr-3 py-1 rounded-full transition-all duration-300 border backdrop-blur-md",eJ.bg,eJ.border),children:[(0,r.jsx)("div",{className:(0,E.cn)("p-1.5 rounded-full bg-white dark:bg-black/20",eJ.color),children:(0,r.jsx)(eV,{className:"w-3.5 h-3.5",strokeWidth:3})}),(0,r.jsx)("span",{className:(0,E.cn)("text-[11px] font-black uppercase tracking-[0.15em] pr-1",eJ.color),children:eJ.label})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(I.Bc,{children:(0,r.jsxs)(I.m_,{children:[(0,r.jsx)(I.k$,{asChild:!0,children:(0,r.jsxs)("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 flex items-center gap-1.5 bg-zinc-50 dark:bg-zinc-900 px-3 py-1.5 rounded-full cursor-help hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[(0,r.jsx)(m.A,{className:"w-3.5 h-3.5 text-zinc-300 dark:text-zinc-600"}),ey?(0,R.m)(new Date(ey),{addSuffix:!0}):"New"]})}),(0,r.jsx)(I.ZI,{children:(0,r.jsxs)("p",{children:["Created: ",ey?(0,_.GP)(new Date(ey),"MMM do, yyyy 'at' h:mm a"):"N/A"]})})]})}),eA&&eA!==ey&&(0,r.jsx)(I.Bc,{children:(0,r.jsxs)(I.m_,{children:[(0,r.jsx)(I.k$,{asChild:!0,children:(0,r.jsxs)("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 flex items-center gap-1.5 bg-zinc-50 dark:bg-zinc-900 px-3 py-1.5 rounded-full cursor-help hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[(0,r.jsx)(o.A,{className:"w-3.5 h-3.5 text-zinc-300 dark:text-zinc-600"}),"Updated ",(0,R.m)(new Date(eA),{addSuffix:!0})]})}),(0,r.jsx)(I.ZI,{children:(0,r.jsxs)("p",{children:["Last Updated: ",(0,_.GP)(new Date(eA),"MMM do, yyyy 'at' h:mm a")]})})]})})]})]}),(0,r.jsx)("h1",{className:(0,E.cn)("text-5xl md:text-6xl font-black text-zinc-900 dark:text-zinc-50 leading-[1.05] tracking-[-0.04em] mb-6 bg-clip-text text-transparent bg-gradient-to-br from-zinc-900 via-zinc-800 to-zinc-500 dark:from-white dark:via-zinc-100 dark:to-zinc-400 transition-all duration-500",eU&&"text-3xl md:text-4xl mb-2"),children:ez})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[["PAUSED","DRAFT","READY","SCHEDULED"].includes(eS)&&(0,r.jsxs)(A.$,{onClick:()=>{eo("IDENTITY"),q(!0)},className:"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-700 shadow-sm font-semibold rounded-xl",children:[(0,r.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Edit Campaign"]}),(0,r.jsxs)(A.$,{variant:"ghost",onClick:()=>{et(!0)},className:"rounded-xl h-11 text-red-500 hover:bg-red-50 hover:text-red-700 dark:hover:bg-red-500/10",children:[(0,r.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),(0,r.jsx)(c.N,{children:(0,r.jsx)(s.P.div,{initial:!!eU&&{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.5,ease:"easeInOut"},className:"overflow-hidden",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 bg-white/50 dark:bg-zinc-900/30 p-6 rounded-[24px] border border-zinc-100/50 dark:border-zinc-800/30 group/metric transition-all duration-300 hover:bg-white hover:shadow-lg hover:shadow-orange-500/5 hover:border-orange-100",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-white dark:bg-zinc-800 flex items-center justify-center shadow-sm text-zinc-400 group-hover/metric:text-orange-500 transition-colors",children:(0,r.jsx)(k.A,{className:"w-6 h-6",strokeWidth:1.5})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight leading-none mb-1",children:e$}),(0,r.jsx)("div",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:"Total Targets"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 bg-white/50 dark:bg-zinc-900/30 p-6 rounded-[24px] border border-zinc-100/50 dark:border-zinc-800/30 group/metric transition-all duration-300 hover:bg-white hover:shadow-lg hover:shadow-orange-500/5 hover:border-orange-100",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-white dark:bg-zinc-800 flex items-center justify-center shadow-sm text-zinc-400 group-hover/metric:text-orange-500 transition-colors",children:(0,r.jsx)(o.A,{className:"w-6 h-6",strokeWidth:1.5})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight leading-none mb-1",children:[eW,"m"]}),(0,r.jsx)("div",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:"Calls"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 bg-white/50 dark:bg-zinc-900/30 p-6 rounded-[24px] border border-zinc-100/50 dark:border-zinc-800/30 group/metric transition-all duration-300 hover:bg-white hover:shadow-lg hover:shadow-emerald-500/5 hover:border-emerald-100",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-white dark:bg-zinc-800 flex items-center justify-center shadow-sm text-zinc-400 group-hover/metric:text-emerald-500 transition-colors",children:(0,r.jsx)(m.A,{className:"w-6 h-6",strokeWidth:1.5})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight leading-none mb-1",children:[eY," Slots"]}),(0,r.jsx)("div",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:"Schedule"})]})]})]})})}),(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.05},className:(0,E.cn)("mb-8",eU&&"mb-4"),children:(0,r.jsx)(F.L,{campaignId:t,campaignStatus:eS,hasStrategy:!!((null==eR?void 0:eR.length)>0||e_&&Object.keys(e_).length>0),wasLeadsUpdated:em,onStatusChange:async e=>{Y.status!==e&&(Z({...Y,status:e}),ev.current=Date.now())},onEditStrategy:()=>{eo("STRATEGY"),q(!0),ee(e=>e+1)},onScheduleUpdate:e=>{Z(a=>({...a,execution_windows:e}))}})}),(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-12",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{title:"Brand Identity",icon:v.A,text:eC,color:"text-orange-600",bg:"bg-orange-50/50",border:"border-orange-100/50",darkBg:"dark:bg-orange-500/10",darkBorder:"dark:border-orange-500/20"},{title:"Target Audience",icon:f.A,text:eE,color:"text-orange-600",bg:"bg-orange-50/50",border:"border-orange-100/50",darkBg:"dark:bg-orange-500/10",darkBorder:"dark:border-orange-500/20"},{title:"Purpose",icon:j.A,text:eD,color:"text-emerald-600",bg:"bg-emerald-50/50",border:"border-emerald-100/50",darkBg:"dark:bg-emerald-500/10",darkBorder:"dark:border-emerald-500/20"}].map((e,a)=>(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3+.1*a,duration:.7},className:"group/card relative p-8 rounded-[32px] bg-white/50 dark:bg-zinc-900/30 border border-zinc-200/50 dark:border-zinc-800/50 hover:bg-white dark:hover:bg-zinc-900/50 hover:shadow-[0_24px_48px_-12px_rgba(0,0,0,0.08)] dark:hover:shadow-black/40 hover:-translate-y-2 transition-all duration-500 overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/0 via-white/0 to-white/30 dark:to-white/5 opacity-0 group-hover/card:opacity-100 transition-opacity duration-500 pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-5 mb-6",children:[(0,r.jsx)("div",{className:(0,E.cn)("p-4 rounded-2xl shadow-[0_8px_16px_-4px_rgba(0,0,0,0.1)] transition-transform duration-500 group-hover/card:scale-110",e.bg,e.color,e.darkBg),children:(0,r.jsx)(e.icon,{className:"w-6 h-6"})}),(0,r.jsx)("span",{className:"text-[11px] font-black uppercase tracking-[0.25em] text-zinc-400 dark:text-zinc-500",children:e.title})]}),(0,r.jsx)("p",{className:"text-lg text-zinc-600 dark:text-zinc-300 leading-relaxed font-semibold",children:e.text||"Strategic context not defined."})]},a))})}),(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mb-12",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 mb-10",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("h4",{className:"text-xs font-black text-zinc-900 dark:text-zinc-100 uppercase tracking-[0.3em] flex items-center gap-4",children:[(0,r.jsx)("div",{className:"p-2 bg-orange-600 rounded-xl text-white shadow-lg shadow-orange-500/30",children:(0,r.jsx)(w.A,{className:"w-4 h-4"})}),"Campaign Strategy Map"]}),(0,r.jsx)("p",{className:"text-sm text-zinc-400 font-medium pl-12",children:"Segmented execution plan and individual goals"})]}),(0,r.jsxs)(S.E,{className:"bg-zinc-900 text-white dark:bg-white dark:text-zinc-900 px-5 py-2 text-xs font-bold rounded-full",children:[eG," ACTIVE SEGMENTS"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:eX.map((e,a)=>{let t=eP[e]||0,i=eI[e]||eL,n=eT[e]||eO,c=eq[e]||1;return(0,r.jsxs)(s.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5+.1*a,duration:.6},className:"flex flex-col bg-white dark:bg-zinc-950/40 border border-zinc-200 dark:border-zinc-800/60 rounded-[32px] p-8 hover:border-orange-500/50 dark:hover:border-orange-400/50 hover:shadow-2xl transition-all duration-500 group/cohort relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-orange-500/5 to-transparent rounded-bl-full pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-5 mb-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-[20px] overflow-hidden border-2 border-white dark:border-zinc-800 shadow-xl group-hover/cohort:scale-105 transition-transform duration-500 bg-transparent",children:(0,r.jsx)("img",{src:"/images/avatars/notionists/full_body/avatar_".concat(c,".png"),alt:e,className:"w-full h-full object-contain scale-110 drop-shadow-md"})}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h5",{className:"font-black text-xl text-zinc-900 dark:text-zinc-50 tracking-tight",children:e}),(0,r.jsxs)(S.E,{variant:"secondary",className:"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 px-3 py-0.5 text-[10px] font-bold tracking-wider",children:[(0,r.jsx)(k.A,{className:"w-3 h-3 mr-1.5"})," ",t," TARGET CALLS"]})]})]}),(0,r.jsxs)("div",{className:"space-y-6 flex-1",children:[n&&(0,r.jsxs)("div",{className:"flex items-center gap-4 bg-emerald-500/[0.04] dark:bg-emerald-500/[0.08] p-4 rounded-2xl border border-emerald-500/10 dark:border-emerald-500/20",children:[(0,r.jsx)(N.A,{className:"w-5 h-5 text-emerald-600 shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-bold text-emerald-700 dark:text-emerald-400 tracking-tight",children:n})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-[10px] font-black text-zinc-400 uppercase tracking-[0.2em] pl-1",children:[(0,r.jsx)(z.A,{className:"w-3.5 h-3.5"})," Preliminary Questions"]}),(0,r.jsxs)("ul",{className:"space-y-3",children:[i.slice(0,3).map((e,a)=>(0,r.jsx)("li",{className:"text-sm text-zinc-600 dark:text-zinc-400 pl-4 border-l-2 border-zinc-100 dark:border-zinc-800 font-medium group-hover/cohort:border-orange-500/30 transition-colors",children:e},a)),i.length>3&&(0,r.jsxs)("li",{className:"text-xs text-orange-500 font-bold pl-4 pt-1 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-1 h-1 bg-orange-500 rounded-full"}),"+",i.length-3," more strategic questions"]})]})]})]})]},e)})})]})]}),(0,r.jsx)(c.N,{children:X&&(0,r.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:()=>{em?eu(!0):q(!1)},children:(0,r.jsx)(s.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},className:"w-full max-w-5xl mx-auto max-h-[95vh] flex flex-col",onClick:e=>e.stopPropagation(),children:(0,r.jsx)(L.X,{campaignId:t,initialStep:el,onComplete:()=>{q(!1),eg(!1),ef(),P.oR.success("Campaign updated successfully")},onBack:()=>{em?eu(!0):q(!1)},onEditLeads:()=>K(!0),onError:e=>{console.error("Campaign update error:",e),P.oR.error((null==e?void 0:e.message)||"Failed to update campaign")},isMagicUI:O.$.IS_MAGIC_AI_ENABLED},Q)})})}),(0,r.jsx)(c.N,{children:H&&(0,r.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:()=>{ex?eu(!0):K(!1)},children:(0,r.jsx)(s.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},className:"w-full max-w-5xl mx-auto max-h-[95vh] flex flex-col",onClick:e=>e.stopPropagation(),children:(0,r.jsx)(T.K,{mode:"edit",campaignId:t,isMagicUI:O.$.IS_MAGIC_AI_ENABLED,onSuccess:()=>{K(!1),eh(!1),eg(!0),ee(e=>e+1),ef(),P.oR.success("Leads updated successfully")},onCancel:()=>{ex?eu(!0):K(!1)},onLeadsUpdated:async()=>{Z(e=>({...e,status:"DRAFT",selected_cohorts:[],cohort_data:{},cohort_config:{},cohort_questions:{},cohort_incentives:{}}));try{await D.F.patch("/intelligence/campaigns/".concat(t),{status:"DRAFT"}),ev.current=Date.now(),P.oR.info("Campaign status changed to DRAFT. Please complete the cohort strategy mapping to activate.",{duration:5e3})}catch(e){console.error("Failed to update campaign status:",e),P.oR.error("Failed to update campaign status. Please refresh and try again.")}ee(e=>e+1),ef()},onDirtyChange:e=>eh(e),className:"flex-1 min-h-0"})})})}),(0,r.jsx)(C.Lt,{open:ea,onOpenChange:et,children:(0,r.jsxs)(C.EO,{className:"rounded-[2rem] border-zinc-200 dark:border-zinc-800 bg-white/95 dark:bg-zinc-950/95 backdrop-blur-xl",children:[(0,r.jsxs)(C.wd,{children:[(0,r.jsxs)(C.r7,{className:"text-2xl font-bold text-zinc-900 dark:text-white flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-xl text-red-600 dark:text-red-400",children:(0,r.jsx)(p.A,{className:"w-5 h-5"})}),"Delete Campaign"]}),(0,r.jsxs)(C.$v,{className:"text-zinc-500 dark:text-zinc-400 text-base py-2",children:["Are you sure you want to delete ",(0,r.jsxs)("span",{className:"font-bold text-zinc-900 dark:text-zinc-100",children:['"',ez,'"']}),"? This will permanently remove the campaign and archive all related leads. This action cannot be undone."]})]}),(0,r.jsxs)(C.ck,{className:"gap-3 sm:gap-0",children:[(0,r.jsx)(C.Zr,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800 text-zinc-600 dark:text-zinc-400 font-bold hover:bg-zinc-50 dark:hover:bg-zinc-900 h-12 px-6",children:"Cancel"}),(0,r.jsx)(C.Rx,{onClick:e=>{e.preventDefault(),eN()},className:"rounded-2xl bg-red-600 hover:bg-red-700 text-white font-bold h-12 px-8 shadow-lg shadow-red-500/20 border-none transition-all hover:scale-[1.02] active:scale-[0.98]",disabled:en,children:en?"Deleting...":"Delete Campaign"})]})]})}),(0,r.jsx)(C.Lt,{open:er,onOpenChange:ei,children:(0,r.jsxs)(C.EO,{className:"rounded-[2rem] border-zinc-200 dark:border-zinc-800 bg-white/95 dark:bg-zinc-950/95 backdrop-blur-xl",children:[(0,r.jsxs)(C.wd,{children:[(0,r.jsxs)(C.r7,{className:"text-2xl font-bold text-zinc-900 dark:text-white flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-xl text-amber-600 dark:text-amber-400",children:(0,r.jsx)(g.A,{className:"w-5 h-5"})}),"Pause Session?"]}),(0,r.jsxs)(C.$v,{className:"text-zinc-500 dark:text-zinc-400 text-base py-2",children:["This campaign is currently active. Do you want to pause it before leaving? ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:"Agents will complete their current calls and then stop dialing."})]})]}),(0,r.jsxs)(C.ck,{className:"gap-3 sm:gap-0",children:[(0,r.jsx)(C.Zr,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800 text-zinc-600 dark:text-zinc-400 font-bold hover:bg-zinc-50 dark:hover:bg-zinc-900 h-12 px-6",children:"Cancel"}),(0,r.jsx)(A.$,{variant:"ghost",onClick:()=>a.push("/dashboard-new/customer-intelligence"),className:"rounded-2xl text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-100 font-semibold h-12 px-6",children:"Exit Without Pausing"}),(0,r.jsx)(C.Rx,{onClick:e=>{e.preventDefault(),ew()},className:"rounded-2xl bg-amber-500 hover:bg-amber-600 text-white font-bold h-12 px-8 shadow-lg shadow-amber-500/20 border-none transition-all hover:scale-[1.02] active:scale-[0.98]",disabled:ec,children:ec?"Pausing...":"Pause & Exit"})]})]})}),(0,r.jsx)(C.Lt,{open:eb,onOpenChange:eu,children:(0,r.jsxs)(C.EO,{className:"rounded-[2rem] border-zinc-200 dark:border-zinc-800 bg-white/95 dark:bg-zinc-950/95 backdrop-blur-xl",children:[(0,r.jsxs)(C.wd,{children:[(0,r.jsxs)(C.r7,{className:"text-2xl font-bold text-zinc-900 dark:text-white flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-xl text-amber-600 dark:text-amber-400",children:(0,r.jsx)(y.A,{className:"w-5 h-5"})}),"Unsaved Changes"]}),(0,r.jsxs)(C.$v,{className:"text-zinc-500 dark:text-zinc-400 text-base py-2",children:["You have unsaved changes to your leads list. If you exit now, these changes will be lost.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:"Are you sure you want to discard your changes?"})]})]}),(0,r.jsxs)(C.ck,{className:"gap-3 sm:gap-0",children:[(0,r.jsx)(C.Zr,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800 text-zinc-600 dark:text-zinc-400 font-bold hover:bg-zinc-50 dark:hover:bg-zinc-900 h-12 px-6",children:"Keep Editing"}),(0,r.jsx)(A.$,{variant:"destructive",onClick:()=>{eu(!1),K(!1),q(!1),eh(!1)},className:"rounded-2xl bg-red-500 hover:bg-red-600 text-white font-bold h-12 px-8 shadow-lg shadow-red-500/20 border-none transition-all hover:scale-[1.02] active:scale-[0.98]",children:"Exit without Saving"})]})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[5563,3524,586,1431,1226,24,763,4158,814,9943,7641,1053,6374,1877,9022,9213,3299,5901,8804,2324,8677,6776,8441,1517,7358],()=>a(63601)),_N_E=e.O()}]);