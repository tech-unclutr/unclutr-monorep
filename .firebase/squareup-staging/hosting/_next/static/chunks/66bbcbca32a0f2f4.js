(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94913,28082,40465,e=>{"use strict";var t,a=e.i(24708),r=e.i(55545),s=e.i(55024),i=e.i(99151),n=e.i(45110),l=e.i(40058),c=e.i(34662),d=e.i(81092),o=e.i(39978),x=e.i(18196);function m(e,t){return function(e,t,a){let m,h,p=(0,s.getDefaultOptions)(),g=a?.locale??p.locale??r.defaultLocale,u=(0,l.compareAsc)(e,t);if(isNaN(u))throw RangeError("Invalid time value");let b=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:u}),[f,j]=(0,n.normalizeDates)(a?.in,...u>0?[t,e]:[e,t]),v=(h=((0,d.toDate)(j)-(0,d.toDate)(f))/1e3,(0,x.getRoundingMethod)(void 0)(h)),N=Math.round((v-((0,i.getTimezoneOffsetInMilliseconds)(j)-(0,i.getTimezoneOffsetInMilliseconds)(f))/1e3)/60);if(N<2)if(a?.includeSeconds)if(v<5)return g.formatDistance("lessThanXSeconds",5,b);else if(v<10)return g.formatDistance("lessThanXSeconds",10,b);else if(v<20)return g.formatDistance("lessThanXSeconds",20,b);else if(v<40)return g.formatDistance("halfAMinute",0,b);else if(v<60)return g.formatDistance("lessThanXMinutes",1,b);else return g.formatDistance("xMinutes",1,b);else if(0===N)return g.formatDistance("lessThanXMinutes",1,b);else return g.formatDistance("xMinutes",N,b);if(N<45)return g.formatDistance("xMinutes",N,b);if(N<90)return g.formatDistance("aboutXHours",1,b);if(N<c.minutesInDay){let e=Math.round(N/60);return g.formatDistance("aboutXHours",e,b)}if(N<2520)return g.formatDistance("xDays",1,b);else if(N<c.minutesInMonth){let e=Math.round(N/c.minutesInDay);return g.formatDistance("xDays",e,b)}else if(N<2*c.minutesInMonth)return m=Math.round(N/c.minutesInMonth),g.formatDistance("aboutXMonths",m,b);if((m=function(e,t,a){var r;let s,i,[c,x,m]=(0,n.normalizeDates)(void 0,e,e,t),h=(0,l.compareAsc)(x,m),p=Math.abs(function(e,t,a){let[r,s]=(0,n.normalizeDates)(void 0,e,t);return 12*(r.getFullYear()-s.getFullYear())+(r.getMonth()-s.getMonth())}(x,m));if(p<1)return 0;1===x.getMonth()&&x.getDate()>27&&x.setDate(30),x.setMonth(x.getMonth()-h*p);let g=(0,l.compareAsc)(x,m)===-h;+(s=(0,d.toDate)(c,void 0),r=void 0,(i=(0,d.toDate)(s,r?.in)).setHours(23,59,59,999),i)==+(0,o.endOfMonth)(s,void 0)&&1===p&&1===(0,l.compareAsc)(c,m)&&(g=!1);let u=h*(p-g);return 0===u?0:u}(j,f))<12){let e=Math.round(N/c.minutesInMonth);return g.formatDistance("xMonths",e,b)}{let e=m%12,t=Math.trunc(m/12);return e<3?g.formatDistance("aboutXYears",t,b):e<9?g.formatDistance("overXYears",t,b):g.formatDistance("almostXYears",t+1,b)}}(e,(0,a.constructNow)(e),t)}e.s(["formatDistanceToNow",()=>m],94913);var h=e.i(43476),p=e.i(71645),g=e.i(46932),u=e.i(88653),b=e.i(1851),f=e.i(80797),j=e.i(77241),v=e.i(50516),N=e.i(26514),k=e.i(31343),w=e.i(95242),y=e.i(75254);let z=(0,y.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var _=e.i(31278),C=e.i(3116),S=e.i(83086),A=e.i(87316),E=e.i(7233),D=e.i(37727),I=e.i(78894),T=e.i(20278),L=e.i(30009),O=e.i(67881),R=e.i(46696),P=e.i(47163),M=e.i(68054),$=e.i(21218),U=e.i(39312),F=e.i(98919);let B=(0,y.default)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),H=(0,y.default)("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var q=e.i(84614),W=e.i(30374),V=e.i(5387),Y=e.i(63270),J=e.i(94179),X=e.i(28231);function Q({isOpen:e,onClose:t,agent:a,agentName:r,leadName:s,index:i,events:n}){let l=a&&["speaking","connected","ringing"].includes(a.status);return(0,h.jsx)(W.Dialog,{open:e,onOpenChange:e=>!e&&t(),children:(0,h.jsxs)(W.DialogContent,{className:"max-w-2xl bg-zinc-950 border-zinc-800 text-white p-0 overflow-hidden rounded-[32px] shadow-2xl shadow-orange-500/20",children:[(0,h.jsxs)(V.VisuallyHidden,{children:[(0,h.jsxs)(W.DialogTitle,{children:[r," Live Update"]}),(0,h.jsxs)(W.DialogDescription,{children:["Real-time status and neural logs for AI Agent ",r,"."]})]}),(0,h.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,rgba(99,102,241,0.1),transparent)] pointer-events-none"}),(0,h.jsx)("div",{className:"relative z-10 p-8 pb-4",children:(0,h.jsxs)("div",{className:"flex items-start justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center gap-6",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:(0,P.cn)("absolute inset-0 blur-2xl opacity-40 rounded-full",l?"bg-orange-500 animate-pulse":"bg-zinc-500")}),(0,h.jsxs)(Y.Avatar,{className:"w-20 h-20 border-2 border-zinc-800 relative z-10 shadow-xl",children:[(0,h.jsx)(Y.AvatarImage,{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${r}&backgroundColor=e0e7ff`}),(0,h.jsx)(Y.AvatarFallback,{children:r.slice(0,2).toUpperCase()})]}),(0,h.jsx)("div",{className:(0,P.cn)("absolute -bottom-1 -right-1 w-7 h-7 rounded-full border-4 border-zinc-950 flex items-center justify-center relative z-20",l?"bg-emerald-500":"bg-zinc-600"),children:(0,h.jsx)(z,{className:"w-4 h-4 text-white"})})]}),(0,h.jsxs)("div",{className:"space-y-1",children:[(0,h.jsxs)("div",{className:"space-y-1",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("h2",{className:"text-2xl font-black tracking-tight leading-none",children:r}),(0,h.jsx)(J.Badge,{className:(0,P.cn)("px-2 py-0 text-[10px] uppercase font-black tracking-widest border-0",l?"bg-emerald-500/10 text-emerald-400":"bg-zinc-800 text-zinc-400"),children:a?.status||"Idle"})]}),(0,h.jsx)("p",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-[0.2em]",children:"AI Agent"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-4 text-xs font-medium text-zinc-400",children:[(0,h.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,h.jsx)(B,{className:"w-3.5 h-3.5 text-orange-500"}),(0,h.jsx)("span",{children:"Neural Model v4.2"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,h.jsx)(F.Shield,{className:"w-3.5 h-3.5 text-orange-500"}),(0,h.jsx)("span",{children:"Secure Uplink"})]})]})]})]}),(0,h.jsx)("button",{onClick:t,className:"p-2 hover:bg-zinc-900 rounded-full transition-colors text-zinc-500 hover:text-white",children:(0,h.jsx)(D.X,{className:"w-6 h-6"})})]})}),(0,h.jsxs)("div",{className:"mx-8 p-4 rounded-2xl bg-zinc-900/50 border border-zinc-800/50 backdrop-blur-sm flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsx)("div",{className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center",children:(0,h.jsx)(q.User,{className:"w-5 h-5 text-orange-400"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest",children:"Active Target"}),(0,h.jsx)("p",{className:"text-sm font-bold",children:s||a?.lead_name||"Scanning for leads..."})]})]}),l&&a&&(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsxs)("div",{className:"text-right",children:[(0,h.jsx)("p",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest",children:"Duration"}),(0,h.jsxs)("p",{className:"text-sm font-mono text-orange-400",children:[Math.floor(a.duration/60),":",(a.duration%60).toString().padStart(2,"0")]})]}),(0,h.jsx)("div",{className:"w-px h-8 bg-zinc-800 mx-2"}),(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[(0,h.jsx)(H,{className:"w-4 h-4 text-emerald-500 animate-pulse"}),(0,h.jsx)("span",{className:"text-[10px] font-black text-emerald-500 uppercase",children:"Live"})]})]})]}),(0,h.jsxs)("div",{className:"p-8",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(M.Terminal,{className:"w-4 h-4 text-orange-500"}),(0,h.jsx)("h3",{className:"text-[10px] uppercase font-black text-zinc-500 tracking-[0.2em]",children:"Neural Logs & Thoughts"})]}),(0,h.jsx)("div",{className:"flex items-center gap-4",children:(0,h.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,h.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 animate-pulse"}),(0,h.jsx)("span",{className:"text-[9px] font-bold text-zinc-500 uppercase",children:"Syncing"})]})})]}),(0,h.jsxs)("div",{className:"relative group",children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.1)_50%),linear-gradient(90deg,rgba(99,102,241,0.03),rgba(16,185,129,0.01),rgba(99,102,241,0.03))] bg-[length:100%_2px,3px_100%] pointer-events-none opacity-50 z-10"}),(0,h.jsx)("div",{className:"h-[300px] w-full bg-black rounded-2xl border border-zinc-800 p-6 font-mono text-[11px] overflow-y-auto scrollbar-hide space-y-3 shadow-inner",children:(0,h.jsx)(u.AnimatePresence,{initial:!1,children:n.length>0?n.map((e,t)=>(0,h.jsxs)(g.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-start gap-4 group/log",children:[(0,h.jsx)("span",{className:"text-zinc-700 shrink-0 group-hover/log:text-zinc-500 transition-colors cursor-help",children:(0,h.jsx)(X.TooltipProvider,{children:(0,h.jsxs)(X.Tooltip,{children:[(0,h.jsx)(X.TooltipTrigger,{asChild:!0,children:(0,h.jsxs)("span",{children:["[",(0,P.parseAsUTC)(e.timestamp).toLocaleTimeString([],{hour12:!0,hour:"2-digit",minute:"2-digit",second:"2-digit"}),"]"]})}),(0,h.jsx)(X.TooltipContent,{className:"z-[9999]",side:"top",children:(0,h.jsx)("p",{children:new Date(e.timestamp).toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit"})})})]})})}),(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsxs)("span",{className:(0,P.cn)("font-bold mr-2 uppercase","system"===e.type?"text-orange-400":"thought"===e.type?"text-amber-500":"text-emerald-500"),children:["system"===e.type?">> CORE":"thought"===e.type?">> THOUGHT":`>> ${r.split(" ")[0]}`,":"]}),(0,h.jsx)("span",{className:"text-zinc-300 leading-relaxed uppercase tracking-tight",children:e.message})]})]},e.id+t)):(0,h.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-zinc-700 space-y-4",children:[(0,h.jsx)(G,{className:"w-8 h-8 animate-spin opacity-20"}),(0,h.jsx)("p",{className:"uppercase tracking-[0.3em] text-[9px] font-black",children:"Establishing Neural Link..."})]})})})]})]}),(0,h.jsxs)("div",{className:"px-8 pb-8 flex items-center justify-between text-[9px] font-black text-zinc-600 uppercase tracking-widest",children:[(0,h.jsxs)("div",{className:"flex items-center gap-6",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(U.Zap,{className:"w-3 h-3 text-orange-500"}),(0,h.jsx)("span",{children:"Performance: 1.2ms latency"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)($.Activity,{className:"w-3 h-3 text-emerald-500"}),(0,h.jsx)("span",{children:"Quality: 98.4%"})]})]}),(0,h.jsxs)("div",{children:["Node ID: UNCLN-@",i+1]})]})]})})}function G({className:e}){return(0,h.jsx)("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,h.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})}var K=e.i(63059),Z=e.i(95468),ee=e.i(73884),et=e.i(27612),ea=e.i(43432),er=e.i(18724),es=e.i(63209),ei=e.i(75558);let en=(0,y.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var el=e.i(16715),ec=e.i(52008);let ed=(0,y.default)("coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);var eo=e.i(54858),ex=e.i(71435),em=e.i(81140),eh=e.i(30030),ep=(e.i(69340),e.i(20783)),eg=e.i(53660),eu=(e.i(74606),e.i(96626)),eb=e.i(48425),ef=e.i(26330),ej="HoverCard",[ev,eN]=(0,eh.createContextScope)(ej,[eg.createPopperScope]),ek=(0,eg.createPopperScope)(),[ew,ey]=ev(ej),ez="HoverCardTrigger";p.forwardRef((e,t)=>{let{__scopeHoverCard:a,...r}=e,s=ey(ez,a),i=ek(a);return(0,h.jsx)(eg.Anchor,{asChild:!0,...i,children:(0,h.jsx)(eb.Primitive.a,{"data-state":s.open?"open":"closed",...r,ref:t,onPointerEnter:(0,em.composeEventHandlers)(e.onPointerEnter,eD(s.onOpen)),onPointerLeave:(0,em.composeEventHandlers)(e.onPointerLeave,eD(s.onClose)),onFocus:(0,em.composeEventHandlers)(e.onFocus,s.onOpen),onBlur:(0,em.composeEventHandlers)(e.onBlur,s.onClose),onTouchStart:(0,em.composeEventHandlers)(e.onTouchStart,e=>e.preventDefault())})})}).displayName=ez;var[e_,eC]=ev("HoverCardPortal",{forceMount:void 0}),eS="HoverCardContent",eA=p.forwardRef((e,t)=>{let a=eC(eS,e.__scopeHoverCard),{forceMount:r=a.forceMount,...s}=e,i=ey(eS,e.__scopeHoverCard);return(0,h.jsx)(eu.Presence,{present:r||i.open,children:(0,h.jsx)(eE,{"data-state":i.open?"open":"closed",...s,onPointerEnter:(0,em.composeEventHandlers)(e.onPointerEnter,eD(i.onOpen)),onPointerLeave:(0,em.composeEventHandlers)(e.onPointerLeave,eD(i.onClose)),ref:t})})});eA.displayName=eS;var eE=p.forwardRef((e,a)=>{let{__scopeHoverCard:r,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:n,onInteractOutside:l,...c}=e,d=ey(eS,r),o=ek(r),x=p.useRef(null),m=(0,ep.useComposedRefs)(a,x),[g,u]=p.useState(!1);return p.useEffect(()=>{if(g){let e=document.body;return t=e.style.userSelect||e.style.webkitUserSelect,e.style.userSelect="none",e.style.webkitUserSelect="none",()=>{e.style.userSelect=t,e.style.webkitUserSelect=t}}},[g]),p.useEffect(()=>{if(x.current){let e=()=>{u(!1),d.isPointerDownOnContentRef.current=!1,setTimeout(()=>{document.getSelection()?.toString()!==""&&(d.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",e),()=>{document.removeEventListener("pointerup",e),d.hasSelectionRef.current=!1,d.isPointerDownOnContentRef.current=!1}}},[d.isPointerDownOnContentRef,d.hasSelectionRef]),p.useEffect(()=>{x.current&&(function(e){let t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;a.nextNode();)t.push(a.currentNode);return t})(x.current).forEach(e=>e.setAttribute("tabindex","-1"))}),(0,h.jsx)(ef.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:l,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:(0,em.composeEventHandlers)(n,e=>{e.preventDefault()}),onDismiss:d.onDismiss,children:(0,h.jsx)(eg.Content,{...o,...c,onPointerDown:(0,em.composeEventHandlers)(c.onPointerDown,e=>{e.currentTarget.contains(e.target)&&u(!0),d.hasSelectionRef.current=!1,d.isPointerDownOnContentRef.current=!0}),ref:m,style:{...c.style,userSelect:g?"text":void 0,WebkitUserSelect:g?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})});function eD(e){return t=>"touch"===t.pointerType?void 0:e()}p.forwardRef((e,t)=>{let{__scopeHoverCard:a,...r}=e,s=ek(a);return(0,h.jsx)(eg.Arrow,{...s,...r,ref:t})}).displayName="HoverCardArrow",p.forwardRef(({className:e,align:t="center",sideOffset:a=4,...r},s)=>(0,h.jsx)(eA,{ref:s,align:t,sideOffset:a,className:(0,P.cn)("z-50 w-64 rounded-xl border border-zinc-200 bg-white p-4 text-zinc-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",e),...r})).displayName=eA.displayName,e.i(74080);var eI=e.i(91918),eT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,eI.createSlot)(`Primitive.${t}`),r=p.forwardRef((e,r)=>{let{asChild:s,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,h.jsx)(s?a:t,{...i,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),eL="horizontal",eO=["horizontal","vertical"],eR=p.forwardRef((e,t)=>{var a;let{decorative:r,orientation:s=eL,...i}=e,n=(a=s,eO.includes(a))?s:eL;return(0,h.jsx)(eT.div,{"data-orientation":n,...r?{role:"none"}:{"aria-orientation":"vertical"===n?n:void 0,role:"separator"},...i,ref:t})});eR.displayName="Separator",p.forwardRef(({className:e,orientation:t="horizontal",decorative:a=!0,...r},s)=>(0,h.jsx)(eR,{ref:s,decorative:a,orientation:t,className:(0,P.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...r})).displayName=eR.displayName;var eP=e.i(61911);function eM({cohort:e,variant:t="default",className:a,animate:r=!0}){if(!e)return null;let s="inline-flex items-center gap-1.5 font-black uppercase tracking-wider transition-all duration-300",i={default:"bg-indigo-500/10 text-indigo-600 dark:text-indigo-400 border border-indigo-500/20 px-3 py-1 rounded-full text-[10px]",mini:"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-500 border border-zinc-200 dark:border-zinc-700/50 px-2 py-0.5 rounded-lg text-[9px]",glass:"bg-white/40 dark:bg-indigo-500/10 backdrop-blur-md text-indigo-600 dark:text-indigo-300 border border-indigo-500/30 px-3 py-1 rounded-full text-[10px] shadow-sm shadow-indigo-500/5"},n=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(eP.Users,{className:(0,P.cn)("mini"===t?"w-2.5 h-2.5":"w-3 h-3","opacity-70 group-hover:opacity-100 transition-opacity")}),(0,h.jsx)("span",{className:"truncate max-w-[120px]",children:e})]});return r?(0,h.jsx)(g.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{scale:1.05,y:-1},className:(0,P.cn)(s,i[t],"group cursor-default",a),children:n}):(0,h.jsx)("div",{className:(0,P.cn)(s,i[t],"group",a),children:n})}let e$=[{name:"Alex",seed:"Alex",tagline:"Customer Screening Specialist"},{name:"Sarah",seed:"Sarah",tagline:"Customer Screening Specialist"},{name:"Rohan",seed:"Rohan",tagline:"Customer Screening Specialist"},{name:"Maya",seed:"Maya",tagline:"Customer Screening Specialist"},{name:"Jordan",seed:"Jordan",tagline:"Customer Screening Specialist"},{name:"Priya",seed:"Priya",tagline:"Customer Screening Specialist"}];var eU=e.i(87951);let eF=(0,y.default)("signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);var eB=e.i(23385);let eH=(0,y.default)("voicemail",[["circle",{cx:"6",cy:"12",r:"4",key:"1ehtga"}],["circle",{cx:"18",cy:"12",r:"4",key:"4vafl8"}],["line",{x1:"6",x2:"18",y1:"16",y2:"16",key:"pmt8us"}]]),eq=(0,y.default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var eW=e.i(59377);function eV({agent:e,events:t,index:a}){let r,s=(e.status||"idle").toLowerCase(),i=["speaking","connected","ringing","listening","processing","initiated","in-progress","queued"].includes(s),n=(0,p.useRef)(null);(0,p.useEffect)(()=>{n.current&&(n.current.scrollTop=n.current.scrollHeight)},[t]);let[l,c]=(0,p.useState)(e.duration);(0,p.useEffect)(()=>{c(e.duration)},[e.duration]),(0,p.useEffect)(()=>{if(!i)return;let e=setInterval(()=>{c(e=>e+1)},1e3);return()=>clearInterval(e)},[i]);let d=(e=>{switch(e){case"speaking":return{color:"text-orange-500",bg:"bg-orange-500",border:"border-orange-200",ring:"ring-orange-500",icon:eU.Mic,label:"Speaking",gradient:"from-orange-500/20"};case"listening":return{color:"text-emerald-500",bg:"bg-emerald-500",border:"border-emerald-200",ring:"ring-emerald-500",icon:eF,label:"Listening",gradient:"from-emerald-500/20"};case"processing":return{color:"text-orange-500",bg:"bg-orange-500",border:"border-orange-200",ring:"ring-orange-500",icon:eB.BrainCircuit,label:"Thinking",gradient:"from-orange-500/20"};case"ringing":return{color:"text-amber-500",bg:"bg-amber-500",border:"border-amber-200",ring:"ring-amber-500",icon:ea.Phone,label:"Ringing",gradient:"from-amber-500/20"};case"initiated":return{color:"text-blue-500",bg:"bg-blue-500",border:"border-blue-200",ring:"ring-blue-500",icon:ea.Phone,label:"Dialing",gradient:"from-blue-500/20"};case"completed":return{color:"text-green-600",bg:"bg-green-600",border:"border-green-200",ring:"ring-green-500",icon:Z.CheckCircle2,label:"Completed",gradient:"from-green-500/20"};case"failed":return{color:"text-red-500",bg:"bg-red-500",border:"border-red-200",ring:"ring-red-500",icon:ee.XCircle,label:"Failed",gradient:"from-red-500/20"};case"voicemail":return{color:"text-orange-500",bg:"bg-orange-500",border:"border-orange-200",ring:"ring-orange-500",icon:eH,label:"Voicemail",gradient:"from-orange-500/20"};default:return{color:"text-zinc-500",bg:"bg-zinc-500",border:"border-zinc-200",ring:"ring-zinc-400",icon:eq,label:e,gradient:"from-zinc-500/10"}}})(s),o=t.filter(e=>"thought"===e.type).slice(-1);return(0,h.jsxs)("div",{className:(0,P.cn)("relative h-full w-full overflow-hidden rounded-[24px] border transition-all duration-700 flex flex-col justify-between",i?"bg-white dark:bg-zinc-950 border-white/50 dark:border-zinc-800 shadow-xl":"bg-zinc-50 dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800"),children:[i&&(0,h.jsxs)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden transition-colors duration-1000",children:[(0,h.jsx)(g.motion.div,{className:(0,P.cn)("absolute -top-[50%] -right-[50%] w-[150%] h-[150%] rounded-full blur-[120px] opacity-15 transition-colors duration-1000",d.bg),animate:{scale:[1,1.1,1],opacity:[.1,.15,.1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),(0,h.jsx)(g.motion.div,{className:(0,P.cn)("absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t opacity-10 transition-colors duration-1000",d.gradient,"to-transparent")})]}),(0,h.jsxs)("div",{className:"relative z-20 px-6 py-5 flex items-center justify-between border-b border-zinc-50 dark:border-zinc-800/50",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsxs)(Y.Avatar,{className:"w-10 h-10 border border-white dark:border-zinc-800 shadow-sm",children:[(0,h.jsx)(Y.AvatarImage,{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${e.agent_name||"agent"}&backgroundColor=e0e7ff`}),(0,h.jsx)(Y.AvatarFallback,{className:"bg-orange-50 text-orange-600 text-[10px] font-bold",children:"AI"})]}),i&&(0,h.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-orange-500 rounded-full border-2 border-white dark:border-zinc-950"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"flex items-center gap-2",children:(0,h.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100 leading-none",children:e.agent_name})}),(0,h.jsx)("p",{className:"text-[10px] font-medium text-zinc-400 dark:text-zinc-500 uppercase tracking-wide mt-0.5",children:"Screening Specialist"})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsxs)(J.Badge,{variant:"outline",className:(0,P.cn)("text-[10px] h-6 pl-1.5 pr-2.5 gap-1.5 border transition-colors duration-500",i?"bg-white/50 dark:bg-zinc-900/50":"bg-transparent",d.color,d.border),children:[(0,h.jsx)("div",{className:(0,P.cn)("w-1.5 h-1.5 rounded-full animate-pulse",d.bg)}),(0,h.jsx)("span",{className:"uppercase tracking-wider font-bold",children:d.label})]}),(0,h.jsx)("div",{className:"text-[11px] font-mono font-medium text-zinc-400 tabular-nums",children:(r=Math.floor(l/60),`${r}:${(l%60).toString().padStart(2,"0")}`)})]})]}),(0,h.jsxs)("div",{className:"relative z-20 flex-1 flex flex-col items-center justify-center p-6 gap-6",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:(0,P.cn)("absolute inset-0 rounded-full blur-xl opacity-30 transition-colors duration-500",i?d.bg:"bg-transparent")}),(0,h.jsx)("div",{className:"relative z-10 p-1 rounded-full bg-white dark:bg-zinc-900 shadow-2xl",children:(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsxs)(Y.Avatar,{className:"w-24 h-24 border-4 border-zinc-50 dark:border-zinc-800",children:[(0,h.jsx)(Y.AvatarImage,{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${e.lead_id||"customer"}&backgroundColor=f0fdf4`}),(0,h.jsx)(Y.AvatarFallback,{className:"bg-emerald-50 text-emerald-600 font-bold text-2xl",children:(e.lead_name||"??").slice(0,2)})]}),i&&(0,h.jsx)("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2",children:(0,h.jsx)(J.Badge,{className:"bg-emerald-500 text-white border-2 border-white dark:border-zinc-950 text-[9px] px-2 h-5 font-black uppercase tracking-wider shadow-sm hover:bg-emerald-600",children:"Live"})})]})})]}),(0,h.jsxs)("div",{className:"text-center space-y-1",children:[(0,h.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:e.lead_name||"Unknown Lead"}),(0,h.jsx)("p",{className:"text-xs font-medium text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:e.cohort||"Campaign Target"})]})]}),(0,h.jsx)("div",{className:"relative z-30 p-4 pt-0",children:(0,h.jsxs)("div",{className:(0,P.cn)("rounded-2xl border p-1 pr-2 flex items-center gap-2 transition-all duration-500",i?"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-md shadow-sm border-zinc-100 dark:border-zinc-800":"bg-transparent border-transparent"),children:[(0,h.jsx)("div",{className:"h-10 w-24 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl flex items-center justify-center gap-0.5 px-3 overflow-hidden",children:i?[...Array(8)].map((e,t)=>(0,h.jsx)(g.motion.div,{className:(0,P.cn)("w-1 rounded-full",d.bg),animate:{height:"speaking"===s?[4,20,4]:"listening"===s?[4,12,4]:[4,6,4],opacity:[.4,.8,.4]},transition:{duration:.5,repeat:1/0,repeatType:"mirror",delay:.05*t}},t)):(0,h.jsx)("div",{className:"w-full h-[1px] bg-zinc-200 dark:bg-zinc-700"})}),(0,h.jsx)("div",{className:"flex-1 min-w-0",children:t.length>0?(0,h.jsxs)("div",{className:"text-[11px] text-zinc-600 dark:text-zinc-300 truncate font-medium",children:[(0,h.jsx)("span",{className:(0,P.cn)("mr-2 font-bold","agent_action"===t[t.length-1].type?"text-orange-500":"text-emerald-500"),children:"agent_action"===t[t.length-1].type?"AI:":"User:"}),t[t.length-1].message?.replace(/^.*: "/,"").replace(/"$/,"")]}):(0,h.jsx)("div",{className:"text-[10px] text-zinc-400 italic",children:"Connecting..."})}),(0,h.jsxs)(eW.Popover,{children:[(0,h.jsx)(eW.PopoverTrigger,{asChild:!0,children:(0,h.jsx)("button",{className:"w-8 h-8 rounded-xl bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 flex items-center justify-center transition-colors",children:(0,h.jsx)(M.Terminal,{className:"w-4 h-4 text-zinc-500"})})}),(0,h.jsx)(eW.PopoverContent,{side:"top",align:"center",className:"w-[400px] p-0 rounded-[20px] shadow-2xl border-orange-100 dark:border-zinc-800",children:(0,h.jsxs)("div",{className:"flex flex-col max-h-[500px] bg-white dark:bg-zinc-950 rounded-[20px] overflow-hidden",children:[(0,h.jsxs)("div",{className:"px-4 py-3 border-b border-zinc-100 dark:border-zinc-900 bg-zinc-50/50 flex items-center justify-between",children:[(0,h.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Live Transcript"}),o.length>0&&(0,h.jsx)(J.Badge,{variant:"secondary",className:"text-[9px] bg-orange-50 text-orange-600 border-orange-100 h-5",children:"Thinking"})]}),(0,h.jsx)(ex.ScrollArea,{className:"flex-1 min-h-[200px] max-h-[400px]",children:(0,h.jsxs)("div",{className:"p-4 space-y-3",children:[o[0]&&(0,h.jsxs)("div",{className:"p-3 rounded-xl bg-orange-50/50 dark:bg-orange-900/20 border border-orange-100 dark:border-orange-900/30 text-xs text-orange-700 dark:text-orange-300 italic mb-4",children:[(0,h.jsx)(S.Sparkles,{className:"w-3 h-3 inline mr-1.5 align-text-top"}),'"',o[0].message,'"']}),t.filter(e=>"thought"!==e.type).slice(-15).map((e,t)=>(0,h.jsxs)("div",{className:"flex gap-3 text-xs group",children:[(0,h.jsx)("div",{className:(0,P.cn)("w-1.5 h-1.5 rounded-full mt-1.5 shrink-0 transition-opacity opacity-40 group-hover:opacity-100","agent_action"===e.type?"bg-orange-500":"bg-emerald-500")}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:(0,P.cn)("font-bold text-[10px] uppercase tracking-wider block mb-0.5","agent_action"===e.type?"text-orange-500":"text-emerald-500"),children:"agent_action"===e.type?"AI Agent":"Lead"}),(0,h.jsx)("p",{className:"text-zinc-700 dark:text-zinc-300 leading-relaxed",children:e.message.replace(/^.*: "/,"").replace(/"$/,"")})]})]},t))]})})]})})]})]})})]})}var eY=e.i(47167),eJ=e.i(70065),eX=e.i(51898);let eQ=(0,y.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),eG={INTENT_YES:{color:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20",Icon:Z.CheckCircle2},INTERESTED:{color:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20",Icon:Z.CheckCircle2},NOT_INTERESTED:{color:"bg-orange-500/10 text-orange-600 border-orange-500/20",Icon:es.AlertCircle},DNC:{color:"bg-red-500/10 text-red-600 border-red-500/20",Icon:ee.XCircle},SCHEDULED:{color:"bg-blue-500/10 text-blue-600 border-blue-500/20",Icon:Z.CheckCircle2},VOICEMAIL:{color:"bg-zinc-500/10 text-zinc-600 border-zinc-500/20",Icon:eX.PhoneIncoming},NO_ANSWER:{color:"bg-zinc-500/10 text-zinc-600 border-zinc-500/20",Icon:eX.PhoneIncoming},BUSY:{color:"bg-amber-500/10 text-amber-600 border-amber-500/20",Icon:eX.PhoneIncoming},FAILED:{color:"bg-red-500/10 text-red-600 border-red-500/20",Icon:ee.XCircle},CONNECTED:{color:"bg-blue-500/10 text-blue-600 border-blue-500/20",Icon:er.PhoneCall},AMBIGUOUS:{color:"bg-orange-500/10 text-orange-600 border-orange-500/20",Icon:es.AlertCircle},DISCONNECTED:{color:"bg-zinc-500/10 text-zinc-600 border-zinc-500/20",Icon:C.Clock}},eK=({history:e,onSelectCall:t,onCopyToQueue:a})=>{let[r,s]=p.default.useState({}),i=async e=>{try{let t=window.location.pathname.split("/").pop();await eo.api.post(`/execution/campaign/${t}/lead/${e.lead_id}/copy-to-queue`,{call_log_id:e.call_log_id,preferred_slot:e.preferred_slot}),R.toast.success("Copied to Queue",{description:`Lead ${e.name} has been added to your personal follow-up queue.`}),a&&a()}catch(e){R.toast.error("Copy Failed",{description:"Could not add lead to queue. Please try again."})}},n=e=>{let t=window.location.pathname.split("/").pop(),a=`${eY.default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000"}/api/v1/execution/campaign/${t}/lead/${e.lead_id}/book-call`;window.open(a,"_blank"),R.toast.info("Booking Link Opened",{description:"Calendar booking page opened in a new tab."})},l=p.default.useMemo(()=>{let t=[],a=new Map;return e.forEach((e,r)=>{let s=a.get(e.lead_id),i=!1;if(s){let t=s.calls[s.calls.length-1],a=(0,P.parseAsUTC)(e.timestamp).getTime();Math.abs((0,P.parseAsUTC)(t.timestamp).getTime()-a)/6e4<=30&&(i=!0)}if(i&&s)s.calls.push(e);else{let s={lead_id:e.lead_id,calls:[e],id:`${e.lead_id}-${r}`};t.push(s),a.set(e.lead_id,s)}}),t},[e]);p.default.useEffect(()=>{s(e=>{let t={...e};return l.forEach(e=>{void 0===t[e.id]&&(t[e.id]=e.calls.length>1)}),t})},[l]);let c=(e,t)=>{t.stopPropagation(),s(t=>({...t,[e]:!t[e]}))};return 0===e.length?(0,h.jsx)("div",{className:"h-[300px] flex flex-col items-center justify-center p-8 text-center",children:(0,h.jsxs)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,ease:"easeOut"},className:"flex flex-col items-center gap-6",children:[(0,h.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,h.jsx)(g.motion.div,{animate:{scale:[1,1.5,1],opacity:[.3,.6,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute -inset-4 bg-zinc-500/30 blur-2xl rounded-full"}),(0,h.jsx)(g.motion.div,{animate:{scale:[1,1.15,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,h.jsx)($.Activity,{className:"relative w-8 h-8 text-zinc-400 dark:text-zinc-500 opacity-90",strokeWidth:1.5})})]}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)("h3",{className:"text-lg font-medium text-zinc-900 dark:text-zinc-100 tracking-tight",children:"No activity yet"}),(0,h.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-500 font-normal",children:"Waiting for the first connection."})]})]})}):(0,h.jsx)("div",{className:"space-y-3 pb-4",children:l.slice(0,20).map(e=>{let a=r[e.id],s=(e=>{if(1===e.length)return e[0];let t=e.find(e=>e.agreement_status?.status==="yes");if(t)return t;let a=e.find(e=>e.intent_priority?.level==="high");if(a)return a;let r=e.find(e=>["INTENT_YES","INTERESTED","SCHEDULED"].includes(e.outcome||e.status||""));if(r)return r;let s=e.find(e=>"CONNECTED"===(e.outcome||e.status));return s||e[0]})(e.calls),l=e.calls.length>1;return(0,h.jsxs)(g.motion.div,{initial:!1,animate:a?"collapsed":"expanded",className:"relative",children:[(0,h.jsx)(u.AnimatePresence,{children:l&&a&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(g.motion.div,{initial:{scale:.95,y:0,opacity:0,rotateX:0},animate:{scale:.95,y:6,opacity:.9,rotateX:-2},exit:{scale:1,y:0,opacity:0,rotateX:0},transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-x-2 bottom-0 h-full bg-white dark:bg-zinc-900 rounded-2xl border border-zinc-200/80 dark:border-zinc-800/80 shadow-lg z-0",style:{transformOrigin:"center bottom"}}),(0,h.jsx)(g.motion.div,{initial:{scale:.9,y:0,opacity:0,rotateX:0},animate:{scale:.9,y:12,opacity:.7,rotateX:-3},exit:{scale:1,y:0,opacity:0,rotateX:0},transition:{type:"spring",stiffness:300,damping:30,delay:.02},className:"absolute inset-x-4 bottom-0 h-full bg-white dark:bg-zinc-900 rounded-2xl border border-zinc-200/60 dark:border-zinc-800/60 shadow-md -z-10",style:{transformOrigin:"center bottom"}})]})}),(0,h.jsx)(eJ.Card,{className:(0,P.cn)("relative z-10 overflow-hidden transition-all duration-300 bg-white dark:bg-zinc-950 rounded-2xl border border-zinc-100 dark:border-zinc-800/60",l&&"cursor-pointer hover:border-orange-200 dark:hover:border-orange-500/30 hover:shadow-lg",!l&&"hover:shadow-md hover:-translate-y-0.5 shadow-sm"),onClick:a=>l?c(e.id,a):t(s),children:a?(0,h.jsxs)("div",{className:"p-3 group",children:[(0,h.jsxs)("div",{className:"flex items-start gap-3",children:[(0,h.jsx)("div",{className:"w-9 h-9 rounded-full overflow-hidden border-2 border-white dark:border-zinc-800 shadow-sm shrink-0 bg-zinc-50 dark:bg-zinc-900",children:(0,h.jsx)("img",{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${s.avatar_seed}`,alt:s.name,className:"w-full h-full object-contain scale-125 translate-y-1"})}),(0,h.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,h.jsxs)("h3",{className:"text-[13px] font-semibold text-zinc-900 dark:text-zinc-100 truncate flex items-center gap-1.5",children:[s.name,l&&(0,h.jsx)(J.Badge,{variant:"secondary",className:"text-[8px] px-1.5 h-3.5 bg-orange-50 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400 border-0",children:e.calls.length})]}),(0,h.jsx)("span",{className:"text-[10px] text-zinc-400 font-medium whitespace-nowrap",children:(0,P.formatRelativeTime)(s.timestamp)})]}),(0,h.jsx)(eZ,{call:s,showDetails:!1})]})]}),l&&(0,h.jsx)("div",{className:"mt-2 flex items-center justify-center",children:(0,h.jsxs)(g.motion.div,{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200 dark:border-zinc-800 opacity-0 group-hover:opacity-100 transition-opacity",whileHover:{scale:1.05},children:[(0,h.jsx)("span",{className:"text-[8px] text-zinc-500 font-bold uppercase tracking-wider",children:"Expand"}),(0,h.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-zinc-400",children:(0,h.jsx)("polyline",{points:"6 9 12 15 18 9"})})]})})]}):(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsxs)("div",{className:(0,P.cn)("p-3 pb-2 border-b border-zinc-100 dark:border-zinc-800/50 flex items-center justify-between bg-zinc-50/80 dark:bg-zinc-900/50 backdrop-blur-sm",l&&"cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-900 transition-colors"),onClick:t=>l&&c(e.id,t),children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:"w-7 h-7 rounded-full overflow-hidden border border-white dark:border-zinc-800 shadow-sm shrink-0 bg-zinc-50 dark:bg-zinc-900",children:(0,h.jsx)("img",{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${e.calls[0].avatar_seed}`,alt:e.calls[0].name,className:"w-full h-full object-contain scale-125 translate-y-1"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-[13px] font-bold text-zinc-900 dark:text-zinc-100 leading-none",children:e.calls[0].name}),(0,h.jsxs)("p",{className:"text-[9px] text-zinc-500 dark:text-zinc-400 mt-0.5",children:[e.calls.length," Call",e.calls.length>1?"s":""," Sequence"]})]})]}),l&&(0,h.jsx)(g.motion.div,{className:"flex items-center justify-center w-6 h-6 rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,h.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-zinc-400",children:(0,h.jsx)("polyline",{points:"18 15 12 9 6 15"})})})]}),(0,h.jsx)("div",{className:"flex flex-col",children:e.calls.map((a,r)=>(0,h.jsx)("div",{className:(0,P.cn)("p-4 hover:bg-zinc-50 dark:hover:bg-zinc-900/40 transition-colors cursor-pointer border-b border-zinc-50 dark:border-zinc-800/50 last:border-0",a===s&&"bg-orange-50/30 dark:bg-orange-500/5"),onClick:e=>{e.stopPropagation(),t(a)},children:(0,h.jsxs)("div",{className:"flex items-start gap-4",children:[(0,h.jsxs)("div",{className:"flex flex-col items-center self-stretch w-4 pt-1.5",children:[(0,h.jsx)("div",{className:(0,P.cn)("w-2 h-2 rounded-full ring-2 ring-white dark:ring-zinc-950",(a.outcome||"").includes("YES")||(a.outcome||"").includes("INTERESTED")?"bg-emerald-500":"bg-zinc-300 dark:bg-zinc-700")}),r<e.calls.length-1&&(0,h.jsx)("div",{className:"w-[1px] flex-1 bg-zinc-200 dark:bg-zinc-800 my-1"})]}),(0,h.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,h.jsx)("span",{className:"text-[10px] uppercase font-bold text-zinc-400",children:(0,P.formatRelativeTime)(a.timestamp)}),a===s&&(0,h.jsx)(J.Badge,{variant:"outline",className:"text-[8px] h-4 border-orange-200 text-orange-500",children:"Key Context"})]}),(0,h.jsx)(eZ,{call:a,showDetails:!0,onCopyToQueue:i,onBookCall:n})]})]})},`${a.lead_id}-${r}`))})]})})]},e.id)})})},eZ=({call:e,showDetails:t,onCopyToQueue:a,onBookCall:r})=>{var s;let i,n,l=e.key_insight&&/[\u0900-\u097F]+/.test(e.key_insight),c=(e=>{if(e.agreement_status?.status==="yes")return{label:"AGREED",color:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20",Icon:Z.CheckCircle2};let t=(e.outcome||e.status||"FAILED").toUpperCase(),a=eG[t]||{color:"bg-zinc-500/10 text-zinc-600 border-zinc-500/20",Icon:C.Clock};return{label:"AMBIGUOUS"===t?"Unclear":t.replace(/_/g," "),color:a.color,Icon:a.Icon}})(e);return(0,h.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,h.jsxs)(J.Badge,{className:(0,P.cn)("text-[9px] font-black uppercase px-2 py-0.5 rounded-full border shadow-sm flex items-center gap-1 cursor-default",c.color),children:[(0,h.jsx)(c.Icon,{className:"w-2.5 h-2.5"}),c.label]}),(0,h.jsx)("span",{className:"text-[10px] text-zinc-400",children:(i=Math.floor((s=e.duration)/60),n=s%60,0===i?`${n}s`:`${i}m ${n.toString().padStart(2,"0")}s`)})]}),(0,h.jsxs)("p",{className:(0,P.cn)("text-sm leading-relaxed line-clamp-2",e.intent_priority?.level==="high"?"text-zinc-900 dark:text-zinc-100 font-medium":"text-zinc-600 dark:text-zinc-400"),children:[e.intent_priority&&(0,h.jsx)("span",{className:"mr-1.5 text-[10px] opacity-60",children:"●"}),e.key_insight||"—"]}),e.next_step&&(0,h.jsxs)("div",{className:"flex items-start gap-2 mt-1.5",children:[(0,h.jsx)("div",{className:"mt-[3px] text-orange-500 dark:text-orange-400 shrink-0",children:(0,h.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,h.jsx)("path",{d:"M7 7l10 10"}),(0,h.jsx)("path",{d:"M17 7v10h-10"})]})}),(0,h.jsx)("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-300 leading-snug",children:e.next_step})]}),(0,h.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5 mt-1",children:[l&&(0,h.jsx)(J.Badge,{className:"bg-orange-50 text-orange-500 dark:bg-orange-500/10 dark:text-orange-400 text-[9px] font-bold px-1.5 py-0 border-0",children:"Hindi"}),e.critical_signal&&(0,h.jsx)(J.Badge,{className:(0,P.cn)("text-[9px] font-bold px-1.5 py-0 border-0 shadow-none","critical"===e.critical_signal.severity?"bg-red-50 text-red-500 dark:bg-red-500/10 dark:text-red-400":"bg-amber-50 text-amber-600 dark:bg-amber-500/10 dark:text-amber-400"),children:e.critical_signal.label}),e.agreement_status?.status==="yes"&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(J.Badge,{className:(0,P.cn)("text-[9px] font-bold px-1.5 py-0 border-0 shadow-none","high"===e.agreement_status.confidence?"bg-green-500/20 text-green-600 dark:text-green-400":"bg-green-500/10 text-green-600 dark:text-green-400"),children:["CONFIDENCE: ",e.agreement_status.confidence]}),(0,h.jsx)(J.Badge,{className:"bg-blue-500/10 text-blue-600 dark:text-blue-400 text-[9px] font-bold px-1.5 py-0 border-0 shadow-none",children:"OPEN"})]})]}),t&&(e.should_copy_to_queue||e.copied_to_queue_at||e.preferred_slot?.is_outside_window)&&(0,h.jsxs)("div",{className:"flex items-center gap-2 mt-3 pt-2 border-t border-zinc-100 dark:border-zinc-800/60 w-full",children:[e.should_copy_to_queue&&!e.copied_to_queue_at&&a&&(0,h.jsxs)(O.Button,{size:"sm",variant:"outline",onClick:t=>{t.stopPropagation(),a(e)},className:"h-6 text-[9px] font-black uppercase tracking-widest gap-1.5 border-orange-500/20 text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-950/30",children:[(0,h.jsx)(eQ,{className:"w-3 h-3"}),"Copy"]}),e.copied_to_queue_at&&(0,h.jsxs)("div",{className:"flex items-center gap-1.5 px-2 h-6 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[(0,h.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),(0,h.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest text-emerald-600 dark:text-emerald-400",children:"In User Queue"})]}),e.preferred_slot?.is_outside_window&&r&&(0,h.jsxs)(O.Button,{size:"sm",variant:"outline",onClick:t=>{t.stopPropagation(),r(e)},className:"h-6 text-[9px] font-black uppercase tracking-widest gap-1.5 border-blue-500/20 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-950/30",children:[(0,h.jsx)(A.Calendar,{className:"w-3 h-3"}),"Book"]})]})]})};var e0=e.i(90919);let e1=(0,y.default)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);var e5=e.i(86311);function e2({campaignId:e,isActive:t,events:a}){let r=a[0];return(0,h.jsxs)("div",{className:"mt-8 relative pb-8",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 mb-4 px-2",children:[(0,h.jsx)(M.Terminal,{className:"w-4 h-4 text-orange-500"}),(0,h.jsx)("h4",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-widest flex-1",children:"Processing Last Calls"})]}),(0,h.jsxs)("div",{className:"relative group/feed",children:[(0,h.jsx)("div",{className:"bg-white/80 dark:bg-zinc-950/50 backdrop-blur-xl rounded-[24px] border border-zinc-200 dark:border-zinc-800/50 p-2 pl-3 shadow-xl overflow-hidden transition-all duration-500 hover:border-orange-500/30",children:(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsxs)("div",{className:"shrink-0 relative",children:[(0,h.jsx)("div",{className:"w-10 h-10 rounded-2xl overflow-hidden border border-orange-500/20 bg-orange-50/50 dark:bg-orange-950/10 relative z-10",children:(0,h.jsx)("img",{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${r?.agent_name||"core"}&backgroundColor=fff7ed`,alt:"Agent",className:"w-full h-full object-contain scale-125 translate-y-1"})}),(0,h.jsx)("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 flex items-center justify-center z-20 shadow-sm",children:(e=>{switch(e?.toLowerCase()){case"thought":return(0,h.jsx)(e1,{className:"w-3 h-3 text-amber-500"});case"user_reply":return(0,h.jsx)(q.User,{className:"w-3 h-3 text-orange-500"});case"agent_action":return(0,h.jsx)(e5.MessageSquare,{className:"w-3 h-3 text-emerald-500"});case"system":return(0,h.jsx)(M.Terminal,{className:"w-3 h-3 text-zinc-400"});default:return(0,h.jsx)($.Activity,{className:"w-3 h-3 text-zinc-400"})}})(r?.type||"system")})]}),(0,h.jsxs)("div",{className:"flex-1 flex items-center justify-between min-w-0 pr-4",children:[(0,h.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,h.jsx)("span",{className:"text-[10px] font-black text-orange-500 uppercase tracking-widest whitespace-nowrap",children:r?.agent_name||"CORE"}),(0,h.jsx)("span",{className:"w-1 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"}),(0,h.jsx)("span",{className:(0,P.cn)("text-[8px] font-bold uppercase tracking-wider",r?.type?.toLowerCase()==="thought"?"text-amber-500/70":r?.type?.toLowerCase()==="user_reply"?"text-orange-500/70":r?.type?.toLowerCase()==="agent_action"?"text-emerald-500/70":"text-zinc-500/70"),children:r?.type||"system"})]}),(0,h.jsx)(u.AnimatePresence,{mode:"wait",children:(0,h.jsx)(g.motion.p,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:(0,P.cn)("text-[13px] font-medium truncate dark:text-zinc-200",r?.type?.toLowerCase()==="thought"&&"italic text-zinc-500"),children:r?.message||"Standing by for live telemetry..."},r?.id||"empty")})]}),r&&(0,h.jsxs)("div",{className:"shrink-0 ml-4 flex flex-col items-end",children:[(0,h.jsx)("span",{className:"text-[9px] font-mono text-zinc-400 tabular-nums",children:(0,P.parseAsUTC)(r.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}),r.status&&(0,h.jsx)(J.Badge,{variant:"outline",className:"text-[7px] h-3.5 px-1 py-0 border-zinc-100 dark:border-zinc-800 text-orange-400 uppercase tracking-tighter",children:r.status})]})]})]})}),(0,h.jsx)("div",{className:"absolute -bottom-6 inset-x-0 px-4 flex items-center justify-between opacity-40 group-hover/feed:opacity-100 transition-opacity duration-300",children:(0,h.jsxs)("div",{className:"flex items-center gap-3 text-[7px] text-zinc-400 uppercase tracking-[0.2em] font-black",children:[(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[(0,h.jsx)("div",{className:"w-1 h-1 rounded-full bg-orange-500 animate-pulse"}),(0,h.jsx)("span",{children:"Sync: Stable"})]}),(0,h.jsx)("span",{children:"Core Relay v3.0"})]})})]}),(0,h.jsx)("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-4/5 h-4 bg-orange-500/10 blur-xl pointer-events-none"})]})}function e4({activeAgents:e,upcomingLeads:t,historyItems:a,allLeadsByCohort:r,allEvents:s,maxConcurrency:i=2,isCompleted:n=!1,isPaused:l=!1,isResetting:c=!1,completionData:d,onClose:o,onReset:x,isExhausted:m=!1,onReplenish:b,onLeadAction:f,onRefreshQueue:j,onUserQueueRefresh:v,feedEvents:N=[],onClearFeed:k,feedViewMode:w="live",onFeedViewModeChange:y,className:A}){let[E,T]=(0,p.useState)(null),[M,H]=(0,p.useState)(!1),[q,W]=(0,p.useState)(!1),[V,Q]=(0,p.useState)(!1),[G,em]=(0,p.useState)("all"),[eh,ep]=(0,p.useState)(new Set),[eg,eu]=(0,p.useState)(new Set),[eb,ef]=(0,p.useState)(!1),[ej,ev]=(0,p.useState)(!1),[eN,ek]=(0,p.useState)(null),ew=Object.values(r).flat(),ey=ew.filter(e=>"FAILED"===e.status),ez=ey.length>0;ew.some(e=>["BACKLOG","READY","NEXT"].includes(e.status))||t.length>0||e.length;let e_=!!d&&d.total_targets>0&&d.total_completed>=d.total_targets,eC=!!d&&((d.total_completed||0)>0||(d.total_calls||0)>0),eS=e_||(n||m)&&eC,eA=window.location.pathname.split("/").pop(),eE=e=>{},eD=async()=>{if(x)try{eE("click");let e=x();e instanceof Promise&&await e,W(!1);return}catch(e){console.error("Reset delegation failed",e)}if(eA)try{eE("click"),await eo.api.post(`/execution/campaign/${eA}/reset`),R.toast.success("Campaign Reset",{description:"Retrying failed/unanswered calls. Completed conversations are preserved."}),W(!1)}catch(e){R.toast.error("Reset Failed",{description:"Could not reset the campaign. Please try again."})}},eI=async()=>{if(eA)try{ev(!0),eE("click"),await eo.api.post(`/execution/campaign/${eA}/hard-reset`),R.toast.success("Campaign Wiped",{description:"All call data has been permanently deleted."}),ef(!1),x&&window.location.reload()}catch(e){R.toast.error("Hard Reset Failed",{description:"Could not wipe campaign data. Please try again."})}finally{ev(!1)}},eT=async e=>{if(f)return void f("retry",e);if(eA)try{eE("click"),await eo.api.post(`/execution/campaign/${eA}/retry/${e}`),R.toast.success("Retry Initiated",{description:"Lead has been re-queued for dialing."})}catch(e){R.toast.error("Retry Failed",{description:"Could not re-queue the lead. Please try again."})}},eL=async e=>{try{ep(t=>new Set(t).add(e)),await eo.api.delete(`/intelligence/leads/${e}`),R.toast.success("Lead Removed",{description:"Contact removed from queue and moved back to roster."})}catch(t){ep(t=>{let a=new Set(t);return a.delete(e),a}),R.toast.error("Removal Failed",{description:"Could not remove the lead. Please try again."})}},eO=async e=>{let t=Object.values(r).flat().find(t=>t.lead_id===e);t&&(t.execution_count||0)>=2?ek(e):await eR(e)},eR=async e=>{try{eu(t=>new Set(t).add(e)),ek(null),await eo.api.post(`/intelligence/leads/${e}/promote`),R.toast.success("Lead Promoted",{description:"Contact added back to the upcoming queue."})}catch(t){eu(t=>{let a=new Set(t);return a.delete(e),a}),R.toast.error("Promotion Failed",{description:"Could not promote the lead. Please try again."})}},eP=async()=>{if(j)try{Q(!0),eE("click");let e=j();e instanceof Promise&&await e,R.toast.success("Queue Refreshed",{description:"Upcoming queue data updated."})}catch(e){R.toast.error("Refresh Failed",{description:"Could not refresh the queue."})}finally{Q(!1)}};return(0,h.jsxs)("div",{className:(0,P.cn)("flex flex-col min-h-full bg-zinc-50/50 dark:bg-zinc-900/50 rounded-[32px] overflow-hidden border border-zinc-200 dark:border-zinc-800",A),children:[(0,h.jsx)(L.AlertDialog,{open:q,onOpenChange:W,children:(0,h.jsxs)(L.AlertDialogContent,{className:"bg-white dark:bg-zinc-950 border-zinc-200 dark:border-zinc-800",children:[(0,h.jsxs)(L.AlertDialogHeader,{children:[(0,h.jsx)(L.AlertDialogTitle,{children:"Reset Campaign Progress?"}),(0,h.jsxs)(L.AlertDialogDescription,{className:"text-zinc-500",children:["This will re-queue all contacts who didn't pick up, failed, or had technical issues.",(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)("span",{className:"font-bold text-zinc-700 dark:text-zinc-300",children:"Safe Reset:"})," Users who already spoke with the agent (Interested/Not Interested) or asked for a callback will ",(0,h.jsx)("span",{className:"underline",children:"NOT"})," be contacted again."]})]}),(0,h.jsxs)(L.AlertDialogFooter,{children:[(0,h.jsx)(L.AlertDialogCancel,{className:"border-0",children:"Cancel"}),(0,h.jsx)(L.AlertDialogAction,{onClick:eD,disabled:c,className:"bg-indigo-600 hover:bg-indigo-700 text-white min-w-[100px]",children:c?(0,h.jsx)(_.Loader2,{className:"w-4 h-4 animate-spin"}):"Confirm Reset"})]})]})}),(0,h.jsx)(L.AlertDialog,{open:eb,onOpenChange:ef,children:(0,h.jsxs)(L.AlertDialogContent,{className:"bg-white dark:bg-zinc-950 border-zinc-200 dark:border-zinc-800",children:[(0,h.jsxs)(L.AlertDialogHeader,{children:[(0,h.jsxs)(L.AlertDialogTitle,{className:"text-red-600 dark:text-red-500 flex items-center gap-2",children:[(0,h.jsx)(I.AlertTriangle,{className:"w-5 h-5"}),"Delete All Campaign Data?"]}),(0,h.jsx)(L.AlertDialogDescription,{className:"text-zinc-500",asChild:!0,children:(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-bold text-red-600 dark:text-red-400",children:"WARNING: DESTRUCTIVE ACTION."}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),"This will permanently delete:",(0,h.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,h.jsx)("li",{children:"All Call Logs & Recordings"}),(0,h.jsx)("li",{children:"All Analytics & Metrics"}),(0,h.jsx)("li",{children:"All Queue Progress"})]}),(0,h.jsx)("br",{}),"The campaign will cease all activity and return to DRAFT state. This cannot be undone."]})})]}),(0,h.jsxs)(L.AlertDialogFooter,{children:[(0,h.jsx)(L.AlertDialogCancel,{className:"border-0",children:"Cancel"}),(0,h.jsx)(L.AlertDialogAction,{onClick:eI,disabled:ej,className:"bg-red-600 hover:bg-red-700 text-white min-w-[100px]",children:ej?(0,h.jsx)(_.Loader2,{className:"w-4 h-4 animate-spin"}):"Delete Everything"})]})]})}),(0,h.jsx)(L.AlertDialog,{open:!!eN,onOpenChange:e=>!e&&ek(null),children:(0,h.jsxs)(L.AlertDialogContent,{className:"bg-white dark:bg-zinc-950 border-zinc-200 dark:border-zinc-800",children:[(0,h.jsxs)(L.AlertDialogHeader,{children:[(0,h.jsxs)(L.AlertDialogTitle,{className:"text-amber-600 dark:text-amber-500 flex items-center gap-2",children:[(0,h.jsx)(I.AlertTriangle,{className:"w-5 h-5"}),"Override Retry Limit?"]}),(0,h.jsxs)(L.AlertDialogDescription,{className:"text-zinc-500",children:["This lead has already been called ",(0,h.jsx)("span",{className:"font-bold text-zinc-900 dark:text-zinc-100",children:"2 or more times"}),".",(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),"Promoting them will ",(0,h.jsx)("span",{className:"font-bold",children:"reset their retry counter"})," and call them again immediately. This overrides the safety limit designed to prevent harassment."]})]}),(0,h.jsxs)(L.AlertDialogFooter,{children:[(0,h.jsx)(L.AlertDialogCancel,{className:"border-0",onClick:()=>ek(null),children:"Cancel"}),(0,h.jsx)(L.AlertDialogAction,{onClick:()=>eN&&eR(eN),className:"bg-amber-500 hover:bg-amber-600 text-white min-w-[100px]",children:"Promote Anyway"})]})]})}),(0,h.jsxs)("div",{className:(0,P.cn)("relative z-10 p-8 pb-6 border-b border-zinc-200 dark:border-zinc-800/50 flex items-center justify-between shrink-0 bg-white/50 dark:bg-zinc-950/50 backdrop-blur-md transition-all duration-500",eS&&"p-4 px-8 pb-4"),children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsx)("div",{className:(0,P.cn)("p-3 bg-indigo-500/10 rounded-2xl shadow-inner transition-all",eS&&"p-2"),children:(0,h.jsx)(z,{className:(0,P.cn)("w-8 h-8 text-indigo-500 dark:text-indigo-400",eS&&"w-6 h-6")})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:(0,P.cn)("text-3xl font-black tracking-tight leading-none mb-1 text-zinc-900 dark:text-zinc-100",eS&&"text-xl"),children:"AI Agent Intelligence"}),(0,h.jsx)("p",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Real-time Autonomous Dialing Queue"})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-6",children:[(0,h.jsxs)("div",{className:"hidden md:flex items-center gap-6 text-xs font-medium border-r border-zinc-200 dark:border-zinc-800 pr-6 mr-6 h-8",children:[(0,h.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,h.jsx)(B,{className:"w-4 h-4 text-indigo-500"}),(0,h.jsx)("span",{className:"uppercase tracking-widest font-black text-[9px] text-zinc-500 dark:text-zinc-400",children:"Neural Model v4.2"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,h.jsx)(U.Zap,{className:"w-4 h-4 text-orange-500"}),(0,h.jsx)("span",{className:"uppercase tracking-widest font-black text-[9px] text-zinc-500 dark:text-zinc-400",children:"Latency: 1.2ms"})]})]}),(0,h.jsxs)(O.Button,{variant:"outline",size:"sm",disabled:c,className:"h-9 px-4 border-zinc-200 dark:border-zinc-800 hover:bg-zinc-100 dark:hover:bg-zinc-900 text-zinc-600 dark:text-zinc-400 font-bold text-[10px] uppercase tracking-widest gap-2",onClick:()=>W(!0),children:[c?(0,h.jsx)(en,{className:"w-3.5 h-3.5 animate-spin"}):(0,h.jsx)(en,{className:"w-3.5 h-3.5"}),c?"Resetting...":"Reset Campaign"]}),(0,h.jsx)(O.Button,{variant:"ghost",size:"sm",disabled:ej,className:"h-9 px-3 hover:bg-red-50 dark:hover:bg-red-950/20 text-red-400 hover:text-red-500 font-bold text-[10px] uppercase tracking-widest gap-2 transition-colors",onClick:()=>ef(!0),title:"Delete All Data (Hard Reset)",children:(0,h.jsx)(et.Trash2,{className:"w-3.5 h-3.5"})}),o&&(0,h.jsx)("button",{onClick:o,className:"p-2 -mr-2 text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors",children:(0,h.jsx)(D.X,{className:"w-6 h-6"})})]})]}),(0,h.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden p-6 gap-6 bg-zinc-50/50 dark:bg-transparent",children:[(0,h.jsxs)("div",{className:"flex-[1.4] flex gap-6 overflow-hidden min-h-0",children:[(0,h.jsxs)("div",{className:"w-[340px] flex flex-col gap-4 min-h-0",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(C.Clock,{className:"w-4 h-4 text-zinc-400 dark:text-zinc-500"}),(0,h.jsx)("h3",{className:"text-[10px] uppercase font-black text-zinc-500 tracking-[0.2em]",children:"Upcoming Queue"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[j&&(0,h.jsx)("button",{onClick:eP,disabled:V,className:"p-1.5 rounded-lg text-zinc-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all disabled:opacity-50",title:"Refresh Queue",children:(0,h.jsx)(el.RefreshCw,{className:(0,P.cn)("w-3.5 h-3.5",V&&"animate-spin")})}),(0,h.jsx)(J.Badge,{variant:"outline",className:"text-[10px] bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 text-zinc-600 dark:text-zinc-400 font-bold shrink-0",children:t.length})]})]}),(0,h.jsx)(ex.ScrollArea,{className:"flex-1 bg-white dark:bg-zinc-900/30 rounded-[28px] border border-zinc-200 dark:border-zinc-800/50 shadow-sm",children:(0,h.jsx)("div",{className:(0,P.cn)("p-4 min-h-full flex flex-col",0===t.filter(e=>!eh.has(e.lead_id)).length&&"items-center justify-center"),children:t.filter(e=>!eh.has(e.lead_id)).length>0?(0,h.jsx)("div",{className:"space-y-2 w-full",children:(0,h.jsx)(u.AnimatePresence,{mode:"popLayout",children:t.filter(e=>!eh.has(e.lead_id)).slice(0,7).map((e,t)=>{let a=t<i,r=e.scheduled_for,s=r?new Date(e.scheduled_for).toLocaleTimeString([],{hour12:!0,hour:"2-digit",minute:"2-digit"}):"";return(0,h.jsxs)(g.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10,height:0},className:(0,P.cn)("group relative flex items-center gap-3 p-3 rounded-2xl border transition-all cursor-default",a?"bg-white dark:bg-zinc-800/80 border-indigo-500/20 shadow-sm":"bg-zinc-50/50 dark:bg-zinc-900/50 border-zinc-100 dark:border-zinc-800/80"),children:[(0,h.jsx)(g.motion.div,{layoutId:`upcoming-avatar-${e.lead_id}`,children:(0,h.jsxs)(Y.Avatar,{className:"w-10 h-10 border-2 border-white dark:border-zinc-800 shadow-sm shrink-0",children:[(0,h.jsx)(Y.AvatarImage,{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${e.avatar_seed}`}),(0,h.jsx)(Y.AvatarFallback,{children:e.name.slice(0,2).toUpperCase()})]})}),(0,h.jsxs)("div",{className:"flex-1 min-w-0 grid grid-cols-[1fr_auto] gap-4 items-center",children:[(0,h.jsxs)("div",{className:"flex flex-col gap-0.5 overflow-hidden",children:[(0,h.jsx)("p",{className:"text-[13px] font-bold text-zinc-800 dark:text-zinc-200 truncate leading-tight",children:e.name}),e.cohort&&(0,h.jsx)(eM,{cohort:e.cohort,variant:"mini"})]}),(0,h.jsx)("div",{className:"shrink-0 flex items-center justify-end",children:(0,h.jsx)(J.Badge,{className:(0,P.cn)("text-[8px] px-2 py-0 h-5 border-0 uppercase font-black tracking-widest text-center min-w-[70px]",r?"bg-amber-500/10 text-amber-600 dark:text-amber-500":a?"bg-indigo-500/10 text-indigo-600 dark:text-indigo-400":"bg-zinc-500/10 text-zinc-500 dark:text-zinc-500"),children:r?(0,h.jsx)(X.TooltipProvider,{children:(0,h.jsxs)(X.Tooltip,{children:[(0,h.jsx)(X.TooltipTrigger,{asChild:!0,children:(0,h.jsxs)("span",{className:"flex items-center gap-1 cursor-help",children:[(0,h.jsx)(C.Clock,{className:"w-2.5 h-2.5"}),s]})}),(0,h.jsx)(X.TooltipContent,{className:"z-[9999]",side:"top",children:(0,h.jsx)("p",{children:new Date(e.scheduled_for).toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})})})]})}):a?"Up Next":"Queue"})})]}),(0,h.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 scale-90 group-hover:scale-100 z-20",children:(0,h.jsx)("button",{onClick:t=>{t.stopPropagation(),eL(e.lead_id)},className:"p-2 bg-white dark:bg-zinc-900 text-zinc-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-950/30 rounded-xl shadow-lg border border-zinc-100 dark:border-zinc-800 transition-all",title:"Remove from queue",children:(0,h.jsx)(et.Trash2,{className:"w-4 h-4"})})})]},`upcoming-${e.lead_id}-${t}`)})})}):(0,h.jsx)("div",{className:"flex flex-col items-center justify-center p-8 text-center flex-1",children:(0,h.jsxs)(g.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"relative p-8 flex flex-col items-center gap-4 max-w-[280px]",children:[(0,h.jsxs)("div",{className:"relative mb-2",children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-indigo-500/20 blur-xl rounded-full"}),(0,h.jsx)("div",{className:"relative w-16 h-16 bg-gradient-to-tr from-white to-zinc-50 dark:from-zinc-800 dark:to-zinc-900 rounded-full border border-white/50 dark:border-zinc-700 shadow-sm flex items-center justify-center",children:(0,h.jsx)(S.Sparkles,{className:"w-7 h-7 text-indigo-500 dark:text-indigo-400",strokeWidth:1.5})}),(0,h.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,h.jsx)("div",{className:"w-4 h-4 bg-white dark:bg-zinc-900 rounded-full flex items-center justify-center",children:(0,h.jsx)("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})})})]}),(0,h.jsxs)("div",{className:"space-y-1",children:[(0,h.jsx)("h3",{className:"text-xs font-black tracking-[0.2em] text-zinc-900 dark:text-zinc-100 uppercase",children:"Queue Clear"}),(0,h.jsx)("p",{className:"text-[11px] font-medium text-zinc-500 dark:text-zinc-400 leading-relaxed max-w-[200px]",children:"All leads processed. System standing by for new entries."})]})]})})})})]}),(0,h.jsxs)("div",{className:"flex-1 flex flex-col gap-4",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 px-2",children:[(0,h.jsx)($.Activity,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-400"}),(0,h.jsx)("h3",{className:"text-[10px] uppercase font-black text-zinc-500 tracking-[0.2em]",children:"Real-time Engagement Matrix"}),!n&&!l&&(0,h.jsx)("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse ml-1"}),l&&(0,h.jsx)("div",{className:"w-2 h-2 bg-amber-500 rounded-full ml-1"})]}),(0,h.jsx)("div",{className:"flex-1 overflow-y-auto pr-2 relative",children:l?(0,h.jsxs)("div",{className:"h-full rounded-[32px] border-2 border-dashed border-zinc-200 dark:border-zinc-800 flex flex-col items-center justify-center p-8 text-center bg-zinc-50/30",children:[(0,h.jsx)("div",{className:"w-12 h-12 rounded-full bg-amber-100 dark:bg-amber-900/20 flex items-center justify-center mb-4",children:(0,h.jsx)(ed,{className:"w-5 h-5 text-amber-500"})}),(0,h.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:"Agents Waiting"}),(0,h.jsx)("p",{className:"text-xs text-zinc-500 max-w-[200px] mt-1",children:"Campaign is currently paused. Resuming will re-activate neural mesh uplinks."})]}):e&&e.length>0?(0,h.jsx)("div",{className:"h-full overflow-y-auto pr-2 scrollbar-hide",children:(0,h.jsx)("div",{className:"flex flex-col h-full",children:(0,h.jsx)("div",{className:(0,P.cn)("grid gap-6 mb-6","grid-cols-1 lg:grid-cols-2"),children:Array.from({length:i}).map((t,a)=>{let i=e[a];if(i){let e=Object.values(r).flat().find(e=>e.lead_id===i.lead_id),t={...i,cohort:e?.cohort||i.cohort};return(0,h.jsx)("div",{className:"min-h-[400px] h-full transition-all duration-700 ease-[cubic-bezier(0.25,1,0.5,1)]",children:(0,h.jsx)(eV,{agent:t,events:s.filter(e=>e.agent_id?e.agent_id===i.agent_id:e.agent_name===i.agent_name),index:a})},i.agent_id||`active-${a}`)}let n=e$[a%e$.length];return(0,h.jsxs)("div",{className:"min-h-[400px] h-full rounded-[32px] border border-dashed border-zinc-200 dark:border-zinc-800 bg-white/40 dark:bg-zinc-900/10 flex flex-col items-center justify-center p-8 text-center transition-all group hover:bg-white/60 dark:hover:bg-zinc-900/20",children:[(0,h.jsxs)("div",{className:"relative mb-6",children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-indigo-500/10 blur-2xl rounded-full scale-150 animate-pulse"}),(0,h.jsxs)(Y.Avatar,{className:"w-20 h-20 border-2 border-white dark:border-zinc-800 shadow-xl relative z-10 transition-transform group-hover:scale-105 duration-500",children:[(0,h.jsx)(Y.AvatarImage,{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${n.seed}&backgroundColor=e0e7ff`}),(0,h.jsx)(Y.AvatarFallback,{className:"bg-indigo-50 text-indigo-600 font-bold",children:n.name.slice(0,2)})]}),(0,h.jsx)("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-white dark:bg-zinc-950 rounded-full border border-zinc-100 dark:border-zinc-800 flex items-center justify-center z-20 shadow-sm",children:(0,h.jsx)("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"})})]}),(0,h.jsxs)("div",{className:"space-y-1",children:[(0,h.jsxs)("h3",{className:"text-xl font-black text-zinc-900 dark:text-zinc-100 tracking-tight",children:["Agent ",n.name]}),(0,h.jsx)("p",{className:"text-[11px] font-bold text-indigo-500 uppercase tracking-[0.2em]",children:n.tagline})]}),(0,h.jsx)("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 font-medium max-w-[180px] mt-4 leading-relaxed",children:"System online and awaiting next lead sequence..."}),(0,h.jsxs)("div",{className:"mt-8 px-4 py-2 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-100 dark:border-zinc-800/50 flex items-center gap-2",children:[(0,h.jsx)("div",{className:"w-1 h-1 rounded-full bg-zinc-300 dark:bg-zinc-600"}),(0,h.jsx)("span",{className:"text-[9px] font-black text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Autonomous Standby"})]})]},`placeholder-${a}`)})})})}):n||m?(0,h.jsxs)("div",{className:"h-full rounded-[32px] border-2 border-dashed border-zinc-200 dark:border-zinc-800 flex flex-col items-center justify-center p-8 text-center bg-zinc-50/30",children:[(0,h.jsx)("div",{className:"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:(0,h.jsx)(Z.CheckCircle2,{className:"w-5 h-5 text-zinc-400"})}),(0,h.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:ez?"Campaign Suspended":"Campaign Ended"}),(0,h.jsx)("p",{className:"text-xs text-zinc-500 max-w-[200px] mt-1 mb-6",children:ez?`${ey.length} leads failed to connect.`:"No valid leads remaining in queue."}),(0,h.jsxs)(O.Button,{onClick:()=>W(!0),disabled:c,variant:"outline",className:"h-9 px-6 rounded-full border-zinc-200 dark:border-zinc-800 hover:bg-zinc-100 dark:hover:bg-zinc-900 text-zinc-600 dark:text-zinc-400 font-bold text-[10px] uppercase tracking-widest gap-2",children:[c?(0,h.jsx)(en,{className:"w-3.5 h-3.5 animate-spin"}):(0,h.jsx)(en,{className:"w-3.5 h-3.5"}),c?"Resetting...":"Reset Metrics"]})]}):(0,h.jsxs)("div",{className:"h-full rounded-[32px] border-2 border-dashed border-zinc-200 dark:border-zinc-800 flex flex-col items-center justify-center p-8 text-center bg-zinc-50/30",children:[(0,h.jsx)("div",{className:"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:(0,h.jsx)(_.Loader2,{className:"w-5 h-5 text-zinc-400 animate-spin"})}),(0,h.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:"Initializing Neural Mesh"}),(0,h.jsx)("p",{className:"text-xs text-zinc-500 max-w-[200px] mt-1",children:"Establishing secure uplinks with active AI agents..."}),m&&ez&&(0,h.jsxs)(O.Button,{onClick:()=>W(!0),disabled:c,className:"h-12 px-8 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold transition-all shadow-lg shadow-indigo-500/20 gap-2",children:[c?(0,h.jsx)(en,{className:"w-4 h-4 animate-spin"}):(0,h.jsx)(en,{className:"w-4 h-4"}),c?"Resetting...":`Retry ${ey.length} Failed Leads`]})]})})]})]}),(0,h.jsxs)("div",{className:(0,P.cn)("flex-[1.2] flex gap-6 border-t border-zinc-200 dark:border-zinc-800/50 pt-6 min-h-0 shrink-0",1===e.filter(Boolean).length?"min-h-[400px]":"min-h-[450px]"),children:[(0,h.jsxs)("div",{className:"flex-1 flex flex-col gap-4",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)($.Activity,{className:"w-4 h-4 text-zinc-400 dark:text-zinc-500"}),(0,h.jsx)("h3",{className:"text-[10px] uppercase font-black text-zinc-500 tracking-[0.2em]",children:"Campaign Activity"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsx)("h4",{className:"text-[9px] font-black text-zinc-300 dark:text-zinc-600 uppercase tracking-tighter",children:"Outcome Ledger"}),eA&&a.length>0&&(0,h.jsxs)("a",{href:`/campaigns/${eA}/history`,className:"group flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-indigo-50 to-orange-50 dark:from-indigo-950/30 dark:to-orange-950/30 border border-indigo-100 dark:border-indigo-900/50 hover:border-indigo-200 dark:hover:border-indigo-800 transition-all hover:shadow-md hover:scale-105",children:[(0,h.jsxs)("span",{className:"text-[9px] font-black text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:["See all ",a.length.toLocaleString()]}),(0,h.jsx)(K.ChevronRight,{className:"w-3 h-3 text-indigo-500 dark:text-indigo-400 group-hover:translate-x-0.5 transition-transform"})]})]})]}),(0,h.jsx)(ex.ScrollArea,{className:"flex-1 bg-white dark:bg-zinc-900/30 rounded-[28px] border border-zinc-200 dark:border-zinc-800/50 p-4 shadow-sm transition-all duration-500 ease-in-out",children:(0,h.jsx)(eK,{history:a.map(e=>({...e,phone_number:e.phone_number||"Unknown",timestamp:e.timestamp||new Date().toISOString(),duration:e.duration||0,outcome:e.outcome||"Pending"})),onSelectCall:e=>{T(e),H(!0)},onCopyToQueue:v})})]}),(0,h.jsxs)("div",{className:"w-[360px] flex flex-col gap-4 h-[450px]",children:[(0,h.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(ec.Layers,{className:"w-4 h-4 text-zinc-400 dark:text-zinc-500"}),(0,h.jsx)("h3",{className:"text-[10px] uppercase font-black text-zinc-500 tracking-[0.2em]",children:"Full Roster"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("h4",{className:"text-[9px] font-black text-zinc-300 dark:text-zinc-600 uppercase tracking-tighter hidden sm:block",children:"Segmented View"}),(0,h.jsx)(J.Badge,{variant:"outline",className:"text-[10px] bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 text-zinc-600 dark:text-zinc-400 font-bold shrink-0",children:"all"===G?Object.values(r).flat().length:r[G]?.length||0})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto px-2 pb-2 scrollbar-none snap-x mask-linear-fade",children:[(0,h.jsx)("button",{onClick:()=>em("all"),className:(0,P.cn)("shrink-0 text-[10px] font-bold px-3 py-1 rounded-full transition-all snap-start border","all"===G?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800/50 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-all"),children:"All"}),Object.keys(r).map(e=>(0,h.jsx)("button",{onClick:()=>em(e),className:(0,P.cn)("shrink-0 text-[10px] font-bold px-2.5 py-1 rounded-full transition-all snap-start border",G===e?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800/50 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-all"),children:e},e))]})]}),(0,h.jsx)(ex.ScrollArea,{className:"flex-1 bg-white dark:bg-zinc-900/30 rounded-[28px] border border-zinc-200 dark:border-zinc-800/50 p-4 shadow-sm",children:(0,h.jsx)("div",{className:"space-y-6 pb-12",children:Object.entries(r).filter(([e])=>"all"===G||G===e).map(([e,t])=>(0,h.jsxs)("div",{id:`cohort-${e.replace(/\s+/g,"-")}`,className:"space-y-2.5 scroll-mt-4",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between sticky top-0 bg-white dark:bg-zinc-950/80 backdrop-blur-sm py-1 z-10 px-1 border-b border-dashed border-zinc-200 dark:border-zinc-800/50",children:[(0,h.jsx)("span",{className:"text-[10px] font-black text-indigo-600 dark:text-indigo-400 uppercase tracking-widest",children:e}),(0,h.jsx)(J.Badge,{variant:"secondary",className:"text-[9px] h-4 px-1",children:t.length})]}),(0,h.jsx)("div",{className:"space-y-1.5 pt-1",children:t.map((t,a)=>{let r,s,i,n,l,c,d,o;return(0,h.jsxs)("div",{className:"group flex items-center gap-3 p-2 rounded-xl bg-zinc-50/30 dark:bg-black/20 border border-zinc-100 dark:border-zinc-800/30",children:[(0,h.jsx)(g.motion.div,{layoutId:`roster-avatar-${t.lead_id}`,children:(0,h.jsxs)(Y.Avatar,{className:"w-6 h-6 border border-zinc-200 dark:border-zinc-800",children:[(0,h.jsx)(Y.AvatarImage,{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${t.avatar_seed}`}),(0,h.jsx)(Y.AvatarFallback,{className:"text-[6px]",children:t.name.slice(0,2)})]})}),(0,h.jsx)("p",{className:"text-[11px] font-bold text-zinc-700 dark:text-zinc-300 truncate flex-1",children:t.name}),(r=(t.status||"").toLowerCase(),s="bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500",i=C.Clock,n=t.status,"completed"===r||"intent_yes"===r||"scheduled"===r?(s="bg-emerald-500/10 text-emerald-600 dark:text-emerald-500",i=Z.CheckCircle2):"failed"===r||"intent_no"===r||"dnc"===r||"failed_connect"===r?(s="bg-red-500/10 text-red-600 dark:text-red-500",i=ee.XCircle):"ready"===r?(s="bg-indigo-500/10 text-indigo-600 dark:text-indigo-500",i=ea.Phone,n="NEXT"):"pending_availability"===r||"ambiguous"===r?(s="bg-orange-500/10 text-orange-600 dark:text-orange-500",i=es.AlertCircle,n="pending_availability"===r?"REVIEW":"UNCLEAR"):("speaking"===r||"connected"===r||"ringing"===r)&&(s="bg-blue-500/10 text-blue-600 dark:text-blue-500",i=er.PhoneCall),(0,h.jsx)(X.TooltipProvider,{children:(0,h.jsxs)(X.Tooltip,{children:[(0,h.jsx)(X.TooltipTrigger,{asChild:!0,children:(0,h.jsxs)(J.Badge,{className:(0,P.cn)("text-[8px] px-1.5 py-0 h-4 border-0 font-black uppercase tracking-tighter flex items-center gap-1 transition-transform hover:scale-105 active:scale-95 cursor-default",s),children:[(0,h.jsx)(i,{className:"w-2.5 h-2.5"}),n]})}),(t.outcome||"ambiguous"===r)&&(0,h.jsx)(X.TooltipContent,{side:"top",className:(0,P.cn)("z-[100] bg-zinc-950/90 backdrop-blur-xl border border-white/10 shadow-[0_20px_50px_rgba(0,0,0,0.5)] p-4 rounded-2xl max-w-[240px]","failed"===(l=t.status?.toLowerCase())||"intent_no"===l||"dnc"===l||"failed_connect"===l?"border-red-500/20 shadow-[0_0_20px_rgba(239,68,68,0.1)]":""),children:(0,h.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 border-b border-white/5 pb-2",children:[(d=["failed","intent_no","dnc","failed_connect"].includes(c=t.status?.toLowerCase()),o="ambiguous"===c,(0,h.jsx)("div",{className:(0,P.cn)("p-1 rounded-md",d?"bg-red-500/20 text-red-400":o?"bg-amber-500/20 text-amber-400":"bg-indigo-500/20 text-indigo-400"),children:(0,h.jsx)(es.AlertCircle,{className:"w-3 h-3"})})),(0,h.jsx)("span",{className:"font-black uppercase tracking-[0.2em] text-[10px] text-white/50",children:t.status?.toLowerCase()==="ambiguous"?"Neural Insight":"Status Detail"})]}),(0,h.jsx)("p",{className:"text-[11px] leading-relaxed font-semibold text-white/90",children:t.outcome||"AI connected but intent was unclear. Manual review suggested."})]})})]})})),!["READY","PENDING","INITIATED","RINGING","CONNECTED","SPEAKING"].includes(t.status)&&!eg.has(t.lead_id)&&(0,h.jsx)("button",{onClick:e=>{e.stopPropagation(),eO(t.lead_id)},className:"p-1 rounded-md text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-950/30 transition-all",title:"Promote to Queue",children:(0,h.jsx)(ei.ArrowUp,{className:"w-3.5 h-3.5"})}),eg.has(t.lead_id)&&(0,h.jsx)(J.Badge,{className:"bg-amber-500/10 text-amber-500 text-[8px] h-3.5 px-1 border-0",children:"QUEUED"}),"FAILED"===t.status&&!eg.has(t.lead_id)&&(0,h.jsx)("button",{onClick:e=>{e.stopPropagation(),eT(t.lead_id)},className:"p-1 rounded-md text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-950/30 opacity-0 group-hover:opacity-100 transition-all ml-1",title:"Retry Call",children:(0,h.jsx)(en,{className:"w-3 h-3"})})]},`roster-${e}-${t.lead_id}-${a}`)})})]},e))})})]})]}),(0,h.jsx)("div",{className:"shrink-0 border-t border-zinc-200 dark:border-zinc-800/50 pt-6 pb-4",children:(0,h.jsx)(e2,{campaignId:eA||"",isActive:!l&&!n,events:N,onClear:k,viewMode:w,onViewModeChange:y})})]}),(0,h.jsxs)("div",{className:"shrink-0 h-12 bg-zinc-50/50 dark:bg-zinc-900 px-8 flex items-center justify-between text-[10px] font-black text-zinc-400 dark:text-zinc-600 uppercase tracking-[0.2em] border-t border-zinc-200 dark:border-zinc-800/50 shadow-[0_-4px_24px_-12px_rgba(0,0,0,0.05)]",children:[(0,h.jsxs)("div",{className:"flex items-center gap-8",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 group cursor-help",children:[(0,h.jsx)(F.Shield,{className:"w-3.5 h-3.5 text-indigo-500 transition-transform group-hover:scale-110"}),(0,h.jsx)("span",{className:"group-hover:text-zinc-600 dark:group-hover:text-zinc-400 transition-colors",children:"Security: Verified Uplink"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2 group cursor-help",children:[(0,h.jsx)($.Activity,{className:"w-3.5 h-3.5 text-emerald-500 transition-transform group-hover:scale-110"}),(0,h.jsx)("span",{className:"group-hover:text-zinc-600 dark:group-hover:text-zinc-400 transition-colors",children:"Quality: 98.4%"})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2 text-zinc-300 dark:text-zinc-700",children:[(0,h.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"NODE CLUSTER: UNCLN-@",e.filter(e=>null!==e).length," ACTIVE"]})]}),(0,h.jsx)(e0.CampaignActivityModal,{call:E,isOpen:M,onClose:()=>H(!1),campaignId:eA||void 0})]})}function e3({isOpen:e,onClose:t,activeAgents:a,upcomingLeads:r,historyItems:s,allLeadsByCohort:i,allEvents:n,maxConcurrency:l,isPaused:c,isResetting:d,onReset:o,onLeadAction:x,onRefreshQueue:m}){return(0,h.jsx)(W.Dialog,{open:e,onOpenChange:e=>!e&&t(),children:(0,h.jsxs)(W.DialogContent,{className:"max-w-7xl w-[98vw] h-[90vh] bg-transparent border-0 p-0 overflow-hidden shadow-2xl shadow-orange-500/10 dark:shadow-orange-500/20 flex flex-col transition-colors duration-300",children:[(0,h.jsxs)(V.VisuallyHidden,{children:[(0,h.jsx)(W.DialogTitle,{children:"AI Agent Queue Control"}),(0,h.jsx)(W.DialogDescription,{children:"Unified view of upcoming, active, and historical agent activity."})]}),(0,h.jsx)(e4,{activeAgents:a,upcomingLeads:r,historyItems:s,allLeadsByCohort:i,allEvents:n,maxConcurrency:l,isPaused:c,isResetting:d,onClose:t,onReset:o,onLeadAction:x,onRefreshQueue:m,className:"h-full bg-white dark:bg-zinc-950 border-zinc-200 dark:border-zinc-800"})]})})}var e6=e.i(63327),e8=e.i(7762),e9=e.i(11356),e7=e.i(72520);let te=(0,y.default)("phone-off",[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]]);var tt=e.i(43531),ta=e.i(71689),tr=e.i(27516);let ts=(0,y.default)("clock-4",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ti=(0,y.default)("arrow-up-to-line",[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]]),tn=(0,y.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var tl=e.i(81418),tc=e.i(70756);let td=({strength:e})=>(0,h.jsxs)("div",{className:(0,P.cn)("flex items-center gap-1.5 px-2.5 py-1 rounded-full border text-[10px] font-black uppercase tracking-wider",e>=80?"bg-emerald-500/10 text-emerald-600 border-emerald-500/20":e>=60?"bg-amber-500/10 text-amber-600 border-amber-500/20":"bg-zinc-500/10 text-zinc-600 border-zinc-500/20"),children:[(0,h.jsx)(S.Sparkles,{className:"w-3 h-3"}),Math.round(e),"% Intent"]}),to=({targetTime:e,label:t="CALL IN"})=>{let[a,r]=(0,p.useState)(""),[s,i]=(0,p.useState)(!1);return(0,p.useEffect)(()=>{let t=()=>{let t=new Date,a=new Date(e).getTime()-t.getTime();if(a<=0){r("NOW"),i(!0);return}let s=Math.floor(a/1e3/60);if(s<30&&i(!0),s<60)r(`${s}m`);else{let e=Math.floor(s/60);r(`${e}h ${s%60}m`)}};t();let a=setInterval(t,6e4);return()=>clearInterval(a)},[e]),(0,h.jsxs)("div",{className:(0,P.cn)("flex items-center gap-2 px-3 py-1.5 rounded-xl border font-bold text-xs tabular-nums",s?"bg-red-500/10 text-red-600 border-red-500/20 animate-pulse":"bg-orange-500/10 text-orange-600 border-orange-500/20"),children:[(0,h.jsx)(C.Clock,{className:"w-3.5 h-3.5"}),s&&e<new Date().toISOString()?"PAST DUE":`${t} ${a}`]})},tx=({item:e,onContact:t,onViewContext:a,isContactMode:r=!1,onCancelContact:s,onLogOutcome:i})=>{e.status;let n="RESCHEDULED"===e.status,[l,c]=(0,p.useState)(!1),d=()=>{navigator.clipboard.writeText(e.contact_number),c(!0),R.toast.success("Number Copied"),setTimeout(()=>c(!1),2e3)};return(0,h.jsxs)(g.motion.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex-shrink-0 w-full md:w-[480px] bg-white dark:bg-zinc-950 rounded-[2.5rem] border border-emerald-500/30 shadow-[0_32px_64px_-16px_rgba(16,185,129,0.15)] overflow-hidden flex flex-col group relative transition-all duration-500",children:[!r&&(0,h.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 via-transparent to-transparent opacity-50 pointer-events-none"}),(0,h.jsxs)("div",{className:"p-8 space-y-6 flex-1",children:[(0,h.jsxs)("div",{className:"flex items-start justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"absolute -inset-1.5 bg-emerald-500/20 blur-md rounded-full"}),(0,h.jsxs)(Y.Avatar,{className:"w-16 h-16 border-4 border-white dark:border-zinc-900 shadow-xl",children:[(0,h.jsx)(Y.AvatarImage,{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${e.lead_id}`}),(0,h.jsx)(Y.AvatarFallback,{children:e.lead_name.slice(0,2).toUpperCase()})]}),!r&&(0,h.jsx)("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-emerald-500 border-2 border-white dark:border-zinc-900 flex items-center justify-center text-white",children:(0,h.jsx)("span",{className:"text-[10px] font-black",children:"#1"})})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight leading-none mb-1 group-hover:text-emerald-500 transition-colors",children:e.lead_name}),!r&&(0,h.jsxs)("p",{className:"text-sm font-bold text-zinc-400",children:[e.contact_number.replace(/.(?=.{4})/g,"•")," "]})]})]}),!r&&(0,h.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,h.jsx)(td,{strength:100*e.intent_strength}),e.confirmation_slot&&(0,h.jsx)(to,{targetTime:e.confirmation_slot}),n&&e.retry_scheduled_for&&(0,h.jsx)(to,{targetTime:e.retry_scheduled_for,label:"RETRY IN"})]})]}),r?(0,h.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,h.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-3xl p-6 border border-zinc-200 dark:border-zinc-800 text-center space-y-4 relative overflow-hidden",children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-emerald-500/5 dark:bg-emerald-500/10 pointer-events-none"}),(0,h.jsx)("p",{className:"text-xs font-black text-zinc-400 uppercase tracking-widest",children:"Primary Contact"}),(0,h.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,h.jsx)("button",{onClick:d,className:"text-3xl md:text-4xl font-black text-zinc-900 dark:text-white tracking-tight hover:scale-105 transition-transform active:scale-95 cursor-copy",children:(0,P.formatPhoneNumber)(e.contact_number)}),(0,h.jsx)(O.Button,{size:"icon",variant:"ghost",onClick:d,className:"rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-800 text-zinc-400",children:l?(0,h.jsx)(tt.Check,{className:"w-5 h-5 text-emerald-500"}):(0,h.jsx)(eQ,{className:"w-5 h-5"})})]}),(0,h.jsx)("div",{className:"flex justify-center gap-2",children:(0,h.jsxs)(J.Badge,{variant:"outline",className:"bg-white dark:bg-black border-zinc-200 text-zinc-500 px-3 py-1",children:["Local Time: ",new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,h.jsxs)("div",{className:"bg-emerald-50/50 dark:bg-emerald-950/20 rounded-2xl p-4 border border-emerald-100/50 dark:border-emerald-500/10",children:[(0,h.jsx)("p",{className:"text-[10px] font-black text-emerald-600/70 dark:text-emerald-400 uppercase tracking-wider mb-1",children:"AI Summary"}),(0,h.jsx)("p",{className:"text-xs font-semibold text-zinc-700 dark:text-zinc-300 line-clamp-3",children:e.ai_summary||"Highly interested customer."})]}),(0,h.jsxs)("div",{className:"bg-zinc-50/50 dark:bg-zinc-900/30 rounded-2xl p-4 border border-zinc-100 dark:border-zinc-800",children:[(0,h.jsx)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-wider mb-1",children:"Attempts"}),(0,h.jsxs)("p",{className:"text-xl font-black text-zinc-700 dark:text-zinc-200",children:[e.user_call_count+1," ",(0,h.jsx)("span",{className:"text-xs font-bold text-zinc-400",children:"Current"})]})]})]})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"bg-emerald-50/50 dark:bg-emerald-950/20 rounded-3xl p-5 border border-emerald-100/50 dark:border-emerald-500/10 relative overflow-hidden",children:[(0,h.jsx)("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:(0,h.jsx)(z,{className:"w-12 h-12"})}),(0,h.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,h.jsx)("div",{className:"w-6 h-6 rounded-full bg-white dark:bg-emerald-900/50 flex items-center justify-center shadow-sm",children:(0,h.jsx)(S.Sparkles,{className:"w-3 h-3 text-emerald-500"})}),(0,h.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-emerald-600/70 dark:text-emerald-400",children:"AI Call Summary"})]}),(0,h.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 font-semibold leading-relaxed line-clamp-3",children:e.ai_summary||"Highly interested customer. Expecting a follow-up call."})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-4 border border-zinc-100 dark:border-zinc-800/50 flex items-center gap-3",children:[(0,h.jsx)(C.Clock,{className:"w-5 h-5 text-zinc-400"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest leading-none mb-1",children:e.last_ai_call_at?"AI Call":"Detected"}),(0,h.jsx)("p",{className:"text-xs font-bold text-zinc-700 dark:text-zinc-200",children:e.last_ai_call_at?m(new Date(e.last_ai_call_at))+" ago":m(new Date(e.detected_at))+" ago"})]})]}),(0,h.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-4 border border-zinc-100 dark:border-zinc-800/50 flex items-center gap-3",children:[(0,h.jsx)(er.PhoneCall,{className:"w-5 h-5 text-zinc-400"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest leading-none mb-1",children:"Retry Count"}),(0,h.jsxs)("p",{className:"text-xs font-bold text-zinc-700 dark:text-zinc-200",children:[e.user_call_count," Attempts"]})]})]})]})]}),!r&&e.cohort&&(0,h.jsx)("div",{className:"flex items-center gap-2 px-1",children:(0,h.jsx)(eM,{cohort:e.cohort,variant:"glass"})})]}),(0,h.jsx)("div",{className:"p-4 bg-zinc-50/50 dark:bg-zinc-900/30 border-t border-zinc-100 dark:border-zinc-800/50 flex gap-3",children:r?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(O.Button,{variant:"outline",onClick:s,className:"flex-1 h-14 rounded-[1.5rem] border-zinc-200 dark:border-zinc-800 text-zinc-500 font-bold hover:bg-zinc-100",children:[(0,h.jsx)(ta.ArrowLeft,{className:"w-4 h-4 mr-2"}),"CANCEL"]}),(0,h.jsxs)(O.Button,{onClick:i,className:"flex-[2] bg-zinc-900 dark:bg-white text-white dark:text-black font-black h-14 rounded-[1.5rem] shadow-xl text-lg transition-transform hover:scale-[1.02] active:scale-[0.98]",children:[(0,h.jsx)(Z.CheckCircle2,{className:"w-5 h-5 mr-3"}),"LOG OUTCOME"]})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(O.Button,{onClick:t,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white font-black h-14 rounded-[1.5rem] shadow-xl shadow-emerald-500/20 text-lg transition-transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:grayscale",children:[(0,h.jsx)(ea.Phone,{className:"w-5 h-5 mr-3"}),n?"RETRY CONTACT":"CONTACT"]}),(0,h.jsx)(O.Button,{variant:"outline",className:"w-14 h-14 rounded-[1.5rem] border-zinc-200 dark:border-zinc-800",onClick:a,children:(0,h.jsx)(eq,{className:"w-6 h-6 text-zinc-500"})})]})})]})},tm=({item:e,index:t,onClick:a,onSwap:r})=>(0,h.jsxs)(g.motion.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},onClick:a,className:"flex-shrink-0 w-full bg-white/70 dark:bg-zinc-900/70 backdrop-blur-md rounded-[2rem] border border-zinc-100 dark:border-zinc-800 p-5 flex flex-col gap-4 group hover:bg-white dark:hover:bg-zinc-900 transition-all hover:shadow-xl hover:-translate-y-1 cursor-pointer",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsxs)(Y.Avatar,{className:"w-10 h-10 ring-2 ring-emerald-500/10",children:[(0,h.jsx)(Y.AvatarImage,{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${e.lead_id}`}),(0,h.jsx)(Y.AvatarFallback,{children:e.lead_name.slice(0,2).toUpperCase()})]}),(0,h.jsxs)("div",{className:"overflow-hidden",children:[(0,h.jsx)("h4",{className:"font-bold text-zinc-900 dark:text-white truncate group-hover:text-emerald-500 transition-colors",children:e.lead_name}),(0,h.jsxs)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:["#",t+2," IN QUEUE"]})]})]}),(0,h.jsx)("div",{className:"bg-zinc-50/50 dark:bg-black/20 rounded-2xl p-3 border border-zinc-100/50 dark:border-zinc-800/30",children:(0,h.jsxs)("p",{className:"text-[11px] text-zinc-500 dark:text-zinc-400 font-semibold line-clamp-2 leading-snug italic",children:['"',e.ai_summary||"Ready for follow-up",'"']})}),(0,h.jsxs)("div",{className:"flex items-center justify-between mt-auto",children:[(0,h.jsxs)(J.Badge,{variant:"outline",className:"text-[9px] font-black uppercase tracking-tighter rounded-lg border-zinc-200",children:[Math.round(100*e.intent_strength),"% Intent"]}),e.confirmation_slot&&(0,h.jsx)("span",{className:"text-[10px] font-black text-red-500 animate-pulse",children:"DUE SOON"}),"RESCHEDULED"===e.status&&(0,h.jsx)("span",{className:"text-[10px] font-black text-amber-500",children:"RETRY"})]}),(0,h.jsx)("div",{className:"absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,h.jsx)(X.TooltipProvider,{children:(0,h.jsxs)(X.Tooltip,{children:[(0,h.jsx)(X.TooltipTrigger,{asChild:!0,children:(0,h.jsx)(O.Button,{variant:"ghost",size:"icon",onClick:r,className:"h-8 w-8 rounded-full text-zinc-400 hover:text-emerald-600 hover:bg-emerald-50",children:(0,h.jsx)(ti,{className:"w-4 h-4"})})}),(0,h.jsx)(X.TooltipContent,{children:(0,h.jsx)("p",{children:"Prioritize Lead"})})]})})})]}),th=({campaignId:e,campaignStatus:t="ACTIVE",isStarted:a=!1,onCallClick:r,onContextClick:s,onStart:i,refreshTrigger:n,historyItems:l=[],maxConcurrency:c=2})=>{let[d,o]=(0,p.useState)([]),[x,m]=(0,p.useState)(!0),b=(0,p.useRef)(null),[f,j]=(0,p.useState)(null),[v,N]=(0,p.useState)({x:0,y:0}),[w,y]=(0,p.useState)(null),E=async(t=!1)=>{m(!0),y(null);try{let a=t?`/user-queue/${e}?refresh=true`:`/user-queue/${e}`,r=await eo.api.get(a);o(r),r.length>0&&console.log("Queue fetched:",r.length,"items. Top item:",r[0]),t&&r.length>0?R.toast.success("Queue Refreshed",{description:`Found ${r.length} leads waiting for you.`}):t&&R.toast.info("All Caught Up",{description:"No new leads found at this time."})}catch(e){console.error("Failed to fetch user queue:",e),y("Unable to load queue. Please check your connection."),t&&R.toast.error("Refresh Failed")}finally{m(!1)}};(0,p.useEffect)(()=>{E(!!n);let e=setInterval(()=>E(),3e4);return()=>clearInterval(e)},[e,n]);let D=async t=>{t.locked_by_user_id&&t.locked_by_user_id;try{let a=await eo.api.get(`/user-queue/${e}/next?user_id=me`);a.item?.id===t.id?j(t.id):(R.toast.warning("Queue moved",{description:"The lead you selected is no longer available."}),E(!0))}catch(e){423===e.status?(R.toast.error("Lead Locked",{description:"This lead is currently being handled by another agent."}),E(!0)):R.toast.error(e.message||"Failed to prepare contact.")}},I=async(e,t)=>{t.stopPropagation();try{await eo.api.post(`/user-queue/${e.id}/boost`,{}),R.toast.success("Lead Prioritized",{description:`${e.lead_name} moved to top of queue`}),E(!0)}catch(e){R.toast.error("Swap Failed",{description:"Could not prioritize this lead."})}};if(w&&0===d.length)return(0,h.jsxs)("div",{className:"w-full h-64 flex flex-col items-center justify-center bg-red-50 dark:bg-red-900/10 rounded-[3rem] border border-red-200 dark:border-red-900/30 p-8 text-center space-y-4",children:[(0,h.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/50 flex items-center justify-center",children:(0,h.jsx)(te,{className:"w-8 h-8 text-red-500"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-black text-red-700 dark:text-red-400",children:"Connection Error"}),(0,h.jsx)("p",{className:"text-sm text-red-600/80 dark:text-red-400/70",children:w})]}),(0,h.jsxs)(O.Button,{onClick:()=>E(!0),variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",children:[(0,h.jsx)(el.RefreshCw,{className:"w-4 h-4 mr-2"}),"Try Again"]})]});if(0===d.length)return a?(0,h.jsxs)("div",{className:"w-full bg-emerald-50/80 dark:bg-emerald-950/20 rounded-[3rem] p-8 md:p-12 flex flex-col relative overflow-hidden group border border-emerald-100 dark:border-emerald-500/20 shadow-xl shadow-emerald-500/5",children:[(0,h.jsx)("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-gradient-to-br from-emerald-200/20 via-emerald-100/10 to-transparent dark:from-emerald-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),(0,h.jsx)("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-gradient-to-tr from-emerald-200/20 via-emerald-100/10 to-transparent dark:from-emerald-500/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 pointer-events-none"}),(0,h.jsx)("div",{className:"flex items-center justify-between mb-16 z-20 relative",children:(0,h.jsxs)("div",{className:"flex items-center gap-6",children:[(0,h.jsx)("div",{className:"flex -space-x-4",children:[...Array(c)].map((e,t)=>(0,h.jsx)(g.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"relative",children:(0,h.jsxs)(Y.Avatar,{className:"w-12 h-12 border-[3px] border-white dark:border-zinc-950 shadow-md grayscale-[0.8] transition-all duration-500 group-hover:grayscale-0 group-hover:scale-110 z-10",children:[(0,h.jsx)(Y.AvatarImage,{src:`/images/avatars/notionists/full_body/avatar_${t%5+1}.png`,className:"object-cover object-top"}),(0,h.jsx)(Y.AvatarFallback,{children:"AI"})]})},t))}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,h.jsx)("h2",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight",children:"Human Action Pipeline"}),(0,h.jsx)(J.Badge,{className:(0,P.cn)("font-black px-2.5 py-0.5 text-[10px] tracking-widest rounded-lg border backdrop-blur-md transition-colors",x?"bg-emerald-500/10 text-emerald-600 border-emerald-500/20 animate-pulse":"bg-white/60 dark:bg-zinc-800/60 text-zinc-400 border-zinc-200 dark:border-zinc-800"),children:x?"SYNCING LIVE":"WAITING FOR LEADS"})]}),(0,h.jsx)("p",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 tracking-wide",children:x?"Establishing secure connection to AI agents...":"Monitoring AI conversations for handover opportunities..."})]})]})}),(0,h.jsx)("div",{className:"absolute -right-24 top-1/2 -translate-y-1/2 opacity-[0.06] dark:opacity-[0.08] pointer-events-none transition-transform duration-[4000ms] ease-in-out group-hover:rotate-12 group-hover:scale-110",children:(0,h.jsx)(tn,{className:"w-[600px] h-[600px] text-emerald-600 dark:text-emerald-400",strokeWidth:.8})}),(0,h.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center -mt-8 relative z-10",children:[(0,h.jsxs)(g.motion.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},className:"relative mb-10",children:[(0,h.jsx)("div",{className:(0,P.cn)("absolute inset-0 bg-emerald-500 rounded-full blur-xl opacity-20",x?"animate-pulse":"hidden")}),(0,h.jsxs)("div",{className:"w-28 h-28 rounded-[2.5rem] bg-white dark:bg-zinc-900 shadow-[0_32px_64px_-16px_rgba(16,185,129,0.25)] flex items-center justify-center relative border border-emerald-100 dark:border-emerald-500/20",children:[x&&(0,h.jsx)("div",{className:"absolute inset-0 rounded-[2.5rem] border-2 border-emerald-500/30 border-t-emerald-500 animate-spin"}),(0,h.jsx)(S.Sparkles,{className:(0,P.cn)("w-12 h-12 text-emerald-500 transition-all duration-500",!x&&"group-hover:scale-110 group-hover:rotate-12")})]}),(0,h.jsx)("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 whitespace-nowrap",children:(0,h.jsxs)("div",{className:"bg-emerald-500 text-white text-[10px] font-black px-3 py-1 rounded-full shadow-lg flex items-center gap-1.5",children:[(0,h.jsx)("div",{className:(0,P.cn)("w-1.5 h-1.5 rounded-full bg-white",x?"animate-ping":"opacity-50")}),x?"LISTENING":"READY"]})})]}),(0,h.jsx)("h3",{className:"text-5xl md:text-6xl font-black text-zinc-900 dark:text-white mb-6 tracking-tighter text-center bg-clip-text text-transparent bg-gradient-to-br from-zinc-900 to-zinc-600 dark:from-white dark:to-zinc-400",children:x?"Syncing Pipeline...":"All Caught Up"}),(0,h.jsxs)("p",{className:"text-zinc-500 dark:text-zinc-400 font-medium text-base md:text-lg max-w-lg text-center leading-relaxed",children:["The AI agents are scouting for new opportunities.",(0,h.jsx)("br",{}),(0,h.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400 font-bold",children:"We will notify you"})," immediately when a lead requires your attention."]}),(0,h.jsx)(O.Button,{onClick:()=>E(!0),disabled:x,className:(0,P.cn)("mt-14 h-16 px-12 rounded-[2rem] font-black text-xs tracking-[0.2em] transition-all duration-300 shadow-xl","bg-white hover:bg-zinc-50 text-emerald-600 border border-emerald-100","dark:bg-zinc-900 dark:hover:bg-zinc-800 dark:text-emerald-400 dark:border-emerald-900/50","hover:shadow-emerald-500/10 hover:-translate-y-1 hover:scale-105 active:scale-95",x&&"opacity-80 cursor-not-allowed"),children:x?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(_.Loader2,{className:"w-4 h-4 mr-3 animate-spin"}),"ESTABLISHING LINK..."]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(el.RefreshCw,{className:"w-4 h-4 mr-3"}),"CHECK FOR UPDATES"]})})]})]}):(0,h.jsxs)("div",{onMouseMove:e=>{let t=e.currentTarget.getBoundingClientRect();N({x:(e.clientX-t.left)/t.width-.5,y:(e.clientY-t.top)/t.height-.5})},onMouseLeave:()=>N({x:0,y:0}),className:"w-full min-h-[480px] bg-zinc-50 dark:bg-[#030712] rounded-[3rem] p-8 md:p-10 flex flex-col relative overflow-hidden group border border-zinc-200 dark:border-white/5 shadow-2xl dark:shadow-[0_0_120px_rgba(30,58,138,0.25)] transition-all duration-700",children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-[0.03] dark:opacity-[0.15] mix-blend-overlay pointer-events-none"}),(0,h.jsx)(g.motion.div,{animate:{x:40*v.x,y:40*v.y,scale:[1,1.1,1],opacity:[.08,.15,.08]},transition:{duration:15,repeat:1/0,ease:"easeInOut",x:{type:"spring",damping:20},y:{type:"spring",damping:20}},className:"absolute top-[-25%] right-[-15%] w-[900px] h-[900px] bg-gradient-to-br from-indigo-500/20 via-violet-500/10 to-transparent dark:from-indigo-600/30 dark:via-purple-600/20 rounded-full blur-[140px] pointer-events-none"}),(0,h.jsx)(g.motion.div,{animate:{x:-30*v.x,y:-30*v.y,scale:[1,1.2,1],opacity:[.05,.1,.05]},transition:{duration:20,repeat:1/0,ease:"easeInOut",x:{type:"spring",damping:25},y:{type:"spring",damping:25}},className:"absolute bottom-[-25%] left-[-15%] w-[800px] h-[800px] bg-gradient-to-tr from-cyan-500/20 via-emerald-500/10 to-transparent dark:from-blue-600/30 dark:via-teal-600/20 rounded-full blur-[120px] pointer-events-none"}),(0,h.jsx)(g.motion.div,{animate:{opacity:[.01,.03,.01]},transition:{duration:4,repeat:1/0},className:"absolute inset-0 bg-gradient-to-b from-transparent via-zinc-900/[0.02] dark:via-white/[0.04] to-transparent bg-[length:100%_4px] animate-scanline pointer-events-none"}),(0,h.jsx)("div",{className:"absolute inset-0 opacity-[0.02] dark:opacity-[0.05] pointer-events-none bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:40px_40px]"}),(0,h.jsxs)("div",{className:"flex justify-between items-start mb-10 relative z-20 w-full px-2",children:[(0,h.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,h.jsxs)(g.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-2.5 px-4 py-1.5 rounded-full bg-white/40 dark:bg-white/5 border border-zinc-900/5 dark:border-white/10 backdrop-blur-2xl shadow-sm",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"}),(0,h.jsx)("div",{className:"absolute inset-0 w-1.5 h-1.5 rounded-full bg-amber-500 animate-ping opacity-75"})]}),(0,h.jsx)("span",{className:"text-[10px] font-black tracking-[0.2em] text-zinc-500 dark:text-zinc-400 uppercase",children:"System: Standby"})]}),(0,h.jsx)("span",{className:"text-[10px] font-black text-zinc-400 dark:text-zinc-600 mt-1 px-1 tracking-widest uppercase",children:"ID: UNIT_ZERO_ALPHA"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,h.jsx)("p",{className:"text-[9px] font-black text-zinc-400 dark:text-white/40 tracking-widest uppercase mb-0.5 opacity-60",children:"Tactical Link"}),(0,h.jsx)("p",{className:"text-[10px] font-black text-zinc-500",children:"READY"})]}),(0,h.jsx)(g.motion.div,{whileHover:{scale:1.1,rotate:10},className:"w-9 h-9 rounded-xl bg-white/40 dark:bg-white/5 border border-zinc-900/5 dark:border-white/10 flex items-center justify-center backdrop-blur-md shadow-sm",children:(0,h.jsx)(tc.Lock,{className:"w-3.5 h-3.5 text-zinc-400 dark:text-zinc-500"})})]})]}),(0,h.jsxs)(g.motion.div,{animate:{x:-15*v.x,y:-15*v.y},transition:{type:"spring",damping:30},className:"flex-1 flex flex-col items-center justify-center relative z-20 -mt-8",children:[(0,h.jsxs)("div",{className:"relative mb-16",children:[[1,2,3].map(e=>(0,h.jsx)(g.motion.div,{animate:{rotate:e%2==0?360:-360,scale:[1,1.02,1]},transition:{rotate:{duration:15+5*e,repeat:1/0,ease:"linear"},scale:{duration:4,repeat:1/0,ease:"easeInOut",delay:e}},className:(0,P.cn)("absolute inset-0 rounded-full border border-dashed",1===e?"-m-14 border-zinc-900/10 dark:border-white/10 opacity-60":2===e?"-m-10 border-zinc-900/5 dark:border-white/[0.05] opacity-40":"-m-6 border-emerald-500/10 dark:border-emerald-500/5 opacity-80")},e)),(0,h.jsx)("div",{className:"absolute inset-0 -m-20 animate-spin-slow pointer-events-none",children:(0,h.jsx)(g.motion.div,{animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:3,repeat:1/0},className:"w-2.5 h-2.5 bg-indigo-500 rounded-full absolute top-1/4 left-0 shadow-[0_0_20px_rgba(99,102,241,1)]"})}),(0,h.jsx)("div",{className:"absolute inset-0 -m-20 animate-spin-reverse-slow pointer-events-none",children:(0,h.jsx)(g.motion.div,{animate:{scale:[1,1.3,1],opacity:[.3,.7,.3]},transition:{duration:4,repeat:1/0,delay:1},className:"w-2 h-2 bg-emerald-500 rounded-full absolute bottom-1/4 right-0 shadow-[0_0_15px_rgba(16,185,129,0.8)]"})}),(0,h.jsxs)(g.motion.div,{whileHover:"hover",whileTap:"press",className:"relative group/core",children:[(0,h.jsx)(g.motion.div,{variants:{hover:{scale:1.4,opacity:.25},press:{scale:.9,opacity:.1}},className:"absolute inset-0 bg-indigo-500 dark:bg-white rounded-full blur-[80px] opacity-0 transition-opacity duration-1000"}),(0,h.jsxs)(O.Button,{onClick:i,className:(0,P.cn)("w-32 h-32 rounded-full flex flex-col items-center justify-center gap-1.5 border-[8px] transition-all duration-500 relative z-30","bg-zinc-900 dark:bg-white text-white dark:text-black","border-zinc-50 dark:border-zinc-900/10 shadow-xl dark:shadow-[0_0_60px_rgba(255,255,255,0.05)]","hover:border-zinc-800 dark:hover:border-zinc-200 hover:shadow-indigo-500/30","active:scale-95 active:duration-100"),children:[(0,h.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-zinc-50/10 dark:bg-zinc-900/10 flex items-center justify-center group-hover/core:scale-110 group-hover/core:bg-zinc-50/20 transition-all duration-500",children:(0,h.jsx)(k.Play,{className:"w-5 h-5 fill-current ml-0.5"})}),(0,h.jsx)("span",{className:"text-[9px] font-black tracking-[0.3em] uppercase opacity-80 group-hover/core:opacity-100 transition-opacity text-current dark:text-black",children:"Initialize"}),(0,h.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-tr from-transparent via-white/5 to-transparent pointer-events-none"})]}),(0,h.jsx)("div",{className:"absolute -inset-2.5 border border-zinc-900/5 dark:border-white/5 rounded-full pointer-events-none"})]})]}),(0,h.jsx)(g.motion.h3,{animate:{y:-3*v.y},className:"text-4xl md:text-5xl font-black text-zinc-900 dark:text-white mb-4 tracking-tighter text-center",children:"Mission Control"}),(0,h.jsxs)("p",{className:"text-zinc-400 dark:text-zinc-500 font-bold text-base md:text-xl max-w-lg text-center leading-relaxed",children:["Your agent swarm is calibrated and ready.",(0,h.jsx)("br",{}),(0,h.jsx)("span",{className:"text-zinc-900 dark:text-zinc-200 font-black",children:"Authorize the ignition"})," to begin the harvest."]})]}),(0,h.jsxs)("div",{className:"mt-12 pt-10 border-t border-zinc-200 dark:border-white/5 flex flex-col sm:flex-row items-center justify-between w-full relative z-20 gap-8",children:[(0,h.jsxs)("div",{className:"flex items-center gap-8",children:[(0,h.jsx)("div",{className:"flex -space-x-3.5",children:[...Array(c)].map((e,t)=>(0,h.jsxs)(g.motion.div,{whileHover:{y:-5,scale:1.1},className:"relative",children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-indigo-500/20 blur-md rounded-full opacity-0 group-hover:opacity-100 transition-opacity"}),(0,h.jsxs)(Y.Avatar,{className:"w-11 h-11 border-[3px] border-white dark:border-zinc-900 grayscale-[0.6] hover:grayscale-0 transition-all shadow-lg",children:[(0,h.jsx)(Y.AvatarImage,{src:`/images/avatars/notionists/full_body/avatar_${t%5+1}.png`,className:"object-cover object-top"}),(0,h.jsx)(Y.AvatarFallback,{children:"AI"})]}),(0,h.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-zinc-100 dark:bg-zinc-800 rounded-full border-2 border-white dark:border-zinc-900 flex items-center justify-center",children:(0,h.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"})})]},t))}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("span",{className:"text-[10px] font-black text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em] leading-none mb-1.5",children:"Intelligence Fleet"}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsxs)("span",{className:"text-xs font-black text-zinc-900 dark:text-zinc-300",children:[c," AGENTS"]}),(0,h.jsx)(J.Badge,{variant:"outline",className:"text-[9px] font-black border-zinc-200 dark:border-zinc-800 text-zinc-400 h-4 px-1.5",children:"STANDBY"})]})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-8",children:[(0,h.jsx)("div",{className:"h-10 w-px bg-zinc-200 dark:bg-white/5 hidden sm:block"}),(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsxs)("div",{className:"flex flex-col items-end",children:[(0,h.jsx)("span",{className:"text-[10px] font-black text-zinc-400 dark:text-zinc-600 uppercase tracking-[0.2em] mb-1",children:"Encrypted Link"}),(0,h.jsx)("span",{className:"text-xs font-black text-emerald-600 dark:text-emerald-500 tracking-tight",children:"SECURE ESTABLISHED"})]}),(0,h.jsx)("div",{className:"w-11 h-11 rounded-2xl bg-emerald-500/5 dark:bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center shadow-inner",children:(0,h.jsx)(tl.ShieldCheck,{className:"w-5 h-5 text-emerald-500"})})]})]})]})]});let T=d.filter(e=>"RESCHEDULED"!==e.status),L=d.filter(e=>"RESCHEDULED"===e.status),M=T[0],$=T.slice(1);return(0,h.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,h.jsxs)("div",{className:"w-full bg-gradient-to-br from-emerald-500/10 via-emerald-400/5 to-transparent dark:from-emerald-500/20 dark:via-transparent dark:to-transparent rounded-[4rem] p-10 border border-emerald-500/20 shadow-2xl relative overflow-hidden group/panel",children:[(0,h.jsx)("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-emerald-500/10 blur-[120px] rounded-full -translate-y-1/2 pointer-events-none"}),(0,h.jsx)("div",{className:"absolute bottom-0 left-1/4 w-96 h-96 bg-orange-500/5 blur-[120px] rounded-full translate-y-1/2 pointer-events-none"}),(0,h.jsxs)("div",{className:"flex items-center justify-between mb-10 px-4",children:[(0,h.jsxs)("div",{className:"flex items-center gap-5",children:[(0,h.jsxs)("div",{className:"flex -space-x-3 transition-transform hover:scale-105 duration-300",children:[[...Array(c)].map((e,t)=>(0,h.jsxs)(Y.Avatar,{className:"w-12 h-12 border-4 border-white dark:border-zinc-900 grayscale opacity-40 hover:grayscale-0 hover:opacity-100 transition-all cursor-help",children:[(0,h.jsx)(Y.AvatarImage,{src:`/images/avatars/notionists/full_body/avatar_${t%5+1}.png`}),(0,h.jsx)(Y.AvatarFallback,{children:"AI"})]},t)),(0,h.jsx)("div",{className:"w-12 h-12 rounded-full bg-white dark:bg-zinc-800 border-4 border-white dark:border-zinc-900 flex items-center justify-center text-zinc-400 shadow-lg",children:(0,h.jsx)(z,{className:"w-6 h-6"})})]}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("h2",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight",children:"Human Action Pipeline"}),(0,h.jsxs)(J.Badge,{className:"bg-emerald-500 text-white font-black px-3 py-1 rounded-full text-[10px] tracking-widest shadow-lg shadow-emerald-500/20 animate-bounce",children:[d.length," READY"]})]}),(0,h.jsx)("p",{className:"text-sm font-bold text-emerald-600/70 dark:text-emerald-400/70",children:"Leads transitioned from AI Team for your closing touch"})]})]}),(0,h.jsx)(X.TooltipProvider,{children:(0,h.jsxs)(X.Tooltip,{children:[(0,h.jsx)(X.TooltipTrigger,{asChild:!0,children:(0,h.jsx)(O.Button,{variant:"ghost",className:"rounded-2xl h-12 w-12 p-0 text-zinc-400 hover:text-emerald-500 hover:bg-emerald-500/10 transition-colors",children:(0,h.jsx)(el.RefreshCw,{className:"w-5 h-5",onClick:()=>E(!0)})})}),(0,h.jsx)(X.TooltipContent,{children:"Refresh Queue"})]})})]}),(0,h.jsxs)("div",{className:"flex items-start gap-10",children:[(0,h.jsx)("div",{className:"hidden lg:flex flex-col items-center justify-center gap-3 ml-4",children:(0,h.jsx)(g.motion.div,{animate:{x:[0,8,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,h.jsx)(e7.ArrowRight,{className:"w-8 h-8 text-emerald-500/30"})})}),(0,h.jsx)(tx,{item:M,onContact:()=>D(M),onViewContext:()=>s?.(M),isContactMode:f===M.id,onCancelContact:()=>{j(null)},onLogOutcome:()=>{r&&(r(M),j(null))}}),(0,h.jsxs)("div",{className:"flex-1 min-w-0 h-full py-2",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4 mb-4 ml-2",children:[(0,h.jsx)("span",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-[0.3em]",children:"Upcoming Conveyor"}),(0,h.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-zinc-200 via-zinc-200/50 to-transparent dark:from-zinc-800 dark:via-zinc-800/50"})]}),(0,h.jsx)("div",{ref:b,className:"flex flex-col gap-4 h-[450px] overflow-y-auto scrollbar-subtle pb-4 px-2",style:{perspective:"1000px"},children:(0,h.jsx)(u.AnimatePresence,{mode:"popLayout",children:$.length>0?$.map((e,t)=>(0,h.jsx)(tm,{item:e,index:t,onClick:()=>s?.(e),onSwap:t=>I(e,t)},e.id)):(0,h.jsx)("div",{className:"w-full flex items-center justify-center p-8 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-[2rem] text-zinc-400 italic font-medium",children:"No more leads in pipeline..."})})})]}),(0,h.jsxs)("div",{className:"flex flex-col items-center gap-4 px-10 border-l border-emerald-500/20",children:[(0,h.jsxs)("div",{className:"relative group/user",children:[(0,h.jsx)("div",{className:"absolute -inset-4 bg-emerald-500/20 blur-2xl rounded-full opacity-0 group-hover/user:opacity-100 transition-opacity animate-pulse"}),(0,h.jsxs)(Y.Avatar,{className:"w-24 h-24 border-8 border-white dark:border-zinc-950 shadow-2xl relative z-10 transition-transform group-hover/user:scale-105",children:[(0,h.jsx)(Y.AvatarImage,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=User&backgroundColor=d1fae5"}),(0,h.jsx)(Y.AvatarFallback,{children:"YOU"})]}),(0,h.jsx)("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-full bg-emerald-500 border-4 border-white dark:border-zinc-950 flex items-center justify-center text-white z-20 shadow-xl",children:(0,h.jsx)(er.PhoneCall,{className:"w-5 h-5"})})]}),(0,h.jsxs)("div",{className:"text-center z-10",children:[(0,h.jsx)("h4",{className:"text-xs font-black text-zinc-400 uppercase tracking-[0.2em] mb-1",children:"DESTINATION"}),(0,h.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,h.jsx)("span",{className:"w-3 h-3 rounded-full bg-emerald-500 animate-pulse"}),(0,h.jsx)("span",{className:"text-xl font-black text-zinc-900 dark:text-white tracking-tight",children:"YOU"})]})]})]})]}),(0,h.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 flex overflow-hidden opacity-30",children:(0,h.jsxs)(g.motion.div,{animate:{x:["0%","-50%"]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"flex whitespace-nowrap",children:[[...Array(20)].map((e,t)=>(0,h.jsx)("div",{className:"w-12 h-1 bg-emerald-500 mx-8 rounded-full"},t)),[...Array(20)].map((e,t)=>(0,h.jsx)("div",{className:"w-12 h-1 bg-emerald-500 mx-8 rounded-full"},t))]})})]}),L.length>0&&(0,h.jsxs)("div",{className:"w-full bg-gradient-to-br from-amber-500/10 via-amber-400/5 to-transparent dark:from-amber-500/20 dark:via-transparent dark:to-transparent rounded-[3rem] border border-amber-500/20 p-8 shadow-lg",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-6 px-2",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-600",children:(0,h.jsx)(A.Calendar,{className:"w-5 h-5"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-black text-zinc-900 dark:text-white",children:"Rescheduled Follow-ups"}),(0,h.jsx)("p",{className:"text-xs font-bold text-amber-600/70 dark:text-amber-400/70",children:"Leads scheduled for future contact"})]})]}),(0,h.jsxs)(J.Badge,{className:"bg-amber-500 text-white font-black px-3 py-1 rounded-full text-[10px] tracking-widest",children:[L.length," SCHEDULED"]})]}),(0,h.jsx)("div",{className:"space-y-3",children:L.map((e,t)=>(0,h.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-white dark:bg-zinc-900 border border-amber-200 dark:border-amber-800/30 hover:border-amber-400 dark:hover:border-amber-600 transition-colors cursor-pointer",onClick:()=>s?.(e),children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsxs)(Y.Avatar,{className:"w-10 h-10 border-2 border-amber-200 dark:border-amber-800",children:[(0,h.jsx)(Y.AvatarImage,{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${e.lead_id}`}),(0,h.jsx)(Y.AvatarFallback,{children:e.lead_name?.slice(0,2)})]}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("p",{className:"font-bold text-zinc-900 dark:text-white",children:e.lead_name}),(0,h.jsx)(J.Badge,{variant:"outline",className:"text-[10px] h-5 px-1.5 border-amber-200 text-amber-600",children:(0,P.formatPhoneNumber)(e.contact_number)})]}),e.retry_scheduled_for&&(0,h.jsxs)("p",{className:"text-xs text-amber-600 dark:text-amber-400 font-semibold mt-0.5",children:["Scheduled: ",new Date(e.retry_scheduled_for).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})]})]})]}),(0,h.jsx)("div",{className:"flex items-center gap-2",children:(0,h.jsx)(C.Clock,{className:"w-4 h-4 text-amber-500"})})]},e.id))})]}),l.length>0&&(0,h.jsxs)("div",{className:"w-full bg-white dark:bg-zinc-950 rounded-[3rem] border border-zinc-200 dark:border-zinc-800 p-8 shadow-sm",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3 mb-6 px-2",children:[(0,h.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-zinc-100 dark:bg-zinc-900 flex items-center justify-center text-zinc-500",children:(0,h.jsx)(tr.History,{className:"w-5 h-5"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-black text-zinc-900 dark:text-white",children:"Conversation History"}),(0,h.jsx)("p",{className:"text-xs font-bold text-zinc-400",children:"Your recent interactions"})]})]}),(0,h.jsx)("div",{className:"space-y-3",children:l.slice(0,5).map((e,t)=>(0,h.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-100 dark:border-zinc-800/50",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsxs)(Y.Avatar,{className:"w-10 h-10 border-2 border-white dark:border-zinc-800",children:[(0,h.jsx)(Y.AvatarImage,{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${e.lead_id}`}),(0,h.jsx)(Y.AvatarFallback,{children:e.name?.slice(0,2)})]}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("p",{className:"font-bold text-zinc-900 dark:text-white",children:e.name}),(0,h.jsx)(J.Badge,{variant:"outline",className:"text-[10px] h-5 px-1.5 border-zinc-200 text-zinc-500",children:(0,P.formatPhoneNumber)(e.phone_number||"Unknown")})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,h.jsx)("span",{className:(0,P.cn)("text-[10px] font-black uppercase tracking-wider","CONNECTED"===e.status?"text-emerald-600":"VOICEMAIL"===e.status?"text-amber-600":"text-zinc-500"),children:e.status?.replace("_"," ")}),e.duration&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{className:"text-zinc-300",children:"•"}),(0,h.jsxs)("span",{className:"text-[10px] font-medium text-zinc-400 flex items-center gap-1",children:[(0,h.jsx)(ts,{className:"w-3 h-3"}),Math.floor(e.duration/60),"m ",e.duration%60,"s"]})]})]})]})]}),(0,h.jsxs)("div",{className:"text-right",children:[(0,h.jsx)("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-1",children:"Outcome"}),(0,h.jsx)(J.Badge,{className:(0,P.cn)("font-bold border-0",e.outcome?.includes("WON")?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400"),children:e.outcome?.replace("CLOSE_","")||"LOGGED"})]})]},t))})]})]})};var tp=e.i(10708),tg=e.i(84762),tu=e.i(62870);let tb=(0,y.default)("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),tf=[{value:"CONNECTED",label:"Connected",icon:Z.CheckCircle2,color:"text-emerald-500"},{value:"VOICEMAIL",label:"Voicemail",icon:eH,color:"text-amber-500"},{value:"NO_ANSWER",label:"No Answer",icon:te,color:"text-zinc-500"},{value:"BUSY",label:"Busy",icon:C.Clock,color:"text-blue-500"},{value:"WRONG_PERSON",label:"Wrong Person",icon:tb,color:"text-red-500"},{value:"NOT_INTERESTED",label:"Not Interested",icon:ee.XCircle,color:"text-red-600"}],tj=[{value:"CLOSE_WON",label:"Booked / Won",icon:T.Target,color:"text-emerald-600"},{value:"CLOSE_LOST",label:"Closed / Lost",icon:ee.XCircle,color:"text-red-600"},{value:"RETRY_NOW",label:"Retry Immediately (AI)",icon:el.RefreshCw,color:"text-orange-600"},{value:"RETRY_SCHEDULED",label:"Schedule Follow-up",icon:A.Calendar,color:"text-amber-600"}],tv=({isOpen:e,onClose:t,lead:a,onSuccess:r})=>{let[s,i]=(0,p.useState)(""),[n,l]=(0,p.useState)(0),[c,d]=(0,p.useState)(""),[o,x]=(0,p.useState)(""),[m,f]=(0,p.useState)(void 0),[j,v]=(0,p.useState)(!1),[N,w]=(0,p.useState)("context"),[y,z]=(0,p.useState)(!1),[_,E]=(0,p.useState)([]),[D,I]=(0,p.useState)(null);(0,p.useEffect)(()=>{e&&a.item_id&&(z(!0),eo.api.get(`/user-queue/${a.item_id}/context`).then(e=>{E(e.history||[]),I(e.ai_call_history||{})}).catch(e=>console.error("Failed to fetch lead context",e)).finally(()=>z(!1)))},[e,a.item_id]);let L=async()=>{if(!s)return void R.toast.error("Please select a call status");v(!0);try{let e={status:s,duration:n,notes:c,next_action:o,retry_scheduled_for:m?.toISOString(),user_id:"me"};await eo.api.post(`/user-queue/${a.item_id}/call-status`,e),R.toast.success("Call outcome logged successfully"),r(),t(),i(""),l(0),d(""),x(""),f(void 0),w("context")}catch(e){R.toast.error(e.message||"Failed to log call outcome")}finally{v(!1)}};return(0,h.jsx)(W.Dialog,{open:e,onOpenChange:e=>!e&&t(),children:(0,h.jsxs)(W.DialogContent,{className:"max-w-4xl rounded-[2.5rem] border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-950 p-0 overflow-hidden flex flex-col h-[85vh]",children:[(0,h.jsxs)("div",{className:"bg-emerald-600 p-8 text-white relative flex-shrink-0",children:[(0,h.jsx)("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:(0,h.jsx)(er.PhoneCall,{className:"w-24 h-24"})}),(0,h.jsx)(W.DialogHeader,{children:(0,h.jsxs)(W.DialogTitle,{className:"text-3xl font-black tracking-tight flex items-center gap-4",children:[(0,h.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center text-white backdrop-blur-sm",children:(0,h.jsx)("span",{className:"text-2xl",children:a.name.charAt(0)})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{children:a.name}),(0,h.jsxs)("div",{className:"text-lg font-medium opacity-80 mt-1 flex items-center gap-3",children:[(0,h.jsx)(er.PhoneCall,{className:"w-4 h-4"})," ",a.id]})]})]})}),(0,h.jsxs)("div",{className:"flex items-center gap-1 mt-8 bg-black/20 p-1 rounded-xl w-fit",children:[(0,h.jsx)("button",{onClick:()=>w("context"),className:(0,P.cn)("px-6 py-2 rounded-lg text-sm font-bold transition-all","context"===N?"bg-white text-emerald-600 shadow-lg":"text-white/70 hover:text-white"),children:(0,h.jsxs)("span",{className:"flex items-center gap-2",children:[(0,h.jsx)(e5.MessageSquare,{className:"w-4 h-4"}),"Context & Scripts"]})}),(0,h.jsx)("button",{onClick:()=>w("history"),className:(0,P.cn)("px-6 py-2 rounded-lg text-sm font-bold transition-all","history"===N?"bg-white text-emerald-600 shadow-lg":"text-white/70 hover:text-white"),children:(0,h.jsxs)("span",{className:"flex items-center gap-2",children:[(0,h.jsx)(C.Clock,{className:"w-4 h-4"}),"Call History"]})})]})]}),(0,h.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,h.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8 bg-white dark:bg-zinc-900 border-r border-zinc-200 dark:border-zinc-800",children:y?(0,h.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,h.jsx)(el.RefreshCw,{className:"w-8 h-8 animate-spin text-zinc-300"})}):"context"===N?(0,h.jsxs)("div",{className:"space-y-8",children:[(0,h.jsxs)("div",{children:[(0,h.jsxs)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 mb-4 flex items-center gap-2",children:[(0,h.jsx)(S.Sparkles,{className:"w-4 h-4 text-emerald-500"}),"Latest AI Transcript"]}),(0,h.jsx)("div",{className:"space-y-4",children:(()=>{let e=_.find(e=>"AI"===e.type);if(!e||!e.full_transcript)return(0,h.jsx)("div",{className:"p-8 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-3xl text-center text-zinc-400",children:"No transcript available for this lead."});let t=[];try{if(Array.isArray(e.full_transcript))t=e.full_transcript;else if("string"==typeof e.full_transcript)if(!e.full_transcript.trim().startsWith("["))return(0,h.jsx)("div",{className:"whitespace-pre-wrap text-sm font-mono text-zinc-600 dark:text-zinc-400 leading-relaxed bg-zinc-50 dark:bg-zinc-950 p-6 rounded-3xl border border-zinc-100 dark:border-zinc-800",children:e.full_transcript});else t=JSON.parse(e.full_transcript)}catch(e){return(0,h.jsx)("div",{className:"text-sm text-red-500",children:"Error parsing transcript"})}return(0,h.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,h.jsx)("div",{className:(0,P.cn)("flex gap-4 p-4 rounded-2xl text-sm leading-relaxed max-w-2xl","assistant"===e.role||"agent"===e.role?"bg-emerald-50 dark:bg-emerald-900/10 text-emerald-900 dark:text-emerald-200 mr-auto rounded-tl-none border border-emerald-100 dark:border-emerald-900/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 ml-auto rounded-tr-none"),children:(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsx)("div",{className:"text-[10px] font-bold uppercase tracking-wider opacity-50 mb-1",children:e.role}),e.content]})},t))})})()})]}),D?.extracted_data&&(0,h.jsxs)("div",{children:[(0,h.jsxs)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 mb-4 mt-8 flex items-center gap-2",children:[(0,h.jsx)(T.Target,{className:"w-4 h-4 text-emerald-500"}),"Extracted Data"]}),(0,h.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(D.extracted_data).map(([e,t])=>(0,h.jsxs)("div",{className:"p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl border border-zinc-100 dark:border-zinc-800",children:[(0,h.jsx)("div",{className:"text-[10px] font-bold uppercase text-zinc-400 mb-1",children:e.replace(/_/g," ")}),(0,h.jsx)("div",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-200 truncate",title:String(t),children:String(t)})]},e))})]})]}):(0,h.jsx)("div",{className:"space-y-6",children:(0,h.jsxs)("div",{className:"relative border-l-2 border-zinc-100 dark:border-zinc-800 ml-3 space-y-8 py-2",children:[_.map((e,t)=>(0,h.jsxs)("div",{className:"relative pl-8",children:[(0,h.jsx)("div",{className:(0,P.cn)("absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white dark:border-zinc-900 shadow-sm","AI"===e.type?"bg-emerald-500":"bg-blue-500")}),(0,h.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsxs)("span",{className:(0,P.cn)("text-[10px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full","AI"===e.type?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"),children:[e.type," CALL"]}),(0,h.jsx)("span",{className:"text-xs font-medium text-zinc-400",children:(0,b.format)(new Date(e.created_at),"MMM d, h:mm a")})]}),(0,h.jsx)("div",{className:"text-xs font-bold text-zinc-500",children:e.status})]}),(0,h.jsxs)("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-100 dark:border-zinc-800/50",children:[e.summary&&(0,h.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 mb-3 leading-relaxed",children:e.summary}),(0,h.jsxs)("div",{className:"flex items-center gap-4 text-xs font-medium text-zinc-400 border-t border-zinc-200/50 dark:border-zinc-700/50 pt-3",children:[(0,h.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,h.jsx)(C.Clock,{className:"w-3.5 h-3.5"}),e.duration,"s"]}),e.recording_url&&(0,h.jsxs)("a",{href:e.recording_url,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1.5 text-emerald-600 hover:underline",children:[(0,h.jsx)(k.Play,{className:"w-3.5 h-3.5 fill-current"}),"Recording"]})]})]})]},t)),0===_.length&&(0,h.jsx)("div",{className:"text-center py-12 text-zinc-400",children:"No call history found."})]})})}),(0,h.jsxs)("div",{className:"w-[400px] bg-zinc-50/50 dark:bg-zinc-950/50 p-8 flex flex-col gap-6 overflow-y-auto border-l border-zinc-100 dark:border-zinc-800",children:[(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsx)(tp.Label,{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 pl-1",children:"Call Result"}),(0,h.jsx)("div",{className:"grid grid-cols-2 gap-2",children:tf.map(e=>(0,h.jsxs)("button",{onClick:()=>i(e.value),className:(0,P.cn)("flex flex-col items-center justify-center gap-1.5 p-3 rounded-2xl border-2 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",s===e.value?"border-emerald-500 bg-emerald-500/5 shadow-md shadow-emerald-500/10":"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 hover:border-zinc-300 dark:hover:border-zinc-700"),children:[(0,h.jsx)(e.icon,{className:(0,P.cn)("w-5 h-5",s===e.value?"text-emerald-500":e.color)}),(0,h.jsx)("span",{className:(0,P.cn)("text-[9px] font-black uppercase tracking-wider",s===e.value?"text-emerald-600":"text-zinc-500"),children:e.label})]},e.value))})]}),(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsx)(tp.Label,{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 pl-1",children:"Duration (min)"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)(C.Clock,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-400"}),(0,h.jsx)("input",{type:"number",value:n,onChange:e=>l(parseInt(e.target.value)||0),className:"w-full pl-12 pr-4 h-12 rounded-2xl bg-white dark:bg-zinc-900 border-2 border-zinc-200 dark:border-zinc-800 font-bold focus:border-emerald-500 transition-all outline-none text-sm"})]})]}),(0,h.jsxs)("div",{className:"space-y-3 flex-1 flex flex-col",children:[(0,h.jsx)(tp.Label,{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 pl-1",children:"Internal Notes"}),(0,h.jsxs)("div",{className:"relative flex-1",children:[(0,h.jsx)(e5.MessageSquare,{className:"absolute left-4 top-4 w-4 h-4 text-zinc-400"}),(0,h.jsx)(tg.Textarea,{placeholder:"Details...",value:c,onChange:e=>d(e.target.value),className:"w-full h-full pl-12 pr-4 pt-4 rounded-3xl bg-white dark:bg-zinc-900 border-2 border-zinc-200 dark:border-zinc-800 font-medium focus:border-emerald-500 transition-all outline-none resize-none text-sm"})]})]}),(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsx)(tp.Label,{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 pl-1",children:"Next Action"}),(0,h.jsxs)(tu.Select,{value:o,onValueChange:x,children:[(0,h.jsx)(tu.SelectTrigger,{className:"h-12 rounded-2xl border-2 border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 font-bold text-sm",children:(0,h.jsx)(tu.SelectValue,{placeholder:"What's next?"})}),(0,h.jsx)(tu.SelectContent,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800",children:tj.map(e=>(0,h.jsx)(tu.SelectItem,{value:e.value,className:"h-10 font-bold focus:bg-emerald-500/10 focus:text-emerald-600",children:(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(e.icon,{className:(0,P.cn)("w-4 h-4",e.color)}),e.label]})},e.value))})]})]}),(0,h.jsx)(u.AnimatePresence,{children:"RETRY_SCHEDULED"===o&&(0,h.jsxs)(g.motion.div,{initial:{opacity:0,scale:.95,height:0},animate:{opacity:1,scale:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[(0,h.jsx)(tp.Label,{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-400 pl-1",children:"Follow-up"}),(0,h.jsxs)(eW.Popover,{children:[(0,h.jsx)(eW.PopoverTrigger,{asChild:!0,children:(0,h.jsxs)(O.Button,{variant:"outline",className:(0,P.cn)("w-full h-12 rounded-2xl border-2 border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 font-bold text-left justify-start text-sm",!m&&"text-muted-foreground"),children:[(0,h.jsx)(A.Calendar,{className:"mr-2 h-4 w-4"}),m?(0,b.format)(m,"PPP 'at' HH:mm"):(0,h.jsx)("span",{children:"Pick a time"})]})}),(0,h.jsx)(eW.PopoverContent,{className:"w-auto p-4 rounded-3xl overflow-hidden bg-white dark:bg-zinc-950 border-2 border-zinc-100 dark:border-zinc-800",align:"start",children:(0,h.jsx)("input",{type:"datetime-local",className:"w-full bg-transparent font-bold outline-none",onChange:e=>f(new Date(e.target.value))})})]})]})}),(0,h.jsx)(O.Button,{onClick:L,disabled:j,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-black h-14 rounded-3xl text-lg shadow-xl shadow-emerald-500/20 transition-all hover:scale-[1.02] active:scale-[0.98] mt-2",children:j?(0,h.jsx)(el.RefreshCw,{className:"w-6 h-6 animate-spin"}):(0,h.jsx)(h.Fragment,{children:"SAVE & NEXT LEAD"})})]})]})]})})};var tN=e.i(64659),tk=e.i(55900),tw=e.i(52571);let ty=({isOpen:e,onClose:t,leadId:a,itemId:r,leadName:s})=>{let[i,n]=(0,p.useState)(!0),[l,c]=(0,p.useState)(null),[d,o]=(0,p.useState)(null),x=async()=>{n(!0);try{let e=await eo.api.get(`/user-queue/${r}/context`);c(e)}catch(e){console.error("Failed to fetch lead context:",e),e.response&&console.error("Error Response:",e.response.status,e.response.data)}finally{n(!1)}};(0,p.useEffect)(()=>{console.log("CallContextModal Effect Triggered:",{isOpen:e,itemId:r,leadId:a}),e&&(r?(console.log("Fetching context for item:",r),x()):(console.error("Missing itemId for CallContextModal",{leadId:a,leadName:s}),n(!1),c(null)))},[e,r]);let m=[];return l&&(l.ai_call_history&&(Array.isArray(l.ai_call_history)?l.ai_call_history:[l.ai_call_history]).forEach((e,t)=>{e&&0!==Object.keys(e).length&&m.push({id:`ai-${t}`,type:"AI_CALL",timestamp:e.created_at||e.timestamp,duration:e.call_duration||e.duration,agent_name:e.agent_id||"Maya",summary:e.transcript_summary||e.summary,outcome:e.call_status||e.outcome,transcript:e.transcript})}),l.user_call_logs&&l.user_call_logs.forEach(e=>{m.push({id:e.id,type:"USER_CALL",timestamp:e.created_at,duration:e.duration,agent_name:"You",summary:e.notes,outcome:e.status})}),m.sort((e,t)=>{let a=e.timestamp?new Date(e.timestamp).getTime():0,r=t.timestamp?new Date(t.timestamp).getTime():0;return(isNaN(r)?0:r)-(isNaN(a)?0:a)})),(0,h.jsx)(W.Dialog,{open:e,onOpenChange:e=>!e&&t(),children:(0,h.jsxs)(W.DialogContent,{className:"max-w-3xl rounded-[3rem] border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 p-0 overflow-hidden h-[85vh] flex flex-col",children:[(0,h.jsxs)(W.DialogTitle,{className:"sr-only",children:["Call Context for ",s]}),(0,h.jsx)(W.DialogDescription,{className:"sr-only",children:"View execution history and details for this lead."}),(0,h.jsx)("div",{className:"bg-gradient-to-br from-orange-600 to-orange-800 p-8 text-white",children:(0,h.jsxs)("div",{className:"flex items-center gap-6",children:[(0,h.jsxs)(Y.Avatar,{className:"w-20 h-20 border-4 border-white/20 shadow-2xl",children:[(0,h.jsx)(Y.AvatarImage,{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${a}`}),(0,h.jsx)(Y.AvatarFallback,{children:s.slice(0,2).toUpperCase()})]}),(0,h.jsxs)("div",{className:"space-y-1",children:[(0,h.jsx)("h2",{className:"text-4xl font-black tracking-tight",children:s}),(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsx)(J.Badge,{className:"bg-white/20 hover:bg-white/30 text-white border-white/10 font-black",children:(0,P.formatPhoneNumber)(l?.lead?.contact_number)}),(0,h.jsxs)("div",{className:"flex items-center gap-1.5 text-orange-100 text-sm font-bold",children:[(0,h.jsx)(S.Sparkles,{className:"w-4 h-4"}),Math.round(100*(l?.user_queue_item?.intent_strength||0)),"% Intent Strength"]})]})]})]})}),(0,h.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col",children:i?(0,h.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,h.jsx)(_.Loader2,{className:"w-10 h-10 animate-spin text-orange-500"})}):(0,h.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row divide-x divide-zinc-100 dark:divide-zinc-800",children:[(0,h.jsxs)("div",{className:"w-full md:w-64 p-6 space-y-8 bg-zinc-50/50 dark:bg-zinc-900/10",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-zinc-400 mb-4",children:"Engagement Stats"}),(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsx)("span",{className:"text-xs font-bold text-zinc-500",children:"AI Attempts"}),(0,h.jsx)("span",{className:"text-xs font-black text-zinc-900 dark:text-white",children:l?.ai_call_history?.length||0})]}),(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsx)("span",{className:"text-xs font-bold text-zinc-500",children:"User Attempts"}),(0,h.jsx)("span",{className:"text-xs font-black text-zinc-900 dark:text-white",children:l?.user_call_logs?.length||0})]}),(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsx)("span",{className:"text-xs font-bold text-zinc-500",children:"Total Duration"}),(0,h.jsx)("span",{className:"text-xs font-black text-zinc-900 dark:text-white",children:"~12 mins"})]})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-zinc-400 mb-4",children:"Confirmed Time"}),l?.user_queue_item?.confirmation_slot?(0,h.jsxs)("div",{className:"p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-2xl flex items-center gap-3",children:[(0,h.jsx)(A.Calendar,{className:"w-5 h-5 text-emerald-600"}),(0,h.jsxs)("div",{className:"leading-tight",children:[(0,h.jsx)("p",{className:"text-xs font-black text-emerald-700",children:(0,b.format)(new Date(l.user_queue_item.confirmation_slot),"MMM do")}),(0,h.jsx)("p",{className:"text-[10px] font-bold text-emerald-600",children:(0,b.format)(new Date(l.user_queue_item.confirmation_slot),"h:mm a")})]})]}):(0,h.jsx)("p",{className:"text-xs text-zinc-400 font-medium italic",children:"No preferred slot detected."})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-zinc-400 mb-4",children:"Extracted Context"}),(0,h.jsx)(ex.ScrollArea,{className:"h-40",children:(0,h.jsx)("div",{className:"space-y-3",children:l?.user_queue_item?.ai_summary?(0,h.jsx)("div",{className:"p-3 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-100 dark:border-zinc-700 text-[11px] font-medium leading-relaxed",children:l.user_queue_item.ai_summary}):(0,h.jsx)("p",{className:"text-xs text-zinc-400 italic",children:"No summary available."})})})]})]}),(0,h.jsxs)("div",{className:"flex-1 p-6 overflow-hidden flex flex-col",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,h.jsx)(tr.History,{className:"w-5 h-5 text-orange-500"}),(0,h.jsx)("h4",{className:"text-base font-black text-zinc-900 dark:text-white tracking-tight",children:"Timeline & Interactions"})]}),(0,h.jsx)(ex.ScrollArea,{className:"flex-1 pr-4",children:(0,h.jsx)("div",{className:"space-y-6 relative ml-4 border-l-2 border-zinc-100 dark:border-zinc-800 pl-8",children:m.map(e=>(0,h.jsxs)("div",{className:"relative group",children:[(0,h.jsx)("div",{className:(0,P.cn)("absolute -left-[45px] top-4 w-8 h-8 rounded-full border-4 border-white dark:border-zinc-950 flex items-center justify-center shadow-lg transition-transform group-hover:scale-110","AI_CALL"===e.type?"bg-orange-500":"bg-emerald-500"),children:"AI_CALL"===e.type?(0,h.jsx)(z,{className:"w-4 h-4 text-white"}):(0,h.jsx)(q.User,{className:"w-4 h-4 text-white"})}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("span",{className:"text-sm font-black text-zinc-900 dark:text-white",children:e.agent_name}),(0,h.jsx)(J.Badge,{variant:"secondary",className:(0,P.cn)("text-[9px] font-black uppercase tracking-widest px-2 py-0","AI_CALL"===e.type?"bg-orange-50 text-orange-600":"bg-emerald-50 text-emerald-600"),children:"AI_CALL"===e.type?"AI Agent":"Human Agent"})]}),(0,h.jsx)("span",{className:"text-[10px] font-bold text-zinc-400",children:(()=>{try{if(!e.timestamp)return"N/A";let t=new Date(e.timestamp);if(isNaN(t.getTime()))return"Invalid Date";return(0,b.format)(t,"MMM d, h:mm a")}catch{return"N/A"}})()})]}),(0,h.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-3xl p-5 border border-zinc-100 dark:border-zinc-800 group-hover:border-orange-500/20 transition-colors",children:[(0,h.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,h.jsxs)("div",{className:"space-y-1",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("div",{className:(0,P.cn)("w-2 h-2 rounded-full",["CONNECTED","CONNECTED_SUCCESS","SUCCESS","WON"].includes(e.outcome)?"bg-emerald-500":"bg-amber-500")}),(0,h.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:e.outcome})]}),(0,h.jsxs)("p",{className:"text-xs font-bold text-zinc-400",children:[e.duration," seconds"]})]}),e.transcript&&(0,h.jsxs)(O.Button,{variant:"ghost",size:"sm",className:"h-8 rounded-xl text-orange-500 font-bold text-[10px]",onClick:()=>o(d===e.id?null:e.id),children:[d===e.id?"Hide Transcript":"View Details",d===e.id?(0,h.jsx)(tk.ChevronUp,{className:"w-3 h-3 ml-1"}):(0,h.jsx)(tN.ChevronDown,{className:"w-3 h-3 ml-1"})]})]}),(0,h.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 font-semibold leading-relaxed",children:e.summary||"No specific details logged for this interaction."}),d===e.id&&(0,h.jsxs)(g.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-6 pt-6 border-t border-zinc-100 dark:border-zinc-800",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,h.jsx)(e5.MessageSquare,{className:"w-3.5 h-3.5 text-zinc-400"}),(0,h.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:"Transcript Preview"})]}),(0,h.jsx)("div",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 space-y-2 whitespace-pre-wrap italic",children:e.transcript})]})]})]})]},e.id))})})]})]})}),(0,h.jsxs)("div",{className:"p-6 bg-zinc-50 dark:bg-zinc-900/50 border-t border-zinc-100 dark:border-zinc-800 flex items-center justify-between",children:[(0,h.jsxs)("p",{className:"text-xs font-bold text-zinc-400 flex items-center gap-2",children:[(0,h.jsx)(tw.Info,{className:"w-4 h-4"}),"This log is immutable and generated in real-time."]}),(0,h.jsxs)("div",{className:"flex gap-3",children:[(0,h.jsx)(O.Button,{variant:"ghost",className:"rounded-2xl font-bold h-12 px-6",onClick:t,children:"Close"}),(0,h.jsxs)(O.Button,{className:"rounded-2xl bg-orange-600 hover:bg-orange-700 text-white font-black h-12 px-8 shadow-xl shadow-orange-500/20",children:[(0,h.jsx)(er.PhoneCall,{className:"w-4 h-4 mr-2"}),"RESUME CALL FLOW"]})]})]})]})})},tz=({status:e,activeAgents:t,executionWindows:r})=>{let s=(0,p.useMemo)(()=>{if(!r||0===r.length)return"No Upcoming Windows";let e=new Date,t=null,s=[];r.forEach(a=>{try{let r=(0,N.parseISO)(`${a.day}T${a.start}`),i=(0,N.parseISO)(`${a.day}T${a.end}`);!function(e,t,a){let r=+(0,d.toDate)(e,void 0),[s,i]=[+(0,d.toDate)(t.start,void 0),+(0,d.toDate)(t.end,void 0)].sort((e,t)=>e-t);return r>=s&&r<=i}(e,{start:r,end:i})?r>e&&s.push({...a,_startDt:r}):t=a}catch(e){console.warn("Invalid window processing",a)}});let i=t;if(!i&&s.length>0&&(s.sort((e,t)=>e._startDt.getTime()-t._startDt.getTime()),i=s[0]),i)try{let e=(0,N.parseISO)(`${i.day}T${i.start}`),t=(0,N.parseISO)(`${i.day}T${i.end}`),r=(0,b.format)(e,"MMM d");if((0,f.isToday)(e))r="Today";else{var n;let t;(0,v.isSameDay)(e,(n=(0,a.constructNow)(e),t=(0,d.toDate)(n,void 0),isNaN(1)?(0,j.constructFrom)(n,NaN):(t.setDate(t.getDate()+1),t)),void 0)&&(r="Tomorrow")}let s=`${(0,b.format)(e,"h:mm a")} - ${(0,b.format)(t,"h:mm a")}`;return`${r}, ${s}`}catch(e){return`${i.day} ${i.start}`}return"No Upcoming Windows"},[r]);return(0,h.jsxs)("div",{className:"flex items-center justify-between bg-zinc-900/5 dark:bg-zinc-50/5 rounded-xl px-4 py-3 border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-sm",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)(z,{className:"w-5 h-5 text-orange-500"}),("WARMUP"===e||e.includes("ACTIVE"))&&(0,h.jsx)("span",{className:"absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full animate-pulse border-2 border-white dark:border-zinc-950"})]}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("span",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-wider",children:"Success Team"}),(0,h.jsx)("span",{className:"text-sm font-bold text-zinc-700 dark:text-zinc-200",children:"IDLE"===e?"Offline":"PAUSED"===e&&0===t?"Agents Ready":`${t} Agents Active`})]})]}),(0,h.jsx)("div",{className:"h-8 w-px bg-zinc-200 dark:bg-zinc-800 mx-2"}),(0,h.jsxs)("div",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 flex items-center gap-2",children:["WARMUP"===e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(_.Loader2,{className:"w-3 h-3 animate-spin"}),(0,h.jsx)("span",{children:"Warming up connection pool..."})]}),"ACTIVE_EMPTY"===e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(_.Loader2,{className:"w-3 h-3 animate-spin text-orange-500"}),(0,h.jsx)("span",{className:"text-orange-600 dark:text-orange-400",children:"Buffer depleting - Finding fresh leads..."})]}),"ACTIVE_READY"===e&&(0,h.jsxs)("span",{className:"text-emerald-600 dark:text-emerald-400 flex items-center gap-1.5",children:[(0,h.jsx)(S.Sparkles,{className:"w-3 h-3"}),"System Active. Dialing in background."]}),"PAUSED"===e&&(0,h.jsxs)("span",{className:"text-orange-600 dark:text-orange-400 flex items-center gap-1.5",children:[(0,h.jsx)(z,{className:"w-3 h-3"}),"Standby Mode. Agents primed and ready."]})]})]}),s&&(0,h.jsxs)("div",{className:"flex flex-col items-end sm:flex-row sm:items-center gap-2 sm:gap-3 px-4 py-2 bg-white dark:bg-zinc-900 rounded-lg border border-zinc-200/50 dark:border-zinc-800/50 shadow-sm",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("div",{className:"p-1.5 rounded-md bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400",children:(0,h.jsx)(C.Clock,{className:"w-3.5 h-3.5"})}),(0,h.jsx)("span",{className:"text-[10px] uppercase font-bold text-zinc-400 tracking-wider",children:"Booking Window"})]}),(0,h.jsx)("div",{className:"h-4 w-px bg-zinc-200 dark:bg-zinc-800 hidden sm:block"}),(0,h.jsx)("span",{className:"text-xs font-bold text-zinc-700 dark:text-zinc-200 tabular-nums",children:s})]})]})};function t_({campaignId:e,campaignStatus:t,hasStrategy:a=!0,wasLeadsUpdated:r=!1,onStatusChange:s,onModalStateChange:i,onEditStrategy:n,onScheduleUpdate:l}){let c,d,o,x,m,{user:f,companyId:j,loading:v}=(0,e6.useAuth)();console.log("DEBUG: ExecutionPanel Render",{campaignId:e,campaignStatus:t,hasStrategy:a,wasLeadsUpdated:r});let[y,M]=(0,p.useState)("IDLE"),[$,U]=(0,p.useState)([]),[F,B]=(0,p.useState)([]),[H,q]=(0,p.useState)([]),[W,V]=(0,p.useState)([]),[Y,J]=(0,p.useState)({}),[X,G]=(0,p.useState)(2),[K,Z]=(0,p.useState)([]),[ee,et]=(0,p.useState)(!1),[ea,er]=(0,p.useState)(!1),[es,ei]=(0,p.useState)(!1),[en,el]=(0,p.useState)(null),[ec,ed]=(0,p.useState)([]),[ex,em]=(0,p.useState)(!1),[eh,ep]=(0,p.useState)(!1),[eg,eu]=(0,p.useState)(!1),[eb,ef]=(0,p.useState)([]),[ej,ev]=(0,p.useState)(null),[eN,ek]=(0,p.useState)({connected:!1}),[ew,ey]=(0,p.useState)(!1),[ez,e_]=(0,p.useState)(null),[eC,eS]=(0,p.useState)(null),[eA,eE]=(0,p.useState)(!1),[eD,eI]=(0,p.useState)(!1),[eT,eL]=(0,p.useState)(!1),[eO,eR]=(0,p.useState)(!1),[eP,eM]=(0,p.useState)(!1),[e$,eU]=(0,p.useState)(null),[eF,eB]=(0,p.useState)(!1),[eH,eq]=(0,p.useState)(0),[eW,eV]=(0,p.useState)(null),[eY,eJ]=(0,p.useState)(!1),[eX,eQ]=(0,p.useState)(!1),eG=(0,p.useRef)(0),eK=(0,p.useRef)(!1);(0,p.useEffect)(()=>{Date.now()-eG.current<3e3||("IN_PROGRESS"===t||"ACTIVE"===t?("IDLE"===y||"PAUSED"===y)&&M("ACTIVE_READY"):"COMPLETED"===t?"COMPLETED"!==y&&M("COMPLETED"):"SCHEDULED"===t?"SCHEDULED"!==y&&M("SCHEDULED"):"PAUSED"===t?"PAUSED"!==y&&M("PAUSED"):"DRAFT"===t&&"IDLE"!==y&&M("IDLE"))},[t,y]);let eZ=p.default.useCallback(async()=>{if(f&&j)try{let t=await eo.api.get(`/execution/campaign/${e}/active-status`,{"X-Company-ID":j});t.max_concurrency&&G(t.max_concurrency),t.upcoming_leads&&B(e=>JSON.stringify(e)===JSON.stringify(t.upcoming_leads)?e:t.upcoming_leads),t.history&&q(e=>JSON.stringify(e)===JSON.stringify(t.history)?e:t.history),t.all_leads_by_cohort&&J(e=>JSON.stringify(e)===JSON.stringify(t.all_leads_by_cohort)?e:t.all_leads_by_cohort),t.execution_windows&&ed(e=>JSON.stringify(e)===JSON.stringify(t.execution_windows)?e:t.execution_windows)}catch(e){console.error("Failed to fetch initial execution config",e)}},[e,f,j]);(0,p.useEffect)(()=>{eZ()},[eZ]),(0,p.useEffect)(()=>{i&&i(ex)},[ex,i]);let e0=async()=>{if(f&&j)try{let e=await eo.api.get("/intelligence/calendar/status",{"X-Company-ID":j});ek(e)}catch(e){console.error("Failed to fetch calendar status",e)}};(0,p.useEffect)(()=>{e0()},[f,j]);let e1=async()=>{try{let e=await eo.api.get("/intelligence/calendar/google/login",{"X-Company-ID":j});e.url&&(window.location.href=e.url)}catch(e){R.toast.error("Failed to initiate calendar connection")}},{data:e5,isConnected:e2}=(0,e8.useCampaignWebSocket)(e),e7=(0,p.useRef)(!1),te=(0,p.useRef)(new Map);(0,p.useEffect)(()=>{if(!e5)return;let e=e5.agents||[],t=te.current,a=new Set(e.map(e=>e.agent_id));for(let e of t.keys())a.has(e)||t.delete(e);let r=new Set(t.values());e.forEach(e=>{if(!t.has(e.agent_id)){for(let a=0;a<X;a++)if(!r.has(a)){t.set(e.agent_id,a),r.add(a);break}}});let i=Array(X).fill(null);if(e.forEach(e=>{let a=t.get(e.agent_id);void 0!==a&&a<X&&(i[a]=e)}),U(i),B(e=>{let t=e5.upcoming_leads||[];return JSON.stringify(e)===JSON.stringify(t)?e:t}),e5.next_leads){let e=e5.next_leads;V(t=>JSON.stringify(t)===JSON.stringify(e)?t:e)}if(e5.events){let e=e5.events;Z(t=>JSON.stringify(t)===JSON.stringify(e)?t:e)}if(e5.history&&q(e=>JSON.stringify(e)===JSON.stringify(e5.history)?e:e5.history),e5.all_leads_by_cohort&&J(e=>JSON.stringify(e)===JSON.stringify(e5.all_leads_by_cohort)?e:e5.all_leads_by_cohort),G(e=>e===(e5.max_concurrency||2)?e:e5.max_concurrency||2),void 0!==e5.is_completed&&et(e=>e===e5.is_completed?e:e5.is_completed),e5.completion_data&&el(e=>JSON.stringify(e)===JSON.stringify(e5.completion_data)?e:e5.completion_data),e5.execution_windows){let e=e5.execution_windows;ed(t=>JSON.stringify(t)===JSON.stringify(e)?t:e)}e5.campaign_status&&(Date.now()-eG.current<3e3||("PAUSED"===e5.campaign_status&&"PAUSED"!==y?(M("PAUSED"),s("PAUSED")):"COMPLETED"===e5.campaign_status&&"COMPLETED"!==y?(M("COMPLETED"),s("COMPLETED")):("ACTIVE"===e5.campaign_status||"IN_PROGRESS"===e5.campaign_status)&&"IDLE"===y&&(M("ACTIVE_READY"),s(e5.campaign_status)))),"WARMUP"===y&&(e5.agents||[]).length>0&&M("ACTIVE_READY")},[e5,y,s]),(0,p.useEffect)(()=>{e5?.event==="user_queue_update"&&(console.log("[Execution] Received user_queue_update event. Refreshing data..."),eZ(),eq(Date.now()))},[e5?.event,eZ]),(0,p.useEffect)(()=>{(async()=>{if(f&&j&&(ee||"COMPLETED"===t)&&!en)try{console.log("[ExecutionPanel] Fetching completion data via REST API fallback...");let t=await eo.api.get(`/execution/campaign/${e}/completion-data`,{"X-Company-ID":j});t&&Object.keys(t).length>0&&(el(t),console.log("[ExecutionPanel] Completion data fetched successfully:",t))}catch(e){console.error("[ExecutionPanel] Failed to fetch completion data:",e)}})()},[ee,t,en,e,f,j]),(0,p.useEffect)(()=>{(async()=>{let e=!!en&&en.total_completed>=en.total_targets;if((ee||e)&&("ACTIVE_READY"===y||"IN_CALL"===y||"WARMUP"===y)){console.log(`[Execution] ${ee?"Campaign complete":"Targets achieved"} detected. Initiating auto-pause...`);try{await ti()}catch(e){console.error("Failed to auto-pause on completion/target hit",e)}}})()},[ee,en,y]),(0,p.useEffect)(()=>{let t=async()=>{if("IDLE"!==y&&!e2&&!e7.current&&f&&j)try{e7.current=!0;let[t,a]=await Promise.all([eo.api.get(`/execution/campaign/${e}/next-leads`,{"X-Company-ID":j}),eo.api.get(`/execution/campaign/${e}/events`,{"X-Company-ID":j})]);V(e=>JSON.stringify(e)===JSON.stringify(t||[])?e:t||[]),Z(e=>JSON.stringify(e)===JSON.stringify(a||[])?e:a||[])}catch(e){console.error("Failed to fetch initial side data",e)}};"IDLE"===y||"COMPLETED"===y||"SCHEDULED"===y||e2||t()},[y,e,f,j,e2]);let tt=(0,p.useRef)(ec);(0,p.useEffect)(()=>{tt.current=ec},[ec]);let ta=e=>{if(!e||0===e.length)return{isInWindow:!0,nextWindow:null};let t=new Date,a=!1,r=[];e.forEach(e=>{try{let s=(0,N.parseISO)(`${e.day}T${e.start}`),i=(0,N.parseISO)(`${e.day}T${e.end}`),n=new Date(s.getTime()-12e4),l=new Date(i.getTime()-18e5);t>=n&&t<=i?t<l&&(a=!0):n>t&&r.push({...e,_startDt:n})}catch(t){console.warn("Invalid window format",e)}});let s=r.length>0?r.sort((e,t)=>e._startDt.getTime()-t._startDt.getTime())[0]:null;return{isInWindow:a,nextWindow:s}},tr=()=>{let{isInWindow:e}=ta(tt.current);return console.log("[Execution] Window check:",e,"Windows:",tt.current),e},ts=async()=>{if(f){if(eG.current=Date.now(),r){console.log("[Execution] Start blocked: Lead updates pending initialization"),ei(!0);return}if("DRAFT"===t){console.log("[Execution] Start blocked: Campaign is in DRAFT"),ei(!0);return}if(!eK.current&&!tr()){console.log("[Execution] Opening extension modal due to expired window"),ev(()=>ts),ef(JSON.parse(JSON.stringify(ec))),em(!0);return}eK.current=!1;try{let t=await eo.api.post(`/execution/campaign/${e}/pause`);if(t&&t.data){let e=t.data;e.agents&&U(e.agents),e.upcoming_leads&&B(e.upcoming_leads),e.history&&q(e.history),e.all_leads_by_cohort&&J(e.all_leads_by_cohort),e.events&&Z(e.events),e.next_leads&&V(e.next_leads)}R.toast.success("AI Agents Initialized",{description:"Session is ready. Agents are standing by and lead buffer is being prepared."}),eQ(!0),s("PAUSED"),M("PAUSED")}catch(a){let e=a.message||"",t=a.response?.data?.detail;e.toLowerCase().includes("execution window")||"string"==typeof t&&t.toLowerCase().includes("execution window")?(console.log("[Execution] Backend reported window error. Opening modal."),ev(()=>ts),ef(JSON.parse(JSON.stringify(ec))),em(!0)):t?.toLowerCase().includes("strategy")||e?.toLowerCase().includes("strategy")?(console.log("[Execution] Backend reported missing strategy."),eM(!0)):(console.error("Failed to start session",a),R.toast.error("Failed to initialize session"))}}},ti=async()=>{if(f){eG.current=Date.now();try{await eo.api.post(`/execution/campaign/${e}/pause`),s("PAUSED"),M("PAUSED")}catch(e){console.error("Failed to pause session",e)}}},tn=async()=>{if(f){if(eG.current=Date.now(),r){console.log("[Execution] Resume blocked: Lead updates pending initialization"),ei(!0);return}if("DRAFT"===t){console.log("[Execution] Resume blocked: Campaign is in DRAFT"),ei(!0);return}if(!eK.current&&!tr()){console.log("[Execution] Resume blocked: Opening extension modal due to expired window"),ev(()=>tn),ef(JSON.parse(JSON.stringify(ec))),em(!0);return}eK.current=!1;try{await eo.api.post(`/execution/campaign/${e}/start`),eQ(!0),s("IN_PROGRESS"),M("ACTIVE_READY")}catch(a){let e=a.message||"",t=a.response?.data?.detail;e.toLowerCase().includes("execution window")||"string"==typeof t&&t.toLowerCase().includes("execution window")?(console.log("[Execution] Backend blocked resume: Window error"),ev(()=>tn),ef(JSON.parse(JSON.stringify(ec))),em(!0)):t?.toLowerCase().includes("strategy")||e?.toLowerCase().includes("strategy")?(console.log("[Execution] Backend blocked resume: Missing strategy."),eM(!0)):(console.error("Failed to resume session",a),R.toast.error("Failed to resume session"))}}},tl=async()=>{if(f){eu(!0),eG.current=Date.now();try{let t=await eo.api.post(`/execution/campaign/${e}/reset`);if(R.toast.success("Campaign Reset",{description:"All failures have been cleared. Agents are ready to start fresh."}),t&&t.data){let e=t.data;e.agents&&U(e.agents),e.upcoming_leads&&B(e.upcoming_leads),e.history&&q(e.history),e.all_leads_by_cohort&&J(e.all_leads_by_cohort),void 0!==e.is_exhausted&&er(e.is_exhausted),et(!1),el(null)}M("PAUSED"),s("PAUSED")}catch(e){console.error("Failed to reset campaign",e),R.toast.error("Failed to reset campaign")}finally{eu(!1)}}},tc=async t=>{ep(!0);try{if(await eo.api.patch(`/intelligence/campaigns/${e}/settings`,{execution_windows:eb}),ed(eb),tt.current=eb,eN.connected)try{let a=Intl.DateTimeFormat().resolvedOptions().timeZone;await eo.api.post(`/intelligence/campaigns/${e}/calendar-sync`,{timezone:a});let r=t&&!!ej;R.toast.success(r?"Schedule Saved & Starting...":"Schedule Updated",{description:r?"Agents are starting now.":"Campaign is queued for the next window."})}catch(e){console.error("Calendar sync failed",e),R.toast.warning("Schedule Updated",{description:"Windows saved, but calendar sync failed."})}else{let e=t&&!!ej;R.toast.success(e?"Schedule Saved & Starting...":"Schedule Updated",{description:e?"Agents are starting now.":"Campaign is queued for the next window."})}em(!1),eL(!1),eR(!1),l&&l(eb),t&&ej&&(R.toast.info("Auto-starting session...",{duration:2e3}),eK.current=!0,await ej()),ev(null)}catch(e){console.error("Failed to update schedule",e),R.toast.error("Failed to update execution schedule")}finally{ep(!1)}},td=async(t,a)=>{try{"approve"===t?(await eo.api.patch(`/execution/lead/${a}/approve`),R.toast.success("Lead Approved",{description:"Moving to scheduled queue."})):"retry"===t?(await eo.api.post(`/execution/campaign/${e}/retry/${a}`),R.toast.success("Retry Initiated",{description:"Lead has been re-queued for dialing."})):R.toast.info("Reschedule clicked",{description:"Manual rescheduling interface coming soon."})}catch(e){R.toast.error("Action Failed",{description:`Could not ${"retry"===t?"retry":"update"} lead status.`})}},to=$.filter(e=>null!==e).length,tx=["WARMUP","ACTIVE_EMPTY","ACTIVE_READY","IN_CALL","OUTCOME","PAUSED","COMPLETED"].includes(y),[tm,tp]=(0,p.useState)("live"),[tg,tu]=(0,p.useState)(0);(0,p.useEffect)(()=>{let t=localStorage.getItem(`unclutr_feed_cleared_at_${e}`);t&&tu(parseInt(t,10))},[e]);let tb=(0,p.useMemo)(()=>"all"!==tm&&tg?K.filter(e=>(0,P.parseAsUTC)(e.timestamp).getTime()>tg):K,[K,tg,tm]),tf=async()=>{eu(!0);try{await eo.api.post(`/execution/campaign/${e}/replenish`),R.toast.success("Replenishing Queue",{description:"Short calls (<10s) have been reset and added back."})}catch(e){R.toast.error("Replenish Failed",{description:"Could not replenish leads. Please try again."})}finally{eu(!1)}};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(u.AnimatePresence,{mode:"wait",children:["IDLE"===y&&(0,h.jsxs)(g.motion.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,filter:"blur(10px)"},transition:{duration:.5,ease:"easeOut"},className:"relative w-full overflow-hidden rounded-[32px] border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 shadow-2xl shadow-orange-500/10",children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-orange-50/50 via-white to-white dark:from-orange-950/20 dark:via-zinc-950 dark:to-zinc-950 pointer-events-none"}),(0,h.jsx)("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-orange-500/5 blur-[120px] rounded-full pointer-events-none mix-blend-multiply dark:mix-blend-screen"}),(0,h.jsxs)("div",{className:"relative z-10 px-12 py-16 flex flex-col md:flex-row items-center justify-between gap-12",children:[(0,h.jsxs)("div",{className:"flex-1 space-y-8 max-w-2xl",children:[(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)(g.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"flex items-center gap-3",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-orange-500 blur-lg opacity-20 animate-pulse"}),(0,h.jsx)("div",{className:"relative w-12 h-12 rounded-2xl bg-gradient-to-br from-orange-500 to-violet-600 flex items-center justify-center text-white shadow-lg shadow-orange-500/25 ring-4 ring-orange-50 dark:ring-orange-900/20",children:(0,h.jsx)(S.Sparkles,{className:"w-6 h-6"})})]}),(0,h.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-zinc-200 to-transparent dark:from-zinc-800"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)(g.motion.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-4xl md:text-5xl font-black text-zinc-900 dark:text-white mb-4 tracking-tight leading-[1.1]",children:a?(0,h.jsxs)(h.Fragment,{children:["Ready to ",(0,h.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-violet-600 dark:from-orange-400 dark:to-violet-400",children:"Execute?"})]}):(0,h.jsxs)(h.Fragment,{children:["Strategy ",(0,h.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-amber-500 to-orange-600 dark:from-amber-400 dark:to-orange-400",children:"Required"})]})}),(0,h.jsx)(g.motion.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-lg text-zinc-500 dark:text-zinc-400 font-medium leading-relaxed max-w-lg",children:a?(0,h.jsxs)(h.Fragment,{children:["Initializing this session will spin up ",(0,h.jsxs)("span",{className:"font-bold text-zinc-900 dark:text-zinc-200 border-b-2 border-orange-500/20",children:[X," AI Agents"]})," to autonomously dial, qualify, and transfer high-intent prospects from your list."]}):(0,h.jsxs)(h.Fragment,{children:["Your campaign leads have changed. You must re-configure your ",(0,h.jsx)("span",{className:"font-bold text-zinc-900 dark:text-zinc-200 border-b-2 border-amber-500/20",children:"Campaign Strategy"})," (cohorts and targets) before executing."]})})]})]}),(0,h.jsxs)(g.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"flex items-center gap-6",children:[(0,h.jsxs)("div",{className:"flex -space-x-3",children:[Array.from({length:X}).map((e,t)=>(0,h.jsxs)("div",{className:"w-10 h-10 rounded-full border-2 border-white dark:border-zinc-950 bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center relative overflow-hidden",children:[(0,h.jsx)(z,{className:"w-5 h-5 text-zinc-400"}),(0,h.jsx)("div",{className:"absolute inset-0 bg-orange-500/10"})]},t)),(0,h.jsxs)("div",{className:"w-10 h-10 rounded-full border-2 border-white dark:border-zinc-950 bg-orange-50 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400 text-xs font-bold",children:["+",X]})]}),(0,h.jsx)("span",{className:"text-sm font-semibold text-zinc-400",children:"Agents typically connect in < 2 mins"})]})]}),(0,h.jsxs)("div",{className:"relative group",children:[(0,h.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-orange-500 to-violet-500 rounded-full blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"}),(0,h.jsxs)(O.Button,{size:"lg",onClick:a&&"DRAFT"!==t?ts:n,className:(0,P.cn)("relative h-20 px-12 text-xl rounded-full transition-all shadow-2xl font-bold flex items-center gap-4 overflow-hidden","bg-zinc-900 dark:bg-white text-white dark:text-black hover:bg-zinc-800 hover:scale-[1.02] shadow-orange-500/20"),children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/0 via-white/10 to-orange-500/0 translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),(0,h.jsx)("div",{className:(0,P.cn)("w-12 h-12 rounded-full flex items-center justify-center bg-white/10"),children:(0,h.jsx)(k.Play,{className:"w-6 h-6 fill-current"})}),a&&"DRAFT"!==t?"Start Session":"Finalize Strategy"]})]})]})]},"idle"),"SCHEDULED"===y&&(0,h.jsxs)(g.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"w-full bg-orange-50/50 dark:bg-orange-950/10 rounded-[32px] border border-orange-200/60 dark:border-orange-900/30 p-8 shadow-sm flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center gap-6",children:[(0,h.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-orange-100 dark:bg-orange-900/20 flex items-center justify-center text-orange-600 dark:text-orange-400 shadow-inner",children:(0,h.jsx)(A.Calendar,{className:"w-8 h-8"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-xl font-black text-zinc-900 dark:text-white mb-1",children:"Scheduled for Execution"}),(0,h.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium",children:"Campaign is queued to start automatically. Agents will spin up at the designated time."})]})]}),(0,h.jsx)(O.Button,{variant:"outline",className:"h-14 px-8 text-base rounded-full border-orange-200 dark:border-orange-800 text-orange-700 dark:text-orange-400 hover:bg-orange-100 dark:hover:bg-orange-900/30 font-bold",onClick:()=>{ef(JSON.parse(JSON.stringify(ec))),em(!0)},children:"View Schedule"})]},"scheduled"),tx&&(0,h.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"w-full bg-white/80 dark:bg-zinc-950/80 backdrop-blur-xl rounded-[32px] border border-zinc-200/50 dark:border-zinc-800/50 p-6 shadow-2xl shadow-orange-500/5",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,h.jsx)(O.Button,{variant:"outline",size:"icon",onClick:"PAUSED"===y||"COMPLETED"===y?tn:ti,className:"h-12 w-12 rounded-2xl border-2 border-zinc-100 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-900 shrink-0",children:"PAUSED"===y||"COMPLETED"===y?(0,h.jsx)(k.Play,{className:"w-5 h-5 fill-current"}):(0,h.jsx)(w.Pause,{className:"w-5 h-5 fill-current"})}),(0,h.jsx)("div",{className:"flex-1",children:(0,h.jsx)(tz,{status:y,activeAgents:to,executionWindows:ec})})]}),(0,h.jsxs)("div",{className:"flex flex-col gap-6 mb-6",children:[(0,h.jsx)("div",{className:"mb-8",children:(0,h.jsx)(e4,{activeAgents:$,upcomingLeads:F,historyItems:H,allLeadsByCohort:Y,allEvents:K,maxConcurrency:X,isCompleted:"COMPLETED"===y||ee,isPaused:"PAUSED"===y,isResetting:eg,completionData:en,onReset:tl,isExhausted:e5?.is_exhausted,onReplenish:tf,onLeadAction:td,onUserQueueRefresh:()=>eq(Date.now()),feedEvents:tb,onClearFeed:()=>{let t=Date.now();tu(t),localStorage.setItem(`unclutr_feed_cleared_at_${e}`,t.toString()),R.toast.success("Feed Cleared",{description:"Mission Control Feed has been reset locally."})},feedViewMode:tm,onFeedViewModeChange:tp,className:"bg-white/50 dark:bg-zinc-900/50 backdrop-blur-sm border-zinc-200/50 dark:border-zinc-800/50 min-h-[500px]"})}),(0,h.jsx)(th,{campaignId:e,campaignStatus:"ACTIVE_READY"===y||"WARMUP"===y||"IN_CALL"===y?"ACTIVE":"PAUSED",isStarted:eX,refreshTrigger:eH,historyItems:H,maxConcurrency:X,onStart:ts,onCallClick:e=>{eU(e),eB(!0)},onContextClick:e=>{eV({id:e.lead_id,item_id:e.id,name:e.lead_name}),eJ(!0)}})]}),(0,h.jsx)(Q,{isOpen:eA,onClose:()=>eE(!1),agent:$.find(e=>e?.agent_id===ez)||null,agentName:$.find(e=>e?.agent_id===ez)?.agent_name||eC?.name||"",leadName:$.find(e=>e?.agent_id===ez)?.lead_name||eC?.leadName,index:eC?.index??0,events:K.filter(e=>{let t=$.find(e=>e?.agent_id===ez),a=t?.lead_id||eC?.leadId,r=t?.agent_name||eC?.name;return e.lead_id&&a?String(e.lead_id)===String(a):r&&e.agent_name===r})}),(0,h.jsx)(e3,{isOpen:eD,onClose:()=>eI(!1),activeAgents:$,upcomingLeads:F,historyItems:H,allLeadsByCohort:Y,allEvents:K,maxConcurrency:X,isPaused:"PAUSED"===y,isResetting:eg,onReset:tl,onLeadAction:(e,t)=>{console.log("Queue Action",e,t)},onRefreshQueue:eZ})]},"active")]}),(0,h.jsx)(u.AnimatePresence,{children:ex&&(0,h.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,h.jsx)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{eh||(em(!1),ev(null))},className:"absolute inset-0 bg-zinc-950/60 backdrop-blur-xl"}),(0,h.jsxs)(g.motion.div,{initial:{opacity:0,scale:.95,y:30,filter:"blur(10px)"},animate:{opacity:1,scale:1,y:0,filter:"blur(0px)"},exit:{opacity:0,scale:.95,y:30,filter:"blur(10px)"},className:"relative w-full max-w-2xl overflow-hidden rounded-[40px] border border-white/20 dark:border-white/5 bg-white/90 dark:bg-zinc-900/95 backdrop-blur-3xl shadow-[0_30px_100px_-10px_rgba(0,0,0,0.3)] p-1",children:[(0,h.jsx)("div",{className:"absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-white/50 dark:via-white/20 to-transparent opacity-50"}),(0,h.jsx)("div",{className:"p-8 md:p-10 space-y-8",children:(0,h.jsx)(u.AnimatePresence,{mode:"wait",children:eO?(0,h.jsxs)(g.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-8",children:[(0,h.jsxs)("div",{className:"flex flex-col items-center text-center space-y-6",children:[(0,h.jsx)("div",{className:"w-20 h-20 rounded-[2rem] bg-amber-50 dark:bg-amber-900/20 flex items-center justify-center text-amber-600 dark:text-amber-500 border border-amber-100 dark:border-amber-900/30 shadow-xl shadow-amber-500/10",children:(0,h.jsx)(I.AlertTriangle,{className:"w-10 h-10"})}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white tracking-tight",children:"Outside Window"}),(0,h.jsxs)("p",{className:"text-zinc-500 dark:text-zinc-400 font-medium max-w-sm leading-relaxed",children:["The current time is outside of your scheduled windows. If you continue, the campaign will remain ",(0,h.jsx)("span",{className:"text-zinc-900 dark:text-white font-bold",children:"Paused"})," until the next slot."]})]})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[(0,h.jsx)(O.Button,{variant:"outline",onClick:()=>eR(!1),className:"h-16 rounded-[1.5rem] border-2 border-zinc-100 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-900 font-black text-zinc-600 dark:text-zinc-400 transition-all active:scale-[0.98]",children:"Go Back & Edit"}),(0,h.jsx)(O.Button,{onClick:()=>tc(!1),disabled:eh,className:"h-16 rounded-[1.5rem] bg-orange-600 hover:bg-orange-700 text-white font-black shadow-xl shadow-orange-600/20 transition-all active:scale-[0.98]",children:"Schedule for Later"})]})]},"warning"):(0,h.jsxs)(g.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-8",children:[(0,h.jsxs)("div",{className:"flex items-start justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center gap-6",children:[(0,h.jsx)("div",{className:"w-16 h-16 rounded-[1.5rem] bg-gradient-to-br from-orange-500/10 to-violet-500/5 dark:from-orange-500/20 dark:to-violet-500/10 flex items-center justify-center text-orange-500 dark:text-orange-400 border border-orange-200/50 dark:border-orange-500/20 shadow-sm",children:(0,h.jsx)(C.Clock,{className:"w-8 h-8"})}),(0,h.jsxs)("div",{className:"space-y-1",children:[(0,h.jsx)("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white tracking-tight",children:"Update Schedule"}),(0,h.jsx)("p",{className:(0,P.cn)("font-medium transition-colors duration-300",ta(eb).isInWindow?"text-emerald-600 dark:text-emerald-400":"text-zinc-500 dark:text-zinc-400"),children:ta(eb).isInWindow?"Current time is now covered. Ready to start.":"Your campaign is currently outside its execution window."})]})]}),(0,h.jsx)(O.Button,{variant:"ghost",size:"icon",disabled:eh,onClick:()=>{em(!1),ev(null),eR(!1)},className:"w-12 h-12 rounded-2xl hover:bg-zinc-100 dark:hover:bg-white/10 hover:rotate-90 transition-all duration-300",children:(0,h.jsx)(D.X,{className:"w-6 h-6 text-zinc-400"})})]}),(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between pb-3 border-b border-zinc-100 dark:border-zinc-800",children:[(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("label",{className:"text-xs font-bold text-zinc-400 uppercase tracking-widest",children:"Active Windows"}),eN.connected?(0,h.jsxs)("div",{className:"flex items-center gap-1.5 mt-1",children:[(0,h.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),(0,h.jsx)("span",{className:"text-[10px] font-black text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:"Google Calendar Synced"})]}):(0,h.jsxs)("div",{className:"flex items-center gap-1.5 mt-1",children:[(0,h.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500"}),(0,h.jsx)("span",{className:"text-[10px] font-black text-amber-600 dark:text-amber-400 uppercase tracking-wider",children:"Calendar Not Connected"})]})]}),!eN.connected&&(0,h.jsxs)(O.Button,{size:"sm",variant:"ghost",onClick:e1,className:"text-[10px] font-black uppercase tracking-wider text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-full px-4 h-8 gap-2 border border-orange-100 dark:border-orange-900/40",children:[(0,h.jsx)(A.Calendar,{className:"w-3 h-3"}),"Connect to Block"]})]}),(0,h.jsxs)("div",{className:"space-y-3 max-h-[350px] overflow-y-auto pr-2 custom-scrollbar p-1",children:[(c=new Date,d=eb.map((e,t)=>({...e,_originalIndex:t})),o=[],x=[],m=[],d.forEach(e=>{try{let t=(0,N.parseISO)(`${e.day}T${e.start}`),a=(0,N.parseISO)(`${e.day}T${e.end}`);if(c>a)m.push(e);else if(c>=t&&c<=a){let t=Math.max(0,Math.round((a.getTime()-c.getTime())/6e4));o.push({...e,_durationLabel:`${t} MINS LEFT`,_isInvalid:t<30})}else x.push(e)}catch{x.push(e)}}),x.sort((e,t)=>(0,N.parseISO)(`${e.day}T${e.start}`).getTime()-(0,N.parseISO)(`${t.day}T${t.start}`).getTime()),m.sort((e,t)=>(0,N.parseISO)(`${t.day}T${t.start}`).getTime()-(0,N.parseISO)(`${e.day}T${e.start}`).getTime()),(0,h.jsxs)(h.Fragment,{children:[o.length>0&&(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsxs)("h4",{className:"text-[10px] font-black text-orange-600 dark:text-orange-400 uppercase tracking-[0.2em] mb-4 flex items-center gap-2.5",children:[(0,h.jsx)("span",{className:"w-2 h-2 rounded-full bg-orange-500 animate-pulse shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),"Current Window"]}),(0,h.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,h.jsx)(e9.TimeWindowSelector,{day:e.day,start:e.start,end:e.end,allWindows:eb,currentIndex:e._originalIndex,customDurationLabel:e._durationLabel,isInvalid:e._isInvalid,onChange:t=>{let a=[...eb];a[e._originalIndex]={...a[e._originalIndex],...t},ef(a)},onDelete:()=>{ef(eb.filter((t,a)=>a!==e._originalIndex))}},`${e.day}-${e.start}-${e._originalIndex}`))})]}),x.length>0&&(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("h4",{className:"text-[10px] font-black text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em] mb-4",children:"Upcoming Windows"}),(0,h.jsx)("div",{className:"space-y-3",children:(0,h.jsx)(u.AnimatePresence,{children:x.map(e=>(0,h.jsx)(e9.TimeWindowSelector,{day:e.day,start:e.start,end:e.end,allWindows:eb,currentIndex:e._originalIndex,onChange:t=>{let a=[...eb];a[e._originalIndex]={...a[e._originalIndex],...t},ef(a)},onDelete:()=>{ef(eb.filter((t,a)=>a!==e._originalIndex))}},`${e.day}-${e.start}-${e._originalIndex}`))})})]}),m.length>0&&(0,h.jsxs)("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-800/50",children:[(0,h.jsx)("h4",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-[0.2em] mb-4",children:"Past Windows"}),(0,h.jsx)("div",{className:"opacity-40 grayscale hover:opacity-100 hover:grayscale-0 transition-all duration-300 space-y-3",children:(0,h.jsx)(u.AnimatePresence,{children:m.map(e=>(0,h.jsx)(e9.TimeWindowSelector,{day:e.day,start:e.start,end:e.end,allWindows:eb,currentIndex:e._originalIndex,onChange:t=>{let a=[...eb];a[e._originalIndex]={...a[e._originalIndex],...t},ef(a)},onDelete:()=>{ef(eb.filter((t,a)=>a!==e._originalIndex))}},`${e.day}-${e.start}-${e._originalIndex}`))})})]})]})),(0,h.jsxs)(g.motion.button,{whileHover:{scale:1.01,borderColor:"rgb(99, 102, 241, 0.5)"},whileTap:{scale:.98},onClick:()=>{let e=new Date,t=(0,b.format)(e,"yyyy-MM-dd"),a=(0,b.format)(e,"HH:00"),r=new Date(e);r.setHours(r.getHours()+1),ef([...eb,{day:t,start:a,end:(0,b.format)(r,"HH:00")}])},className:"w-full h-16 rounded-[1.5rem] border-2 border-dashed border-zinc-100 dark:border-zinc-800/60 flex items-center justify-center gap-3 text-zinc-400 hover:text-orange-500 hover:bg-orange-50/30 dark:hover:bg-orange-950/20 transition-all font-black text-sm uppercase tracking-widest",children:[(0,h.jsx)("div",{className:"w-6 h-6 rounded-full bg-zinc-50 dark:bg-zinc-800 flex items-center justify-center border border-zinc-100 dark:border-zinc-700",children:(0,h.jsx)(E.Plus,{className:"w-3.5 h-3.5"})}),"Add Slot"]})]})]}),(0,h.jsx)("div",{className:"flex flex-col gap-4 pt-4",children:(0,h.jsx)(O.Button,{onClick:()=>{let e=0;if(eb.find(t=>{try{let a=(0,N.parseISO)(`${t.day}T${t.start}`),r=((0,N.parseISO)(`${t.day}T${t.end}`).getTime()-a.getTime())/6e4;if(r<30)return e=r,!0;return!1}catch{return!0}}))return void R.toast.error("Invalid Slot Duration",{description:`Slot is only ${e} min. Execution windows must be at least 30 minutes.`});let{isInWindow:t}=ta(eb);JSON.stringify(eb),JSON.stringify(ec),t?tc(!0):eR(!0)},disabled:eh||0===eb.length,className:"h-16 rounded-[1.5rem] bg-zinc-900 dark:bg-white text-white dark:text-black font-black text-lg hover:scale-[1.02] active:scale-[0.98] transition-all gap-3 relative overflow-hidden group shadow-2xl shadow-orange-500/20",children:eh?(0,h.jsx)(_.Loader2,{className:"w-6 h-6 animate-spin"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S.Sparkles,{className:"w-5 h-5"}),ej?"Save & Start Session":"Save Schedule"]})})})]},"editor")})})]})]},"extend-modal")}),(0,h.jsx)(L.AlertDialog,{open:eP,onOpenChange:eM,children:(0,h.jsxs)(L.AlertDialogContent,{className:"rounded-[3rem] border-zinc-200 dark:border-zinc-800 bg-white/95 dark:bg-zinc-950/95 backdrop-blur-xl shadow-2xl",children:[(0,h.jsxs)(L.AlertDialogHeader,{children:[(0,h.jsxs)(L.AlertDialogTitle,{className:"text-2xl font-black text-zinc-900 dark:text-white flex items-center gap-3",children:[(0,h.jsx)("div",{className:"p-2.5 bg-amber-100 dark:bg-amber-900/30 rounded-2xl text-amber-600 dark:text-amber-400",children:(0,h.jsx)(T.Target,{className:"w-5 h-5"})}),"Strategy Required"]}),(0,h.jsx)(L.AlertDialogDescription,{className:"text-zinc-500 dark:text-zinc-400 text-[15px] font-medium leading-relaxed py-2",children:"A campaign strategy must be defined before execution can begin. You need to configure targets and protocols for each cohort segment."})]}),(0,h.jsxs)(L.AlertDialogFooter,{className:"gap-3 sm:gap-2",children:[(0,h.jsx)(L.AlertDialogCancel,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800 text-zinc-500 dark:text-zinc-400 font-bold hover:bg-zinc-50 dark:hover:bg-zinc-900/50 h-12 px-6",children:"Not Now"}),(0,h.jsx)(L.AlertDialogAction,{onClick:()=>{eM(!1),n&&n()},className:"rounded-2xl bg-zinc-900 dark:bg-white text-white dark:text-black font-bold h-12 px-8 shadow-xl transition-all hover:scale-[1.02] active:scale-[0.98]",children:"Configure Strategy"})]})]})}),(0,h.jsx)(L.AlertDialog,{open:es,onOpenChange:ei,children:(0,h.jsxs)(L.AlertDialogContent,{className:"rounded-[3rem] border-zinc-200 dark:border-zinc-800 bg-white/95 dark:bg-zinc-950/95 backdrop-blur-xl shadow-2xl",children:[(0,h.jsxs)(L.AlertDialogHeader,{children:[(0,h.jsxs)(L.AlertDialogTitle,{className:"text-2xl font-black text-zinc-900 dark:text-white flex items-center gap-3",children:[(0,h.jsx)("div",{className:"p-2.5 bg-orange-100 dark:bg-orange-900/30 rounded-2xl text-orange-600 dark:text-orange-400",children:(0,h.jsx)(S.Sparkles,{className:"w-5 h-5"})}),"Initialization Required"]}),(0,h.jsx)(L.AlertDialogDescription,{className:"text-zinc-500 dark:text-zinc-400 text-[15px] font-medium leading-relaxed py-2",children:"New leads have been added to this campaign. To ensure Alex behaves correctly with the new data, you must finalize the campaign strategy before starting the session."})]}),(0,h.jsxs)(L.AlertDialogFooter,{className:"gap-3 sm:gap-2",children:[(0,h.jsx)(L.AlertDialogCancel,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800 text-zinc-500 dark:text-zinc-400 font-bold hover:bg-zinc-50 dark:hover:bg-zinc-900/50 h-12 px-6",children:"Not Now"}),(0,h.jsx)(L.AlertDialogAction,{onClick:()=>{ei(!1),n&&n()},className:"rounded-2xl bg-zinc-900 dark:bg-white text-white dark:text-black font-bold h-12 px-8 shadow-xl transition-all hover:scale-[1.02] active:scale-[0.98]",children:"Finalize Strategy"})]})]})}),e$&&(0,h.jsx)(tv,{isOpen:eF,onClose:()=>eB(!1),lead:{id:e$.lead_id,name:e$.lead_name,item_id:e$.id,campaign_id:e},onSuccess:()=>{eZ(),eq(Date.now())}}),eW&&(0,h.jsx)(ty,{isOpen:eY,onClose:()=>eJ(!1),leadId:eW.id,itemId:eW.item_id,leadName:eW.name})]})}function tC(e){let{data:t,isConnected:a,error:r}=(0,e8.useCampaignWebSocket)(e);return{campaign:t?.campaign_metadata||null,executionWindows:t?.execution_windows||[],isConnected:a,error:r}}e.s(["ExecutionPanel",()=>t_],28082),e.s(["useCampaignData",()=>tC],40465)}]);