(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2324],{83686:()=>{},32383:()=>{},14640:(e,t,a)=>{"use strict";a.d(t,{z:()=>p});var r=a(95155),n=a(12115),s=a(28633),i=a(71226),o=a(32423),l=a(40767),c=a(14085),d=a(13691),x=a.n(d),m=a(29602),g=a(67113),u=a(3392);function h(e){let{executionWindows:t,busySlots:a=[]}=e,{theme:s}=(0,g.D)(),i=(0,n.useMemo)(()=>{let e=[],t=x()().startOf("day");for(let a=0;a<7;a++)e.push(x()(t).add(a,"days"));return e},[]),o=Array.from({length:24},(e,t)=>t),l=(e,r)=>{let n=e.clone().hour(r).minute(0),s=e.clone().hour(r+1).minute(0),i=n.valueOf(),o=s.valueOf(),l=a.some(e=>{let t=new Date(e.start).getTime(),a=new Date(e.end).getTime();return t<o&&a>i}),c=t.some(t=>{let a,r;if(t.day&&t.day.includes("-")){let n=x()(t.day);if(!n.isSame(e,"day"))return!1;let[s,i]=t.start.split(":").map(Number),[o,l]=t.end.split(":").map(Number);a=n.clone().hour(s).minute(i),r=n.clone().hour(o).minute(l)}else{let n=e.format("dddd");if(t.day!==n)return!1;let[s,i]=t.start.split(":").map(Number),[o,l]=t.end.split(":").map(Number);a=e.clone().hour(s).minute(i),r=e.clone().hour(o).minute(l)}return n.isBefore(r)&&s.isAfter(a)});return l&&c?"conflict":l?"busy":c?"execution":"free"};return(0,r.jsxs)("div",{className:"h-full flex flex-col bg-white/50 dark:bg-black/40 backdrop-blur-xl rounded-[1.5rem] border border-zinc-200/50 dark:border-white/5 overflow-hidden shadow-sm relative",children:[(0,r.jsxs)("div",{className:"absolute top-4 right-6 flex items-center gap-4 text-[10px] font-bold uppercase tracking-wider bg-white/90 dark:bg-zinc-900/90 p-1.5 rounded-full border border-zinc-100 dark:border-white/5 backdrop-blur-md z-10 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5 px-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]"}),(0,r.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Busy (GCal)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 px-2 border-l border-zinc-200 dark:border-zinc-800",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"}),(0,r.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Free Slot"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-8 gap-2 p-4 border-b border-zinc-100 dark:border-white/5 bg-white/40 dark:bg-white/[0.02] pt-10",children:[(0,r.jsx)("div",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest flex items-center justify-center",children:"Time"}),i.map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,r.jsx)("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:e.format("ddd")}),(0,r.jsx)("span",{className:(0,m.cn)("text-xs font-black",0===t?"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-500/10 px-2 py-0.5 rounded-md":"text-zinc-900 dark:text-white"),children:e.format("DD")})]},t))]}),(0,r.jsx)(u.F,{className:"flex-1",children:(0,r.jsx)("div",{className:"grid grid-cols-8 gap-x-2 gap-y-1 p-4",children:o.map(e=>(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)("div",{className:"flex items-center justify-center text-[10px] font-medium text-zinc-400 font-mono",children:x()().hour(e).format("h A")}),i.map((t,a)=>{let n=l(t,e);return(0,r.jsxs)("div",{className:(0,m.cn)("h-8 rounded-lg border transition-all duration-300 flex items-center justify-center group relative","busy"===n&&"bg-red-500/10 border-red-500/20 shadow-[0_0_8px_rgba(239,68,68,0.1)]","execution"===n&&"bg-emerald-500/10 border-emerald-500/30 shadow-[0_0_10px_rgba(16,185,129,0.1)]","conflict"===n&&"bg-amber-500/10 border-amber-500/30","free"===n&&"bg-zinc-50/50 dark:bg-white/[0.02] border-zinc-100 dark:border-white/[0.02]"),title:"".concat(t.format("MMM DD")," @ ").concat(x()().hour(e).format("h A"),": ").concat(n.toUpperCase()),children:["busy"===n&&(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 opacity-60"}),"execution"===n&&(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_6px_rgba(16,185,129,0.6)] animate-pulse"}),"conflict"===n&&(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"})]})]},"".concat(a,"-").concat(e))})]},e))})})]})}function p(e){let{isOpen:t,onClose:a,busySlots:n,activeCampaign:d,onSaveWindow:x}=e;return(0,r.jsx)(s.N,{children:t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"fixed inset-0 bg-zinc-950/60 backdrop-blur-sm z-[9998] transition-all duration-500"}),(0,r.jsx)(i.P.div,{initial:{opacity:0,scale:.9,y:30,filter:"blur(10px)"},animate:{opacity:1,scale:1,y:0,filter:"blur(0px)"},exit:{opacity:0,scale:.9,y:30,filter:"blur(10px)"},transition:{type:"spring",duration:.6,bounce:.25},className:"fixed inset-0 flex items-center justify-center z-[9999] pointer-events-none p-4 md:p-8",children:(0,r.jsxs)("div",{className:"bg-white/95 dark:bg-zinc-900/95 backdrop-blur-2xl w-full max-w-6xl rounded-[2.5rem] shadow-[0_30px_100px_-10px_rgba(0,0,0,0.3)] border border-white/20 dark:border-white/10 overflow-hidden pointer-events-auto flex flex-col h-[85vh] relative ring-1 ring-black/5 dark:ring-white/5",children:[(0,r.jsx)("div",{className:"absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-white/50 dark:via-white/20 to-transparent opacity-50"}),(0,r.jsxs)("div",{className:"px-6 py-5 md:px-8 md:py-6 border-b border-gray-100/50 dark:border-white/5 flex items-center justify-between bg-white/40 dark:bg-white/[0.02]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-5",children:[(0,r.jsx)("div",{className:"w-14 h-14 rounded-[1.2rem] bg-gradient-to-br from-orange-50 to-orange-100/50 dark:from-orange-500/10 dark:to-orange-500/5 flex items-center justify-center border border-orange-200/50 dark:border-orange-500/20 shadow-sm",children:(0,r.jsx)(o.A,{className:"w-7 h-7 text-orange-500 dark:text-orange-400"})}),(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-display tracking-tight flex items-center gap-3",children:["Availability",(0,r.jsx)("span",{className:"px-2.5 py-0.5 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 text-[10px] font-bold uppercase tracking-widest border border-zinc-200 dark:border-zinc-700/50",children:"7-DAY VIEW"})]}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 text-sm font-medium",children:"View your availability and AI execution windows for the next 7 days."})]})]}),(0,r.jsx)(c.$,{variant:"ghost",size:"icon",onClick:a,className:"w-10 h-10 rounded-xl hover:bg-gray-100 dark:hover:bg-white/10 hover:rotate-90 transition-all duration-300",children:(0,r.jsx)(l.A,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})})]}),(0,r.jsxs)("div",{className:"px-6 py-3 md:px-8 md:py-4 flex-1 bg-gray-50/50 dark:bg-black/20 overflow-hidden relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-[0.03] pointer-events-none mix-blend-overlay"}),(0,r.jsx)(h,{busySlots:n,executionWindows:(null==d?void 0:d.execution_windows)||[],onSaveWindow:x})]})]})})]})})}},20016:(e,t,a)=>{"use strict";a.d(t,{X:()=>X});var r=a(20698),n=a(95155),s=a(12115),i=a(34420),o=a(10913),l=a(28633),c=a(71226),d=a(40767),x=a(30098),m=a(92823),g=a(33473),u=a(66889),h=a(32423),p=a(99053),b=a(14505),f=a(98867);function v(e,t){let[a,r]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let a=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}var w=a(41498),y=a(35007),N=a(14085),j=a(9955),k=a(10371),z=a(5900),C=a(29602);let _=s.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsxs)(z.bL,{ref:t,className:(0,C.cn)("relative flex w-full touch-none select-none items-center group",a),...r,children:[(0,n.jsx)(z.CC,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-zinc-100 dark:bg-zinc-800 transition-colors",children:(0,n.jsx)(z.Q6,{className:"absolute h-full bg-gradient-to-r from-orange-500 to-orange-500 transition-all"})}),(0,n.jsx)(z.zi,{className:"block h-5 w-5 rounded-full border-2 border-white dark:border-zinc-950 bg-orange-600 dark:bg-orange-400 shadow-[0_2px_10px_rgba(0,0,0,0.2)] ring-offset-background transition-all hover:scale-110 active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 cursor-grab active:cursor-grabbing"})]})});_.displayName=z.bL.displayName;var A=a(30814),I=a(25739);a(89664);let S={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}},exit:{opacity:0,transition:{staggerChildren:.05,staggerDirection:-1}}},T={hidden:{opacity:0,y:15,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:200,damping:20}},exit:{opacity:0,y:-10,transition:{duration:.2}}},E={initial:{scale:1,boxShadow:"0px 0px 0px rgba(99, 102, 241, 0)"},focus:{scale:1.01,boxShadow:"0px 4px 20px rgba(99, 102, 241, 0.15)",borderColor:"rgba(99, 102, 241, 0.4)",transition:{type:"spring",stiffness:300,damping:30}}};var P=a(81722),R=a(12947),D=a(14640),O=a(48048),M=a(96117),W=a(68158),L=a(30113),U=a(3765),F=a(9246),q=a(63898),G=a(63348),B=a(63230),Y=a(67072);function V(){let e=(0,r._)(["\n        radial-gradient(\n            650px circle at ","px ","px,\n            rgba(99, 102, 241, 0.08),\n            transparent 80%\n        )\n    "]);return V=function(){return e},e}a(2818);let $=()=>{let e=new Date,t=e.getMinutes(),a=(0,M.z)(e,15-t%15),r=(0,W.GP)(a,"HH:mm"),n=(0,W.GP)((0,M.z)(a,60),"HH:mm");return{day:(0,W.GP)(e,"yyyy-MM-dd"),start:r,end:n}},Q="Faasos is a delivery-first food brand known primarily for wraps and rolls, positioned as a quick and filling meal option. Customers typically order for convenience, familiar flavours, and a product format that travels well for delivery.",H="The interview will be conducted by a Customer Experience team member from Faasos, focused on understanding the customer’s real ordering experience, satisfaction drivers, and improvement areas.",Z="To understand why the customer orders Faasos repeatedly, what they like most (items, taste, convenience), and what 1–2 improvements would increase order frequency (quality consistency, portioning, delivery, packaging, pricing).",J={IDENTITY:{name:"Sarah",seed:"Sarah",role:"Brand Architect",message:"I'm Sarah. Let's start by defining the essence of your campaign. Be clear, be bold.",tips:["Highlight your unique value proposition.","Keep it punchy for better AI conversion."]},STRATEGY:{name:"Alex",seed:"Alex",role:"Strategy Lead",message:"Hey! Alex here. Time to map out who we're talking to and how we'll delight them.",tips:["Target cohorts with high intent.","Choose incentives that drive immediate action."]},EXECUTION:{name:"Maya",seed:"Maya",role:"Operations Manager",message:"Final stretch! Maya reporting. When is the perfect time to reach your audience?",tips:["Sync your calendar for zero overlaps.","Avoid early morning slots for better reach."]}};function X(e){let{campaignId:t,initialLeads:a,initialName:r,onComplete:z,onBack:M,onEditLeads:W,onError:X,className:K,initialStep:ee,isMagicUI:et,onCampaignIdGenerated:ea}=e,[er,en,es]=function(e,t){let[a,r]=(0,s.useState)(()=>{try{let a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(e){return console.error(e),t}});return[a,t=>{try{let n=t instanceof Function?t(a):t;r(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(e){console.error(e)}},()=>{try{window.localStorage.removeItem(e),r(t)}catch(e){console.error(e)}}]}(s.useMemo(()=>t?"campaign_composer_".concat(t):"campaign_composer_draft",[]),{step:"IDENTITY",campaignName:r||"",brandContext:"",teamMemberContext:"",customerContext:"",cohorts:[],selectedCohorts:[],cohortConfig:{},cohortCounts:{},preliminaryQuestions:[],questionBank:[],incentiveBank:["₹500 Amazon Voucher","₹200 UPI","Swiggy Coupon","Zomato Gold"],cohortQuestions:{},cohortIncentives:{},activeCohort:null,incentive:"",callDuration:10,executionWindows:[$()],leadsUpdatedAt:null,draftCreatedAt:Date.now()});(0,s.useEffect)(()=>{!t&&er.draftCreatedAt&&Date.now()-er.draftCreatedAt>864e5&&(es(),M&&M())},[t,er.draftCreatedAt]),(0,s.useEffect)(()=>{ee&&er.step!==ee&&en(e=>({...e,step:ee}))},[ee]);let{step:ei="IDENTITY",campaignName:eo="",brandContext:el="",teamMemberContext:ec="",customerContext:ed="",cohorts:ex=[],selectedCohorts:em=[],cohortConfig:eg={},cohortCounts:eu={},preliminaryQuestions:eh=[],questionBank:ep=[],incentiveBank:eb=[],cohortQuestions:ef={},cohortIncentives:ev={},activeCohort:ew=null,incentive:ey="",callDuration:eN=10,executionWindows:ej=[],leadsUpdatedAt:ek=null}=er||{},ez=s.useMemo(()=>[...ex].sort((e,t)=>{let a=em.includes(e);return a===em.includes(t)?0:a?-1:1}),[ex,em]),eC=s.useMemo(()=>(0,O.X)(ex),[ex]),e_=ew||ez[0]||"Default",eA=ef[e_]||eh||[];ev[e_];let eI=(0,i.d)(0),eS=(0,i.d)(0),eT=(0,o.E)(V(),eI,eS),[eE,eP]=(0,s.useState)(!1),[eR,eD]=(0,s.useState)(!1),[eO,eM]=(0,s.useState)({connected:!1}),[eW,eL]=(0,s.useState)(!1),[eU,eF]=(0,s.useState)(!1),[eq,eG]=(0,s.useState)(!1),[eB,eY]=(0,s.useState)(!1),[eV,e$]=(0,s.useState)(null),eQ=s.useRef(!1),eH=s.useRef(!1),{data:eZ,isConnected:eJ}=(0,w.T)(t||null);(0,s.useEffect)(()=>{var e;if(null==eZ?void 0:null===(e=eZ.campaign_metadata)||void 0===e?void 0:e.leads_updated_at){let e=eZ.campaign_metadata.leads_updated_at;e&&e!==ek&&(en(t=>({...t,leadsUpdatedAt:e})),A.oR.success("Leads refreshed from background update."))}},[eZ,ek,en]);let eX=async()=>{try{let e=await I.F.get("/intelligence/calendar/status");eM(e)}catch(e){console.error("Failed to check calendar status:",e)}};(0,s.useEffect)(()=>{(async()=>{if(!eQ.current){if(!t||"null"===t||"undefined"===t){a&&a.length>0&&(en(e=>{let t=new Set,r={};a.forEach(e=>{let a=e.cohort||"Default";t.add(a),r[a]=(r[a]||0)+1});let n=Array.from(t);return{...e,cohorts:n,cohortCounts:r,selectedCohorts:e.selectedCohorts.length>0?e.selectedCohorts:[]}}),eQ.current=!0);return}try{eP(!0);let[e,a,n]=await Promise.all([I.F.get("/intelligence/campaigns/".concat(t,"/context-suggestions")),I.F.get("/intelligence/campaigns/".concat(t,"/cohorts")),I.F.get("/intelligence/campaigns/".concat(t))]);en(t=>{var s,i;let o={...t},l=!!n.brand_context||!!n.customer_context;o.campaignName&&""!==o.campaignName||(o.campaignName=r||n.name||""),(!o.brandContext||""===o.brandContext||l)&&(o.brandContext=n.brand_context||(o.brandContext?o.brandContext:e.brand_context)||""),(!o.teamMemberContext||""===o.teamMemberContext||l)&&(o.teamMemberContext=n.team_member_context||(o.teamMemberContext?o.teamMemberContext:e.team_member_context)||""),(!o.customerContext||""===o.customerContext||l)&&(o.customerContext=n.customer_context||o.customerContext||""),(!o.preliminaryQuestions||0===o.preliminaryQuestions.length||l)&&(o.preliminaryQuestions=n.preliminary_questions&&n.preliminary_questions.length>0?n.preliminary_questions:o.preliminaryQuestions),(!o.questionBank||0===o.questionBank.length||l)&&(o.questionBank=n.question_bank&&n.question_bank.length>0?n.question_bank:o.questionBank);let c=["₹500 Amazon Voucher","₹200 UPI","Swiggy Coupon","Zomato Gold"],d=JSON.stringify(o.incentiveBank)===JSON.stringify(c);(!o.incentiveBank||0===o.incentiveBank.length||d||l)&&(n.incentive_bank&&n.incentive_bank.length>0?o.incentiveBank=n.incentive_bank:o.incentiveBank&&0!==o.incentiveBank.length||(o.incentiveBank=c)),(!o.incentive||""===o.incentive||l)&&(o.incentive=n.incentive||o.incentive||""),n.call_duration&&(!o.callDuration||10===o.callDuration||l)&&(o.callDuration=Math.floor(n.call_duration/60));let x=(null===(s=o.executionWindows)||void 0===s?void 0:s.length)===1&&"09:00"===o.executionWindows[0].start&&"11:00"===o.executionWindows[0].end;return(!o.executionWindows||0===o.executionWindows.length||x||l||n.execution_windows&&n.execution_windows.length>0)&&(n.execution_windows&&n.execution_windows.length>0?o.executionWindows=n.execution_windows:x&&n.execution_windows&&n.execution_windows.length>0&&(o.executionWindows=n.execution_windows)),(0===o.cohorts.length||(null===(i=a.cohorts)||void 0===i?void 0:i.length)>0&&JSON.stringify(o.cohorts)!==JSON.stringify(a.cohorts))&&(o.cohorts=a.cohorts||[]),(!o.selectedCohorts||0===o.selectedCohorts.length||l)&&(o.selectedCohorts=n.selected_cohorts||a.selected_cohorts||o.selectedCohorts||[]),o.cohortCounts=a.cohort_counts||{},(!o.cohortConfig||0===Object.keys(o.cohortConfig).length||l)&&n.cohort_config&&(o.cohortConfig=n.cohort_config),(!o.cohortQuestions||0===Object.keys(o.cohortQuestions).length||l)&&n.cohort_questions&&(o.cohortQuestions=n.cohort_questions),(!o.cohortIncentives||0===Object.keys(o.cohortIncentives).length||l)&&n.cohort_incentives&&(o.cohortIncentives=n.cohort_incentives),n.meta_data&&n.meta_data.leads_updated_at&&(o.leadsUpdatedAt=n.meta_data.leads_updated_at),o}),eQ.current=!0,eD(!1)}catch(e){console.error("Failed to fetch campaign init data:",e),X&&X(e),404===e.status?(eD(!0),A.oR.error("Campaign not found")):A.oR.error("Failed to load campaign data")}finally{eP(!1),setTimeout(()=>{eH.current=!0},1e3)}}})(),eX()},[t,a]);let[eK,e0]=(0,s.useState)(!1),[e1,e5]=(0,s.useState)(null),e2=v(eo,500),e4=v(el,500),e3=v(ec,500),e9=v(ed,500),e6=v(eg,500),e8=v(ef,500),e7=v(ev,500),te=v(ey,500),tt=v(eh,500),ta=v(em,500),tr=v(ep,500),tn=v(eb,500),ts=v(ej,500),ti=v(eN,500),to=s.useRef(0),tl=JSON.stringify({name:e2,brand_context:e4,team_member_context:e3,customer_context:e9,cohort_config:e6,selected_cohorts:ta,cohort_questions:e8,cohort_incentives:e7,incentive:te,preliminary_questions:tt,question_bank:tr,incentive_bank:tn,execution_windows:ts,call_duration:ti});(0,s.useEffect)(()=>{!eE&&!eR&&eQ.current&&eH.current&&t&&"null"!==t&&"undefined"!==t&&(async()=>{e0(!0);try{await I.F.patch("/intelligence/campaigns/".concat(t,"/settings"),{name:e2,brand_context:e4,team_member_context:e3,customer_context:e9,cohort_config:e6,selected_cohorts:ta,cohort_questions:e8,cohort_incentives:e7,incentive:te,preliminary_questions:tt,question_bank:tr,incentive_bank:tn,execution_windows:ts,call_duration:60*ti}),e5(new Date)}catch(e){console.error("Auto-save failed",e),404===e.status&&Date.now()-to.current>1e4&&(A.oR.error("Auto-save failed: Campaign not found. It may have been deleted."),to.current=Date.now())}finally{e0(!1)}})()},[tl,t,eE,eR]);let tc=async()=>{if(!eE&&!td.current){if("IDENTITY"===ei){if(!ed){A.oR.error("Customer context is mandatory");return}let e=(null==el?void 0:el.trim())===Q.trim(),t=(null==ec?void 0:ec.trim())===H.trim(),a=(null==ed?void 0:ed.trim())===Z.trim();if(e||t||a){A.oR.error("Please customize the sample context for your brand. It cannot be exactly the same as the Faasos example.");return}}if("STRATEGY"===ei){let e=em.filter(e=>(eg[e]||0)>(eu[e]||0));if(e.length>0){A.oR.error("Please adjust target volumes. Some exceed the total customer count in: ".concat(e.join(", ")));return}if(0===em.length){A.oR.error("Please select at least one cohort segment");return}}if("EXECUTION"===ei){await tx();return}en(e=>({...e,step:"IDENTITY"===ei?"STRATEGY":"EXECUTION"}))}},td=s.useRef(!1),tx=async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(td.current)return null;try{td.current=!0,eP(!0);let n=(ej||[]).map(e=>({day:e.day,start:e.start,end:e.end})).filter(e=>e.day&&e.start&&e.end);if(!t||"null"===t||"undefined"===t){let t=await I.F.post("/intelligence/campaigns/create-full",{campaign_name:eo,leads:a||[],force_create:r,settings:{name:eo,brand_context:el,customer_context:ed,team_member_context:ec,preliminary_questions:eh,question_bank:ep,incentive_bank:eb,cohort_questions:ef,cohort_incentives:ev,incentive:ey,cohort_config:eg,call_duration:60*eN,execution_windows:n,selected_cohorts:em}});if("success"===t.status){let a=t.campaign_id;if(e?(A.oR.success("Alex: Mission initiated! Your campaign is now live."),es()):(A.oR.success("Alex: Draft saved and campaign created."),ea&&ea(a)),(null==eO?void 0:eO.connected)&&a)try{await I.F.post("/intelligence/campaigns/".concat(a,"/calendar-sync")),e||A.oR.success("Maya: Great news! We've successfully blocked the time on your calendar.")}catch(e){console.error("Calendar sync warning",e)}return e&&z(a),a}}if(await I.F.patch("/intelligence/campaigns/".concat(t,"/settings"),{name:eo,brand_context:el,customer_context:ed,team_member_context:ec,preliminary_questions:eh,question_bank:ep,incentive_bank:eb,cohort_questions:ef,cohort_incentives:ev,incentive:ey,cohort_config:eg,call_duration:60*eN,execution_windows:n}),!e)return t;if(null==eO?void 0:eO.connected)try{await I.F.post("/intelligence/campaigns/".concat(t,"/calendar-sync")),A.oR.success("Maya: Great news! We've successfully blocked the time on your calendar.")}catch(e){console.error("Auto-sync to calendar failed:",e),A.oR.error("Maya: We hit a small snag syncing to your calendar, but the campaign is saved.")}A.oR.success("Alex: Mission initiated! Your campaign is now live and the team is ready."),es(),z(t||void 0)}catch(e){var n;if(console.error("Failed to save campaign:",e),(null==e?void 0:e.status)===409&&(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.code)==="DUPLICATE_UPLOAD")return e$({id:e.data.campaign_id,name:e.data.campaign_name}),eY(!0),null;A.oR.error("Failed to save campaign settings"),X&&X(e)}finally{eP(!1),td.current=!1}return null},tm=e=>{let t=ef[e]||eh;en(e=>{let a={...e.cohortQuestions};return(e.selectedCohorts||[]).forEach(e=>{a[e]=[...t]}),{...e,preliminaryQuestions:[...t],cohortQuestions:a}}),A.oR.success("Rohan: Applied questions from ".concat(e," to all selected cohorts"))},tg=e=>{var t;let a=null!==(t=ev[e])&&void 0!==t?t:ey;en(e=>{let t={...e.cohortIncentives};return(e.selectedCohorts||[]).forEach(e=>{t[e]=a}),{...e,incentive:a,cohortIncentives:t}}),A.oR.success("Rohan: Applied incentive from ".concat(e," to all selected cohorts"))},tu=["IDENTITY","STRATEGY","EXECUTION"];tu.indexOf(ei);let th=s.useMemo(()=>{let e=new Date,t=(ej||[]).map((e,t)=>({...e,_originalIndex:t})),a=[],r=[],n=[];return t.forEach(t=>{try{let s=(0,L.H)("".concat(t.day,"T").concat(t.start)),i=(0,L.H)("".concat(t.day,"T").concat(t.end));if(e>i)n.push(t);else if(e>=s&&e<=i){let r=Math.max(0,Math.round((i.getTime()-e.getTime())/6e4));a.push({...t,_durationLabel:"".concat(r," MINS LEFT"),_isInvalid:r<30})}else r.push(t)}catch(e){r.push(t)}}),r.sort((e,t)=>(0,L.H)("".concat(e.day,"T").concat(e.start)).getTime()-(0,L.H)("".concat(t.day,"T").concat(t.start)).getTime()),n.sort((e,t)=>(0,L.H)("".concat(t.day,"T").concat(t.start)).getTime()-(0,L.H)("".concat(e.day,"T").concat(e.start)).getTime()),{current:a,upcoming:r,past:n}},[ej]);if(eR)return(0,n.jsxs)(y.Zp,{className:(0,C.cn)("overflow-hidden border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 rounded-[2rem] p-12 flex flex-col items-center justify-center text-center space-y-6 shadow-2xl",K),children:[(0,n.jsx)("div",{className:"w-20 h-20 rounded-3xl bg-red-50 dark:bg-red-950/30 flex items-center justify-center border border-red-100 dark:border-red-900/30",children:(0,n.jsx)(d.A,{className:"w-10 h-10 text-red-500"})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold dark:text-white",children:"Campaign Not Found"}),(0,n.jsx)("p",{className:"text-zinc-500 text-sm max-w-xs",children:"The campaign you're looking for doesn't exist or was recently deleted."})]}),(0,n.jsx)(N.$,{onClick:M,className:"rounded-xl bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 hover:opacity-90 px-8",children:"Back to Dashboard"})]});let tp=J[ei];return et?(0,n.jsxs)("div",{className:(0,C.cn)("w-full h-full min-h-[600px] flex flex-col bg-white dark:bg-zinc-950 border-zinc-100 dark:border-zinc-800/60 shadow-[0_32px_64px_-12px_rgba(0,0,0,0.1)] rounded-[3rem] relative overflow-hidden",K),children:[(0,n.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,n.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-indigo-500/10 blur-[100px] rounded-full"}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-orange-500/10 blur-[100px] rounded-full"})]}),(0,n.jsxs)("div",{className:"p-8 flex items-center justify-between border-b border-white/10 relative z-10",children:[(0,n.jsxs)("div",{className:"flex items-center gap-6",children:[(0,n.jsx)("div",{className:"flex -space-x-3",children:Object.entries(J).map(e=>{let[t,a]=e;return(0,n.jsx)(q.eu,{className:(0,C.cn)("w-10 h-10 border-2 border-white dark:border-zinc-900 transition-all duration-500",ei===t?"ring-4 ring-indigo-500/20 scale-110 z-20":"opacity-40 grayscale z-10"),children:(0,n.jsx)(q.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=".concat(a.seed,"&backgroundColor=e0e7ff")})},t)})}),(0,n.jsx)("div",{children:(0,n.jsxs)("h2",{className:"text-xl font-black text-zinc-900 dark:text-white tracking-tight",children:[tp.name,(0,n.jsxs)("span",{className:"text-zinc-400 font-medium ml-2",children:["— ",tp.role]})]})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[W&&(0,n.jsxs)(N.$,{onClick:W,className:"bg-gradient-to-r from-orange-500 to-indigo-600 hover:from-orange-600 hover:to-indigo-700 text-white rounded-2xl h-12 px-6 font-bold shadow-lg shadow-orange-500/20 transition-all hover:scale-105 active:scale-95 flex items-center gap-3",children:[(0,n.jsx)(m.A,{className:"w-5 h-5"}),(0,n.jsxs)("div",{className:"flex flex-col items-start",children:[(0,n.jsx)("span",{className:"text-sm leading-none",children:"Manage Leads"}),ek&&(0,n.jsxs)("span",{className:"text-[9px] font-medium opacity-80 leading-none mt-0.5",title:(0,C.Pf)(ek),children:["Updated ",(0,C.fw)(ek)]})]})]}),(0,n.jsx)("div",{className:"flex items-center gap-2 bg-zinc-900/5 dark:bg-white/5 p-1 rounded-full border border-white/10",children:tu.map((e,t)=>(0,n.jsx)("div",{className:(0,C.cn)("h-2 transition-all duration-500 rounded-full",ei===e?"w-8 bg-indigo-500":"w-2 bg-zinc-300 dark:bg-zinc-700")},e))})]})]}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto px-8 py-6 scrollbar-hide relative z-10",children:(0,n.jsx)(l.N,{mode:"wait",children:(0,n.jsxs)(c.P.div,{initial:{opacity:0,scale:.98,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:1.02,y:-10},transition:{duration:.4,ease:"easeOut"},className:"h-full flex flex-col",children:[(0,n.jsx)("div",{className:"mb-6 flex items-start gap-4",children:(0,n.jsxs)("div",{className:"p-4 bg-white/70 dark:bg-white/10 rounded-2xl rounded-tl-none shadow-sm border border-indigo-500/10 max-w-2xl relative",children:[(0,n.jsxs)("p",{className:"text-sm font-medium text-zinc-800 dark:text-zinc-200 italic",children:['"',tp.message,'"']}),(0,n.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:tp.tips.map((e,t)=>(0,n.jsxs)("span",{className:"text-[10px] bg-indigo-500/10 text-indigo-600 dark:text-indigo-400 px-2 py-0.5 rounded-full font-bold uppercase tracking-wider flex items-center gap-1",children:[(0,n.jsx)(x.A,{className:"w-3 h-3"})," ",e]},t))})]})}),"IDENTITY"===ei&&(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"group space-y-2",children:[(0,n.jsx)("label",{className:"text-[10px] font-black text-zinc-600 dark:text-zinc-400 uppercase tracking-widest px-1",children:"Campaign Title"}),(0,n.jsx)(j.p,{value:eo,onChange:e=>en(t=>({...t,campaignName:e.target.value})),placeholder:"e.g., Q1 Retention Strategy",className:"h-12 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 rounded-2xl focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500/20 text-lg font-black shadow-sm"})]}),(0,n.jsxs)("div",{className:"group space-y-2",children:[(0,n.jsx)("label",{className:"text-[10px] font-black text-zinc-600 dark:text-zinc-400 uppercase tracking-widest px-1",children:"Brand Context"}),(0,n.jsx)(k.T,{value:el,onChange:e=>en(t=>({...t,brandContext:e.target.value})),placeholder:"Describe your brand...",className:"h-32 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 rounded-2xl focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500/20 resize-none text-sm shadow-sm"})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"group space-y-2",children:[(0,n.jsx)("label",{className:"text-[10px] font-black text-zinc-600 dark:text-zinc-400 uppercase tracking-widest px-1",children:"Team Context"}),(0,n.jsx)(k.T,{value:ec,onChange:e=>en(t=>({...t,teamMemberContext:e.target.value})),placeholder:"Who is reaching out?",className:"h-32 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 rounded-2xl focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500/20 resize-none text-sm shadow-sm"})]}),(0,n.jsxs)("div",{className:"group space-y-2",children:[(0,n.jsx)("label",{className:"text-[10px] font-black text-zinc-600 dark:text-zinc-400 uppercase tracking-widest px-1",children:"Campaign Objective"}),(0,n.jsx)(k.T,{value:ed,onChange:e=>en(t=>({...t,customerContext:e.target.value})),placeholder:"What are we trying to achieve?",className:"h-32 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 rounded-2xl focus:ring-2 focus:ring-orange-500/10 focus:border-orange-500/20 resize-none text-sm border-2 border-orange-500/10 shadow-sm"})]})]})]}),"STRATEGY"===ei&&(0,n.jsxs)("div",{className:"flex flex-col gap-6 flex-1 overflow-hidden",children:[(0,n.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-4 scrollbar-hide",children:ex.map(e=>{let t=em.includes(e),a=eC[e]||1;return(0,n.jsxs)("button",{onClick:()=>{let a=t?em.filter(t=>t!==e):[...em,e];en(e=>({...e,selectedCohorts:a}))},className:(0,C.cn)("flex flex-col items-center gap-2 p-4 rounded-3xl transition-all duration-300 min-w-[100px]",t?"bg-indigo-500 text-white shadow-xl scale-105":"bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 hover:bg-zinc-100 dark:hover:bg-zinc-800"),children:[(0,n.jsx)(q.eu,{className:"w-12 h-12 border-2 border-white/20",children:(0,n.jsx)(q.BK,{src:"https://api.dicebear.com/7.x/notionists/svg?seed=cohort-".concat(a,"&backgroundColor=e0e7ff")})}),(0,n.jsx)("span",{className:"text-[10px] font-black uppercase tracking-tight truncate max-w-[80px]",children:e})]},e)})}),em.length>0?(0,n.jsxs)("div",{className:"flex-1 bg-zinc-50/50 dark:bg-zinc-900/50 rounded-[2.5rem] border border-zinc-200 dark:border-zinc-800 p-8 flex flex-col gap-6 overflow-y-auto scrollbar-hide",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("h3",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight",children:["Strategy for ",e_]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 bg-indigo-500/10 px-4 py-2 rounded-full border border-indigo-500/20",children:[(0,n.jsx)(m.A,{className:"w-4 h-4 text-indigo-500"}),(0,n.jsxs)("span",{className:"text-xs font-bold text-indigo-700 dark:text-indigo-400",children:[eu[e_]," Leads Available"]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("label",{className:"text-[10px] font-black text-zinc-500 dark:text-zinc-400 uppercase tracking-widest flex items-center gap-2",children:[(0,n.jsx)(G.A,{className:"w-3 h-3"})," Preliminary Questions"]}),(0,n.jsxs)("div",{className:"space-y-2",children:[eA.map((e,t)=>(0,n.jsx)("div",{className:"bg-white dark:bg-zinc-950 p-3 rounded-xl border border-zinc-200 dark:border-zinc-800 text-xs font-medium",children:e},t)),(0,n.jsx)(N.$,{variant:"ghost",className:"w-full rounded-xl border-dashed border-2 border-zinc-300 dark:border-zinc-700 text-zinc-500 dark:text-zinc-400 text-[10px] font-black uppercase hover:bg-indigo-50 dark:hover:bg-indigo-900/10",children:"Customize Questions"})]})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-[10px] font-black text-zinc-500 dark:text-zinc-400 uppercase tracking-widest mb-4 block",children:"Target Engagement"}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(_,{value:[eg[e_]||0],max:eu[e_],step:1,onValueChange:e=>{en(t=>({...t,cohortConfig:{...t.cohortConfig,[e_]:e[0]}}))},className:"flex-1"}),(0,n.jsx)("span",{className:"text-2xl font-black text-indigo-500",children:eg[e_]||0})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-[10px] font-black text-zinc-500 dark:text-zinc-400 uppercase tracking-widest mb-4 block",children:"Cohort Incentive"}),(0,n.jsx)(j.p,{value:ev[e_]||"",onChange:e=>{en(t=>({...t,cohortIncentives:{...t.cohortIncentives,[e_]:e.target.value}}))},placeholder:"e.g., $10 Amazon Gift Card",className:"h-12 bg-white/50 dark:bg-black/20 border-white/20 rounded-2xl font-bold"})]})]})]})]}):(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-400 border-2 border-dashed border-white/10 rounded-[3rem]",children:[(0,n.jsx)(B.A,{className:"w-12 h-12 mb-4 opacity-20"}),(0,n.jsx)("p",{className:"font-bold uppercase tracking-widest text-[10px]",children:"Select a cohort to begin mapping"})]})]}),"EXECUTION"===ei&&(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 flex-1",children:[(0,n.jsx)("div",{className:"md:col-span-2 space-y-6 flex flex-col",children:(0,n.jsxs)("div",{className:"bg-white/40 dark:bg-white/5 rounded-[2.5rem] border border-white/20 p-8 flex-1 flex flex-col overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,n.jsx)("h3",{className:"text-xl font-black text-zinc-900 dark:text-white tracking-tight",children:"Execution Windows"}),(0,n.jsxs)(N.$,{onClick:()=>en(e=>({...e,executionWindows:[...e.executionWindows||[],$()]})),className:"rounded-2xl bg-indigo-500 text-white hover:bg-indigo-600 font-bold px-6",children:[(0,n.jsx)(g.A,{className:"w-4 h-4 mr-2"})," Add Slot"]})]}),(0,n.jsxs)("div",{className:"space-y-4 flex-1 overflow-y-auto pr-2 scrollbar-hide",children:[th.current.length>0&&(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("h4",{className:"text-[10px] font-black text-indigo-600 dark:text-indigo-400 uppercase tracking-[0.2em] mb-4 flex items-center gap-2.5",children:[(0,n.jsx)("span",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),"Current Window"]}),(0,n.jsx)("div",{className:"space-y-3",children:th.current.map(e=>(0,n.jsx)(R.x,{...e,onChange:t=>{en(a=>{let r=[...a.executionWindows];return r[e._originalIndex]={...r[e._originalIndex],...t},{...a,executionWindows:r}})},onDelete:()=>{en(t=>({...t,executionWindows:t.executionWindows.filter((t,a)=>a!==e._originalIndex)}))},customDurationLabel:e._durationLabel,isInvalid:e._isInvalid,className:"bg-white/50 dark:bg-white/5 border-white/10"},"".concat(e.day,"-").concat(e.start,"-").concat(e._originalIndex)))})]}),th.upcoming.length>0&&(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h4",{className:"text-[10px] font-black text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em] mb-4",children:"Upcoming Windows"}),(0,n.jsx)("div",{className:"space-y-3",children:(0,n.jsx)(l.N,{children:th.upcoming.map(e=>(0,n.jsx)(R.x,{...e,onChange:t=>{en(a=>{let r=[...a.executionWindows];return r[e._originalIndex]={...r[e._originalIndex],...t},{...a,executionWindows:r}})},onDelete:()=>{en(t=>({...t,executionWindows:t.executionWindows.filter((t,a)=>a!==e._originalIndex)}))},className:"bg-white/50 dark:bg-white/5 border-white/10"},"".concat(e.day,"-").concat(e.start,"-").concat(e._originalIndex)))})})]}),th.past.length>0&&(0,n.jsxs)("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-800/50",children:[(0,n.jsx)("h4",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-[0.2em] mb-4",children:"Past Windows"}),(0,n.jsx)("div",{className:"opacity-40 grayscale hover:opacity-100 hover:grayscale-0 transition-all duration-300 space-y-3",children:(0,n.jsx)(l.N,{children:th.past.map(e=>(0,n.jsx)(R.x,{...e,onChange:t=>{en(a=>{let r=[...a.executionWindows];return r[e._originalIndex]={...r[e._originalIndex],...t},{...a,executionWindows:r}})},onDelete:()=>{en(t=>({...t,executionWindows:t.executionWindows.filter((t,a)=>a!==e._originalIndex)}))},className:"bg-white/50 dark:bg-white/5 border-white/10"},"".concat(e.day,"-").concat(e.start,"-").concat(e._originalIndex)))})})]}),0===ej.length&&(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-zinc-400 italic text-sm py-10",children:[(0,n.jsx)(u.A,{className:"w-8 h-8 mb-4 opacity-20"}),"No windows defined yet."]})]})]})}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"bg-indigo-500/10 rounded-[2.5rem] border border-indigo-500/20 p-8",children:[(0,n.jsx)("label",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest mb-6 block",children:"Interview Depth"}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,n.jsxs)("div",{className:"text-4xl font-black text-indigo-600 dark:text-indigo-400",children:[eN,"m"]}),(0,n.jsx)(_,{value:[eN],min:3,max:30,onValueChange:e=>en(t=>({...t,callDuration:e[0]}))}),(0,n.jsx)("p",{className:"text-[10px] text-center text-indigo-500 font-bold uppercase leading-relaxed tracking-wider",children:"Targeting high-quality insights"})]})]}),eO.connected?(0,n.jsxs)("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-[2.5rem] p-8 flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),(0,n.jsx)("span",{className:"text-xs font-black text-emerald-600 uppercase tracking-widest",children:"Live Sync Active"})]}),(0,n.jsx)("p",{className:"text-[10px] text-emerald-700/60 font-medium",children:"Your windows are synchronized."})]}):(0,n.jsxs)("div",{className:"bg-zinc-900 dark:bg-zinc-950 text-white rounded-[2.5rem] p-8 flex flex-col gap-4",children:[(0,n.jsx)(h.A,{className:"w-8 h-8 text-indigo-400"}),(0,n.jsx)("h4",{className:"font-black text-lg leading-tight",children:"Calendar Sync"}),(0,n.jsx)("p",{className:"text-xs text-zinc-400 leading-relaxed",children:"Prevent scheduling conflicts automatically."}),(0,n.jsx)(N.$,{onClick:()=>eF(!0),className:"w-full rounded-2xl bg-white text-zinc-950 font-black hover:bg-zinc-200",children:"Connect"})]})]})]})]},ei)})}),(0,n.jsxs)("div",{className:"pt-8 pb-12 px-8 border-t border-white/10 flex items-center justify-between relative z-20",children:[(0,n.jsx)(N.$,{variant:"ghost",onClick:()=>{"IDENTITY"===ei&&(null==M||M()),"STRATEGY"===ei&&en(e=>({...e,step:"IDENTITY"})),"EXECUTION"===ei&&en(e=>({...e,step:"STRATEGY"}))},className:"rounded-full h-12 px-8 font-black text-xs uppercase tracking-widest text-zinc-500",children:"IDENTITY"===ei?"Back":"Previous"}),(0,n.jsxs)("div",{className:"flex items-center gap-6",children:[eK?(0,n.jsxs)("div",{className:"flex items-center gap-2 text-[10px] font-black uppercase text-indigo-500 animate-pulse tracking-widest",children:[(0,n.jsx)(Y.A,{className:"w-3 h-3"})," Syncing Ideas..."]}):e1&&(0,n.jsx)(F.Bc,{children:(0,n.jsxs)(F.m_,{children:[(0,n.jsx)(F.k$,{asChild:!0,children:(0,n.jsxs)("div",{className:"text-[10px] font-black uppercase text-zinc-400 tracking-widest cursor-help",children:["Last Sync: ",e1.toLocaleTimeString([],{hour12:!0,hour:"2-digit",minute:"2-digit"})]})}),(0,n.jsx)(F.ZI,{className:"z-[9999]",side:"top",children:(0,n.jsx)("p",{children:e1.toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit"})})})]})}),(0,n.jsxs)(N.$,{onClick:tc,className:"bg-zinc-950 dark:bg-white text-white dark:text-black rounded-full h-14 px-12 font-black text-sm uppercase tracking-[0.2em] shadow-2xl hover:scale-105 active:scale-95 transition-all group",children:["EXECUTION"===ei?"Launch Magic":"Continue",(0,n.jsx)(p.A,{className:"w-4 h-4 ml-3 group-hover:translate-x-1 transition-transform"})]})]})]})]}):(0,n.jsxs)(y.Zp,{onMouseMove:function(e){let{currentTarget:t,clientX:a,clientY:r}=e,{left:n,top:s}=t.getBoundingClientRect();eI.set(a-n),eS.set(r-s)},className:(0,C.cn)("overflow-hidden border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 rounded-[2rem] relative group min-h-[500px] flex flex-col transition-all duration-500 shadow-xl",K),children:[(0,n.jsx)(c.P.div,{className:"pointer-events-none absolute -inset-px rounded-[2.5rem] opacity-0 transition duration-300 group-hover:opacity-100 z-0",style:{background:eT}}),(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/[0.03] via-transparent to-emerald-500/[0.01] pointer-events-none"}),(0,n.jsx)("div",{className:"absolute top-6 right-6 z-20",children:(0,n.jsx)(N.$,{variant:"ghost",size:"icon",onClick:()=>{"IDENTITY"===ei?eG(!0):null==M||M()},className:"rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors w-10 h-10",children:(0,n.jsx)(d.A,{className:"w-5 h-5 opacity-70"})})}),(0,n.jsxs)(y.Wu,{className:"p-4 pb-0 flex flex-col h-full relative z-10 flex-1",children:[(0,n.jsx)(l.N,{children:eE&&(0,n.jsx)(c.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 flex items-center justify-center bg-white/60 dark:bg-zinc-950/60 backdrop-blur-md rounded-[2rem]",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-indigo-500/20 blur-xl rounded-full animate-pulse"}),(0,n.jsx)("div",{className:"relative p-4 rounded-2xl bg-indigo-50 dark:bg-indigo-500/10 text-indigo-500",children:(0,n.jsx)(b.A,{className:"w-8 h-8 animate-spin"})})]}),(0,n.jsxs)("div",{className:"space-y-1 text-center",children:[(0,n.jsx)("p",{className:"text-sm font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-500 to-indigo-400",children:"The team is syncing..."}),(0,n.jsx)("p",{className:"text-[10px] text-zinc-400 font-medium uppercase tracking-widest",children:"Applying your campaign context..."})]})]})})}),(0,n.jsx)("div",{className:"flex justify-center items-center gap-4 mb-2 shrink-0",children:tu.map((e,t)=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsxs)("div",{className:(0,C.cn)("flex items-center gap-3 transition-all duration-500",ei===e?"opacity-100":"opacity-30"),children:[(0,n.jsx)("div",{className:(0,C.cn)("w-8 h-8 rounded-xl flex items-center justify-center border transition-all duration-300",ei===e?"bg-indigo-500 text-white border-transparent shadow-[0_0_15px_rgba(99,102,241,0.4)]":"bg-transparent text-zinc-400 border-zinc-200 dark:border-zinc-800"),children:(0,n.jsxs)("span",{className:"text-[10px] font-bold",children:["0",t+1]})}),(0,n.jsx)("span",{className:(0,C.cn)("text-xs font-bold tracking-tight hidden md:inline transition-colors",ei===e?"text-zinc-900 dark:text-white":"text-zinc-400"),children:e.charAt(0)+e.slice(1).toLowerCase()})]}),t<2&&(0,n.jsx)("div",{className:"w-12 h-[1px] bg-zinc-100 dark:bg-zinc-900 mx-2"})]},e))}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto pr-2 pb-12 custom-scrollbar",children:(0,n.jsxs)(l.N,{mode:"wait",children:["IDENTITY"===ei&&(0,n.jsxs)(c.P.div,{variants:S,initial:"hidden",animate:"visible",exit:"exit",className:"space-y-5",children:[(0,n.jsx)(c.P.div,{variants:T,className:"flex items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("h2",{className:"text-3xl font-bold dark:text-white tracking-tight",children:"Campaign Identity"}),(0,n.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Define the persona and brand context for your interview agent."})]})}),(0,n.jsxs)(c.P.div,{variants:T,className:"space-y-3",children:[(0,n.jsx)("label",{className:"text-[11px] font-black text-zinc-600 dark:text-zinc-400 uppercase tracking-[0.2em] flex items-center gap-2",children:"Campaign Name"}),(0,n.jsx)(j.p,{value:eo,onChange:e=>en(t=>({...t,campaignName:e.target.value})),placeholder:"Enter campaign name...",className:"h-10 rounded-2xl border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500/20 transition-all duration-300 text-[14px] px-4 shadow-sm placeholder:text-zinc-400 caret-indigo-500"})]}),(0,n.jsxs)(c.P.div,{variants:T,className:"flex flex-col md:flex-row items-center justify-between gap-6 p-6 rounded-3xl bg-indigo-50/50 dark:bg-indigo-500/5 border border-indigo-100 dark:border-indigo-500/10 shadow-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-5",children:[(0,n.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-white dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center shadow-sm border border-indigo-100 dark:border-indigo-500/20",children:(0,n.jsx)(x.A,{className:"w-6 h-6"})}),(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)("h4",{className:"text-base font-black text-gray-900 dark:text-white",children:"AI Intelligence Feed"}),(0,n.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium max-w-lg",children:'Use "Load Sample Context" for a Faasos example to understand the format and expected depth.'})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[W&&(0,n.jsxs)("div",{className:"flex flex-col items-end gap-1.5",children:[(0,n.jsx)(N.$,{onClick:W,variant:"secondary",className:"bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 text-zinc-600 dark:text-zinc-400 font-black hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-all rounded-xl h-10 px-4 shadow-sm",children:"Manage Leads"}),ek&&new Date(ek).getTime()>0&&(0,n.jsxs)("span",{className:"text-[10px] font-black text-zinc-500 px-2 py-0.5",title:(0,C.Pf)(ek),children:["Updated ",(0,C.fw)(ek)]})]}),(0,n.jsxs)(N.$,{onClick:()=>{en(e=>({...e,brandContext:Q,teamMemberContext:H,customerContext:Z})),A.oR.success("Sarah: Sample context for Faasos is ready for you to customize.")},variant:"ghost",className:"text-indigo-600 dark:text-indigo-400 font-black hover:bg-white dark:hover:bg-zinc-900 transition-all rounded-xl h-10 px-4 group",children:["Load Sample Context",(0,n.jsx)(p.A,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 h-full pb-4",children:[(0,n.jsxs)(c.P.div,{variants:T,className:"space-y-3",children:[(0,n.jsx)("label",{className:"text-[11px] font-black text-zinc-600 dark:text-zinc-400 uppercase tracking-[0.2em] flex items-center gap-2 mb-1.5 px-1",children:"Brand Context"}),(0,n.jsx)(c.P.div,{variants:E,initial:"initial",whileFocus:"focus",animate:{},children:(0,n.jsx)(k.T,{value:el,onChange:e=>en(t=>({...t,brandContext:e.target.value})),placeholder:"Describe your brand's identity and positioning...",className:"min-h-[140px] rounded-2xl border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500/20 resize-none transition-all duration-300 text-[14px] leading-relaxed p-4 shadow-sm placeholder:text-zinc-400 [&::-webkit-scrollbar]:hidden caret-indigo-500"})})]}),(0,n.jsxs)(c.P.div,{variants:T,className:"space-y-3",children:[(0,n.jsx)("label",{className:"text-[11px] font-black text-zinc-600 dark:text-zinc-400 uppercase tracking-[0.2em] flex items-center gap-2 mb-1.5 px-1",children:"Team Context"}),(0,n.jsx)(c.P.div,{variants:E,initial:"initial",whileFocus:"focus",children:(0,n.jsx)(k.T,{value:ec,onChange:e=>en(t=>({...t,teamMemberContext:e.target.value})),placeholder:"Describe who will be conducting the interviews...",className:"min-h-[140px] rounded-2xl border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 focus:ring-2 focus:ring-orange-500/10 focus:border-orange-500/20 resize-none transition-all duration-300 text-[14px] leading-relaxed p-4 shadow-sm placeholder:text-zinc-400 [&::-webkit-scrollbar]:hidden caret-indigo-500"})})]}),(0,n.jsxs)(c.P.div,{variants:T,className:"space-y-3 md:col-span-2",children:[(0,n.jsx)("label",{className:"text-[11px] font-black text-zinc-600 dark:text-zinc-400 uppercase tracking-[0.2em] flex items-center gap-2 mb-1.5 px-1",children:"Call Purpose"}),(0,n.jsx)(c.P.div,{variants:E,initial:"initial",whileFocus:"focus",className:"relative z-10",children:(0,n.jsx)(k.T,{value:ed,onChange:e=>en(t=>({...t,customerContext:e.target.value})),placeholder:"Define the primary objective for this interview campaign...",className:"min-h-[120px] rounded-2xl border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 focus:ring-2 focus:ring-orange-500/10 focus:border-orange-500/20 resize-none transition-all duration-300 text-[14px] leading-relaxed p-4 shadow-sm border-2 border-orange-500/10 placeholder:text-zinc-400 [&::-webkit-scrollbar]:hidden caret-indigo-500"})})]})]})]},"identity"),"STRATEGY"===ei&&(0,n.jsxs)(c.P.div,{variants:S,initial:"hidden",animate:"visible",exit:"exit",className:"space-y-4",children:[(0,n.jsxs)(c.P.div,{variants:T,className:"space-y-1",children:[(0,n.jsx)("h2",{className:"text-3xl font-black dark:text-white tracking-tight",children:"Campaign Strategy"}),(0,n.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Configure targets and protocols for each cohort segment."})]}),0===ex.length?(0,n.jsxs)("div",{className:"p-12 rounded-3xl border border-dashed border-gray-200 dark:border-white/10 bg-gray-50/50 dark:bg-white/[0.02] text-center",children:[(0,n.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gray-100 dark:bg-white/5 flex items-center justify-center mx-auto mb-4 text-gray-400",children:(0,n.jsx)(m.A,{className:"w-8 h-8"})}),(0,n.jsx)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-1",children:"No Cohorts Found"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 font-medium",children:"Upload a CSV with a 'Cohort' column to configure segments."})]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"flex items-center gap-4 overflow-x-auto py-4 px-2 no-scrollbar [-ms-overflow-style:none] [scrollbar-width:none]",children:ez.map((e,t)=>{let a=em.includes(e),r=(ew||ez[0])===e,s=(ef[e]||eh).length,i=eg[e]||0,o=eC[e]||1;return(0,n.jsxs)(c.P.div,{onClick:()=>en(t=>({...t,activeCohort:e})),whileHover:{y:-2},whileTap:{scale:.98},className:(0,C.cn)("relative flex-shrink-0 flex items-center gap-3.5 p-2 rounded-[1.5rem] border transition-all duration-300 cursor-pointer group select-none min-w-[180px]",r?"bg-white dark:bg-zinc-900 border-indigo-500 ring-4 ring-indigo-500/5 shadow-lg shadow-indigo-500/5 z-10":"bg-white dark:bg-zinc-900 border-zinc-100 dark:border-zinc-800 hover:border-indigo-200 dark:hover:border-indigo-900 shadow-sm"),children:[(0,n.jsx)("div",{className:(0,C.cn)("w-12 h-12 rounded-full flex items-center justify-center transition-all duration-500 overflow-hidden border-2 bg-zinc-50 dark:bg-zinc-800",r?"border-indigo-100 scale-105":"border-transparent group-hover:scale-105"),children:(0,n.jsx)("img",{src:"/images/avatars/notionists/full_body/avatar_".concat(o,".png"),alt:e,className:(0,C.cn)("w-full h-full object-cover transition-all duration-500",!r&&"opacity-40 grayscale group-hover:opacity-100 group-hover:grayscale-0","mix-blend-multiply dark:mix-blend-normal")})}),(0,n.jsxs)("div",{className:"flex flex-col items-start text-left gap-0.5 flex-1 min-w-0",children:[(0,n.jsx)("span",{className:(0,C.cn)("text-sm font-bold truncate w-full transition-colors duration-300",r?"text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-white"),children:"Default"===e?"General Audience":e}),(0,n.jsxs)("div",{className:(0,C.cn)("flex items-center gap-1.5 text-[10px] font-bold transition-colors duration-300",r?"text-indigo-500":"text-zinc-400 group-hover:text-indigo-400"),children:[(0,n.jsxs)("span",{children:[i," Calls"]}),(0,n.jsx)("span",{className:"opacity-30",children:"•"}),(0,n.jsxs)("span",{children:[s," Qs"]})]})]}),(0,n.jsx)("button",{onClick:t=>{t.stopPropagation(),en(t=>{let a=t.selectedCohorts.includes(e)?t.selectedCohorts.filter(t=>t!==e):[...t.selectedCohorts,e];return{...t,selectedCohorts:a}})},className:(0,C.cn)("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 border shadow-sm",a?"bg-indigo-600 text-white border-indigo-600 hover:bg-indigo-700":r?"bg-indigo-50 dark:bg-indigo-500/10 text-indigo-400 border-indigo-100 dark:border-indigo-500/20 hover:bg-indigo-100":"bg-zinc-50 dark:bg-zinc-800 text-zinc-300 border-zinc-200 dark:border-zinc-700 hover:bg-white hover:text-indigo-400 hover:border-indigo-200"),children:a?(0,n.jsx)(f.A,{className:"w-4 h-4",strokeWidth:3}):(0,n.jsx)(g.A,{className:"w-4 h-4",strokeWidth:3})})]},e)})}),(0,n.jsx)(l.N,{mode:"wait",children:(()=>{var e;let t=ew||ez[0];if(!ex.includes(t))return null;let a=ef[t]||eh,r=null!==(e=ev[t])&&void 0!==e?e:ey;return(0,n.jsx)(c.P.div,{initial:{opacity:0,scale:.98,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.98,y:-10},transition:{duration:.3},className:"group relative p-8 rounded-[2.5rem] border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900/50 shadow-2xl shadow-zinc-200/50 dark:shadow-none",children:(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row gap-12",children:[(0,n.jsxs)("div",{className:"flex-1 space-y-8",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-8",children:[(0,n.jsx)("div",{className:"relative w-32 h-32 rounded-[2rem] bg-zinc-50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 flex items-center justify-center p-2 shadow-inner group-hover:scale-105 transition-all duration-500",children:(0,n.jsx)("img",{src:"/images/avatars/notionists/full_body/avatar_".concat(eC[t]||1,".png"),alt:t,className:"w-full h-full object-contain filter drop-shadow-lg"})}),(0,n.jsxs)("div",{className:"flex-1 text-center sm:text-left space-y-4",children:[(0,n.jsx)("h3",{className:"text-4xl font-black text-zinc-900 dark:text-white tracking-tighter",children:"Default"===t?"General Audience":t}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center sm:justify-between",children:[(0,n.jsx)("label",{className:"text-[11px] font-black text-zinc-400 uppercase tracking-[0.2em]",children:"Target Volume"}),(0,n.jsx)("button",{onClick:()=>en(e=>({...e,cohortConfig:{...e.cohortConfig,[t]:eu[t]||0}})),className:"hidden sm:block text-[10px] font-black text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 uppercase tracking-widest",children:"MAX"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-center sm:justify-start gap-3",children:[(0,n.jsx)("span",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:"Conduct"}),(0,n.jsxs)("div",{className:"relative group/input",children:[(0,n.jsx)(j.p,{type:"number",value:eg[t]||0,onChange:e=>{let a=parseInt(e.target.value)||0,r=eu[t]||0;a>r&&A.oR.error("Max size for ".concat(t," is ").concat(r)),en(e=>({...e,cohortConfig:{...e.cohortConfig,[t]:Math.min(a,r)}}))},className:"w-20 h-10 text-center text-2xl font-black border-none bg-transparent p-0 focus-visible:ring-0 selection:bg-indigo-100"}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-zinc-100 dark:bg-zinc-800 group-hover/input:bg-indigo-500 transition-colors"})]}),(0,n.jsx)("span",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:"interviews"})]})]})]})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),(0,n.jsx)("label",{className:"text-[11px] font-black text-zinc-600 dark:text-zinc-400 uppercase tracking-[0.2em]",children:"Preliminary Questions"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)("button",{onClick:()=>tm(t),className:"text-[10px] font-black text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 flex items-center gap-2 uppercase tracking-widest",children:[(0,n.jsx)(x.A,{className:"w-3.5 h-3.5"}),"Apply to selected"]}),(0,n.jsxs)("span",{className:"text-[11px] font-black text-zinc-300 tabular-nums",children:[a.length,"/3"]})]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[a.map((e,a)=>(0,n.jsxs)("div",{className:"relative group/q",children:[(0,n.jsx)(P.Z,{value:e,options:[...ep.map(e=>({label:e,value:e})),...e&&!ep.includes(e)?[{label:e,value:e}]:[]],onChange:e=>{en(r=>{let n=[...r.questionBank||[]];e.length>5&&!n.includes(e)&&n.push(e);let s=r.cohortQuestions||{},i=s[t]?[...s[t]]:[...r.preliminaryQuestions||[]];return i[a]=e,{...r,questionBank:n,cohortQuestions:{...s,[t]:i}}})},allowCustomValue:!0,placeholder:"Select or type a question...",className:"h-14 border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-black/20 hover:bg-zinc-50 dark:hover:bg-zinc-800/40 rounded-2xl px-6 font-medium text-sm transition-all"}),(0,n.jsx)("button",{onClick:()=>{en(e=>{let r=e.cohortQuestions||{},n=r[t]?[...r[t]]:[...e.preliminaryQuestions||[]];return n.splice(a,1),{...e,cohortQuestions:{...r,[t]:n}}})},className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover/q:opacity-100 text-zinc-400 hover:text-red-500 transition-all p-2 hover:bg-white dark:hover:bg-zinc-800 rounded-xl shadow-sm",children:(0,n.jsx)(d.A,{className:"w-4 h-4"})})]},a)),a.length<3&&(0,n.jsxs)("button",{onClick:()=>{en(e=>{let a=e.cohortQuestions||{},r=a[t]?[...a[t]]:[...e.preliminaryQuestions||[]];return r.length<3&&r.push(""),{...e,cohortQuestions:{...a,[t]:r}}})},className:"w-full h-14 border-2 border-dashed border-zinc-100 dark:border-zinc-800 rounded-2xl text-zinc-400 hover:text-indigo-600 hover:border-indigo-200 hover:bg-indigo-50/30 dark:hover:bg-indigo-500/5 transition-all flex items-center justify-center gap-3 text-xs font-black uppercase tracking-widest",children:[(0,n.jsx)(g.A,{className:"w-4 h-4",strokeWidth:3}),"Add Question"]})]})]})]}),(0,n.jsxs)("div",{className:"w-full lg:w-[320px] space-y-8",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.5)]"}),(0,n.jsx)("label",{className:"text-[11px] font-black text-zinc-600 dark:text-zinc-400 uppercase tracking-[0.2em]",children:"Incentive"})]}),(0,n.jsxs)("button",{onClick:()=>tg(t),className:"text-[10px] font-black text-orange-600 dark:text-orange-400 hover:text-orange-700 flex items-center gap-2 uppercase tracking-widest",children:[(0,n.jsx)(x.A,{className:"w-3.5 h-3.5"}),"Apply to selected"]})]}),(0,n.jsx)("div",{className:"bg-orange-50/30 dark:bg-orange-500/5 rounded-2xl p-1 border border-orange-100 dark:border-orange-500/10 shadow-sm",children:(0,n.jsx)(P.Z,{value:r,options:[{label:"₹100 UPI",value:"₹100 UPI"},{label:"₹200 UPI",value:"₹200 UPI"},{label:"₹500 Amazon Voucher",value:"₹500 Amazon Voucher"},{label:"Swiggy Coupon",value:"Swiggy Coupon"},{label:"Zomato Gold",value:"Zomato Gold"}],onChange:e=>en(a=>({...a,cohortIncentives:{...a.cohortIncentives,[t]:e}})),allowCustomValue:!0,placeholder:"Select incentive...",className:"h-12 border-none bg-transparent shadow-none focus-visible:ring-0 text-orange-950 dark:text-orange-100 font-bold text-sm"})})]}),(0,n.jsxs)("div",{className:"p-8 rounded-[2rem] bg-zinc-50/50 dark:bg-zinc-900/80 border border-zinc-100 dark:border-zinc-800 shadow-sm space-y-6",children:[(0,n.jsx)("h4",{className:"text-[11px] font-black text-zinc-400 uppercase tracking-[0.2em]",children:"Cohort Summary"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,n.jsx)("span",{className:"text-xs font-bold text-zinc-500",children:"Segment Priority"}),(0,n.jsx)("span",{className:"text-sm font-black text-zinc-900 dark:text-white",children:"High"})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,n.jsx)("span",{className:"text-xs font-bold text-zinc-500",children:"Total Customers"}),(0,n.jsx)("span",{className:"text-sm font-black text-zinc-900 dark:text-white tabular-nums",children:eu[t]||0})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,n.jsx)("span",{className:"text-xs font-bold text-zinc-500",children:"Est. Duration"}),(0,n.jsxs)("span",{className:"text-sm font-black text-zinc-900 dark:text-white tabular-nums",children:["~",Math.round(10*(eg[t]||0)/60)," hrs"]})]})]})]})]})]})},t)})()})]})]},"strategy"),"EXECUTION"===ei&&(0,n.jsxs)(c.P.div,{variants:S,initial:"hidden",animate:"visible",exit:"exit",className:"space-y-8",children:[(0,n.jsxs)(c.P.div,{variants:T,className:"space-y-1",children:[(0,n.jsx)("h2",{className:"text-3xl font-bold dark:text-white tracking-tight",children:"Execution Details"}),(0,n.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Define temporal constraints and call limitations for this run."})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[(0,n.jsx)(c.P.div,{variants:T,className:"space-y-12",children:(0,n.jsxs)("div",{className:"space-y-8 p-8 rounded-[2.5rem] bg-zinc-50/50 dark:bg-zinc-900/30 border border-zinc-100 dark:border-zinc-800/50",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{className:"space-y-1 max-w-[65%] pr-6",children:[(0,n.jsx)("label",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Target Call Duration"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 font-medium italic",children:"How long are you planning to keep these calls?"})]}),(0,n.jsxs)("div",{className:"flex items-baseline gap-1 bg-white dark:bg-zinc-950 px-4 py-1.5 rounded-2xl border border-zinc-100 dark:border-zinc-800 shadow-sm",children:[(0,n.jsx)("span",{className:"text-2xl font-black text-indigo-600 dark:text-indigo-400",children:eN}),(0,n.jsx)("span",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:"Min"})]})]}),(0,n.jsxs)("div",{className:"space-y-4 px-2",children:[(0,n.jsx)(c.P.div,{whileHover:{scale:1.01},transition:{type:"spring",stiffness:400},children:(0,n.jsx)(_,{value:[eN],min:3,max:30,step:1,onValueChange:e=>en(t=>({...t,callDuration:e[0]})),className:"cursor-pointer py-4"})}),(0,n.jsxs)("div",{className:"flex justify-between items-center px-1",children:[(0,n.jsx)("span",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:"Quick Sync"}),(0,n.jsx)("span",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:"Deep Dive"})]}),(0,n.jsxs)("div",{className:"pt-8 flex flex-col items-center justify-center space-y-6",children:[(0,n.jsx)("div",{className:"flex items-center gap-1.5 h-12",children:Array.from({length:15}).map((e,t)=>(0,n.jsx)(c.P.div,{animate:{height:["20%","".concat(Math.max(20,eN/30*100*(.4+.6*Math.random())),"%"),"20%"],opacity:[.3,.6,.3]},transition:{duration:Math.max(.4,1.5-eN/30),repeat:1/0,ease:"easeInOut",delay:.1*t},className:"w-1 rounded-full bg-indigo-500"},t))}),(0,n.jsx)("div",{className:"px-6 py-2 rounded-full bg-white dark:bg-zinc-950 border border-zinc-100 dark:border-zinc-800 shadow-sm",children:(0,n.jsx)("p",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest whitespace-nowrap",children:eN<=8?"⚡️ Tactical Feedback Vibe":eN<=15?"⚖️ Balanced Discovery Vibe":"\uD83E\uDDE0 Deep Synthesis Vibe"})})]})]})]})}),(0,n.jsx)(c.P.div,{variants:T,className:"h-full",children:(0,n.jsxs)("div",{className:"space-y-8 p-8 rounded-[2.5rem] bg-zinc-50/50 dark:bg-zinc-900/30 border border-zinc-100 dark:border-zinc-800/50 flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{className:"space-y-1 max-w-[65%] pr-6",children:[(0,n.jsx)("label",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Execution Windows"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 font-medium italic",children:"Which slot should we block on your calendar for talking to customers?"})]}),(0,n.jsxs)("div",{className:"flex items-baseline gap-1 bg-white dark:bg-zinc-950 px-4 py-1.5 rounded-2xl border border-zinc-100 dark:border-zinc-800 shadow-sm",children:[(0,n.jsx)("span",{className:"text-2xl font-black text-indigo-600 dark:text-indigo-400",children:ej.length}),(0,n.jsx)("span",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:1===ej.length?"Slot":"Slots"})]})]}),(0,n.jsxs)("div",{className:"space-y-2 max-h-[calc(100vh-420px)] overflow-y-auto pr-2 custom-scrollbar flex-1 p-1",children:[th.current.length>0&&(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("h4",{className:"text-[10px] font-black text-indigo-600 dark:text-indigo-400 uppercase tracking-[0.2em] mb-4 flex items-center gap-2.5",children:[(0,n.jsx)("span",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),"Current Window"]}),(0,n.jsx)("div",{className:"space-y-2",children:th.current.map(e=>(0,n.jsx)(R.x,{day:e.day,start:e.start,end:e.end,allWindows:ej,currentIndex:e._originalIndex,customDurationLabel:e._durationLabel,isInvalid:e._isInvalid,onChange:t=>{en(a=>{let r=[...a.executionWindows];return r[e._originalIndex]={...r[e._originalIndex],...t},{...a,executionWindows:r}})},onDelete:()=>{en(t=>({...t,executionWindows:t.executionWindows.filter((t,a)=>a!==e._originalIndex)}))}},"".concat(e.day,"-").concat(e.start,"-").concat(e._originalIndex)))})]}),th.upcoming.length>0&&(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h4",{className:"text-[10px] font-black text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em] mb-4",children:"Upcoming Windows"}),(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsx)(l.N,{children:th.upcoming.map(e=>(0,n.jsx)(R.x,{day:e.day,start:e.start,end:e.end,allWindows:ej,currentIndex:e._originalIndex,onChange:t=>{en(a=>{let r=[...a.executionWindows];return r[e._originalIndex]={...r[e._originalIndex],...t},{...a,executionWindows:r}})},onDelete:()=>{en(t=>({...t,executionWindows:t.executionWindows.filter((t,a)=>a!==e._originalIndex)}))}},"".concat(e.day,"-").concat(e.start,"-").concat(e._originalIndex)))})})]}),th.past.length>0&&(0,n.jsxs)("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-800/50",children:[(0,n.jsx)("h4",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-[0.2em] mb-4",children:"Past Windows"}),(0,n.jsx)("div",{className:"opacity-40 grayscale hover:opacity-100 hover:grayscale-0 transition-all duration-300 space-y-2",children:(0,n.jsx)(l.N,{children:th.past.map(e=>(0,n.jsx)(R.x,{day:e.day,start:e.start,end:e.end,allWindows:ej,currentIndex:e._originalIndex,onChange:t=>{en(a=>{let r=[...a.executionWindows];return r[e._originalIndex]={...r[e._originalIndex],...t},{...a,executionWindows:r}})},onDelete:()=>{en(t=>({...t,executionWindows:t.executionWindows.filter((t,a)=>a!==e._originalIndex)}))}},"".concat(e.day,"-").concat(e.start,"-").concat(e._originalIndex)))})})]}),0===ej.length&&(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 text-center space-y-2",children:[(0,n.jsx)(u.A,{className:"w-8 h-8 text-zinc-200 dark:text-zinc-800"}),(0,n.jsx)("p",{className:"text-xs font-bold text-zinc-400 uppercase tracking-widest",children:"No Windows Defined"})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3 w-full pt-4",children:[(0,n.jsx)("div",{className:"flex flex-col gap-2 flex-1",children:eO.connected?(0,n.jsxs)(N.$,{size:"sm",variant:"ghost",className:(0,C.cn)("w-full h-12 px-4 text-xs font-bold rounded-xl flex items-center justify-center gap-2 transition-all shadow-sm hover:shadow-indigo-100/50","text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 hover:bg-indigo-100 dark:hover:bg-indigo-900/40"),onClick:async e=>{e.stopPropagation();let a=t;if(a&&"null"!==a&&"undefined"!==a||(a=await tx(!1)))try{eL(!0);let e=(ej||[]).map(e=>({day:e.day,start:e.start,end:e.end})).filter(e=>e.day&&e.start&&e.end);await I.F.patch("/intelligence/campaigns/".concat(a,"/settings"),{execution_windows:e});let t=await I.F.post("/intelligence/campaigns/".concat(a,"/calendar-sync")),r=t.events_created||t.events_count||0;A.oR.success((0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("span",{children:"Synced to Google Calendar!"}),(0,n.jsxs)("span",{className:"text-[10px] opacity-80",children:[r," events created/updated"]})]}))}catch(e){console.error(e),A.oR.error("Failed to sync calendar")}finally{eL(!1)}},disabled:eW,children:[eW?(0,n.jsx)(b.A,{className:"w-3.5 h-3.5 animate-spin"}):(0,n.jsx)(x.A,{className:"w-3.5 h-3.5"}),"Block on Google"]}):(0,n.jsxs)("div",{className:"relative group/cal w-full",children:[(0,n.jsxs)(N.$,{size:"sm",variant:"outline",className:"w-full h-12 px-4 rounded-xl border-dashed border-2 border-zinc-200 dark:border-zinc-700 hover:border-indigo-500/50 hover:bg-indigo-50 dark:hover:bg-indigo-900/10 text-zinc-500 dark:text-zinc-400 hover:text-indigo-600 dark:hover:text-indigo-400 font-bold text-xs gap-2 transition-all duration-300",onClick:async e=>{e.stopPropagation();try{let e=await I.F.get("/intelligence/calendar/google/login");e.url?window.location.href=e.url:A.oR.error("Failed to get authorization URL")}catch(e){A.oR.error("Failed to initiate calendar connection")}},children:[(0,n.jsx)(h.A,{className:"w-4 h-4"}),"Connect Calendar to Block"]}),(0,n.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2 bg-zinc-900 text-white text-[10px] rounded-lg opacity-0 group-hover/cal:opacity-100 transition-opacity pointer-events-none text-center transform translate-y-2 group-hover/cal:translate-y-0 duration-200",children:"Connect Google Calendar to automatically block these execution windows."})]})}),(0,n.jsxs)(N.$,{size:"sm",className:"flex-1 h-12 px-6 rounded-xl bg-gradient-to-r from-indigo-600 to-orange-600 dark:from-indigo-500 dark:to-orange-500 text-white hover:from-indigo-700 hover:to-orange-700 dark:hover:from-indigo-600 dark:hover:to-orange-600 font-bold text-sm gap-2 transition-all duration-300 shadow-lg shadow-indigo-500/25 hover:shadow-xl hover:shadow-indigo-500/40 hover:scale-[1.02] active:scale-[0.98]",onClick:()=>en(e=>({...e,executionWindows:[...e.executionWindows||[],$()]})),children:[(0,n.jsx)(g.A,{className:"w-4 h-4"}),"Add Window"]})]})]})})]})]},"execution")]})}),(0,n.jsxs)("div",{className:"relative z-[100] flex items-center justify-between mt-auto border-t border-zinc-100 dark:border-zinc-800 bg-white dark:bg-zinc-950 px-8 pt-6 pb-12",children:[(0,n.jsxs)("div",{className:"flex items-center gap-8",children:[(0,n.jsx)(N.$,{variant:"ghost",onClick:()=>{"IDENTITY"===ei&&eG(!0),"STRATEGY"===ei&&en(e=>({...e,step:"IDENTITY"})),"EXECUTION"===ei&&en(e=>({...e,step:"STRATEGY"}))},disabled:eE,className:"rounded-xl h-14 px-8 font-bold text-sm text-gray-500 hover:bg-gray-50 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Back"}),(0,n.jsxs)(l.N,{children:[eK&&(0,n.jsxs)(c.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-center gap-2 text-[10px] text-indigo-500 font-bold uppercase tracking-widest",children:[(0,n.jsx)(b.A,{className:"w-3.5 h-3.5 animate-spin"}),(0,n.jsx)("span",{children:"Syncing Draft"})]}),!eK&&e1&&(0,n.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-2 text-[10px] text-zinc-400 font-bold uppercase tracking-widest px-3",children:[(0,n.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),(0,n.jsxs)("span",{children:["Saved ",e1.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-6",children:[(0,n.jsx)(l.N,{mode:"wait",children:(0,n.jsxs)(c.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"hidden md:flex flex-col items-end",children:[(0,n.jsx)("span",{className:"text-[10px] font-bold uppercase text-zinc-400 tracking-widest leading-tight",children:"Up Next"}),(0,n.jsx)("span",{className:"text-sm text-zinc-900 dark:text-white font-bold tracking-tight",children:"IDENTITY"===ei?"Strategy Mapping":"STRATEGY"===ei?"Execution Slots":"Launch Campaign"})]},ei)}),(0,n.jsx)(c.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,n.jsx)(N.$,{onClick:tc,disabled:eE,size:"lg",className:"rounded-xl h-14 px-10 bg-zinc-900 dark:bg-white text-white dark:text-black hover:bg-black dark:hover:bg-zinc-200 font-black text-xs uppercase tracking-[0.2em] group relative shadow-2xl",children:(0,n.jsxs)("span",{className:"relative z-10 flex items-center gap-3",children:[eE?"Processing":"EXECUTION"===ei?"Initialize":"Proceed","EXECUTION"!==ei&&(0,n.jsx)(p.A,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"}),"EXECUTION"===ei&&(0,n.jsx)(f.A,{className:"w-4 h-4"})]})})})]})]})]}),(0,n.jsx)(D.z,{isOpen:eU,onClose:()=>eF(!1),busySlots:(null==eO?void 0:eO.busy_slots)||[],activeCampaign:{...er,execution_windows:ej},onSaveWindow:async e=>{en(t=>({...t,executionWindows:[...t.executionWindows,e]})),A.oR.success("Window added! Auto-saving...")}}),(0,n.jsx)(U.f,{isOpen:eq,onClose:()=>eG(!1),onConfirm:()=>{eG(!1),null==M||M()},title:"Exit Campaign Builder?",description:"Your progress is auto-saved as a draft, but the campaign will not be live until you initialize it.",confirmLabel:"Exit",cancelLabel:"Continue"})]})}},3765:(e,t,a)=>{"use strict";a.d(t,{f:()=>l});var r=a(95155);a(12115);var n=a(71226),s=a(25858),i=a(23950),o=a(30098);function l(e){let{isOpen:t,onClose:a,onConfirm:l,title:c="Discard Changes?",description:d="You have unsaved changes that will be lost if you leave now.",confirmLabel:x="Discard",cancelLabel:m="Stay"}=e;return(0,r.jsx)(s.Lt,{open:t,onOpenChange:a,children:(0,r.jsx)(s.EO,{className:"max-w-md border-none bg-transparent p-0 shadow-none overflow-visible",children:(0,r.jsxs)("div",{className:"relative p-[1px] rounded-[2.5rem] overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/50 via-indigo-500/20 to-orange-500/50 animate-pulse"}),(0,r.jsxs)("div",{className:"relative bg-white dark:bg-[#09090B] rounded-[2.5rem] p-8 md:p-10 backdrop-blur-xl border border-white/10 shadow-2xl",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/5 to-transparent pointer-events-none"}),(0,r.jsxs)(s.wd,{className:"relative z-10",children:[(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.P.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:4},className:"w-20 h-20 rounded-3xl bg-orange-500/10 flex items-center justify-center border border-orange-500/20",children:(0,r.jsx)(i.A,{className:"w-10 h-10 text-orange-500"})}),(0,r.jsx)(n.P.div,{animate:{y:[-10,10,-10],opacity:[0,1,0]},transition:{repeat:1/0,duration:2,delay:.5},className:"absolute -top-2 -right-2",children:(0,r.jsx)(o.A,{className:"w-5 h-5 text-indigo-400"})})]})}),(0,r.jsx)(s.r7,{className:"text-2xl font-bold text-center dark:text-white tracking-tight",children:c}),(0,r.jsx)(s.$v,{className:"text-center text-gray-500 dark:text-zinc-400 text-base leading-relaxed mt-4",children:d})]}),(0,r.jsxs)(s.ck,{className:"mt-10 flex flex-col sm:flex-row gap-3 relative z-10",children:[(0,r.jsx)(s.Zr,{onClick:a,className:"flex-1 rounded-2xl h-14 border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-white/[0.02] hover:bg-gray-100 dark:hover:bg-white/[0.05] text-gray-600 dark:text-zinc-400 font-bold transition-all text-lg",children:m}),(0,r.jsx)(s.Rx,{onClick:e=>{e.preventDefault(),l()},className:"flex-1 rounded-2xl h-14 bg-zinc-900 dark:bg-white text-white dark:text-black font-bold transition-all text-lg shadow-lg hover:bg-zinc-800 dark:hover:bg-zinc-200 border-none flex items-center justify-center gap-2",children:x})]}),(0,r.jsx)("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-40 h-40 bg-orange-500/5 blur-[80px] -z-10 pointer-events-none"})]})]})})})}},64104:(e,t,a)=>{"use strict";a.d(t,{K:()=>O});var r=a(95155),n=a(12115),s=a(35007),i=a(14085),o=a(40767),l=a(38684),c=a(16099),d=a(61594),x=a(14505),m=a(99053),g=a(23950),u=a(4834),h=a(26336),p=a(29602),b=a(29159),f=a.n(b),v=a(7660),w=a(30814),y=a(25739),N=a(50745),j=a(9955),k=a(25858),z=a(71226),C=a(20016),_=a(28633),A=a(20994),I=a(14081),S=a(81476),T=a(23817),E=a(1466);function P(e){let{data:t,mapping:a,className:s}=e,[i,o]=(0,n.useState)([]),l=(0,n.useRef)(null),c=(0,n.useRef)(0);return(0,n.useEffect)(()=>{o([{id:"init-1",text:"Alex: Success Team is ready. Getting your leads onboarded...",type:"system",icon:A.A},{id:"init-2",text:"Sarah: Checking the list for any missing details...",type:"info",icon:I.A},{id:"init-3",text:"Rohan: Making sure every record is unique...",type:"info",icon:S.A}])},[]),(0,n.useEffect)(()=>{let e=setInterval(()=>{let e=c.current,r=null;if(Math.random()>.7||e>=t.length){let e=["Maya: Syncing the latest context for your campaign...","Alex: Securing these contact details in the vault...","Sarah: Quick check on the phone formats for global reach...","Rohan: Mapping out the best paths for outreach...","Maya: Our intelligence engine is now processing the batch...","Alex: Formatted ".concat((0,p.n4)("919876543210")," for display...")];r={id:"sys-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),text:e[Math.floor(Math.random()*e.length)],type:"system",icon:T.A}}else{let n=t[e][a.customer_name];n&&(r={id:"rec-".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),text:"Success Team: Welcoming ".concat(n," to the campaign"),type:"record",icon:E.A}),c.current=(e+1)%t.length}r&&o(e=>{let t=[...e,r];return t.length>7&&t.shift(),t})},400);return()=>clearInterval(e)},[t,a]),(0,n.useEffect)(()=>{var e;null===(e=l.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})},[i]),(0,r.jsxs)("div",{className:(0,p.cn)("w-full max-w-md mx-auto",s),children:[(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 shadow-xl dark:shadow-2xl h-[300px] flex flex-col transition-colors duration-300",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-100 dark:border-zinc-800/50 bg-zinc-50/50 dark:bg-zinc-900/20 backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse relative z-10"}),(0,r.jsx)("div",{className:"absolute inset-0 w-full h-full bg-emerald-500 rounded-full animate-ping opacity-20"})]}),(0,r.jsx)("span",{className:"text-[10px] font-bold tracking-widest uppercase text-emerald-600 dark:text-emerald-400 font-mono",children:"Intelligence_Stream"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-zinc-100 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-800",children:[(0,r.jsx)("span",{className:"text-[10px] text-zinc-600 dark:text-zinc-400 font-mono font-medium tabular-nums",children:(.85*t.length).toFixed(0)}),(0,r.jsx)("span",{className:"text-[9px] text-zinc-400 dark:text-zinc-500 font-medium uppercase",children:"rec/s"})]})]}),(0,r.jsxs)("div",{className:"flex-1 p-4 space-y-3 overflow-y-auto overflow-x-hidden font-mono text-xs relative custom-scrollbar scroll-smooth",children:[(0,r.jsx)("div",{className:"absolute inset-x-0 top-0 h-4 bg-gradient-to-b from-white dark:from-zinc-950 to-transparent z-10 pointer-events-none"}),(0,r.jsx)(_.N,{initial:!1,mode:"popLayout",children:i.map(e=>(0,r.jsxs)(z.P.div,{layout:!0,initial:{opacity:0,x:-10,filter:"blur(2px)"},animate:{opacity:1,x:0,filter:"blur(0px)"},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"flex items-center gap-3 group",children:[(0,r.jsx)("div",{className:(0,p.cn)("p-1.5 rounded-lg transition-colors border","record"===e.type?"bg-orange-50 dark:bg-orange-500/10 text-orange-500 dark:text-orange-400 border-orange-100 dark:border-orange-500/20":"system"===e.type?"bg-orange-50 dark:bg-orange-500/10 text-orange-600 dark:text-orange-400 border-orange-100 dark:border-orange-500/20":"bg-zinc-50 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 border-zinc-100 dark:border-zinc-700"),children:(0,r.jsx)(e.icon,{className:"w-3 h-3"})}),(0,r.jsx)("span",{className:(0,p.cn)("truncate transition-colors","record"===e.type?"text-zinc-700 dark:text-zinc-200 font-medium":"system"===e.type?"text-zinc-600 dark:text-zinc-300":"text-zinc-400 dark:text-zinc-500"),children:e.text})]},e.id))}),(0,r.jsx)("div",{ref:l,className:"h-2"})]}),(0,r.jsx)("div",{className:"h-0.5 bg-zinc-100 dark:bg-zinc-900 w-full overflow-hidden",children:(0,r.jsx)(z.P.div,{initial:{width:"0%"},animate:{width:"100%"},transition:{duration:8,ease:"linear",repeat:1/0},className:"h-full bg-gradient-to-r from-orange-500 via-orange-500 to-orange-500 w-full opacity-80"})})]}),(0,r.jsxs)("div",{className:"text-center mt-6 space-y-2",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white flex items-center justify-center gap-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(x.A,{className:"w-4 h-4 animate-spin text-orange-500"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-orange-500/20 blur-md animate-pulse"})]}),(0,r.jsx)("span",{children:"Success Team is on it"})]}),(0,r.jsxs)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 max-w-[280px] mx-auto leading-relaxed",children:["Securely organizing and preparing ",(0,r.jsxs)("span",{className:"text-zinc-950 dark:text-white font-semibold",children:[t.length," customer profiles"]})," for your upcoming campaign..."]})]})]})}var R=a(3765),D=a(35901);function O(e){let{onSuccess:t,onCancel:a,className:b,mode:_="create",campaignId:A,onLeadsUpdated:I,onDirtyChange:S,isMagicUI:T}=e,{companyId:E,user:O}=(0,D.A)(),M="edit"===_&&A?"csv_upload_edit_".concat(A):"csv_upload_state_".concat(E||"default"),[W,L]=(0,n.useState)([]),[U,F,q]=function(e,t){let[a,r]=(0,n.useState)(()=>{try{let a=window.sessionStorage.getItem(e);return a?JSON.parse(a):t}catch(e){return console.error(e),t}});return[a,t=>{try{let n=t instanceof Function?t(a):t;r(n),window.sessionStorage.setItem(e,JSON.stringify(n))}catch(e){console.error(e)}},()=>{try{window.sessionStorage.removeItem(e),r(t)}catch(e){console.error(e)}}]}(M,{stage:"UPLOAD",headers:[],mapping:{customer_name:"",contact_number:"",cohort:""},campaignName:"",campaignId:null});(0,n.useEffect)(()=>{S&&S("MAPPING"===U.stage||"UPLOADING"===U.stage||"ORCHESTRATION"===U.stage||W.length>0&&"DONE"!==U.stage&&"UPLOAD"!==U.stage)},[U.stage,W.length,S]),(0,n.useEffect)(()=>{if("edit"===_&&A){let e=async()=>{try{let e=await y.F.get("/intelligence/campaigns/".concat(A));F(t=>({...t,campaignName:e.name||t.campaignName,campaignId:A,stage:t.campaignId!==A||"DONE"===t.stage?"UPLOAD":t.stage})),U.campaignId!==A&&Z(null)}catch(e){console.error("Failed to fetch campaign details for edit mode:",e)}};U.campaignName&&U.campaignId===A||e()}},[_,A]),(0,n.useEffect)(()=>{"create"!==_||H||"UPLOAD"===U.stage||"DONE"===U.stage||(F(e=>({...e,stage:"UPLOAD",headers:[],mapping:{customer_name:"",contact_number:"",cohort:""}})),L([]))},[_]);let{stage:G,headers:B,mapping:Y,campaignName:V,campaignId:$}=U,Q=n.useMemo(()=>Y.customer_name&&Y.contact_number?W.map(e=>{let t={customer_name:e[Y.customer_name],contact_number:String(e[Y.contact_number]).trim(),meta_data:e};return Y.cohort&&e[Y.cohort]&&(t.cohort=e[Y.cohort]),t}):[],[W,Y]),[H,Z]=(0,n.useState)(null),[J,X]=(0,n.useState)(!1),[K,ee]=(0,n.useState)(null),[et,ea]=(0,n.useState)(!1),[er,en]=(0,n.useState)(!1),[es,ei]=(0,n.useState)(null),eo=n.useRef(null),el=(0,n.useCallback)(e=>{let t=new FileReader;t.onload=e=>{var t;let a=new Uint8Array(null===(t=e.target)||void 0===t?void 0:t.result),r=v.LF(a,{type:"array"}),n=r.SheetNames[0],s=r.Sheets[n],i=v.Wp.sheet_to_json(s);if(i&&i.length>0){let e=Object.keys(i[0]),t={...U.mapping};e.forEach(e=>{let a=e.toLowerCase();a.includes("name")&&(t.customer_name=e),(a.includes("phone")||a.includes("number")||a.includes("contact"))&&(t.contact_number=e),(a.includes("cohort")||a.includes("segment")||a.includes("group"))&&(t.cohort=e)}),L(i),F(a=>({...a,headers:e,mapping:t,stage:"MAPPING"}))}else w.oR.error("The Excel file appears to be empty")},t.readAsArrayBuffer(e)},[U.mapping,F]),ec=(0,n.useCallback)(e=>{Z(e),e.name.endsWith(".csv")?f().parse(e,{header:!0,skipEmptyLines:!0,complete:e=>{if(e.data&&e.data.length>0){let t=Object.keys(e.data[0]),a={...U.mapping};t.forEach(e=>{let t=e.toLowerCase();t.includes("name")&&(a.customer_name=e),(t.includes("phone")||t.includes("number")||t.includes("contact"))&&(a.contact_number=e),(t.includes("cohort")||t.includes("segment")||t.includes("group"))&&(a.cohort=e)}),L(e.data),F(e=>({...e,headers:t,mapping:a,stage:"MAPPING"}))}else w.oR.error("The CSV file appears to be empty")},error:e=>{console.error("CsvUpload: Parse error",e),w.oR.error("Error parsing CSV: ".concat(e.message))}}):e.name.endsWith(".xlsx")||e.name.endsWith(".xls")?el(e):w.oR.error("Please upload a valid CSV or Excel file")},[U.mapping,F,el]),ed=(0,n.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.files[0];t&&(t.name.endsWith(".csv")||t.name.endsWith(".xlsx")||t.name.endsWith(".xls"))?ec(t):w.oR.error("Please upload a valid CSV or Excel file")},[ec]),ex=async()=>{try{if(!O)return w.oR.error("Authentication check failed. Please refresh page."),!1;if(!E&&!localStorage.getItem("unclutr_company_id"))return w.oR.error("Organization context missing. Please refresh page."),!1;return!0}catch(e){return!1}},em=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Y.customer_name||!Y.contact_number){w.oR.error("Please map at least Name and Contact Number");return}if(X(!0),!await ex()){console.warn("CsvUpload: Auth validation failed"),X(!1);return}try{F(e=>({...e,stage:"UPLOADING"}));let t=W.map(e=>{let t={customer_name:e[Y.customer_name],contact_number:String(e[Y.contact_number]).trim(),meta_data:e};return Y.cohort&&e[Y.cohort]&&(t.cohort=e[Y.cohort]),t}),a=A||U.campaignId;if(a&&!e){let e=await y.F.put("/intelligence/campaigns/".concat(a,"/leads"),{leads:t});if("success"===e.status)w.oR.success("The Success Team has updated your leads. We're ready when you are."),F(e=>({...e,stage:"DONE"}));else throw Error(e.message||"Failed to update leads (Unknown error)")}else F(e=>({...e,stage:"ORCHESTRATION",campaignId:null})),en(!1)}catch(n){var t,a;let e=n.status||(null===(t=n.response)||void 0===t?void 0:t.status),r=n.data||(null===(a=n.response)||void 0===a?void 0:a.data);if("create"===_&&409===e&&(null==r?void 0:r.code)==="DUPLICATE_UPLOAD"){ei({id:r.campaign_id,name:r.campaign_name,date:r.created_at}),en(!0),F(e=>({...e,stage:"MAPPING"})),X(!1);return}console.error("Failed to process campaign:",n),ee({title:"Upload Failed",message:n.message||"Failed to process campaign. Please try again.",canRetry:!0}),F(e=>({...e,stage:"ERROR"})),w.oR.error(n.message||"Failed to process campaign")}finally{er||X(!1)}},eg=(0,n.useCallback)(()=>{q(),L([]),Z(null),ee(null),X(!1)},[q]);(0,n.useEffect)(()=>{if("DONE"===G){let e=setTimeout(()=>{"edit"===_&&I?(I(),eg()):"create"===_&&eg()},2e3);return()=>clearTimeout(e)}},[G,eg,_,I]),(0,n.useEffect)(()=>{if("UPLOADING"===G&&!J){let e=setTimeout(()=>{F(e=>({...e,stage:"MAPPING"}))},500);return()=>clearTimeout(e)}},[]);let eu=()=>{"MAPPING"===U.stage||"UPLOADING"===U.stage||"ORCHESTRATION"===U.stage||W.length>0&&"DONE"!==U.stage&&"UPLOAD"!==U.stage?ea(!0):a?a():eg()};return"ORCHESTRATION"===G?(0,r.jsx)(C.X,{campaignId:$,initialLeads:Q,initialName:V,onBack:()=>F(e=>({...e,stage:"MAPPING"})),onCampaignIdGenerated:e=>F(t=>({...t,campaignId:e})),onComplete:e=>{"create"===_&&t?(eg(),t(e||$||"")):(F(e=>({...e,stage:"DONE"})),t&&$&&t($))},onError:e=>{console.error("Composer Error:",e),(null==e?void 0:e.status)===404?(w.oR.error("Session expired: Campaign not found. Starting fresh."),q(),Z(null),a&&a()):(ee({title:"Campaign Finalization Failed",message:(null==e?void 0:e.message)||"Failed to save campaign details. Please try again.",canRetry:!0}),F(e=>({...e,stage:"ERROR"})))},className:b,isMagicUI:T}):(0,r.jsxs)(s.Zp,{className:(0,p.cn)("relative overflow-hidden transition-all duration-300","bg-white dark:bg-zinc-950 border-gray-200 dark:border-white/[0.08] shadow-sm rounded-xl",b,"UPLOAD"===G&&"!flex-none !h-auto !self-start"),children:[(0,r.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden opacity-50",children:(0,r.jsx)("div",{className:"absolute top-0 right-0 w-full h-full bg-[radial-gradient(circle_at_70%_0%,rgba(99,102,241,0.03),transparent_50%)]"})}),a&&(0,r.jsx)("div",{className:"absolute top-6 right-6 z-20",children:(0,r.jsx)(i.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),eu()},className:"rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors w-10 h-10",children:(0,r.jsx)(o.A,{className:"w-5 h-5 opacity-70"})})}),(0,r.jsxs)(s.Wu,{className:(0,p.cn)("p-6 md:p-8 flex flex-col relative z-10 min-h-0","UPLOAD"===G?"!flex-none !h-auto":"flex-1"),children:["UPLOAD"===G&&(0,r.jsx)(z.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:(0,p.cn)("flex flex-col items-center justify-center p-4 md:p-6","UPLOAD"===G?"!flex-none !h-auto":"flex-1"),children:(0,r.jsxs)("div",{className:(0,p.cn)("relative w-full max-w-2xl min-h-[300px] py-12 flex flex-col items-center justify-center","rounded-lg overflow-hidden transition-all duration-300","group/upload cursor-pointer"),onDragOver:e=>e.preventDefault(),onDrop:ed,onClick:()=>{var e;return null===(e=eo.current)||void 0===e?void 0:e.click()},children:[(0,r.jsx)("input",{type:"file",ref:eo,className:"hidden",accept:".csv,.xlsx,.xls",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&ec(a),e.target.value=""}}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-50/50 dark:bg-white/[0.02] border-2 border-dashed border-gray-200 dark:border-white/[0.08] rounded-xl transition-all duration-300 group-hover/upload:border-gray-300 dark:group-hover/upload:border-white/20"}),(0,r.jsxs)("div",{className:"relative z-10 flex flex-col items-center text-center space-y-6",children:[(0,r.jsxs)(z.P.div,{whileHover:{y:-5,scale:1.05},className:"relative w-24 h-24 mb-1",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-xl bg-gray-100 dark:bg-white/[0.05] flex items-center justify-center transition-all duration-300",children:(0,r.jsx)(l.A,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})}),(0,r.jsx)(z.P.div,{animate:{y:[0,-4,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute -top-2 -right-2 bg-indigo-600 text-white text-[10px] font-bold px-3 py-1 rounded-full shadow-xl shadow-indigo-500/50 border-2 border-white dark:border-zinc-900",children:"DATA"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white tracking-tight",children:"Upload Leads"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 leading-relaxed font-normal",children:"Drag and drop your CSV or Excel file to get started"})]})]}),(0,r.jsxs)("div",{className:"absolute bottom-6 flex items-center gap-8 opacity-60",children:[(0,r.jsx)("div",{className:"flex items-center gap-2 text-[10px] font-medium uppercase tracking-wider text-gray-400",children:"Name"}),(0,r.jsx)("div",{className:"flex items-center gap-2 text-[10px] font-medium uppercase tracking-wider text-gray-400",children:"Phone"}),(0,r.jsx)("div",{className:"flex items-center gap-2 text-[10px] font-medium uppercase tracking-wider text-gray-400",children:"Cohort"})]})]})}),"MAPPING"===G&&(0,r.jsxs)("div",{className:"flex flex-col h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8 pr-12",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"p-3 rounded-2xl bg-gradient-to-br from-indigo-500/10 to-orange-500/10 dark:from-indigo-500/20 dark:to-orange-500/20 text-indigo-600 dark:text-indigo-400 border border-indigo-100 dark:border-indigo-500/20 shadow-sm",children:(0,r.jsx)(c.A,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"Map Data columns"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Align your file columns with our intelligence engine."})]})]}),(0,r.jsxs)("div",{className:"hidden lg:flex items-center gap-2 px-3 py-1.5 rounded-full bg-indigo-50 dark:bg-indigo-500/10 border border-indigo-100 dark:border-indigo-500/20",children:[(0,r.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,r.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"}),(0,r.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-indigo-500"})]}),(0,r.jsx)("span",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:"Mapping Active"})]})]}),(0,r.jsxs)("div",{className:"flex-1 min-h-0 grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12 pb-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-5 flex flex-col space-y-8",children:["create"===_&&(0,r.jsxs)("div",{className:"space-y-3 group",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest pl-1 group-focus-within:text-indigo-500 transition-colors",children:"Campaign Name"})}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(j.p,{placeholder:"e.g. Q1 Customer Outreach",value:V,onChange:e=>F(t=>({...t,campaignName:e.target.value})),className:"h-12 bg-gray-50/50 dark:bg-white/[0.02] border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-sm px-4 font-medium"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between pb-2 border-b border-gray-100 dark:border-white/5",children:[(0,r.jsx)("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest pl-1",children:"Column Mapping"}),(0,r.jsx)("span",{className:"text-[10px] text-gray-400 font-medium italic",children:"Auto-detected best matches"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"p-4 rounded-xl border border-gray-100 dark:border-white/[0.05] bg-white dark:bg-white/[0.01] shadow-sm hover:shadow-md transition-shadow group focus-within:ring-1 focus-within:ring-indigo-500/50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Customer Name"})]}),(0,r.jsx)("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-500/10 px-2 py-0.5 rounded border border-indigo-100 dark:border-indigo-500/20",children:"REQUIRED"})]}),(0,r.jsxs)(N.l6,{value:Y.customer_name,onValueChange:e=>F(t=>({...t,mapping:{...t.mapping,customer_name:e}})),children:[(0,r.jsx)(N.bq,{className:"w-full h-10 border-gray-200 dark:border-white/10 bg-gray-50/50 dark:bg-white/[0.02] focus:ring-indigo-500/20 rounded-lg text-xs font-medium",children:(0,r.jsx)(N.yv,{placeholder:"Select column..."})}),(0,r.jsx)(N.gC,{children:B.map(e=>(0,r.jsx)(N.eb,{value:e,className:"text-xs",children:e},e))})]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-xl border border-gray-100 dark:border-white/[0.05] bg-white dark:bg-white/[0.01] shadow-sm hover:shadow-md transition-shadow group focus-within:ring-1 focus-within:ring-indigo-500/50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Phone Number"})]}),(0,r.jsx)("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-500/10 px-2 py-0.5 rounded border border-indigo-100 dark:border-indigo-500/20",children:"REQUIRED"})]}),(0,r.jsxs)(N.l6,{value:Y.contact_number,onValueChange:e=>F(t=>({...t,mapping:{...t.mapping,contact_number:e}})),children:[(0,r.jsx)(N.bq,{className:"w-full h-10 border-gray-200 dark:border-white/10 bg-gray-50/50 dark:bg-white/[0.02] focus:ring-indigo-500/20 rounded-lg text-xs font-medium",children:(0,r.jsx)(N.yv,{placeholder:"Select column..."})}),(0,r.jsx)(N.gC,{children:B.map(e=>(0,r.jsx)(N.eb,{value:e,className:"text-xs",children:e},e))})]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-xl border border-gray-100 dark:border-white/[0.05] bg-white dark:bg-white/[0.01] shadow-sm hover:shadow-md transition-shadow group focus-within:ring-1 focus-within:ring-indigo-500/50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-300 dark:bg-gray-600"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Cohort / Group"})]}),(0,r.jsx)("span",{className:"text-[10px] font-bold text-gray-400 bg-gray-50 dark:bg-white/5 px-2 py-0.5 rounded border border-gray-100 dark:border-white/10",children:"OPTIONAL"})]}),(0,r.jsxs)(N.l6,{value:Y.cohort,onValueChange:e=>F(t=>({...t,mapping:{...t.mapping,cohort:e}})),children:[(0,r.jsx)(N.bq,{className:"w-full h-10 border-gray-200 dark:border-white/10 bg-gray-50/50 dark:bg-white/[0.02] focus:ring-indigo-500/20 rounded-lg text-xs font-medium text-gray-500",children:(0,r.jsx)(N.yv,{placeholder:"No grouping selected"})}),(0,r.jsxs)(N.gC,{children:[(0,r.jsx)(N.eb,{value:"none",className:"text-xs",children:"None"}),B.map(e=>(0,r.jsx)(N.eb,{value:e,className:"text-xs",children:e},e))]})]})]})]})]})]}),(0,r.jsxs)("div",{className:"lg:col-span-7 flex flex-col h-full min-h-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4 px-1",children:[(0,r.jsxs)("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-4 h-4 rounded bg-gray-100 dark:bg-white/10 flex items-center justify-center text-gray-500",children:(0,r.jsx)(c.A,{className:"w-2.5 h-2.5"})}),"Data Preview"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-[10px] text-emerald-600 dark:text-emerald-400 font-bold bg-emerald-50 dark:bg-emerald-500/10 px-2.5 py-1 rounded-full border border-emerald-100 dark:border-emerald-500/20",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),W.length," RECORDS READY"]})]}),(0,r.jsxs)("div",{className:"h-[400px] rounded-2xl border border-gray-200/60 dark:border-white/[0.08] bg-white dark:bg-zinc-900/50 shadow-[0_2px_20px_-4px_rgba(0,0,0,0.05)] overflow-hidden flex flex-col relative group",children:[(0,r.jsx)("div",{className:"absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-indigo-500/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,r.jsx)("div",{className:"flex-1 overflow-auto custom-scrollbar bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] dark:bg-[radial-gradient(#ffffff08_1px,transparent_1px)] [background-size:16px_16px]",children:(0,r.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,r.jsx)("thead",{className:"sticky top-0 bg-white/95 dark:bg-zinc-900/95 backdrop-blur-md z-10 shadow-sm",children:(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-white/5",children:[(0,r.jsx)("th",{className:"px-5 py-3 text-[10px] font-bold text-gray-400 uppercase tracking-widest w-1/3",children:"Name"}),(0,r.jsx)("th",{className:"px-5 py-3 text-[10px] font-bold text-gray-400 uppercase tracking-widest w-1/3",children:"Phone"}),(0,r.jsx)("th",{className:"px-5 py-3 text-[10px] font-bold text-gray-400 uppercase tracking-widest w-1/3",children:"Cohort"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-50 dark:divide-white/[0.02]",children:W.slice(0,50).map((e,t)=>{let a=Y.customer_name?e[Y.customer_name]:null,n=Y.contact_number?e[Y.contact_number]:null,s=Y.cohort&&"none"!==Y.cohort?e[Y.cohort]:null;return(0,r.jsxs)("tr",{className:"group/row hover:bg-indigo-50/30 dark:hover:bg-indigo-500/5 transition-colors",children:[(0,r.jsx)("td",{className:"px-5 py-2.5",children:a?(0,r.jsx)("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-200",children:a}):(0,r.jsx)("span",{className:"text-[10px] text-gray-300 dark:text-gray-600 font-medium italic",children:"-"})}),(0,r.jsx)("td",{className:"px-5 py-2.5",children:n?(0,r.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 font-mono tracking-tight",children:(0,p.n4)(n)}):(0,r.jsx)("span",{className:"text-[10px] text-gray-300 dark:text-gray-600 font-medium italic",children:"-"})}),(0,r.jsx)("td",{className:"px-5 py-2.5",children:s?(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium bg-gray-100 dark:bg-white/10 text-gray-600 dark:text-gray-400",children:s}):(0,r.jsx)("span",{className:"text-[10px] text-gray-300 dark:text-gray-600 font-medium italic",children:"-"})})]},t)})})]})}),(0,r.jsx)("div",{className:"absolute bottom-0 inset-x-0 h-12 bg-gradient-to-t from-white dark:from-zinc-950 to-transparent pointer-events-none"})]}),(0,r.jsx)("div",{className:"mt-4 flex items-center justify-between gap-3 px-1",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.A,{className:"w-3.5 h-3.5 text-amber-500"}),(0,r.jsx)("span",{className:"text-[10px] font-medium text-gray-500 dark:text-gray-400",children:"Ensure phone numbers include country codes for best results."})]})})]})]}),(0,r.jsxs)("div",{className:"pt-6 mt-auto border-t border-gray-100 dark:border-white/5 flex items-center justify-between animate-in slide-in-from-bottom-2 duration-700 delay-100",children:[(0,r.jsx)(i.$,{variant:"ghost",onClick:()=>F(e=>({...e,stage:"UPLOAD"})),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white font-semibold text-xs uppercase tracking-wide px-4 rounded-xl hover:bg-gray-50 dark:hover:bg-white/5 transition-all",children:"Back"}),(0,r.jsx)(i.$,{onClick:()=>em(!1),disabled:J,className:(0,p.cn)("rounded-xl h-11 px-8 text-sm font-bold shadow-xl transition-all hover:-translate-y-0.5 active:translate-y-0",J?"bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-white/10":"bg-indigo-600 hover:bg-indigo-500 text-white shadow-indigo-500/25 ring-4 ring-indigo-500/10"),children:(0,r.jsx)("span",{className:"flex items-center gap-2",children:J?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.A,{className:"w-4 h-4 animate-spin"}),(0,r.jsx)("span",{children:"Processing Data..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"edit"===_||$?"Update Leads":"Create Intelligence Batch"}),(0,r.jsx)(m.A,{className:"w-4 h-4 opacity-70"})]})})})]})]}),"UPLOADING"===G&&(0,r.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center animate-in fade-in duration-500 w-full",children:(0,r.jsx)(P,{data:W,mapping:Y})}),"ERROR"===G&&(0,r.jsxs)(z.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex-1 flex flex-col items-center justify-center p-8 space-y-6 text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center text-red-500 mb-2",children:(0,r.jsx)(g.A,{className:"w-10 h-10"})}),(0,r.jsxs)("div",{className:"space-y-2 max-w-md",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null==K?void 0:K.title)||"Upload Failed"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:(null==K?void 0:K.message)||"Something went wrong while uploading your file. Please try again."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 pt-4",children:[(0,r.jsx)(i.$,{variant:"ghost",onClick:()=>F(e=>({...e,stage:"MAPPING"})),className:"rounded-xl",children:"Back to Mapping"}),(0,r.jsxs)(i.$,{onClick:()=>em(!1),className:"bg-red-500 hover:bg-red-600 text-white rounded-xl px-6 gap-2",children:[(0,r.jsx)(u.A,{className:"w-4 h-4"}),"Try Again"]})]})]}),"DONE"===G&&(0,r.jsxs)(z.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex-1 flex flex-col items-center justify-center space-y-8",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-emerald-500/20 blur-2xl rounded-full animate-pulse"}),(0,r.jsx)("div",{className:"relative w-24 h-24 rounded-full bg-emerald-500/10 flex items-center justify-center text-emerald-500 border border-emerald-500/20 shadow-xl shadow-emerald-500/10",children:(0,r.jsx)(h.A,{className:"w-12 h-12"})})]}),(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("h3",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-b from-gray-900 to-gray-600 dark:from-white dark:to-gray-400",children:"edit"===_?"Leads Updated":"Batch Created"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 max-w-sm mx-auto leading-relaxed",children:"edit"===_?(0,r.jsxs)(r.Fragment,{children:[W.length," customer records have been successfully updated."]}):(0,r.jsxs)(r.Fragment,{children:[W.length," customers have been successfully added. You can now use this dataset for high-intent interviews."]})})]}),(0,r.jsx)("div",{className:"flex gap-4",children:"edit"===_?(0,r.jsx)(i.$,{onClick:()=>{I?I():window.location.reload()},className:"rounded-2xl h-12 px-8 bg-zinc-900 hover:bg-zinc-800 text-white shadow-xl shadow-indigo-500/10",children:"Return to Campaign"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.$,{variant:"outline",onClick:eg,className:"rounded-2xl h-12 px-8 border-gray-200 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/5",children:"Upload Another"}),(0,r.jsx)(i.$,{onClick:()=>{eg(),setTimeout(()=>{let e=document.getElementById("latest-campaigns");if(e){let t=e.getBoundingClientRect().top+window.pageYOffset+-80;window.scrollTo({top:t,behavior:"smooth"})}},100)},className:"rounded-2xl h-12 px-8 bg-emerald-500 hover:bg-emerald-600 text-white shadow-xl shadow-emerald-500/20 font-bold",children:"View Campaigns"})]})})]}),(0,r.jsx)(k.Lt,{open:er,onOpenChange:en,children:(0,r.jsxs)(k.EO,{className:"bg-white/90 dark:bg-zinc-900/90 backdrop-blur-xl border-gray-100 dark:border-white/10 rounded-[2rem] shadow-2xl",children:[(0,r.jsxs)(k.wd,{children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-orange-500/10 flex items-center justify-center text-orange-500 mb-4",children:(0,r.jsx)(d.A,{className:"w-6 h-6"})}),(0,r.jsx)(k.r7,{className:"text-xl font-extrabold dark:text-white",children:"Duplicate Data Detected"}),(0,r.jsx)(k.$v,{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"This customer data looks identical to a previous upload."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-white/5 rounded-2xl p-4 border border-gray-100 dark:border-white/10 space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:(null==es?void 0:es.name)||"Unknown Campaign"})]}),(0,r.jsxs)("div",{className:"pl-4 text-sm flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[(0,r.jsx)("span",{className:"text-gray-900 dark:text-gray-100 font-semibold italic",children:(null==es?void 0:es.date)&&(0,p.fw)(es.date)}),(0,r.jsx)("span",{className:"hidden sm:inline text-gray-300 dark:text-gray-600",children:"•"}),(0,r.jsx)("span",{className:"text-gray-400",children:(null==es?void 0:es.date)&&(0,p.Pf)(es.date)})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Would you like to edit the existing campaign or create a new one?"})]}),(0,r.jsxs)(k.ck,{className:"mt-6 gap-3",children:[(0,r.jsx)(k.Zr,{onClick:()=>en(!1),className:"rounded-xl border-none bg-gray-100 dark:bg-white/5 hover:bg-gray-200 dark:hover:bg-white/10",children:"Cancel"}),(0,r.jsx)(i.$,{variant:"outline",onClick:()=>{en(!1),ei(null),em(!0)},className:"rounded-xl border-gray-200 dark:border-white/10 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-300 font-semibold",children:"Create New"}),(0,r.jsx)(i.$,{onClick:()=>{es&&(F(e=>({...e,campaignId:es.id,stage:"ORCHESTRATION"})),en(!1),ei(null))},className:"rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-bold shadow-lg shadow-indigo-500/20",children:"Edit Existing Campaign"})]})]})}),(0,r.jsx)(R.f,{isOpen:et,onClose:()=>ea(!1),onConfirm:()=>{ea(!1),a?a():eg()},title:"Discard Upload?",description:"You have pending customer data. If you leave now, you'll need to re-upload and map the file."})]})]})}},12947:(e,t,a)=>{"use strict";a.d(t,{x:()=>R});var r=a(95155),n=a(12115),s=a(71226),i=a(93518),o=a(46967),l=a(98867),c=a(99053),d=a(66889),x=a(32423),m=a(19993),g=a(30113),u=a(27424),h=a(2079),p=a(95370),b=a(15607),f=a(93828),v=a(14047),w=a(60866),y=a(68158),N=a(50359),j=a(20111),k=a(52274),z=a(76964),C=a(17778),_=a(29602),A=a(14085),I=a(51124);function S(e){let{value:t,onChange:a}=e,l=(()=>{if(!t||""===t.trim())return new Date;try{let e=(0,g.H)(t);return isNaN(e.getTime())?new Date:e}catch(e){return new Date}})(),[c,d]=(0,n.useState)(l),x=(0,u.w)(c),m=(0,h.p)(x),I=(0,p.k)(x),S=(0,b.$)(m),T=(0,f.k)({start:I,end:S}),E=()=>d((0,v.P)(c,1)),P=()=>d((0,w.a)(c,1));return(0,r.jsxs)("div",{className:"w-72 select-none",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6 px-1",children:[(0,r.jsx)("h3",{className:"font-black text-base dark:text-white tracking-tight",children:(0,y.GP)(c,"MMMM yyyy")}),(0,r.jsxs)("div",{className:"flex gap-1.5",children:[(0,r.jsx)(A.$,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",onClick:e=>{e.stopPropagation(),P()},children:(0,r.jsx)(i.A,{className:"w-4 h-4"})}),(0,r.jsx)(A.$,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",onClick:e=>{e.stopPropagation(),E()},children:(0,r.jsx)(o.A,{className:"w-4 h-4"})})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-7 mb-3",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map((e,t)=>(0,r.jsx)("div",{className:"text-[10px] font-black text-zinc-400 text-center uppercase tracking-widest",children:e},"".concat(e,"-").concat(t)))}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1.5",children:T.map((e,t)=>{let n=(0,N.r)(e,l),i=(0,j.t)(e,x),o=(0,k.Y)((0,z.o)(e),(0,z.o)(new Date));return(0,r.jsxs)(s.P.button,{whileHover:o?{}:{scale:1.1,y:-1},whileTap:o?{}:{scale:.95},onClick:()=>!o&&a((0,y.GP)(e,"yyyy-MM-dd")),disabled:o,className:(0,_.cn)("h-9 w-9 rounded-[14px] text-xs font-bold transition-all relative flex items-center justify-center border-2 border-transparent",o?"text-zinc-200 dark:text-zinc-800 cursor-not-allowed opacity-30":n?"bg-orange-600 text-white shadow-lg shadow-orange-500/40 border-orange-400/20":i?"text-zinc-700 dark:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800 hover:border-zinc-200 dark:hover:border-zinc-700":"text-zinc-300 dark:text-zinc-600",(0,C.c)(e)&&!n&&!o&&"border-orange-200 dark:border-orange-900/50 text-orange-600 dark:text-orange-400"),children:[(0,y.GP)(e,"d"),(0,C.c)(e)&&!n&&(0,r.jsx)("div",{className:"absolute bottom-1 w-1 h-1 bg-orange-500 rounded-full"})]},t)})})]})}function T(e){let{startValue:t,endValue:a,onSave:s,selectedDate:i}=e,[o,d]=(0,n.useState)(t),[x,m]=(0,n.useState)(a),[u,h]=o.split(":"),[p,b]=x.split(":"),f=n.useRef(null),v=n.useRef(null),w=Array.from({length:24},(e,t)=>t.toString().padStart(2,"0")),y=["00","15","30","45"];n.useEffect(()=>{let e=(e,t)=>{if(e.current){let a=e.current.querySelector('[data-hour="'.concat(t,'"]'));a&&a.scrollIntoView({block:"center",behavior:"smooth"})}},t=setTimeout(()=>{e(f,u),e(v,p)},100);return()=>clearTimeout(t)},[u,p]);let N=!!i&&(0,C.c)((0,g.H)(i)),j=new Date,k=j.getHours(),z=j.getMinutes(),I=(e,t)=>{if(!N)return!1;let a=parseInt(e),r=parseInt(t);return a<k||a===k&&z-r>15};return(0,r.jsxs)("div",{className:"w-auto p-1",children:[(0,r.jsxs)("div",{className:"flex gap-6",children:[(0,r.jsxs)("div",{className:"w-52",children:[(0,r.jsx)("div",{className:"mb-4 px-2",children:(0,r.jsx)("p",{className:"text-[10px] font-black text-orange-500 uppercase tracking-[0.2em]",children:"Start Time"})}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("div",{ref:f,className:"flex-1 space-y-1.5 max-h-56 overflow-y-auto pr-1 custom-scrollbar scrollbar-hide scroll-smooth",children:w.map(e=>{let t=parseInt(e)<k&&N,a=e===u;return(0,r.jsxs)("button",{"data-hour":e,onClick:()=>{if(!t){let t="".concat(e,":").concat(h);d(t);let a=E(t);a>=E(x)&&m(P(Math.min(a+60,1425)))}},disabled:t,className:(0,_.cn)("w-full py-2.5 px-3 rounded-xl text-sm font-bold transition-all text-left flex items-center justify-between group/hour",t?"opacity-30 cursor-not-allowed text-zinc-300 dark:text-zinc-700":a?"bg-orange-600 text-white shadow-lg shadow-orange-500/30":"hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-600 dark:text-zinc-400",parseInt(e)===k&&N&&!a&&"ring-1 ring-inset ring-orange-500/20 bg-orange-50/10"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:(0,_.cn)(a?"scale-110":"group-hover/hour:translate-x-0.5 transition-transform"),children:e}),parseInt(e)===k&&N&&(0,r.jsx)("span",{className:"text-[7px] font-black uppercase tracking-widest text-orange-500/60",children:"Now"})]}),a&&!t&&(0,r.jsx)(l.A,{className:"w-3.5 h-3.5"})]},e)})}),(0,r.jsx)("div",{className:"w-20 space-y-1.5",children:y.map(e=>{let t=I(u,e),a=e===h;return(0,r.jsx)("button",{onClick:()=>{if(!t){let t="".concat(u,":").concat(e);d(t);let a=E(t);a>=E(x)&&m(P(Math.min(a+60,1425)))}},disabled:t,className:(0,_.cn)("w-full py-2.5 px-3 rounded-xl text-sm font-black transition-all text-center border-2 border-transparent",t?"opacity-30 cursor-not-allowed text-zinc-300 dark:text-zinc-700":a?"bg-orange-500 text-white shadow-lg shadow-orange-500/30 border-orange-400/20":"bg-orange-50/50 dark:bg-orange-950/20 hover:bg-orange-100 dark:hover:bg-orange-900/40 text-orange-600 dark:text-orange-400"),children:e},e)})})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,r.jsx)("div",{className:"h-full w-px bg-gradient-to-b from-transparent via-zinc-200 dark:via-zinc-700 to-transparent"}),(0,r.jsx)(c.A,{className:"w-4 h-4 text-zinc-300 dark:text-zinc-600 my-2"}),(0,r.jsx)("div",{className:"h-full w-px bg-gradient-to-b from-transparent via-zinc-200 dark:via-zinc-700 to-transparent"})]}),(0,r.jsxs)("div",{className:"w-52",children:[(0,r.jsx)("div",{className:"mb-4 px-2",children:(0,r.jsx)("p",{className:"text-[10px] font-black text-orange-500 uppercase tracking-[0.2em]",children:"End Time"})}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("div",{ref:v,className:"flex-1 space-y-1.5 max-h-56 overflow-y-auto pr-1 custom-scrollbar scrollbar-hide scroll-smooth",children:w.map(e=>{let t=parseInt(e)<k&&N,a=e===p;return(0,r.jsxs)("button",{"data-hour":e,onClick:()=>{if(!t){let t="".concat(e,":").concat(b);m(t);let a=E(t);a<=E(o)&&d(P(Math.max(a-60,0)))}},disabled:t,className:(0,_.cn)("w-full py-2.5 px-3 rounded-xl text-sm font-bold transition-all text-left flex items-center justify-between group/hour",t?"opacity-30 cursor-not-allowed text-zinc-300 dark:text-zinc-700":a?"bg-orange-600 text-white shadow-lg shadow-orange-500/30":"hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-600 dark:text-zinc-400",parseInt(e)===k&&N&&!a&&"ring-1 ring-inset ring-orange-500/20 bg-orange-50/10"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:(0,_.cn)(a?"scale-110":"group-hover/hour:translate-x-0.5 transition-transform"),children:e}),parseInt(e)===k&&N&&(0,r.jsx)("span",{className:"text-[7px] font-black uppercase tracking-widest text-orange-500/60",children:"Now"})]}),a&&!t&&(0,r.jsx)(l.A,{className:"w-3.5 h-3.5"})]},e)})}),(0,r.jsx)("div",{className:"w-20 space-y-1.5",children:y.map(e=>{let t=I(p,e),a=e===b;return(0,r.jsx)("button",{onClick:()=>{if(!t){let t="".concat(p,":").concat(e);m(t);let a=E(t);a<=E(o)&&d(P(Math.max(a-60,0)))}},disabled:t,className:(0,_.cn)("w-full py-2.5 px-3 rounded-xl text-sm font-black transition-all text-center border-2 border-transparent",t?"opacity-30 cursor-not-allowed text-zinc-300 dark:text-zinc-700":a?"bg-orange-500 text-white shadow-lg shadow-orange-500/30 border-orange-400/20":"bg-orange-50/50 dark:bg-orange-950/20 hover:bg-orange-100 dark:hover:bg-orange-900/40 text-orange-600 dark:text-orange-400"),children:e},e)})})]})]})]}),(0,r.jsx)("div",{className:"mt-6 pt-4 border-t border-zinc-100 dark:border-zinc-800 flex justify-end",children:(0,r.jsxs)(A.$,{onClick:()=>s(o,x),className:"bg-orange-600 hover:bg-orange-700 text-white rounded-2xl px-6 font-bold shadow-lg shadow-orange-500/20 flex items-center gap-2 transition-all active:scale-95",children:[(0,r.jsx)(l.A,{className:"w-4 h-4"}),"Done"]})})]})}let E=e=>{let[t,a]=e.split(":").map(Number);return 60*t+a},P=e=>{let t=Math.floor(e/60);return"".concat(t.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))},R=e=>{let{day:t,start:a,end:i,onChange:o,onDelete:l,allWindows:u,currentIndex:h,customDurationLabel:p,isInvalid:b}=e,[f,v]=(0,n.useState)(!1),w=((e,t,a)=>{if(!u||void 0===h)return!1;let r=E(t),n=E(a);return u.some((t,a)=>{if(a===h||t.day!==e)return!1;let s=E(t.start);return r<E(t.end)&&s<n})})(t,a,i),N=E(i)-E(a),j=(()=>{if(!t||""===t.trim())return"Pick a date";try{let e=(0,g.H)(t);if(isNaN(e.getTime()))return"Pick a date";return(0,y.GP)(e,"EEE, MMM d")}catch(e){return"Pick a date"}})(),k=e=>{try{let[t,a]=e.split(":"),r=parseInt(t);return"".concat(r%12||12,":").concat(a).concat(r>=12?"PM":"AM")}catch(t){return e}};return(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,scale:.98},className:(0,_.cn)("group relative px-2 py-2 rounded-xl border bg-white dark:bg-zinc-900 shadow-sm transition-all duration-300 overflow-hidden",b||w?"border-red-200 dark:border-red-900/50 bg-red-50/20 dark:bg-red-950/10":"border-zinc-100 dark:border-zinc-800 hover:border-zinc-200 dark:hover:border-zinc-700 hover:shadow-md"),children:[b&&(0,r.jsxs)("div",{className:"absolute -top-2 left-4 px-2 py-0.5 bg-red-50 text-red-600 border border-red-100 dark:bg-red-900/30 dark:text-red-300 dark:border-red-800/50 text-[9px] font-bold uppercase tracking-wider rounded-md flex items-center gap-1",children:[(0,r.jsx)(d.A,{className:"w-2.5 h-2.5"}),"<"," 30m"]}),w&&!b&&(0,r.jsx)("div",{className:"absolute -top-2 left-4 px-2 py-0.5 bg-red-50 text-red-600 border border-red-100 dark:bg-red-900/30 dark:text-red-300 dark:border-red-800/50 text-[9px] font-bold uppercase tracking-wider rounded-md",children:"Overlap"}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsxs)(I.AM,{children:[(0,r.jsx)(I.Wv,{asChild:!0,children:(0,r.jsxs)("button",{className:"flex items-center gap-1.5 px-1.5 py-1 rounded-lg hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors outline-none group/date whitespace-nowrap",children:[(0,r.jsx)(x.A,{className:"w-3.5 h-3.5 text-zinc-400 group-hover/date:text-orange-500 transition-colors shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-200 tabular-nums",children:j})]})}),(0,r.jsx)(I.hl,{className:"w-auto p-4 rounded-3xl z-[200] bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 shadow-xl",align:"start",children:(0,r.jsx)(S,{value:t,onChange:e=>o({day:e})})})]}),(0,r.jsxs)("div",{className:"flex-1 flex items-center justify-between min-w-0",children:[(0,r.jsxs)(I.AM,{open:f,onOpenChange:v,children:[(0,r.jsx)(I.Wv,{asChild:!0,children:(0,r.jsxs)("button",{className:"flex items-center bg-zinc-50/50 dark:bg-zinc-800/50 rounded-lg px-1.5 py-1 gap-0.5 border border-zinc-100/50 dark:border-zinc-800/50 overflow-hidden hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-all",children:[(0,r.jsx)("span",{className:"px-1.5 py-0.5 rounded-md text-sm font-semibold text-zinc-700 dark:text-zinc-200 tabular-nums",children:k(a)}),(0,r.jsx)(c.A,{className:"w-3 h-3 text-zinc-300 dark:text-zinc-600 shrink-0"}),(0,r.jsx)("span",{className:"px-1.5 py-0.5 rounded-md text-sm font-semibold text-zinc-700 dark:text-zinc-200 tabular-nums",children:k(i)})]})}),(0,r.jsx)(I.hl,{className:"w-auto p-4 rounded-3xl z-[200] bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 shadow-xl",align:"start",children:(0,r.jsx)(T,{startValue:a,endValue:i,onSave:(e,t)=>{o({start:e,end:t}),v(!1)},selectedDate:t})})]}),(0,r.jsx)("div",{className:(0,_.cn)("px-1.5 py-0.5 rounded-full text-[9px] font-black uppercase tracking-wider hidden md:block ml-1 whitespace-nowrap shrink-0",b?"bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400":"bg-zinc-100/30 text-zinc-400 dark:bg-zinc-800/30 dark:text-zinc-500"),children:p||(e=>{if(e<=0)return"No duration";let t=Math.floor(e/60),a=e%60;return"".concat(t>0?"".concat(t,"h "):"").concat(a>0?"".concat(a,"m"):"").trim()})(N)})]}),(0,r.jsx)(A.$,{size:"icon",variant:"ghost",onClick:l,className:"w-8 h-8 rounded-full text-zinc-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors shrink-0",children:(0,r.jsx)(m.A,{className:"w-4 h-4"})})]})]})}},25858:(e,t,a)=>{"use strict";a.d(t,{$v:()=>p,EO:()=>m,Lt:()=>l,Rx:()=>b,Zr:()=>f,ck:()=>u,r7:()=>h,tv:()=>c,wd:()=>g});var r=a(95155),n=a(12115),s=a(63985),i=a(29602),o=a(14085);let l=s.bL,c=s.l9,d=s.ZL,x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/20 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n,ref:t})});x.displayName=s.hJ.displayName;let m=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(x,{}),(0,r.jsx)(s.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n})]})});m.displayName=s.UC.displayName;let g=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};g.displayName="AlertDialogHeader";let u=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};u.displayName="AlertDialogFooter";let h=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold",a),...n})});h.displayName=s.hE.displayName;let p=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})});p.displayName=s.VY.displayName;let b=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.rc,{ref:t,className:(0,i.cn)((0,o.r)(),a),...n})});b.displayName=s.rc.displayName;let f=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.ZD,{ref:t,className:(0,i.cn)((0,o.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...n})});f.displayName=s.ZD.displayName},63898:(e,t,a)=>{"use strict";a.d(t,{BK:()=>l,eu:()=>o,q5:()=>c});var r=a(95155),n=a(12115),s=a(94752),i=a(29602);let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.bL,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...n})});o.displayName=s.bL.displayName;let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s._V,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",a),...n})});l.displayName=s._V.displayName;let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.H4,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...n})});c.displayName=s.H4.displayName},39286:(e,t,a)=>{"use strict";a.d(t,{E:()=>o});var r=a(95155);a(12115);var n=a(31027),s=a(29602);let i=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)(i({variant:a}),t),...n})}},35007:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>o});var r=a(95155),n=a(12115),s=a(29602);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground",a),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});l.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"},9955:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var r=a(95155),n=a(12115),s=a(29602);let i=n.forwardRef((e,t)=>{let{className:a,type:n,...i}=e;return(0,r.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},15785:(e,t,a)=>{"use strict";a.d(t,{J:()=>c});var r=a(95155),n=a(12115),s=a(24352),i=a(31027),o=a(29602);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.b,{ref:t,className:(0,o.cn)(l(),a),...n})});c.displayName=s.b.displayName},51124:(e,t,a)=>{"use strict";a.d(t,{AM:()=>o,Wv:()=>l,hl:()=>c});var r=a(95155),n=a(12115),s=a(32945),i=a(29602);let o=s.bL,l=s.l9;s.Mz;let c=n.forwardRef((e,t)=>{let{className:a,align:n="center",sideOffset:o=4,...l}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsx)(s.UC,{ref:t,align:n,sideOffset:o,className:(0,i.cn)("z-[100] w-72 rounded-md border bg-white dark:bg-zinc-950 p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",a),...l})})});c.displayName=s.UC.displayName},3392:(e,t,a)=>{"use strict";a.d(t,{F:()=>o});var r=a(95155),n=a(12115),s=a(21868),i=a(29602);let o=n.forwardRef((e,t)=>{let{className:a,children:n,...o}=e;return(0,r.jsxs)(s.bL,{ref:t,className:(0,i.cn)("relative overflow-hidden",a),...o,children:[(0,r.jsx)(s.LM,{className:"h-full w-full rounded-[inherit]",children:n}),(0,r.jsx)(l,{}),(0,r.jsx)(s.OK,{})]})});o.displayName=s.bL.displayName;let l=n.forwardRef((e,t)=>{let{className:a,orientation:n="vertical",...o}=e;return(0,r.jsx)(s.VM,{ref:t,orientation:n,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...o,children:(0,r.jsx)(s.lr,{className:"relative flex-1 rounded-full bg-border"})})});l.displayName=s.VM.displayName},50745:(e,t,a)=>{"use strict";a.d(t,{bq:()=>m,eb:()=>p,gC:()=>h,l6:()=>d,yv:()=>x});var r=a(95155),n=a(12115),s=a(50354),i=a(51719),o=a(91902),l=a(98867),c=a(29602);let d=s.bL;s.YJ;let x=s.WT,m=n.forwardRef((e,t)=>{let{className:a,children:n,...o}=e;return(0,r.jsxs)(s.l9,{ref:t,className:(0,c.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[n,(0,r.jsx)(s.In,{asChild:!0,children:(0,r.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=s.l9.displayName;let g=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})});g.displayName=s.PP.displayName;let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});u.displayName=s.wn.displayName;let h=n.forwardRef((e,t)=>{let{className:a,children:n,position:i="popper",...o}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsxs)(s.UC,{ref:t,className:(0,c.cn)("relative z-[100] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-white dark:bg-zinc-950 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...o,children:[(0,r.jsx)(g,{}),(0,r.jsx)(s.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,r.jsx)(u,{})]})})});h.displayName=s.UC.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.JU,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",a),...n})}).displayName=s.JU.displayName;let p=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,r.jsxs)(s.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.VF,{children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})}),(0,r.jsx)(s.p4,{children:n})]})});p.displayName=s.q7.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=s.wv.displayName},10371:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var r=a(95155),n=a(12115),s=a(29602);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});i.displayName="Textarea"},9246:(e,t,a)=>{"use strict";a.d(t,{Bc:()=>c,ZI:()=>m,k$:()=>x,m_:()=>d});var r=a(95155),n=a(12115),s=a(47650),i=a(28633),o=a(71226);let l=n.createContext(null),c=e=>{let{children:t,delayDuration:a=200}=e;return(0,r.jsx)(r.Fragment,{children:t})},d=e=>{let{children:t}=e,[a,s]=n.useState(!1),i=n.useRef(null);return(0,r.jsx)(l.Provider,{value:{isOpen:a,setIsOpen:s,triggerRef:i},children:(0,r.jsx)("div",{className:"relative inline-block",onMouseLeave:()=>s(!1),children:t})})},x=e=>{let{children:t,asChild:a=!1}=e,s=n.useContext(l);if(!s)throw Error("TooltipTrigger must be used within a Tooltip");let i=n.Children.only(t);return n.isValidElement(i)?n.cloneElement(i,{ref:e=>{s.triggerRef.current=e;let{ref:t}=i;"function"==typeof t?t(e):t&&(t.current=e)},onMouseEnter:e=>{var t,a;s.setIsOpen(!0),null===(t=(a=i.props).onMouseEnter)||void 0===t||t.call(a,e)},onFocus:e=>{var t,a;s.setIsOpen(!0),null===(t=(a=i.props).onFocus)||void 0===t||t.call(a,e)},onBlur:e=>{var t,a;s.setIsOpen(!1),null===(t=(a=i.props).onBlur)||void 0===t||t.call(a,e)}}):(0,r.jsx)("span",{ref:s.triggerRef,onMouseEnter:()=>s.setIsOpen(!0),children:t})},m=e=>{let{children:t,className:a="",side:c="top"}=e,d=n.useContext(l);if(!d)throw Error("TooltipContent must be used within a Tooltip");let[x,m]=n.useState({top:0,left:0});if(n.useEffect(()=>{if(d.isOpen&&d.triggerRef.current){let e=d.triggerRef.current.getBoundingClientRect(),t=0,a=0;switch(c){case"top":t=e.top-8,a=e.left+e.width/2;break;case"bottom":t=e.bottom+8,a=e.left+e.width/2;break;case"left":t=e.top+e.height/2,a=e.left-8;break;case"right":t=e.top+e.height/2,a=e.right+8}m({top:t,left:a})}},[d.isOpen,c]),!d.isOpen)return null;let g={opacity:0,scale:.9},u="-50%",h="-100%";"bottom"===c&&(h="0%"),"left"===c&&(u="-100%",h="-50%"),"right"===c&&(u="0%",h="-50%");let p=(0,r.jsx)(i.N,{children:(0,r.jsx)(o.P.div,{initial:g,animate:{opacity:1,scale:1},exit:g,transition:{duration:.15},className:"fixed z-50 overflow-hidden rounded-md bg-white dark:bg-zinc-900 px-3 py-1.5 text-xs text-zinc-950 dark:text-zinc-50 shadow-md border border-zinc-200 dark:border-zinc-800 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ".concat(a),style:{top:x.top,left:x.left,transform:"translate(".concat(u,", ").concat(h,")")},children:t})});return"undefined"==typeof document?null:(0,s.createPortal)(p,document.body)}},39196:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(35901);let n=()=>(0,r.A)()},41498:(e,t,a)=>{"use strict";a.d(t,{T:()=>s});var r=a(12115),n=a(39196);function s(e){let{user:t}=(0,n.A)(),[a,s]=(0,r.useState)(null),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[d,x]=(0,r.useState)(null),m=(0,r.useRef)(null),g=(0,r.useRef)(null),u=(0,r.useRef)(0),h=(0,r.useRef)(1e3),p=(0,r.useRef)(null),b=(0,r.useRef)(!0),f=(0,r.useCallback)(()=>{p.current&&(clearInterval(p.current),p.current=null),g.current&&(clearTimeout(g.current),g.current=null),m.current&&(m.current.close(),m.current=null),o(!1),c(!1)},[]),v=(0,r.useCallback)(async()=>{var a,r;if(e&&t&&b.current&&(null===(a=m.current)||void 0===a?void 0:a.readyState)!==WebSocket.OPEN&&(null===(r=m.current)||void 0===r?void 0:r.readyState)!==WebSocket.CONNECTING){f(),c(!0),x(null);try{let a="https:"===window.location.protocol?"wss:":"ws:",r="localhost:3000"===window.location.host?"localhost:8000":window.location.host,n=await t.getIdToken(),i="".concat(a,"//").concat(r,"/api/v1/execution/campaign/").concat(e,"/ws?token=").concat(n);console.log("[WebSocket] Connecting to:",i);let l=new WebSocket(i);m.current=l,l.onopen=()=>{console.log("[WebSocket] Connected"),o(!0),c(!1),x(null),u.current=0,h.current=1e3,p.current=setInterval(()=>{l.readyState===WebSocket.OPEN&&l.send("ping")},1e4)},l.onmessage=e=>{try{let a=JSON.parse(e.data);switch(a.type){case"connected":console.log("[WebSocket] Connection confirmed:",a.message);break;case"status_update":a.data&&s(e=>{let t=a.data;return e&&JSON.stringify(e)===JSON.stringify(t)?e:((null==e?void 0:e.campaign_status)!==(null==t?void 0:t.campaign_status)&&console.log("[WebSocket] Campaign status changed to: ".concat(null==t?void 0:t.campaign_status)),t||null)});break;case"agents_update":a.agents&&s(e=>e?{...e,agents:a.agents||[]}:null);break;case"new_event":console.log("[WebSocket] New event:",a.event);break;case"user_queue_update":var t;(null===(t=a.data)||void 0===t?void 0:t.user_queue)&&s(e=>{var t;return e?{...e,user_queue:null===(t=a.data)||void 0===t?void 0:t.user_queue}:null});break;case"item_locked_update":console.log("[WebSocket] Item locked/unlocked:",a.message);break;case"pong":break;default:console.log("[WebSocket] Unknown message type:",a.type)}}catch(e){console.error("[WebSocket] Error parsing message:",e)}},l.onerror=e=>{console.error("[WebSocket] Error:",e),x(Error("WebSocket connection error"))},l.onclose=e=>{if(console.log("[WebSocket] Disconnected:",e.code,e.reason),o(!1),c(!1),p.current&&(clearInterval(p.current),p.current=null),4001===e.code){x(Error("Authentication failed: ".concat(e.reason)));return}if(b.current&&u.current<5){u.current++;let e=Math.min(h.current*Math.pow(2,u.current-1),3e4);console.log("[WebSocket] Reconnecting in ".concat(e,"ms (attempt ").concat(u.current,"/").concat(5,")")),g.current=setTimeout(()=>{v()},e)}else u.current>=5&&x(Error("Max reconnection attempts reached"))}}catch(e){console.error("[WebSocket] Connection error:",e),x(e),c(!1)}}},[e,t,f]),w=(0,r.useCallback)(()=>{u.current=0,h.current=1e3,v()},[v]);return(0,r.useEffect)(()=>(b.current=!0,v(),()=>{b.current=!1,f()}),[v,f]),{data:a,isConnected:i,isConnecting:l,error:d,reconnect:w}}},48048:(e,t,a)=>{"use strict";a.d(t,{X:()=>n});let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=0;for(let t=0;t<e.length;t++)a=(a<<5)-a+e.charCodeAt(t),a&=a;return Math.abs(a)%t+1},n=e=>{let t=[...e].sort(),a={},n=new Set;return t.forEach(e=>{let t=r(e,50),s=0;for(;n.has(t)&&s<50;)t=t%50+1,s++;n.add(t),a[e]=t}),a}},8807:(e,t,a)=>{"use strict";a.d(t,{$:()=>r});let r={IS_MAGIC_AI_ENABLED:!1}}}]);