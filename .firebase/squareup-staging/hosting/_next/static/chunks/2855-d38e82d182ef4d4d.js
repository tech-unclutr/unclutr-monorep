"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2855],{82855:(e,t,a)=>{a.d(t,{c:()=>x});var n=a(95155),s=a(12115),r=a(76046),i=a(71226),l=a(28633),o=(a(87364),a(14085)),c=a(14366),d=a(14505),m=a(62970);function u(e){let{isSaving:t,lastSavedAt:a}=e,[r,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(!t&&a){i(!0);let e=setTimeout(()=>i(!1),3e3);return()=>clearTimeout(e)}},[t,a]),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/50 border border-transparent transition-all duration-300",children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.A,{size:14,className:"animate-spin text-orange-600"}),(0,n.jsx)("span",{className:"text-xs font-medium text-orange-600",children:"Auto saving..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.A,{size:14,className:"text-zinc-400"}),(0,n.jsx)("span",{className:"text-xs font-medium text-zinc-500",children:"Auto saved"})]})})})}function x(e){let{children:t,title:a,subtitle:s,onNext:d,nextDisabled:m=!1,showFooter:x=!0,privacyNote:g,nextLabel:h="Continue",showSkip:f=!1,onSkip:p,maxWidth:b="max-w-3xl",titleAlign:v="left",tightHeader:y=!1}=e,N=(0,r.usePathname)(),{isSaving:w,saveAndExit:k,lastSavedAt:j}=((0,r.useRouter)(),(0,c.z)());return(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-zinc-50 via-white to-orange-50/20 text-zinc-900 flex flex-col font-sans selection:bg-orange-100 selection:text-orange-900 overflow-x-hidden relative",children:[(0,n.jsxs)("div",{className:"fixed inset-0 z-0 pointer-events-none overflow-hidden opacity-30",children:[(0,n.jsx)("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-gradient-to-br from-orange-100 to-transparent rounded-full blur-3xl"}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-gradient-to-tr from-orange-50 to-transparent rounded-full blur-3xl"})]}),(0,n.jsxs)("nav",{className:"h-16 px-6 md:px-12 flex items-center justify-between sticky top-0 bg-white/80 backdrop-blur-xl z-50 border-b border-zinc-100",children:[(0,n.jsxs)("div",{className:"flex items-center gap-6",children:[!1,(0,n.jsxs)(i.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-center gap-2.5",children:[(0,n.jsx)("div",{className:"relative w-8 h-8 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg shadow-lg shadow-orange-500/20 flex items-center justify-center border border-white/20",children:(0,n.jsx)("div",{className:"w-3.5 h-3.5 bg-white rounded-[2px] shadow-sm"})}),(0,n.jsxs)("span",{className:"font-bold text-xl tracking-tighter text-zinc-900",children:["Square",(0,n.jsx)("span",{className:"text-zinc-500 font-medium",children:"Up.ai"})]})]})]}),(0,n.jsx)(u,{isSaving:w,lastSavedAt:j})]}),(0,n.jsx)("main",{className:"flex-1 flex flex-col items-center w-full relative z-10 pb-0",children:(0,n.jsx)("div",{className:"w-full ".concat(b," px-6 py-4 md:py-6 flex flex-col"),children:(0,n.jsx)(l.N,{mode:"wait",children:(0,n.jsxs)(i.P.div,{initial:{opacity:0,y:20,filter:"blur(10px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},exit:{opacity:0,y:-20,filter:"blur(10px)"},transition:{duration:.7,ease:[.22,1,.36,1]},className:"flex flex-col",children:[(a||s)&&(0,n.jsxs)("div",{className:"".concat(y?"mb-2":"mb-6"," text-center md:text-").concat(v),children:[a&&(0,n.jsx)(i.P.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.8},className:"text-3xl md:text-4xl font-semibold tracking-tighter mb-2 text-zinc-900",children:a}),s&&(0,n.jsx)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.8},className:"text-base md:text-lg text-zinc-500 leading-relaxed max-w-xl font-light ".concat("center"===v?"mx-auto":""),children:s}),g&&(0,n.jsx)("p",{className:"text-xs text-zinc-400 mt-2 font-medium bg-zinc-50/50 backdrop-blur-sm inline-block px-3 py-1 rounded-lg border border-zinc-100",children:g})]}),t]},N)})})}),x&&d&&(0,n.jsxs)("div",{className:"fixed bottom-0 left-0 w-full bg-white/90 backdrop-blur-xl border-t border-zinc-100 py-5 px-6 md:px-12 z-40 flex items-center justify-between md:justify-end",children:[(0,n.jsxs)("div",{className:"hidden md:flex items-center gap-3 text-xs text-zinc-400 font-medium mr-8",children:[(0,n.jsxs)("span",{className:"bg-zinc-100/80 border border-zinc-200 rounded-md px-2 py-1 flex items-center shadow-sm",children:[(0,n.jsx)("span",{className:"text-[10px] mr-1",children:"Enter"}),(0,n.jsx)("span",{className:"text-sm",children:"â†µ"})]}),(0,n.jsx)("span",{children:"to continue"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[f&&p&&(0,n.jsx)(o.$,{variant:"ghost",onClick:p,disabled:w,className:"text-zinc-400 hover:text-zinc-600 hover:bg-zinc-50/50 transition-all disabled:opacity-50",children:w?"Saving...":"Skip for now"}),(0,n.jsx)(i.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 md:flex-none",children:(0,n.jsxs)(o.$,{onClick:d,disabled:m,size:"lg",className:"w-full md:w-auto text-base px-8 h-12 rounded-lg bg-orange-600 hover:bg-orange-700 text-white shadow-lg shadow-orange-500/20 hover:shadow-xl hover:shadow-orange-500/30 transition-all duration-300 disabled:opacity-40 disabled:scale-100 disabled:cursor-not-allowed group relative overflow-hidden",children:[(0,n.jsx)("span",{className:"relative z-10",children:h}),(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})})]})]})]})}},70071:(e,t,a)=>{a.d(t,{o:()=>s});var n=a(12115);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,[a,s]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}},14366:(e,t,a)=>{a.d(t,{X:()=>u,z:()=>x});var n=a(95155),s=a(12115),r=a(25739),i=a(41082),l=a(35901),o=a(76046),c=a(70071);let d={companyName:"",brandName:"",category:"",region:{country:"",currency:"",timezone:""},channels:{d2c:[],marketplaces:[],qcom:[],others:[]},primaryPartners:{marketplaces:[],qcom:[]},stack:{orders:[],payments:[],shipping:[],payouts:[],marketing:[],analytics:[],finance:[]},integrationRequestsDraft:[]},m=(0,s.createContext)(void 0);function u(e){let{children:t}=e,[a,u]=(0,s.useState)(d),[x,g]=(0,s.useState)(!1),[h,f]=(0,s.useState)(null),p=(0,c.o)(a,1e3),b=(0,s.useRef)(!0),v=(0,s.useRef)(JSON.stringify(d));(0,s.useEffect)(()=>{if(b.current){b.current=!1;return}let e=JSON.stringify(p);e!==v.current&&(k(void 0,!0).catch(e=>console.warn("Auto-save failed",e)),v.current=e)},[p]);let{user:y,skipOnboardingSession:N}=(0,l.A)(),w=(0,o.useRouter)();(0,s.useEffect)(()=>{let e=localStorage.getItem("unclutr_onboarding_draft");if(e)try{let t=JSON.parse(e);u(e=>({...e,...t,region:t.region||e.region}))}catch(e){console.error("Failed to parse saved onboarding state",e)}(async()=>{if(y)try{let c=await r.F.get("/onboarding/state");if(c){if(console.log("DEBUG: Backend Raw Response:",c),c.basics_data&&(c.basics_data.companyName||c.basics_data.brandName)||c.is_completed){var e,t,a,n,s,i,l,o;let r={companyName:(null===(e=c.basics_data)||void 0===e?void 0:e.companyName)||"",brandName:(null===(t=c.basics_data)||void 0===t?void 0:t.brandName)||"",category:(null===(a=c.basics_data)||void 0===a?void 0:a.category)||"",region:(null===(n=c.basics_data)||void 0===n?void 0:n.region)||d.region,channels:(null===(s=c.channels_data)||void 0===s?void 0:s.channels)||c.channels_data||d.channels,primaryPartners:(null===(i=c.channels_data)||void 0===i?void 0:i.primaryPartners)||d.primaryPartners,stack:(null===(l=c.stack_data)||void 0===l?void 0:l.stack)||c.stack_data||d.stack,integrationRequestsDraft:(null===(o=c.finish_data)||void 0===o?void 0:o.integrationRequestsDraft)||[]};u(e=>({...e,...r})),console.log("Hydrated from backend:",r)}else console.log("Backend state is empty, keeping local draft.")}}catch(e){console.warn("No existing onboarding state found or fetch failed",e)}})()},[y]);let k=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||g(!0),g(!0);try{let t=window.location.pathname,n=e||"basics";if(!e&&(t.includes("/channels")?n="channels":t.includes("/stack")?n="stack":t.includes("/finish")&&(n="finish")),console.log("Saving to backend...",{page:n,state:a}),!["basics","channels","stack","finish"].includes(n)){console.warn("Attempting to save on invalid page:",n),g(!1);return}let s={};"basics"===n?s={companyName:a.companyName,brandName:a.brandName,category:a.category,region:a.region}:"channels"===n?s={selectedChannels:[...a.channels.d2c||[],...a.channels.marketplaces||[],...a.channels.qcom||[],...a.channels.others||[]],channels:a.channels,primaryPartners:a.primaryPartners}:"stack"===n&&(s={selectedTools:[...a.stack.orders||[],...a.stack.payments||[],...a.stack.shipping||[],...a.stack.payouts||[],...a.stack.marketing||[],...a.stack.analytics||[],...a.stack.finance||[]],stack:a.stack}),await i.S.onboarding.saveProgressApiV1OnboardingSavePost({requestBody:{page:n,data:s}}),f(new Date),g(!1)}catch(e){throw console.error("Failed to save state:",e),g(!1),e}},j=async()=>{try{await k(),N(),w.push("/dashboard")}catch(e){alert("Failed to save progress. Please check connection.")}};return(0,n.jsx)(m.Provider,{value:{state:a,updateState:e=>{u(t=>{let a={...t,...e};return localStorage.setItem("unclutr_onboarding_draft",JSON.stringify(a)),a})},updateChannels:e=>{u(t=>{let a={...t,channels:{...t.channels,...e}};return localStorage.setItem("unclutr_onboarding_draft",JSON.stringify(a)),a})},updatePrimaryPartners:e=>{u(t=>{let a={...t,primaryPartners:{...t.primaryPartners,...e}};return localStorage.setItem("unclutr_onboarding_draft",JSON.stringify(a)),a})},updateStack:e=>{u(t=>{let a={...t,stack:{...t.stack,...e}};return localStorage.setItem("unclutr_onboarding_draft",JSON.stringify(a)),a})},addIntegrationRequest:(e,t)=>{u(a=>{let n={...a,integrationRequestsDraft:[...a.integrationRequestsDraft,{term:e,context:t}]};return localStorage.setItem("unclutr_onboarding_draft",JSON.stringify(n)),n})},saveAndExit:j,saveCurrentPage:k,isSaving:x,lastSavedAt:h},children:t})}function x(){let e=(0,s.useContext)(m);if(void 0===e)throw Error("useOnboarding must be used within an OnboardingProvider");return e}}}]);