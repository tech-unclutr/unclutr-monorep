(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25652,e=>{"use strict";let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},5387,e=>{"use strict";let t=e.i(59411).Root;e.s(["VisuallyHidden",()=>t])},21218,e=>{"use strict";let t=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>t],21218)},30374,e=>{"use strict";var t=e.i(43476),i=e.i(71645),r=e.i(26999),a=e.i(37727),n=e.i(47163);let s=r.Root;r.Trigger;let o=r.Portal;r.Close;let l=i.forwardRef(({className:e,...i},a)=>(0,t.jsx)(r.Overlay,{ref:a,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...i}));l.displayName=r.Overlay.displayName;let c=i.forwardRef(({className:e,children:i,...s},c)=>(0,t.jsxs)(o,{children:[(0,t.jsx)(l,{}),(0,t.jsxs)(r.Content,{ref:c,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[i,(0,t.jsxs)(r.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(a.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));c.displayName=r.Content.displayName;let d=({className:e,...i})=>(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...i});d.displayName="DialogHeader";let m=i.forwardRef(({className:e,...i},a)=>(0,t.jsx)(r.Title,{ref:a,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...i}));m.displayName=r.Title.displayName;let h=i.forwardRef(({className:e,...i},a)=>(0,t.jsx)(r.Description,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...i}));h.displayName=r.Description.displayName,e.s(["Dialog",()=>s,"DialogContent",()=>c,"DialogDescription",()=>h,"DialogHeader",()=>d,"DialogTitle",()=>m])},43432,e=>{"use strict";let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],43432)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},87951,e=>{"use strict";let t=(0,e.i(75254).default)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]);e.s(["Mic",()=>t],87951)},5257,e=>{"use strict";let t=(0,e.i(75254).default)("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);e.s(["Headphones",()=>t],5257)},51898,e=>{"use strict";let t=(0,e.i(75254).default)("phone-incoming",[["path",{d:"M16 2v6h6",key:"1mfrl5"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["PhoneIncoming",()=>t],51898)},18724,e=>{"use strict";let t=(0,e.i(75254).default)("phone-call",[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["PhoneCall",()=>t],18724)},68054,e=>{"use strict";let t=(0,e.i(75254).default)("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]);e.s(["Terminal",()=>t],68054)},90919,e=>{"use strict";var t=e.i(43476),i=e.i(71645),r=e.i(30374),a=e.i(94179),n=e.i(67881),s=e.i(70065),o=e.i(37727),l=e.i(3116),c=e.i(87316),d=e.i(43432),m=e.i(78583),h=e.i(87951),u=e.i(5257),x=e.i(78894),g=e.i(31343),p=e.i(95242),b=e.i(40160),f=e.i(95468),v=e.i(73884),w=e.i(51898),z=e.i(18724),y=e.i(64659),k=e.i(55900),N=e.i(68054),_=e.i(58041),j=e.i(63209),C=e.i(47163),S=e.i(5387),E=e.i(1851),I=e.i(54858);let T={INTENT_YES:{color:"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20",Icon:f.CheckCircle2},INTERESTED:{color:"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20",Icon:f.CheckCircle2},NOT_INTERESTED:{color:"bg-orange-500/10 text-orange-600 dark:text-orange-400 border-orange-500/20",Icon:j.AlertCircle},DNC:{color:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",Icon:v.XCircle},SCHEDULED:{color:"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20",Icon:f.CheckCircle2},VOICEMAIL:{color:"bg-zinc-500/10 text-zinc-600 dark:text-zinc-400 border-zinc-500/20",Icon:w.PhoneIncoming},NO_ANSWER:{color:"bg-zinc-500/10 text-zinc-600 dark:text-zinc-400 border-zinc-500/20",Icon:w.PhoneIncoming},BUSY:{color:"bg-amber-500/10 text-amber-600 dark:text-amber-400 border-amber-500/20",Icon:w.PhoneIncoming},FAILED:{color:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",Icon:v.XCircle},CONNECTED:{color:"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20",Icon:z.PhoneCall},DISCONNECTED:{color:"bg-zinc-500/10 text-zinc-600 dark:text-zinc-400 border-zinc-500/20",Icon:l.Clock}},R=e=>{let t=Math.floor(e/60),i=e%60;return 0===t?`${i}s`:`${t}m ${i.toString().padStart(2,"0")}s`};e.s(["CampaignActivityModal",0,({call:e,isOpen:v,onClose:w,campaignId:z})=>{let j,L,A,[O,M]=(0,i.useState)(!1),D=i.default.useRef(null),[H,B]=(0,i.useState)(0),[P,F]=(0,i.useState)(0),[W,$]=(0,i.useState)(!1),[U,V]=(0,i.useState)([]),[q,Y]=(0,i.useState)(!1),[G,X]=(0,i.useState)([]),[K,Z]=(0,i.useState)(!1);i.default.useEffect(()=>{M(!1),B(0),F(e?.duration||0),$(!1),X([]),Z(!1),v&&e&&J()},[e,v]);let J=async()=>{if(e)try{if(Y(!0),e.user_queue_item_id)try{let t=await I.api.get(`/user-queue/${e.user_queue_item_id}/context`);if(t&&t.history&&t.history.length>0){let i=t.history.map((t,i)=>({id:t.id||`history-${i}`,type:"AI"===t.type?"agent_action":"thought",message:t.summary||t.notes||"No details available",timestamp:t.created_at,agent_name:"AI"===t.type?"AI Agent":"User",lead_id:e.lead_id,metadata:{status:t.status,duration:t.duration,recording_url:t.recording_url,full_transcript:t.full_transcript}}));V(i),X(t.history),Z(!0),Y(!1);return}}catch(e){console.warn("Failed to fetch user queue context, falling back to execution events:",e)}let t=z;if(!t){let e=window.location.pathname.split("/"),i=e.indexOf("campaigns");-1!==i&&e[i+1]&&"history"!==e[i+1]?t=e[i+1]:(t=e.pop(),"history"===t&&(t=e.pop()))}if(t&&"history"!==t&&e.lead_id){let i=`/execution/campaign/${t}/lead/${e.lead_id}/events`;e.bolna_call_id&&(i+=`?call_id=${e.bolna_call_id}`);let r=await I.api.get(i);V(r)}}catch(e){console.error("Failed to fetch lead events:",e)}finally{Y(!1)}};if(!e)return null;let Q=(e.outcome||e.status||"FAILED").toUpperCase(),ee=(()=>{if(e.agreement_status?.status==="yes")return{label:"AGREED",color:"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20",Icon:f.CheckCircle2};let t=T[Q]||{color:"bg-zinc-500/10 text-zinc-600 dark:text-zinc-400 border-zinc-500/20",Icon:l.Clock};return{label:"AMBIGUOUS"===Q?"Unclear":Q.replace(/_/g," "),color:t.color,Icon:t.Icon}})();return(0,t.jsx)(r.Dialog,{open:v,onOpenChange:w,children:(0,t.jsxs)(r.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-hidden rounded-[40px] p-0 bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 shadow-2xl flex flex-col [&>button]:hidden",children:[(0,t.jsx)(S.VisuallyHidden,{children:(0,t.jsxs)(r.DialogDescription,{children:["Detailed call transcript, recording, and outcome intelligence for ",e.name,"."]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("div",{className:"flex items-start gap-6 mb-10 relative",children:[(0,t.jsx)("div",{className:"w-24 h-24 rounded-[32px] overflow-hidden border-4 border-white dark:border-zinc-800 shadow-xl shrink-0 bg-zinc-50 dark:bg-zinc-900",children:(0,t.jsx)("img",{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${e.avatar_seed}`,alt:e.name,className:"w-full h-full object-contain scale-125 translate-y-2"})}),(0,t.jsxs)("div",{className:"flex-1 pt-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)(r.DialogTitle,{className:"text-4xl font-black text-zinc-900 dark:text-white tracking-tight leading-none",children:e.name}),(0,t.jsxs)(a.Badge,{className:(0,C.cn)("text-[10px] font-black uppercase px-3 py-1 rounded-full border shadow-sm flex items-center gap-1.5",ee.color),children:[(0,t.jsx)(ee.Icon,{className:"w-3.5 h-3.5"}),ee.label]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-y-2 gap-x-5 text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest mb-3",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(l.Clock,{className:"w-3.5 h-3.5"}),R(e.duration)]}),(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(c.Calendar,{className:"w-3.5 h-3.5"}),(0,E.format)(new Date(e.timestamp),"MMM d, h:mm a")]}),(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(d.Phone,{className:"w-3.5 h-3.5"}),e.phone_number]})]}),e.cohort&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(a.Badge,{variant:"outline",className:"bg-indigo-50 dark:bg-indigo-950/20 text-indigo-600 dark:text-indigo-400 border-indigo-100 dark:border-indigo-900 shadow-none py-1 h-auto text-[10px] font-black uppercase tracking-wider px-3 rounded-lg",children:e.cohort})})]}),(0,t.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:w,className:"absolute -top-4 -right-4 w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all border border-transparent hover:border-zinc-200",children:(0,t.jsx)(o.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(s.Card,{className:"rounded-[32px] bg-zinc-50/50 dark:bg-zinc-900/30 p-8 border border-zinc-100/50 dark:border-zinc-800/50 relative overflow-hidden group",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-orange-500/5 to-transparent rounded-bl-full"}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("div",{className:"p-2 bg-orange-500/10 rounded-xl text-orange-500",children:(0,t.jsx)(m.FileText,{className:"w-4 h-4"})}),(0,t.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400",children:"Outcome Intelligence"})]}),(0,t.jsx)("p",{className:"text-base text-zinc-700 dark:text-zinc-300 leading-relaxed font-medium",children:(j=["No transmission intel captured.","No specific insight generated.","Call completed."],L=e.summary&&!j.some(t=>e.summary?.includes(t)),A=e.key_insight&&!j.some(t=>e.key_insight?.includes(t)),L?e.summary:A?e.key_insight:e.critical_signal?.type==="DNC"?"Customer requested to be removed from all future contact. Expressed clear do-not-call preference.":e.critical_signal?.type==="WRONG_PERSON"?"Call reached a person other than the intended recipient. Contact records require update.":e.critical_signal?.type==="LANGUAGE_BARRIER"?"A significant language barrier prevented effective communication. Support in local language may be required.":"INTENT_YES"===Q||"INTERESTED"===Q?"Customer expressed positive interest. Wants to learn more.":"NOT_INTERESTED"===Q?"Customer politely declined the offer. Expressed clear disinterest.":"SCHEDULED"===Q?"Follow-up requested. Interested but busy now.":"VOICEMAIL"===Q?"Reached voicemail system. Message left successfully.":"NO_ANSWER"===Q?"Call was not answered. No contact established.":"BUSY"===Q?"Line was busy. Re-queueing for later attempt.":"FAILED"===Q?"Call failed to connect due to network or carrier issues.":e.duration<10?"Short duration call. Likely disconnected immediately or hung up.":e.duration<30?"Brief connection. Call ended before meaningful conversation could develop.":e.duration>120?"Extended conversation held. Connected for over 2 minutes without specific outcome classification.":"Call flow executed. Outcome status captured without additional qualitative intelligence.")}),e.critical_signal&&(0,t.jsxs)("div",{className:(0,C.cn)("mt-6 p-5 rounded-2xl border flex items-start gap-4","critical"===e.critical_signal.severity?"bg-red-50/50 dark:bg-red-500/5 border-red-100 dark:border-red-500/10":"bg-amber-50/50 dark:bg-amber-500/5 border-amber-100 dark:border-amber-500/10"),children:[(0,t.jsx)("div",{className:(0,C.cn)("w-10 h-10 rounded-xl flex items-center justify-center shrink-0","critical"===e.critical_signal.severity?"bg-red-500/10":"bg-amber-500/10"),children:(0,t.jsx)(x.AlertTriangle,{className:(0,C.cn)("w-5 h-5","critical"===e.critical_signal.severity?"text-red-600":"text-amber-600")})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,C.cn)("text-sm font-black uppercase tracking-wider mb-1","critical"===e.critical_signal.severity?"text-red-700 dark:text-red-400":"text-amber-700 dark:text-amber-400"),children:e.critical_signal.label}),(0,t.jsx)("p",{className:(0,C.cn)("text-xs font-bold","critical"===e.critical_signal.severity?"text-red-600/80":"text-amber-600/80"),children:"DNC"===e.critical_signal.type?"Request removal from outreach queue.":"Attention required for this lead profile."})]})]})]})]}),(0,t.jsxs)(s.Card,{className:"rounded-[32px] bg-white dark:bg-zinc-950 p-8 border border-zinc-100 dark:border-zinc-800 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-orange-500/10 rounded-xl text-orange-500",children:(0,t.jsx)(u.Headphones,{className:"w-4 h-4"})}),(0,t.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400",children:"Acoustics Archive"})]}),e.recording_url&&(0,t.jsx)(n.Button,{variant:"ghost",size:"sm",className:"h-8 rounded-full text-[10px] font-black uppercase tracking-widest gap-2",asChild:!0,children:(0,t.jsxs)("a",{href:e.recording_url,target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)(b.Download,{className:"w-3.5 h-3.5"}),"Download"]})})]}),e.recording_url?(0,t.jsxs)("div",{className:"flex items-center gap-6 p-4 bg-zinc-50/50 dark:bg-zinc-900/30 rounded-2xl border border-zinc-100 dark:border-zinc-800",children:[(0,t.jsx)("audio",{ref:D,src:e.recording_url,onTimeUpdate:()=>{D.current&&B(D.current.currentTime)},onLoadedMetadata:()=>{D.current&&F(D.current.duration)},onEnded:()=>{M(!1),B(0)},className:"hidden"}),(0,t.jsx)(n.Button,{size:"icon",className:"w-14 h-14 rounded-2xl bg-orange-600 hover:bg-orange-700 text-white shadow-lg shadow-orange-500/30 transition-all active:scale-95",onClick:()=>{D.current&&(O?D.current.pause():D.current.play(),M(!O))},children:O?(0,t.jsx)(p.Pause,{className:"w-7 h-7"}):(0,t.jsx)(g.Play,{className:"w-7 h-7 translate-x-0.5"})}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("div",{className:"h-2 w-full bg-zinc-200 dark:bg-zinc-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-orange-500 rounded-full shadow-[0_0_12px_rgba(99,102,241,0.5)] transition-all duration-100",style:{width:`${H/(P||1)*100}%`}})}),(0,t.jsxs)("div",{className:"flex justify-between text-[10px] font-black text-zinc-400 tabular-nums uppercase",children:[(0,t.jsx)("span",{children:R(H)}),(0,t.jsx)("span",{children:R(P||e.duration)})]})]})]}):(0,t.jsx)("div",{className:"py-8 text-center text-zinc-400 italic text-sm font-medium bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl border border-dashed border-zinc-200",children:"Recording currently being synchronized..."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-2",children:[(0,t.jsx)("div",{className:"p-2 bg-zinc-900 rounded-xl text-emerald-500",children:(0,t.jsx)(N.Terminal,{className:"w-4 h-4"})}),(0,t.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400",children:"Mission Control Feed"})]}),(0,t.jsxs)("div",{className:"flex items-start gap-8 px-2",children:[(0,t.jsxs)("div",{className:"shrink-0 flex flex-col items-center gap-3 sticky top-4",children:[(0,t.jsxs)("div",{className:"w-24 h-24 rounded-[32px] overflow-hidden border-4 border-indigo-500/20 bg-indigo-50/50 dark:bg-indigo-950/20 shadow-2xl relative group/avatar",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-indigo-500/10 group-hover/avatar:bg-indigo-500/20 transition-colors"}),(0,t.jsx)("img",{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${U[0]?.agent_name||"Priya"}&backgroundColor=e0e7ff`,alt:"Agent",className:"w-full h-full object-contain scale-110 translate-y-2 relative z-10"}),(0,t.jsx)("div",{className:"absolute bottom-0 inset-x-0 h-1/3 bg-gradient-to-t from-indigo-500/20 to-transparent z-20"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-[11px] font-black text-indigo-500 uppercase tracking-widest leading-none mb-1",children:U[0]?.agent_name||"Priya"}),(0,t.jsx)("p",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-tighter",children:"Screening Rep"})]})]}),(0,t.jsxs)("div",{className:"flex-1 relative group/card",children:[(0,t.jsx)("div",{className:"absolute -left-2 top-8 w-4 h-4 bg-white dark:bg-zinc-900 border-l border-b border-zinc-200 dark:border-zinc-800 rotate-45 z-0"}),(0,t.jsxs)(s.Card,{className:"rounded-[40px] bg-white dark:bg-zinc-950 p-8 border border-zinc-200 dark:border-zinc-800 shadow-2xl relative z-10 overflow-hidden min-h-[400px]",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-indigo-500/5 to-transparent rounded-bl-full pointer-events-none"}),(0,t.jsx)("div",{className:"space-y-6 max-h-[500px] overflow-y-auto pr-4 custom-scrollbar flex flex-col relative z-20",children:U.length>0?U.map((e,i)=>(0,t.jsxs)("div",{className:"group/item",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:(0,C.cn)("w-1.5 h-1.5 rounded-full","thought"===e.type?"bg-amber-500":"agent_action"===e.type?"bg-indigo-500":"bg-zinc-400")}),(0,t.jsx)("span",{className:(0,C.cn)("text-[9px] font-black uppercase tracking-[0.1em]","thought"===e.type?"text-amber-600/70":"agent_action"===e.type?"text-indigo-600/70":"text-zinc-500"),children:e.type.replace("_"," ")})]}),(0,t.jsx)("span",{className:"text-[9px] font-mono text-zinc-400 tabular-nums",children:new Date(e.timestamp).toLocaleTimeString([],{hour12:!0,hour:"numeric",minute:"2-digit"})})]}),(0,t.jsx)("div",{className:(0,C.cn)("px-5 py-3 rounded-2xl rounded-tl-sm transition-all duration-300","thought"===e.type?"bg-amber-500/[0.03] border border-amber-500/10 text-zinc-600 dark:text-zinc-400 italic":"agent_action"===e.type?"bg-indigo-500/[0.03] border border-indigo-500/10 text-zinc-900 dark:text-zinc-100":"bg-zinc-50 dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800 text-zinc-500 dark:text-zinc-400"),children:(0,t.jsx)("p",{className:"text-[13px] leading-relaxed font-medium",children:e.message})})]},e.id)):(0,t.jsxs)("div",{className:"py-24 text-center",children:[(0,t.jsx)(_.Database,{className:"w-12 h-12 text-zinc-200 dark:text-zinc-800 mx-auto mb-4 animate-pulse"}),(0,t.jsx)("p",{className:"text-sm font-bold text-zinc-300 dark:text-zinc-700 uppercase tracking-widest",children:q?"Fetching complete history...":K?"No interactions recorded":"No live events captured"}),!q&&!K&&(0,t.jsx)("p",{className:"text-xs text-zinc-400 dark:text-zinc-600 mt-2 max-w-xs mx-auto",children:"This lead may have been processed before the mission control feed was enabled."})]})}),(0,t.jsxs)("div",{className:"mt-8 pt-4 border-t border-zinc-100 dark:border-zinc-900 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),(0,t.jsx)("span",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:"Live Briefing Unit"})]}),(0,t.jsx)(a.Badge,{variant:"outline",className:"text-[8px] border-zinc-200 dark:border-zinc-800 text-zinc-400 h-5 px-2",children:"Secure Channel"})]})]})]})]})]}),e.transcript&&e.transcript.length>0&&(0,t.jsxs)(s.Card,{className:"rounded-[32px] bg-white dark:bg-zinc-950 border border-zinc-100 dark:border-zinc-800 shadow-sm overflow-hidden",children:[(0,t.jsxs)("button",{onClick:()=>$(!W),className:"w-full flex items-center justify-between p-8 hover:bg-zinc-50 dark:hover:bg-zinc-900/50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-emerald-500/10 rounded-xl text-emerald-500",children:(0,t.jsx)(h.Mic,{className:"w-4 h-4"})}),(0,t.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400",children:"Neuro-Conversation Archive"})]}),W?(0,t.jsx)(k.ChevronUp,{className:"w-4 h-4 text-zinc-400"}):(0,t.jsx)(y.ChevronDown,{className:"w-4 h-4 text-zinc-400"})]}),W&&(0,t.jsx)("div",{className:"px-8 pb-8 space-y-4 animate-in fade-in slide-in-from-top-2 duration-300",children:e.transcript.map((e,i)=>(0,t.jsx)("div",{className:(0,C.cn)("flex flex-col","agent"===e.role||"assistant"===e.role?"items-start":"items-end"),children:(0,t.jsx)("div",{className:(0,C.cn)("max-w-[85%] px-5 py-3 rounded-3xl text-[13px] font-medium leading-relaxed shadow-sm","agent"===e.role||"assistant"===e.role?"bg-indigo-600 text-white rounded-tl-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-800 dark:text-zinc-200 rounded-tr-sm border border-zinc-200/50 dark:border-zinc-700/50"),children:e.content})},i))})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)(n.Button,{onClick:w,className:"w-full h-14 rounded-[24px] bg-zinc-900 border border-zinc-800 hover:bg-zinc-800 text-white font-black text-xs uppercase tracking-[0.2em] shadow-xl gap-3",children:"Close Activity Log"})})]})]})})]})})}])},76162,e=>{"use strict";let t;var i=e.i(43476),r=e.i(71645),a=e.i(18566),n=e.i(46932),s=e.i(88653),o=e.i(71689),l=e.i(55436),c=e.i(25652),d=e.i(43432),m=e.i(3116),h=e.i(95468),u=e.i(73884),x=e.i(39312),g=e.i(21218),p=e.i(54858),b=e.i(67881),f=e.i(23750),v=e.i(47163),w=e.i(90919);let z="u">typeof window?r.useLayoutEffect:r.useEffect;function y(e){if(void 0!==e)switch(typeof e){case"number":return e;case"string":if(e.endsWith("px"))return parseFloat(e)}}let k=null;function N({containerElement:e,direction:t,isRtl:i,scrollOffset:r}){if("horizontal"===t&&i)switch(function(e=!1){if(null===k||e){let e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";let i=document.createElement("div"),r=i.style;return r.width="100px",r.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?k="positive-descending":(e.scrollLeft=1,k=0===e.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(e),k}return k}()){case"negative":return-r;case"positive-descending":if(e){let{clientWidth:t,scrollLeft:i,scrollWidth:r}=e;return r-t-i}}return r}function _(e,t="Assertion error"){if(!e)throw console.error(t),Error(t)}function j(e,t){if(e===t)return!0;if(!!e!=!!t||(_(void 0!==e),_(void 0!==t),Object.keys(e).length!==Object.keys(t).length))return!1;for(let i in e)if(!Object.is(t[i],e[i]))return!1;return!0}function C({cachedBounds:e,itemCount:t,itemSize:i}){if(0===t)return 0;if("number"==typeof i)return t*i;{let i=e.get(0===e.size?0:e.size-1);return _(void 0!==i,"Unexpected bounds cache miss"),t*((i.scrollOffset+i.size)/e.size)}}function S({cachedBounds:e,containerScrollOffset:t,containerSize:i,itemCount:r,overscanCount:a}){let n=r-1,s=0,o=-1,l=0,c=-1,d=0;for(;d<n;){let i=e.get(d);if(i.scrollOffset+i.size>t)break;d++}for(l=Math.max(0,(s=d)-a);d<n;){let r=e.get(d);if(r.scrollOffset+r.size>=t+i)break;d++}return c=Math.min(r-1,(o=Math.min(n,d))+a),s<0&&(s=0,o=-1,l=0,c=-1),{startIndexVisible:s,stopIndexVisible:o,startIndexOverscan:l,stopIndexOverscan:c}}function E(e,t){let{ariaAttributes:i,style:r,...a}=e,{ariaAttributes:n,style:s,...o}=t;return j(i,n)&&j(r,s)&&j(a,o)}function I({children:e,className:t,defaultHeight:a=0,listRef:n,onResize:s,onRowsRendered:o,overscanCount:l=3,rowComponent:c,rowCount:d,rowHeight:m,rowProps:h,tagName:u="div",style:x,...g}){let p=(0,r.useMemo)(()=>h,Object.values(h)),b=(0,r.useMemo)(()=>(0,r.memo)(c,E),[c]),[f,v]=(0,r.useState)(null),w=null!=m&&"object"==typeof m&&"getAverageRowHeight"in m&&"function"==typeof m.getAverageRowHeight,{getCellBounds:k,getEstimatedSize:I,scrollToIndex:T,startIndexOverscan:R,startIndexVisible:L,stopIndexOverscan:A,stopIndexVisible:O}=function({containerElement:e,containerStyle:t,defaultContainerSize:i=0,direction:a,isRtl:n=!1,itemCount:s,itemProps:o,itemSize:l,onResize:c,overscanCount:d}){var m;let h,{height:u=i,width:x=i}=function({box:e,defaultHeight:t,defaultWidth:i,disabled:a,element:n,mode:s,style:o}){let{styleHeight:l,styleWidth:c}=(0,r.useMemo)(()=>({styleHeight:y(o?.height),styleWidth:y(o?.width)}),[o?.height,o?.width]),[d,m]=(0,r.useState)({height:t,width:i}),h=a||"only-height"===s&&void 0!==l||"only-width"===s&&void 0!==c||void 0!==l&&void 0!==c;return z(()=>{if(null===n||h)return;let t=new ResizeObserver(e=>{for(let t of e){let{contentRect:e,target:i}=t;n===i&&m(t=>t.height===e.height&&t.width===e.width?t:{height:e.height,width:e.width})}});return t.observe(n,{box:e}),()=>{t?.unobserve(n)}},[e,h,n,l,c]),(0,r.useMemo)(()=>({height:l??d.height,width:c??d.width}),[d,l,c])}({defaultHeight:"vertical"===a?i:void 0,defaultWidth:"horizontal"===a?i:void 0,element:e,mode:"vertical"===a?"only-height":"only-width",style:t}),g=(0,r.useRef)({height:0,width:0}),p="vertical"===a?u:x,b=function({containerSize:e,itemSize:t}){let i;return"string"==typeof t?(_(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),_(void 0!==e,"Container size must be defined if a percentage item size is specified"),i=e*parseInt(t)/100):i=t,i}({containerSize:p,itemSize:l});(0,r.useLayoutEffect)(()=>{if("function"==typeof c){let e=g.current;(e.height!==u||e.width!==x)&&(c({height:u,width:x},{...e}),e.height=u,e.width=x)}},[u,c,x]);let f=function({itemCount:e,itemProps:t,itemSize:i}){return(0,r.useMemo)(()=>(function({itemCount:e,itemProps:t,itemSize:i}){let r=new Map;return{get(a){for(_(a<e,`Invalid index ${a}`);r.size-1<a;){let e,n=r.size;switch(typeof i){case"function":e=i(n,t);break;case"number":e=i}if(0===n)r.set(n,{size:e,scrollOffset:0});else{let t=r.get(n-1);_(void 0!==t,`Unexpected bounds cache miss for index ${a}`),r.set(n,{scrollOffset:t.scrollOffset+t.size,size:e})}}let n=r.get(a);return _(void 0!==n,`Unexpected bounds cache miss for index ${a}`),n},set(e,t){r.set(e,t)},get size(){return r.size}}})({itemCount:e,itemProps:t,itemSize:i}),[e,t,i])}({itemCount:s,itemProps:o,itemSize:b}),v=(0,r.useCallback)(e=>f.get(e),[f]),[w,k]=(0,r.useState)(()=>S({cachedBounds:f,containerScrollOffset:0,containerSize:p,itemCount:s,overscanCount:d})),{startIndexVisible:E,startIndexOverscan:I,stopIndexVisible:T,stopIndexOverscan:R}={startIndexVisible:Math.min(s-1,w.startIndexVisible),startIndexOverscan:Math.min(s-1,w.startIndexOverscan),stopIndexVisible:Math.min(s-1,w.stopIndexVisible),stopIndexOverscan:Math.min(s-1,w.stopIndexOverscan)},L=(0,r.useCallback)(()=>C({cachedBounds:f,itemCount:s,itemSize:b}),[f,s,b]),A=(0,r.useCallback)(t=>S({cachedBounds:f,containerScrollOffset:N({containerElement:e,direction:a,isRtl:n,scrollOffset:t}),containerSize:p,itemCount:s,overscanCount:d}),[f,e,p,a,n,s,d]);return z(()=>{k(A(("vertical"===a?e?.scrollTop:e?.scrollLeft)??0))},[e,a,A]),z(()=>{if(!e)return;let t=()=>{k(t=>{let{scrollLeft:i,scrollTop:r}=e,o=S({cachedBounds:f,containerScrollOffset:N({containerElement:e,direction:a,isRtl:n,scrollOffset:"vertical"===a?r:i}),containerSize:p,itemCount:s,overscanCount:d});return j(o,t)?t:o})};return e.addEventListener("scroll",t),()=>{e.removeEventListener("scroll",t)}},[f,e,p,a,s,d]),{getCellBounds:v,getEstimatedSize:L,scrollToIndex:(m=({align:t="auto",containerScrollOffset:i,index:r})=>{let o=function({align:e,cachedBounds:t,index:i,itemCount:r,itemSize:a,containerScrollOffset:n,containerSize:s}){if(i<0||i>=r)throw RangeError(`Invalid index specified: ${i}`,{cause:`Index ${i} is not within the range of 0 - ${r-1}`});let o=C({cachedBounds:t,itemCount:r,itemSize:a}),l=t.get(i),c=Math.max(0,Math.min(o-s,l.scrollOffset)),d=Math.max(0,l.scrollOffset-s+l.size);switch("smart"===e&&(e=n>=d&&n<=c?"auto":"center"),e){case"start":return c;case"end":return d;case"center":return l.scrollOffset<=s/2?0:l.scrollOffset+l.size/2>=o-s/2?o-s:l.scrollOffset+l.size/2-s/2;default:return n>=d&&n<=c?n:n<d?d:c}}({align:t,cachedBounds:f,containerScrollOffset:i,containerSize:p,index:r,itemCount:s,itemSize:b});if(e){if(o=N({containerElement:e,direction:a,isRtl:n,scrollOffset:o}),"function"!=typeof e.scrollTo){let e=A(o);j(w,e)||k(e)}return o}},h=(0,r.useRef)(()=>{throw Error("Cannot call during render.")}),z(()=>{h.current=m},[m]),(0,r.useCallback)(e=>h.current?.(e),[h])),startIndexOverscan:I,startIndexVisible:E,stopIndexOverscan:R,stopIndexVisible:T}}({containerElement:f,containerStyle:x,defaultContainerSize:a,direction:"vertical",itemCount:d,itemProps:p,itemSize:(0,r.useMemo)(()=>w?e=>m.getRowHeight(e)??m.getAverageRowHeight():m,[w,m]),onResize:s,overscanCount:l});(0,r.useImperativeHandle)(n,()=>({get element(){return f},scrollToRow({align:e="auto",behavior:t="auto",index:i}){let r=T({align:e,containerScrollOffset:f?.scrollTop??0,index:i});"function"==typeof f?.scrollTo&&f.scrollTo({behavior:t,top:r})}}),[f,T]),z(()=>{if(!f)return;let e=Array.from(f.children).filter((e,t)=>{if(e.hasAttribute("aria-hidden"))return!1;let i=`${R+t}`;return e.setAttribute("data-react-window-index",i),!0});if(w)return m.observeRowElements(e)},[f,w,m,R,A]),(0,r.useEffect)(()=>{R>=0&&A>=0&&o&&o({startIndex:L,stopIndex:O},{startIndex:R,stopIndex:A})},[o,R,L,A,O]);let M=(0,r.useMemo)(()=>{let e=[];if(d>0)for(let t=R;t<=A;t++){let i=k(t);e.push((0,r.createElement)(b,{...p,ariaAttributes:{"aria-posinset":t+1,"aria-setsize":d,role:"listitem"},key:t,index:t,style:{position:"absolute",left:0,transform:`translateY(${i.scrollOffset}px)`,height:w?void 0:i.size,width:"100%"}}))}return e},[b,k,w,d,p,R,A]),D=(0,i.jsx)("div",{"aria-hidden":!0,style:{height:I(),width:"100%",zIndex:-1}});return(0,r.createElement)(u,{role:"list",...g,className:t,ref:v,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...x}},M,e,D)}r.useState,r.useRef,r.useState,r.useRef,t="u">typeof window?window:"u">typeof self?self:e.g;let T=null,R=null,L=t.clearTimeout,A=t.setTimeout,O=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame,M=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame;function D({box:e="content-box",className:i,"data-testid":a,id:n,nonce:s,onResize:o,style:l,tagName:c="div",...d}){let m,h;"Child"in d?m=d.Child:"ChildComponent"in d?m=d.ChildComponent:"renderProp"in d&&(h=d.renderProp);let[u,x]=(0,r.useState)(null),[g,p]=(0,r.useState)(),[b,f]=(0,r.useState)();!function({box:e,nonce:i,onResize:a,rootElement:n}){let s=(0,r.useRef)({onResize:a,parentNode:null,prevSize:{height:void 0,width:void 0}});(0,r.useLayoutEffect)(()=>{s.current.onResize=a});let o=(0,r.useRef)(()=>{let t,i,{onResize:r,parentNode:a,prevSize:n}=s.current;if(null!==a){switch(e){case"border-box":{let e=a.getBoundingClientRect();t=e.height,i=e.width;break}case"content-box":{let e=a.getBoundingClientRect(),r=window.getComputedStyle(a)||{},n=parseFloat(r.borderBottomWidth||"0"),s=parseFloat(r.borderLeftWidth||"0"),o=parseFloat(r.borderRightWidth||"0"),l=parseFloat(r.borderTopWidth||"0"),c=parseFloat(r.paddingLeft||"0"),d=parseFloat(r.paddingRight||"0"),m=parseFloat(r.paddingTop||"0"),h=parseFloat(r.paddingBottom||"0");t=e.height-m-h-l-n,i=e.width-c-d-s-o;break}case"device-pixel-content-box":t=a.offsetHeight,i=a.offsetWidth}(n.height!==t||n.width!==i)&&(s.current.prevSize={height:t,width:i},r({height:t,width:i}))}});(0,r.useLayoutEffect)(()=>{if(null===n)return;let e=n.parentNode;if(null===e||null===e.ownerDocument||null===e.ownerDocument.defaultView||!(e instanceof e.ownerDocument.defaultView.HTMLElement))return;s.current.parentNode=e;let r=o.current,a=e.ownerDocument.defaultView.ResizeObserver;if(null!=a){let t,i=new a(()=>{t=setTimeout(r,0)});return i.observe(e),()=>{t&&clearTimeout(t),i.disconnect()}}{let a=function(e){let i,r,a,n,s,o,l="u">typeof document&&document.attachEvent;if(!l){s=function(e){let t=e.__resizeTriggers__,i=t.firstElementChild,r=t.lastElementChild,a=i.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,a.style.width=i.offsetWidth+1+"px",a.style.height=i.offsetHeight+1+"px",i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight},o=function(e){if(e.target.className&&"function"==typeof e.target.className.indexOf&&0>e.target.className.indexOf("contract-trigger")&&0>e.target.className.indexOf("expand-trigger"))return;let t=this;s(this),this.__resizeRAF__&&T(this.__resizeRAF__),this.__resizeRAF__=R(function(){var i;((i=t).offsetWidth!==i.__resizeLast__.width||i.offsetHeight!==i.__resizeLast__.height)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(i){i.call(t,e)}))})};let e=!1,t="";a="animationstart";let l="Webkit Moz O ms".split(" "),c="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" ");{let i=document.createElement("fakeelement");if(void 0!==i.style.animationName&&(e=!0),!1===e){for(let r=0;r<l.length;r++)if(void 0!==i.style[l[r]+"AnimationName"]){t="-"+l[r].toLowerCase()+"-",a=c[r],e=!0;break}}}i="@"+t+"keyframes "+(r="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",n=t+"animation: 1ms "+r+"; "}let c=function(t){if(!t.getElementById("detectElementResize")){let r=(i||"")+".resize-triggers { "+(n||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',a=t.head||t.getElementsByTagName("head")[0],s=t.createElement("style");s.id="detectElementResize",s.type="text/css",null!=e&&s.setAttribute("nonce",e),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(t.createTextNode(r)),a.appendChild(s)}};return{addResizeListener:function(e,i){if(l)e.attachEvent("onresize",i);else{if(!e.__resizeTriggers__){let i=e.ownerDocument,n=t.getComputedStyle(e);n&&"static"===n.position&&(e.style.position="relative"),c(i),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=i.createElement("div")).className="resize-triggers";let l=i.createElement("div");l.className="expand-trigger",l.appendChild(i.createElement("div"));let d=i.createElement("div");d.className="contract-trigger",e.__resizeTriggers__.appendChild(l),e.__resizeTriggers__.appendChild(d),e.appendChild(e.__resizeTriggers__),s(e),e.addEventListener("scroll",o,!0),a&&(e.__resizeTriggers__.__animationListener__=function(t){t.animationName===r&&s(e)},e.__resizeTriggers__.addEventListener(a,e.__resizeTriggers__.__animationListener__))}e.__resizeListeners__.push(i)}},removeResizeListener:function(e,t){if(l)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",o,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(a,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch{}}}}}(i);return a.addResizeListener(e,r),()=>{a.removeResizeListener(e,r)}}},[i,n])}({box:e,nonce:s,onResize:e=>{p(e.height),f(e.width),"u">typeof o&&o(e)},rootElement:u});let v=(0,r.useMemo)(()=>m?(0,r.memo)(m):void 0,[m]);return(0,r.createElement)(c,{className:i,"data-auto-sizer":"","data-testid":a,id:n,ref:x,style:l},v?(0,r.createElement)(v,{height:g,width:b}):void 0,h?h({height:g,width:b}):void 0)}null==O||null==M?(T=L,R=function(e){return A(e,20)}):(T=function([e,t]){O(e),L(t)},R=function(e){let t=M(function(){L(i),e()}),i=A(function(){O(t),e()},20);return[t,i]});let H=(0,r.memo)(({call:e,onClick:t,style:r})=>(0,i.jsx)("div",{style:r,children:(0,i.jsxs)(n.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},onClick:()=>t(e),className:"group relative flex items-center gap-6 p-4 mx-2 rounded-[24px] bg-white/60 dark:bg-white/[0.02] border border-zinc-200 dark:border-white/5 hover:bg-white/80 dark:hover:bg-white/[0.04] hover:border-zinc-300 dark:hover:border-white/10 hover:shadow-xl dark:hover:shadow-[0_20px_40px_-15px_rgba(0,0,0,0.5)] transition-all duration-300 cursor-pointer h-[calc(100%-16px)] my-2",children:[(0,i.jsx)("div",{className:"absolute inset-0 rounded-[24px] bg-gradient-to-br from-zinc-900/[0.02] dark:from-white/[0.05] to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,i.jsxs)("div",{className:"relative w-14 h-14 shrink-0",children:[(0,i.jsx)("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-zinc-200 to-transparent dark:from-white/10 dark:to-transparent p-0.5",children:(0,i.jsx)("div",{className:"w-full h-full rounded-[14px] overflow-hidden bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-white/5",children:(0,i.jsx)("img",{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${e.avatar_seed}`,alt:e.name,loading:"lazy",className:"w-full h-full object-contain scale-125 translate-y-1 group-hover:scale-150 transition-transform duration-700"})})}),(0,i.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full bg-zinc-50 dark:bg-[#050505] p-0.5",children:(0,i.jsx)("div",{className:(0,v.cn)("w-full h-full rounded-full",e.agreement_status?.status==="yes"?"bg-emerald-500 shadow-md dark:shadow-[0_0_10px_rgba(16,185,129,0.5)]":"bg-zinc-300 dark:bg-zinc-600")})})]}),(0,i.jsxs)("div",{className:"flex-1 min-w-0 relative z-10",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-1.5",children:[(0,i.jsx)("h3",{className:"text-base font-black text-zinc-900 dark:text-white group-hover:text-orange-600 dark:group-hover:text-orange-500 transition-colors",children:e.name}),e.agreement_status?.status==="yes"&&(0,i.jsxs)("div",{className:"px-2 py-0.5 rounded-md bg-emerald-500/10 border border-emerald-500/20 flex items-center gap-1",children:[(0,i.jsx)(h.CheckCircle2,{className:"w-3 h-3 text-emerald-600 dark:text-emerald-500"}),(0,i.jsx)("span",{className:"text-[8px] font-black text-emerald-600 dark:text-emerald-500 uppercase tracking-widest",children:"Agreed"})]})]}),(0,i.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-500 line-clamp-1 group-hover:text-zinc-700 dark:group-hover:text-zinc-300 transition-colors",children:e.key_insight||"â€”"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-6 shrink-0 relative z-10",children:[(0,i.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,i.jsx)("div",{className:"text-xs font-black text-zinc-900 dark:text-white mb-0.5",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})}),(0,i.jsx)("div",{className:"text-[9px] font-bold text-zinc-400 dark:text-zinc-600 uppercase tracking-widest",children:"Timestamp"})]}),(0,i.jsx)("div",{className:"w-px h-6 bg-zinc-200 dark:bg-white/5 hidden sm:block"}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("div",{className:"text-xs font-black text-zinc-600 dark:text-zinc-400 mb-0.5",children:[Math.floor(e.duration/60),":",(e.duration%60).toString().padStart(2,"0")]}),(0,i.jsx)("div",{className:"text-[9px] font-bold text-zinc-400 dark:text-zinc-600 uppercase tracking-widest",children:"Duration"})]})]}),(0,i.jsx)("div",{className:"w-8 h-8 rounded-full border border-zinc-200 dark:border-white/5 flex items-center justify-center opacity-0 group-hover:opacity-100 -translate-x-4 group-hover:translate-x-0 transition-all duration-500",children:(0,i.jsx)(x.Zap,{className:"w-3.5 h-3.5 text-orange-500"})})]})}));H.displayName="CallHistoryItem";var B=e.i(63327);let P=({index:e,style:t,items:r,onClick:a})=>{let n=r[e];return n?(0,i.jsx)(H,{style:t,call:n,onClick:a},n.call_log_id||e):null};function F(){let e=(0,a.useParams)(),t=(0,a.useRouter)(),z=e?.id,[y,k]=(0,r.useState)([]),[N,_]=(0,r.useState)(null),[j,C]=(0,r.useState)(""),[S,E]=(0,r.useState)("all");(0,r.useEffect)(()=>{if(!z)return;let e=null,t=0,i=()=>{let r="https:"===window.location.protocol?"wss:":"ws:",a=`${r}//${window.location.hostname}:8000/api/v1/execution/campaign/${z}/ws`;console.log(`[History] Connecting to WebSocket: ${a}`),(e=new WebSocket(a)).onopen=()=>{console.log("[History] WebSocket connected"),t=0},e.onmessage=e=>{try{let t=JSON.parse(e.data);("status_update"===t.type||"call_completed"===t.type)&&(console.log("[History] Received update, refreshing stats..."),W())}catch(e){console.error("[History] WebSocket message error:",e)}},e.onclose=()=>{console.log("[History] WebSocket disconnected"),t<5&&setTimeout(i,3e3*++t)}};return i(),()=>{e&&e.close()}},[z]);let[T,R]=(0,r.useState)(null),[L,A]=(0,r.useState)(!1),[O,M]=(0,r.useState)(!0),{loading:H,isAuthenticated:F}=(0,B.useAuth)();(0,r.useEffect)(()=>{!H&&F&&z&&W()},[z,H,F]);let W=async()=>{try{M(!0);let e=await p.api.get(`/execution/campaign/${z}/history`);e&&(k(e.history||[]),_(e.stats||null))}catch(e){console.error("Failed to fetch campaign history:",e)}finally{M(!1)}},$=y.filter(e=>{let t=""===j||e.name.toLowerCase().includes(j.toLowerCase())||e.phone_number.includes(j)||e.key_insight?.toLowerCase().includes(j.toLowerCase()),i=!0;return"hot"===S?i=e.agreement_status?.status==="yes"||e.intent_priority?.level==="high":"frustrated"===S?i=!!e.sentiment?.score&&e.sentiment.score<-.3:"converted"===S?i=["INTENT_YES","INTERESTED","SCHEDULED"].includes(e.outcome||""):"voicemail"===S&&(i="VOICEMAIL"===e.outcome||"NO_ANSWER"===e.outcome),t&&i}),U=N?N.sentiment_breakdown.positive>N.sentiment_breakdown.negative?"from-emerald-500/20 to-blue-500/20":N.sentiment_breakdown.negative>N.sentiment_breakdown.positive?"from-orange-500/20 to-red-500/20":"from-zinc-500/20 to-zinc-500/20":"from-zinc-500/20 to-zinc-500/20";return(0,i.jsxs)("div",{className:"relative min-h-screen bg-zinc-50 dark:bg-[#050505] text-zinc-900 dark:text-zinc-100 selection:bg-orange-500/30 overflow-x-hidden transition-colors duration-500",children:[(0,i.jsxs)("div",{className:"fixed inset-0 z-0",children:[(0,i.jsxs)("div",{className:(0,v.cn)("absolute inset-0 transition-opacity duration-1000","from-emerald-500/20 to-blue-500/20"===U?"opacity-30 dark:opacity-40":"from-orange-500/20 to-red-500/20"===U?"opacity-50 dark:opacity-60":"opacity-15 dark:opacity-20"),children:[(0,i.jsx)("div",{className:(0,v.cn)("absolute inset-0 bg-gradient-to-br transition-all duration-1000",U)}),(0,i.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0),rgba(250,250,250,1))] dark:bg-[radial-gradient(circle_at_50%_50%,rgba(20,20,20,0),rgba(5,5,5,1))]"})]}),(0,i.jsx)("div",{className:"absolute inset-0 opacity-[0.02] dark:opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"})]}),(0,i.jsx)("div",{className:"relative z-10 border-b border-zinc-200 dark:border-white/5 bg-white/40 dark:bg-black/20 backdrop-blur-2xl",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-8 py-10",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-12",children:[(0,i.jsx)(n.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:(0,i.jsxs)(b.Button,{variant:"ghost",size:"sm",onClick:()=>t.back(),className:"group gap-2 text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-900/5 dark:hover:bg-white/5 transition-all outline-none focus:ring-0",children:[(0,i.jsx)(o.ArrowLeft,{className:"w-4 h-4 transition-transform group-hover:-translate-x-1"}),(0,i.jsx)("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Back"})]})}),(0,i.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/60 dark:bg-white/5 border border-zinc-200 dark:border-white/10 backdrop-blur-md",children:[(0,i.jsx)(g.Activity,{className:"w-3 h-3 text-orange-500 animate-pulse"}),(0,i.jsx)("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:"Live Ledger"})]})]}),(0,i.jsxs)("div",{className:"mb-12",children:[(0,i.jsx)(n.motion.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-6xl font-black tracking-tight bg-gradient-to-b from-zinc-900 via-zinc-800 to-zinc-500 dark:from-white dark:to-zinc-500 bg-clip-text text-transparent mb-3",children:"Campaign History"}),(0,i.jsx)(n.motion.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-lg text-zinc-500 dark:text-zinc-400 font-medium",children:"Complete call ledger and mission analytics"})]}),N&&(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{label:"Total Calls",value:N.total_calls.toLocaleString(),icon:d.Phone,color:"orange",delay:0},{label:"Connected",value:N.connected_calls.toLocaleString(),icon:h.CheckCircle2,color:"emerald",delay:.1},{label:"Yes Intent Leads",value:(N.yes_intent_leads||0).toLocaleString(),icon:c.TrendingUp,color:"orange",delay:.2},{label:"Avg Duration",value:`${Math.floor(N.avg_duration/60)}:${(N.avg_duration%60).toString().padStart(2,"0")}`,icon:m.Clock,color:"amber",delay:.3}].map(e=>(0,i.jsxs)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e.delay},className:"group relative overflow-hidden rounded-3xl bg-white/60 dark:bg-white/[0.03] border border-zinc-200 dark:border-white/10 p-8 hover:bg-white/80 dark:hover:bg-white/[0.05] shadow-sm dark:shadow-none transition-all duration-500 cursor-default",children:[(0,i.jsx)("div",{className:(0,v.cn)("absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-10 dark:opacity-20 transition-opacity group-hover:opacity-20 dark:group-hover:opacity-40","orange"===e.color?"bg-orange-500":"emerald"===e.color?"bg-emerald-500":"bg-amber-500")}),(0,i.jsxs)("div",{className:"relative z-10",children:[(0,i.jsx)("div",{className:(0,v.cn)("w-12 h-12 rounded-2xl flex items-center justify-center mb-6 transition-transform group-hover:scale-110 group-hover:rotate-3","orange"===e.color?"bg-orange-500/10 text-orange-500":"emerald"===e.color?"bg-emerald-500/10 text-emerald-600":"bg-amber-500/10 text-amber-500"),children:(0,i.jsx)(e.icon,{className:"w-6 h-6 outline-none"})}),(0,i.jsx)("div",{className:"text-4xl font-black text-zinc-900 dark:text-white mb-2 tracking-tighter",children:e.value}),(0,i.jsx)("div",{className:"text-[10px] font-black text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:e.label})]}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-zinc-900/[0.02] dark:via-white/[0.02] to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-in-out"})]},e.label))})]})}),(0,i.jsx)("div",{className:"sticky top-0 z-20 bg-white/40 dark:bg-black/40 backdrop-blur-3xl border-b border-zinc-200 dark:border-white/5 py-6",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-8",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,i.jsxs)("div",{className:"relative flex-1 max-w-xl",children:[(0,i.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none",children:(0,i.jsx)(l.Search,{className:"w-4 h-4 text-zinc-400 dark:text-zinc-500"})}),(0,i.jsx)(f.Input,{placeholder:"Search mission ledger...",value:j,onChange:e=>C(e.target.value),className:"h-12 pl-12 pr-6 bg-white/60 dark:bg-white/[0.03] border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white placeholder:text-zinc-400 dark:placeholder:text-zinc-600 rounded-full focus:bg-white/80 dark:focus:bg-white/[0.05] focus:border-orange-500/30 dark:focus:border-orange-500/30 focus:ring-0 transition-all"})]}),(0,i.jsx)("div",{className:"flex items-center gap-3",children:[{id:"all",label:"All Events",icon:g.Activity},{id:"hot",label:"Hot Leads",icon:x.Zap,color:"text-orange-500",bg:"bg-orange-500/10"},{id:"converted",label:"Converted",icon:h.CheckCircle2,color:"text-emerald-500",bg:"bg-emerald-500/10"}].map(e=>(0,i.jsxs)("button",{onClick:()=>E(e.id),className:(0,v.cn)("px-5 py-2.5 rounded-full text-[10px] font-black uppercase tracking-[0.1em] transition-all flex items-center gap-2 border",S===e.id?"bg-zinc-900 dark:bg-white text-white dark:text-black border-zinc-900 dark:border-white shadow-lg dark:shadow-[0_0_20px_rgba(255,255,255,0.2)]":"bg-white/60 dark:bg-white/5 text-zinc-500 dark:text-zinc-400 border-zinc-200 dark:border-white/10 hover:bg-zinc-100 dark:hover:bg-white/10 hover:border-zinc-300 dark:hover:border-white/20"),children:[(0,i.jsx)(e.icon,{className:(0,v.cn)("w-3 h-3",S===e.id?"text-white dark:text-black":e.color||"text-zinc-400 dark:text-zinc-500")}),e.label]},e.id))})]})})}),(0,i.jsx)("div",{className:"relative z-10 max-w-7xl mx-auto px-8 py-4 h-[calc(100vh-280px)]",children:(0,i.jsx)(s.AnimatePresence,{mode:"popLayout",initial:!1,children:O||H?(0,i.jsxs)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-32",children:[(0,i.jsxs)("div",{className:"relative w-16 h-16 mb-6",children:[(0,i.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-orange-500/20"}),(0,i.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-t-orange-500 animate-spin"})]}),(0,i.jsx)("div",{className:"text-sm font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest animate-pulse",children:"Scanning Transmission..."})]}):F?0===$.length?(0,i.jsxs)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-32 bg-white/60 dark:bg-white/[0.02] border border-zinc-200 dark:border-white/5 rounded-[40px] shadow-sm dark:shadow-none",children:[(0,i.jsx)("div",{className:"w-20 h-20 rounded-3xl bg-zinc-500/10 flex items-center justify-center mb-8",children:(0,i.jsx)(l.Search,{className:"w-10 h-10 text-zinc-400 dark:text-zinc-500"})}),(0,i.jsx)("h3",{className:"text-2xl font-black text-zinc-900 dark:text-white mb-3",children:"No Records Found"}),(0,i.jsx)("p",{className:"text-zinc-500 text-center",children:"Try adjusting your mission filters."})]}):(0,i.jsx)("div",{className:"w-full h-full",children:(0,i.jsx)(D,{renderProp:({height:e,width:t})=>void 0===e||void 0===t?null:(0,i.jsx)(I,{style:{width:t,height:e},rowCount:$.length,rowHeight:120,rowComponent:P,rowProps:{items:$,onClick:e=>{R(e),A(!0)}}})})}):(0,i.jsxs)(n.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center py-32 bg-white/60 dark:bg-white/[0.02] border border-zinc-200 dark:border-white/5 rounded-[40px] shadow-sm dark:shadow-none",children:[(0,i.jsx)("div",{className:"w-20 h-20 rounded-3xl bg-red-500/10 flex items-center justify-center mb-8",children:(0,i.jsx)(u.XCircle,{className:"w-10 h-10 text-red-500"})}),(0,i.jsx)("h3",{className:"text-2xl font-black text-zinc-900 dark:text-white mb-3",children:"Access Restricted"}),(0,i.jsx)("p",{className:"text-zinc-500 max-w-xs text-center leading-relaxed",children:"Please authenticate to access the mission intelligence ledger."})]})})}),T&&(0,i.jsx)(w.CampaignActivityModal,{isOpen:L,onClose:()=>{A(!1),R(null)},call:T,campaignId:z})]})}e.s(["default",()=>F],76162)}]);