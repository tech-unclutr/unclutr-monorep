(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8674],{20004:(e,a,t)=>{Promise.resolve().then(t.bind(t,59476))},59476:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>W});var r=t(95155),i=t(12115),s=t(76046),n=t(71226),c=t(28633),d=t(14505),l=t(98867),o=t(66889),x=t(62455),h=t(60872),m=t(32423),g=t(22725),b=t(29191),p=t(87364),u=t(45686),v=t(59676),k=t(4839),j=t(1466),f=t(27065),z=t(69323),w=t(23075),N=t(63348);let y=(0,t(67401).A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var A=t(23950),C=t(14085),S=t(39286),E=t(25858),D=t(29602),R=t(25739),P=t(30814),_=t(31091),T=t(68158),I=t(9246),L=t(64104),O=t(20016),F=t(8807),M=t(71128),B=t(48048),U=t(35901),$=t(67557),G=t(2818);function W(){let e=(0,s.useParams)(),a=(0,s.useRouter)(),t=null==e?void 0:e.id,{loading:W,companyId:Y}=(0,U.A)(),[Z,J]=(0,i.useState)(null),[V,q]=(0,i.useState)(!0),[X,H]=(0,i.useState)(!1),[K,Q]=(0,i.useState)(!1),[ee,ea]=(0,i.useState)(0),[et,er]=(0,i.useState)(!1),[ei,es]=(0,i.useState)(!1),[en,ec]=(0,i.useState)(!1),[ed,el]=(0,i.useState)(!1),[eo,ex]=(0,i.useState)(!1),[eh,em]=(0,i.useState)(!1),[eg,eb]=(0,i.useState)("IDENTITY"),[ep,eu]=(0,i.useState)(!1),[ev,ek]=(0,i.useState)(!1),[ej,ef]=(0,i.useState)(!1),{campaign:ez,isConnected:ew}=(0,$.Q)(t),eN=(0,i.useRef)(0),ey=async()=>{if(!W){if(!Y||!t){q(!1);return}try{Z||q(!0);let e=Date.now(),a=await R.F.get("/intelligence/campaigns/".concat(t));if(e<eN.current)return;J(e=>JSON.stringify(e)===JSON.stringify(a)?e:a)}catch(e){console.error("Failed to fetch campaign:",e),404===e.status?(P.oR.error("Campaign not found"),a.push("/dashboard-new/customer-intelligence")):Z||P.oR.error(e.message||"Failed to load campaign")}finally{q(!1)}}};(0,i.useEffect)(()=>{!W&&Y&&t&&!Z&&ey()},[t,W,Y]),(0,i.useEffect)(()=>{ez&&(J(e=>{let a={...e,...ez,id:t,status:(null==e?void 0:e.status)||ez.status||"DRAFT"};return JSON.stringify(e)===JSON.stringify(a)?e:a}),eN.current=Date.now())},[ez,t]),(0,i.useEffect)(()=>{let e=()=>{((null==Z?void 0:Z.status)==="ACTIVE"||(null==Z?void 0:Z.status)==="IN_PROGRESS")&&fetch("".concat(G.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1","/execution/campaign/").concat(t,"/pause"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},keepalive:!0}).catch(e=>console.error("Auto-pause failed",e))};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[t,null==Z?void 0:Z.status]);let eA=()=>{if((null==Z?void 0:Z.status)==="IN_PROGRESS"||(null==Z?void 0:Z.status)==="WARMUP"){ec(!0);return}a.push("/dashboard-new/customer-intelligence")},eC=async()=>{em(!0);try{await R.F.patch("/intelligence/campaigns/".concat(t),{status:"PAUSED"}),P.oR.success("Campaign paused successfully"),eN.current=Date.now(),setTimeout(()=>{a.push("/dashboard-new/customer-intelligence")},500)}catch(e){console.error("Failed to pause campaign:",e),P.oR.error(e.message||"Failed to pause campaign"),em(!1),ec(!1)}},eS=async()=>{el(!0);try{await R.F.delete("/intelligence/campaigns/".concat(t)),P.oR.success("Campaign deleted successfully"),er(!1),setTimeout(()=>{a.push("/dashboard-new/customer-intelligence")},500)}catch(e){console.error("Failed to delete campaign:",e),e.message&&e.message.includes("call history")?(er(!1),el(!1),es(!0),P.oR.info("This campaign has call history and must be archived instead")):(P.oR.error(e.message||"Failed to delete campaign"),el(!1))}},eE=async()=>{console.log("[CampaignDetail] Archive requested for campaign:",t),ex(!0);try{let e=await R.F.post("/intelligence/campaigns/".concat(t,"/archive"),{});console.log("[CampaignDetail] Archive response:",e),P.oR.success("Campaign archived successfully"),es(!1),setTimeout(()=>{a.push("/dashboard-new/customer-intelligence")},500)}catch(e){console.error("[CampaignDetail] Failed to archive campaign:",e),P.oR.error(e.message||"Failed to archive campaign"),ex(!1)}};if(W||V)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-zinc-50 to-white dark:from-zinc-950 dark:to-black",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)(d.A,{className:"w-8 h-8 animate-spin text-orange-500"}),(0,r.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium",children:W?"Authenticating...":"Loading campaign..."})]})});if(!Z)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-zinc-50 to-white dark:from-zinc-950 dark:to-black",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Campaign not found"}),(0,r.jsx)(C.$,{onClick:eA,className:"mt-4",children:"Return to Intelligence Lab"})]})});let{name:eD,created_at:eR,updated_at:eP,status:e_,brand_context:eT,customer_context:eI,team_member_context:eL,cohort_config:eO={},selected_cohorts:eF=[],cohort_data:eM={},cohort_questions:eB={},cohort_incentives:eU={},preliminary_questions:e$=[],incentive:eG,execution_windows:eW=[],call_duration:eY,total_call_target:eZ}=Z,eJ="COMPLETED"===e_,eV=Object.values(eO).reduce((e,a)=>e+a,0)||eZ||0,eq=(null==eF?void 0:eF.length)||Object.keys(eO).length||0,eX=eY?Math.floor(eY/60):10,eH=(null==eW?void 0:eW.length)||0,eK={COMPLETED:{label:"Completed",color:"text-emerald-600",bg:"bg-emerald-500/10",border:"border-emerald-500/20",icon:l.A},IN_PROGRESS:{label:"Active",color:"text-blue-600",bg:"bg-blue-500/10",border:"border-blue-500/20",icon:o.A},ACTIVE:{label:"Active",color:"text-blue-600",bg:"bg-blue-500/10",border:"border-blue-500/20",icon:o.A},FAILED:{label:"Attention",color:"text-red-600",bg:"bg-red-500/10",border:"border-red-500/20",icon:x.A},DRAFT:{label:"Draft",color:"text-zinc-500",bg:"bg-zinc-500/10",border:"border-zinc-500/20",icon:h.A},SCHEDULED:{label:"Scheduled",color:"text-orange-600",bg:"bg-orange-500/10",border:"border-orange-500/20",icon:m.A},PAUSED:{label:"Paused",color:"text-amber-600",bg:"bg-amber-500/10",border:"border-amber-500/20",icon:g.A},READY:{label:"Ready",color:"text-emerald-600",bg:"bg-emerald-500/10",border:"border-emerald-500/20",icon:b.A}},eQ=eK[e_]||eK.DRAFT,e0=eQ.icon,e5=eF.length>0?eF:Object.keys(eO),e1=(0,B.X)(e5);return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-zinc-50 to-white dark:from-zinc-950 dark:to-black",children:[(0,r.jsxs)("div",{className:(0,D.cn)("max-w-7xl mx-auto p-6 md:p-8 transition-all duration-500",eJ&&"py-4 md:py-6"),children:[(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:(0,D.cn)("mb-8",eJ&&"mb-4"),children:[(0,r.jsxs)(C.$,{variant:"ghost",onClick:eA,className:(0,D.cn)("mb-6 text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 -ml-2",eJ&&"mb-2 transform scale-90 origin-left"),children:[(0,r.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Back to Intelligence Lab"]}),(0,r.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:(0,D.cn)("flex items-center gap-3 mb-4",eJ&&"mb-2"),children:[(0,r.jsxs)("div",{className:(0,D.cn)("flex items-center gap-2 pl-1 pr-3 py-1 rounded-full transition-all duration-300 border backdrop-blur-md",eQ.bg,eQ.border),children:[(0,r.jsx)("div",{className:(0,D.cn)("p-1.5 rounded-full bg-white dark:bg-black/20",eQ.color),children:(0,r.jsx)(e0,{className:"w-3.5 h-3.5",strokeWidth:3})}),(0,r.jsx)("span",{className:(0,D.cn)("text-[11px] font-black uppercase tracking-[0.15em] pr-1",eQ.color),children:eQ.label})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(I.Bc,{children:(0,r.jsxs)(I.m_,{children:[(0,r.jsx)(I.k$,{asChild:!0,children:(0,r.jsxs)("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 flex items-center gap-1.5 bg-zinc-50 dark:bg-zinc-900 px-3 py-1.5 rounded-full cursor-help hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[(0,r.jsx)(m.A,{className:"w-3.5 h-3.5 text-zinc-300 dark:text-zinc-600"}),eR?(0,_.m)(new Date(eR),{addSuffix:!0}):"New"]})}),(0,r.jsx)(I.ZI,{children:(0,r.jsxs)("p",{children:["Created: ",eR?(0,T.GP)(new Date(eR),"MMM do, yyyy 'at' h:mm a"):"N/A"]})})]})}),eP&&eP!==eR&&(0,r.jsx)(I.Bc,{children:(0,r.jsxs)(I.m_,{children:[(0,r.jsx)(I.k$,{asChild:!0,children:(0,r.jsxs)("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 flex items-center gap-1.5 bg-zinc-50 dark:bg-zinc-900 px-3 py-1.5 rounded-full cursor-help hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[(0,r.jsx)(o.A,{className:"w-3.5 h-3.5 text-zinc-300 dark:text-zinc-600"}),"Updated ",(0,_.m)(new Date(eP),{addSuffix:!0})]})}),(0,r.jsx)(I.ZI,{children:(0,r.jsxs)("p",{children:["Last Updated: ",(0,T.GP)(new Date(eP),"MMM do, yyyy 'at' h:mm a")]})})]})})]})]}),(0,r.jsx)("h1",{className:(0,D.cn)("text-5xl md:text-6xl font-black text-zinc-900 dark:text-zinc-50 leading-[1.05] tracking-[-0.04em] mb-6 bg-clip-text text-transparent bg-gradient-to-br from-zinc-900 via-zinc-800 to-zinc-500 dark:from-white dark:via-zinc-100 dark:to-zinc-400 transition-all duration-500",eJ&&"text-3xl md:text-4xl mb-2"),children:eD})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[["PAUSED","DRAFT","READY","SCHEDULED"].includes(e_)&&(0,r.jsxs)(C.$,{onClick:()=>{eb("IDENTITY"),H(!0)},className:"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-700 shadow-sm font-semibold rounded-xl",children:[(0,r.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Edit Campaign"]}),(0,r.jsxs)(C.$,{variant:"ghost",onClick:()=>{er(!0)},className:"rounded-xl h-11 text-red-500 hover:bg-red-50 hover:text-red-700 dark:hover:bg-red-500/10",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),(0,r.jsx)(c.N,{children:(0,r.jsx)(n.P.div,{initial:!!eJ&&{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.5,ease:"easeInOut"},className:"overflow-hidden",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 bg-white/50 dark:bg-zinc-900/30 p-6 rounded-[24px] border border-zinc-100/50 dark:border-zinc-800/30 group/metric transition-all duration-300 hover:bg-white hover:shadow-lg hover:shadow-orange-500/5 hover:border-orange-100",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-white dark:bg-zinc-800 flex items-center justify-center shadow-sm text-zinc-400 group-hover/metric:text-orange-500 transition-colors",children:(0,r.jsx)(v.A,{className:"w-6 h-6",strokeWidth:1.5})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight leading-none mb-1",children:eV}),(0,r.jsx)("div",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:"Total Targets"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 bg-white/50 dark:bg-zinc-900/30 p-6 rounded-[24px] border border-zinc-100/50 dark:border-zinc-800/30 group/metric transition-all duration-300 hover:bg-white hover:shadow-lg hover:shadow-orange-500/5 hover:border-orange-100",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-white dark:bg-zinc-800 flex items-center justify-center shadow-sm text-zinc-400 group-hover/metric:text-orange-500 transition-colors",children:(0,r.jsx)(o.A,{className:"w-6 h-6",strokeWidth:1.5})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight leading-none mb-1",children:[eX,"m"]}),(0,r.jsx)("div",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:"Calls"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 bg-white/50 dark:bg-zinc-900/30 p-6 rounded-[24px] border border-zinc-100/50 dark:border-zinc-800/30 group/metric transition-all duration-300 hover:bg-white hover:shadow-lg hover:shadow-emerald-500/5 hover:border-emerald-100",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-white dark:bg-zinc-800 flex items-center justify-center shadow-sm text-zinc-400 group-hover/metric:text-emerald-500 transition-colors",children:(0,r.jsx)(m.A,{className:"w-6 h-6",strokeWidth:1.5})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-2xl font-black text-zinc-900 dark:text-white tracking-tight leading-none mb-1",children:[eH," Slots"]}),(0,r.jsx)("div",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:"Schedule"})]})]})]})})}),(0,r.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.05},className:(0,D.cn)("mb-8",eJ&&"mb-4"),children:(0,r.jsx)(M.L,{campaignId:t,campaignStatus:e_,hasStrategy:!!((null==eF?void 0:eF.length)>0||eM&&Object.keys(eM).length>0),wasLeadsUpdated:ev,onStatusChange:async e=>{Z.status!==e&&(J({...Z,status:e}),eN.current=Date.now())},onEditStrategy:()=>{eb("STRATEGY"),H(!0),ea(e=>e+1)},onScheduleUpdate:e=>{J(a=>({...a,execution_windows:e}))}})}),(0,r.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-12",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{title:"Brand Identity",icon:k.A,text:eT,color:"text-orange-600",bg:"bg-orange-50/50",border:"border-orange-100/50",darkBg:"dark:bg-orange-500/10",darkBorder:"dark:border-orange-500/20"},{title:"Target Audience",icon:j.A,text:eI,color:"text-orange-600",bg:"bg-orange-50/50",border:"border-orange-100/50",darkBg:"dark:bg-orange-500/10",darkBorder:"dark:border-orange-500/20"},{title:"Purpose",icon:f.A,text:eL,color:"text-emerald-600",bg:"bg-emerald-50/50",border:"border-emerald-100/50",darkBg:"dark:bg-emerald-500/10",darkBorder:"dark:border-emerald-500/20"}].map((e,a)=>(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3+.1*a,duration:.7},className:"group/card relative p-8 rounded-[32px] bg-white/50 dark:bg-zinc-900/30 border border-zinc-200/50 dark:border-zinc-800/50 hover:bg-white dark:hover:bg-zinc-900/50 hover:shadow-[0_24px_48px_-12px_rgba(0,0,0,0.08)] dark:hover:shadow-black/40 hover:-translate-y-2 transition-all duration-500 overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/0 via-white/0 to-white/30 dark:to-white/5 opacity-0 group-hover/card:opacity-100 transition-opacity duration-500 pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-5 mb-6",children:[(0,r.jsx)("div",{className:(0,D.cn)("p-4 rounded-2xl shadow-[0_8px_16px_-4px_rgba(0,0,0,0.1)] transition-transform duration-500 group-hover/card:scale-110",e.bg,e.color,e.darkBg),children:(0,r.jsx)(e.icon,{className:"w-6 h-6"})}),(0,r.jsx)("span",{className:"text-[11px] font-black uppercase tracking-[0.25em] text-zinc-400 dark:text-zinc-500",children:e.title})]}),(0,r.jsx)("p",{className:"text-lg text-zinc-600 dark:text-zinc-300 leading-relaxed font-semibold",children:e.text||"Strategic context not defined."})]},a))})}),(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mb-12",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 mb-10",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("h4",{className:"text-xs font-black text-zinc-900 dark:text-zinc-100 uppercase tracking-[0.3em] flex items-center gap-4",children:[(0,r.jsx)("div",{className:"p-2 bg-orange-600 rounded-xl text-white shadow-lg shadow-orange-500/30",children:(0,r.jsx)(z.A,{className:"w-4 h-4"})}),"Campaign Strategy Map"]}),(0,r.jsx)("p",{className:"text-sm text-zinc-400 font-medium pl-12",children:"Segmented execution plan and individual goals"})]}),(0,r.jsxs)(S.E,{className:"bg-zinc-900 text-white dark:bg-white dark:text-zinc-900 px-5 py-2 text-xs font-bold rounded-full",children:[eq," ACTIVE SEGMENTS"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e5.map((e,a)=>{let t=eO[e]||0,i=eB[e]||e$,s=eU[e]||eG,c=e1[e]||1;return(0,r.jsxs)(n.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5+.1*a,duration:.6},className:"flex flex-col bg-white dark:bg-zinc-950/40 border border-zinc-200 dark:border-zinc-800/60 rounded-[32px] p-8 hover:border-orange-500/50 dark:hover:border-orange-400/50 hover:shadow-2xl transition-all duration-500 group/cohort relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-orange-500/5 to-transparent rounded-bl-full pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-5 mb-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-[20px] overflow-hidden border-2 border-white dark:border-zinc-800 shadow-xl group-hover/cohort:scale-105 transition-transform duration-500 bg-transparent",children:(0,r.jsx)("img",{src:"/images/avatars/notionists/full_body/avatar_".concat(c,".png"),alt:e,className:"w-full h-full object-contain scale-110 drop-shadow-md"})}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h5",{className:"font-black text-xl text-zinc-900 dark:text-zinc-50 tracking-tight",children:e}),(0,r.jsxs)(S.E,{variant:"secondary",className:"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 px-3 py-0.5 text-[10px] font-bold tracking-wider",children:[(0,r.jsx)(v.A,{className:"w-3 h-3 mr-1.5"})," ",t," TARGET CALLS"]})]})]}),(0,r.jsxs)("div",{className:"space-y-6 flex-1",children:[s&&(0,r.jsxs)("div",{className:"flex items-center gap-4 bg-emerald-500/[0.04] dark:bg-emerald-500/[0.08] p-4 rounded-2xl border border-emerald-500/10 dark:border-emerald-500/20",children:[(0,r.jsx)(w.A,{className:"w-5 h-5 text-emerald-600 shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-bold text-emerald-700 dark:text-emerald-400 tracking-tight",children:s})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-[10px] font-black text-zinc-400 uppercase tracking-[0.2em] pl-1",children:[(0,r.jsx)(N.A,{className:"w-3.5 h-3.5"})," Preliminary Questions"]}),(0,r.jsxs)("ul",{className:"space-y-3",children:[i.slice(0,3).map((e,a)=>(0,r.jsx)("li",{className:"text-sm text-zinc-600 dark:text-zinc-400 pl-4 border-l-2 border-zinc-100 dark:border-zinc-800 font-medium group-hover/cohort:border-orange-500/30 transition-colors",children:e},a)),i.length>3&&(0,r.jsxs)("li",{className:"text-xs text-orange-500 font-bold pl-4 pt-1 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-1 h-1 bg-orange-500 rounded-full"}),"+",i.length-3," more strategic questions"]})]})]})]})]},e)})})]})]}),(0,r.jsx)(c.N,{children:X&&(0,r.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:()=>{ev?ef(!0):H(!1)},children:(0,r.jsx)(n.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},className:"w-full max-w-5xl mx-auto max-h-[95vh] flex flex-col",onClick:e=>e.stopPropagation(),children:(0,r.jsx)(O.X,{campaignId:t,initialStep:eg,onComplete:()=>{H(!1),ek(!1),ey(),P.oR.success("Campaign updated successfully")},onBack:()=>{ev?ef(!0):H(!1)},onEditLeads:()=>Q(!0),onError:e=>{console.error("Campaign update error:",e),P.oR.error((null==e?void 0:e.message)||"Failed to update campaign")},isMagicUI:F.$.IS_MAGIC_AI_ENABLED},ee)})})}),(0,r.jsx)(c.N,{children:K&&(0,r.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:()=>{ep?ef(!0):Q(!1)},children:(0,r.jsx)(n.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},className:"w-full max-w-5xl mx-auto max-h-[95vh] flex flex-col",onClick:e=>e.stopPropagation(),children:(0,r.jsx)(L.K,{mode:"edit",campaignId:t,isMagicUI:F.$.IS_MAGIC_AI_ENABLED,onSuccess:()=>{Q(!1),eu(!1),ek(!0),ea(e=>e+1),ey(),P.oR.success("Leads updated successfully")},onCancel:()=>{ep?ef(!0):Q(!1)},onLeadsUpdated:async()=>{J(e=>({...e,status:"DRAFT",selected_cohorts:[],cohort_data:{},cohort_config:{},cohort_questions:{},cohort_incentives:{}}));try{await R.F.patch("/intelligence/campaigns/".concat(t),{status:"DRAFT"}),eN.current=Date.now(),P.oR.info("Campaign status changed to DRAFT. Please complete the cohort strategy mapping to activate.",{duration:5e3})}catch(e){console.error("Failed to update campaign status:",e),P.oR.error("Failed to update campaign status. Please refresh and try again.")}ea(e=>e+1),ey()},onDirtyChange:e=>eu(e),className:"flex-1 min-h-0"})})})}),(0,r.jsx)(E.Lt,{open:et,onOpenChange:er,children:(0,r.jsxs)(E.EO,{className:"rounded-[2rem] border-zinc-200 dark:border-zinc-800 bg-white/95 dark:bg-zinc-950/95 backdrop-blur-xl",children:[(0,r.jsxs)(E.wd,{children:[(0,r.jsxs)(E.r7,{className:"text-2xl font-bold text-zinc-900 dark:text-white flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-xl text-red-600 dark:text-red-400",children:(0,r.jsx)(u.A,{className:"w-5 h-5"})}),"Delete Campaign"]}),(0,r.jsxs)(E.$v,{className:"text-zinc-500 dark:text-zinc-400 text-base py-2",children:["Are you sure you want to delete ",(0,r.jsxs)("span",{className:"font-bold text-zinc-900 dark:text-zinc-100",children:['"',eD,'"']}),"? This will permanently remove the campaign and archive all related leads. This action cannot be undone."]})]}),(0,r.jsxs)(E.ck,{className:"gap-3 sm:gap-0",children:[(0,r.jsx)(E.Zr,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800 text-zinc-600 dark:text-zinc-400 font-bold hover:bg-zinc-50 dark:hover:bg-zinc-900 h-12 px-6",children:"Cancel"}),(0,r.jsx)(E.Rx,{onClick:e=>{e.preventDefault(),eS()},className:"rounded-2xl bg-red-600 hover:bg-red-700 text-white font-bold h-12 px-8 shadow-lg shadow-red-500/20 border-none transition-all hover:scale-[1.02] active:scale-[0.98]",disabled:ed,children:ed?"Deleting...":"Delete Campaign"})]})]})}),(0,r.jsx)(E.Lt,{open:ei,onOpenChange:es,children:(0,r.jsxs)(E.EO,{className:"rounded-[2rem] border-zinc-200 dark:border-zinc-800 bg-white/95 dark:bg-zinc-950/95 backdrop-blur-xl",children:[(0,r.jsxs)(E.wd,{children:[(0,r.jsxs)(E.r7,{className:"text-2xl font-bold text-zinc-900 dark:text-white flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-xl text-amber-600 dark:text-amber-400",children:(0,r.jsx)(y,{className:"w-5 h-5"})}),"Archive Campaign"]}),(0,r.jsxs)(E.$v,{className:"text-zinc-500 dark:text-zinc-400 text-base py-2",children:["This campaign has call history and cannot be deleted. Would you like to archive it instead?",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:"Archived campaigns are moved to a separate section and can be restored later if needed."})]})]}),(0,r.jsxs)(E.ck,{className:"gap-3 sm:gap-0",children:[(0,r.jsx)(E.Zr,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800 text-zinc-600 dark:text-zinc-400 font-bold hover:bg-zinc-50 dark:hover:bg-zinc-900 h-12 px-6",children:"Cancel"}),(0,r.jsx)(E.Rx,{onClick:e=>{e.preventDefault(),eE()},className:"rounded-2xl bg-amber-600 hover:bg-amber-700 text-white font-bold h-12 px-8 shadow-lg shadow-amber-500/20 border-none transition-all hover:scale-[1.02] active:scale-[0.98]",disabled:eo,children:eo?"Archiving...":"Archive Campaign"})]})]})}),(0,r.jsx)(E.Lt,{open:en,onOpenChange:ec,children:(0,r.jsxs)(E.EO,{className:"rounded-[2rem] border-zinc-200 dark:border-zinc-800 bg-white/95 dark:bg-zinc-950/95 backdrop-blur-xl",children:[(0,r.jsxs)(E.wd,{children:[(0,r.jsxs)(E.r7,{className:"text-2xl font-bold text-zinc-900 dark:text-white flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-xl text-amber-600 dark:text-amber-400",children:(0,r.jsx)(g.A,{className:"w-5 h-5"})}),"Pause Session?"]}),(0,r.jsxs)(E.$v,{className:"text-zinc-500 dark:text-zinc-400 text-base py-2",children:["This campaign is currently active. Do you want to pause it before leaving? ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:"Agents will complete their current calls and then stop dialing."})]})]}),(0,r.jsxs)(E.ck,{className:"gap-3 sm:gap-0",children:[(0,r.jsx)(E.Zr,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800 text-zinc-600 dark:text-zinc-400 font-bold hover:bg-zinc-50 dark:hover:bg-zinc-900 h-12 px-6",children:"Cancel"}),(0,r.jsx)(C.$,{variant:"ghost",onClick:()=>a.push("/dashboard-new/customer-intelligence"),className:"rounded-2xl text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-100 font-semibold h-12 px-6",children:"Exit Without Pausing"}),(0,r.jsx)(E.Rx,{onClick:e=>{e.preventDefault(),eC()},className:"rounded-2xl bg-amber-500 hover:bg-amber-600 text-white font-bold h-12 px-8 shadow-lg shadow-amber-500/20 border-none transition-all hover:scale-[1.02] active:scale-[0.98]",disabled:eh,children:eh?"Pausing...":"Pause & Exit"})]})]})}),(0,r.jsx)(E.Lt,{open:ej,onOpenChange:ef,children:(0,r.jsxs)(E.EO,{className:"rounded-[2rem] border-zinc-200 dark:border-zinc-800 bg-white/95 dark:bg-zinc-950/95 backdrop-blur-xl",children:[(0,r.jsxs)(E.wd,{children:[(0,r.jsxs)(E.r7,{className:"text-2xl font-bold text-zinc-900 dark:text-white flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-xl text-amber-600 dark:text-amber-400",children:(0,r.jsx)(A.A,{className:"w-5 h-5"})}),"Unsaved Changes"]}),(0,r.jsxs)(E.$v,{className:"text-zinc-500 dark:text-zinc-400 text-base py-2",children:["You have unsaved changes to your leads list. If you exit now, these changes will be lost.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:"Are you sure you want to discard your changes?"})]})]}),(0,r.jsxs)(E.ck,{className:"gap-3 sm:gap-0",children:[(0,r.jsx)(E.Zr,{className:"rounded-2xl border-zinc-200 dark:border-zinc-800 text-zinc-600 dark:text-zinc-400 font-bold hover:bg-zinc-50 dark:hover:bg-zinc-900 h-12 px-6",children:"Keep Editing"}),(0,r.jsx)(C.$,{variant:"destructive",onClick:()=>{ef(!1),Q(!1),H(!1),eu(!1)},className:"rounded-2xl bg-red-500 hover:bg-red-600 text-white font-bold h-12 px-8 shadow-lg shadow-red-500/20 border-none transition-all hover:scale-[1.02] active:scale-[0.98]",children:"Exit without Saving"})]})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[5563,3524,586,1431,1226,24,763,4158,814,9943,7641,1053,6374,1877,9022,9213,3299,5901,8804,2324,8677,6776,8441,1517,7358],()=>a(20004)),_N_E=e.O()}]);