(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3401],{66751:(e,t,a)=>{Promise.resolve().then(a.bind(a,12251))},12251:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>O});var r=a(95155),s=a(12115),i=a(14085),n=a(67401);let l=(0,n.A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var o=a(92823),c=a(23888);let d=(0,n.A)("workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);var h=a(67072),u=a(65236),m=a(5151),x=a(76046),p=a(25739),g=a(71226),w=a(11864);let f=(0,n.A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var v=a(36527);function y(e){let{label:t,value:a,trend:s,trendLabel:i,icon:n,color:l="indigo",loading:o=!1,subValue:c}=e;return(0,r.jsxs)(g.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-xl border border-white/5 bg-white/[0.02] overflow-hidden relative group",children:[(0,r.jsx)("div",{className:"absolute -right-10 -top-10 w-32 h-32 rounded-full bg-".concat(l,"-500/5 blur-3xl group-hover:bg-").concat(l,"-500/10 transition-all duration-500")}),(0,r.jsxs)("div",{className:"p-5 relative z-10",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-white/60",children:t}),n&&(0,r.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-br ".concat((e=>{switch(e){case"emerald":return"from-emerald-500/20 to-emerald-500/5 text-emerald-400";case"rose":return"from-rose-500/20 to-rose-500/5 text-rose-400";case"amber":return"from-amber-500/20 to-amber-500/5 text-amber-400";case"blue":return"from-blue-500/20 to-blue-500/5 text-blue-400";default:return"from-indigo-500/20 to-indigo-500/5 text-indigo-400"}})(l)),children:(0,r.jsx)(n,{className:"w-4 h-4"})})]}),o?(0,r.jsxs)("div",{className:"space-y-2 animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 w-24 bg-white/10 rounded"}),(0,r.jsx)("div",{className:"h-4 w-16 bg-white/5 rounded"})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-white tracking-tight mb-1",children:a}),(void 0!==s||c)&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[void 0!==s&&(0,r.jsxs)("div",{className:"flex items-center gap-1 font-medium ".concat(s>0?"text-emerald-400":s<0?"text-rose-400":"text-white/40"),children:[s>0?(0,r.jsx)(w.A,{className:"w-3 h-3"}):s<0?(0,r.jsx)(f,{className:"w-3 h-3"}):(0,r.jsx)(v.A,{className:"w-3 h-3"}),(0,r.jsxs)("span",{children:[Math.abs(s),"%"]})]}),i&&(0,r.jsx)("span",{className:"text-white/30",children:i}),c&&(0,r.jsx)("span",{className:"text-white/40",children:c})]})]})]})]})}var b=a(9110),j=a(86878);function N(){var e,t,a;let[i,n]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0),h=async()=>{c(!0);try{let e=await p.F.get("/metrics/overview");n(e)}catch(e){console.error("Failed to fetch overview metrics:",e)}finally{c(!1)}};return(0,s.useEffect)(()=>{h();let e=setInterval(h,6e4);return()=>clearInterval(e)},[]),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)(y,{label:"Total Users",value:(null==i?void 0:null===(e=i.total_users)||void 0===e?void 0:e.toLocaleString())||"0",subValue:"".concat((null==i?void 0:i.active_users_7d)||0," active (7d)"),icon:o.A,color:"orange",loading:l,trend:5,trendLabel:"vs last month"}),(0,r.jsx)(y,{label:"Companies",value:(null==i?void 0:null===(t=i.total_companies)||void 0===t?void 0:t.toLocaleString())||"0",icon:b.A,color:"rose",loading:l,trend:(null==i?void 0:i.total_companies)?10:0,trendLabel:"growth"}),(0,r.jsx)(y,{label:"Onboarding Rate",value:"".concat(Math.round((null==i?void 0:i.avg_onboarding_completion)||0),"%"),icon:j.A,color:"emerald",loading:l,trend:2,trendLabel:"completion"}),(0,r.jsx)(y,{label:"Integrations",value:(null==i?void 0:null===(a=i.total_integrations)||void 0===a?void 0:a.toLocaleString())||"0",subValue:"".concat((null==i?void 0:i.total_datasources)||0," supported"),icon:d,color:"amber",loading:l,trend:0,trendLabel:"active"})]})}var k=a(21773),A=a(44857);let _=(0,n.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var S=a(35007);function I(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0),[l,o]=(0,s.useState)(0),c=async()=>{n(!0);try{let e=await p.F.get("/metrics/customers?limit=20&offset=0");t(e.customers),o(e.total)}catch(e){console.error("Failed to fetch customers:",e)}finally{n(!1)}},d=async()=>{try{await p.F.request("/auth/token",{method:"GET"}).catch(()=>null),await p.F.request("/metrics/export/customers",{method:"GET"}),alert("Export started... (Implementation pending correct blob handling in api.ts)")}catch(e){console.error(e)}};(0,s.useEffect)(()=>{c()},[]);let h=e=>e>=80?"text-emerald-400 bg-emerald-500/10 border-emerald-500/20":e>=50?"text-amber-400 bg-amber-500/10 border-amber-500/20":"text-rose-400 bg-rose-500/10 border-rose-500/20";return(0,r.jsxs)(S.Zp,{className:"bg-white/[0.02] border-white/5",children:[(0,r.jsxs)(S.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(S.ZB,{className:"text-lg",children:"Customer Management"}),(0,r.jsxs)(S.BT,{children:["View and manage ",l," customer accounts"]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(i.$,{variant:"outline",size:"sm",onClick:c,className:"bg-white/5 border-white/10 hover:bg-white/10 text-white/70",children:[(0,r.jsx)(k.A,{className:"w-4 h-4 mr-2 ".concat(a?"animate-spin":"")}),"Refresh"]}),(0,r.jsxs)(i.$,{variant:"outline",size:"sm",onClick:d,className:"bg-orange-500/10 border-orange-500/20 hover:bg-orange-500/20 text-orange-400",children:[(0,r.jsx)(A.A,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]}),(0,r.jsx)(S.Wu,{children:(0,r.jsx)("div",{className:"rounded-md border border-white/10 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,r.jsx)("thead",{className:"text-xs uppercase bg-white/5 text-white/50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 font-medium",children:"Company"}),(0,r.jsx)("th",{className:"px-6 py-3 font-medium",children:"Joined"}),(0,r.jsx)("th",{className:"px-6 py-3 font-medium text-center",children:"Members"}),(0,r.jsx)("th",{className:"px-6 py-3 font-medium text-center",children:"Workspaces"}),(0,r.jsx)("th",{className:"px-6 py-3 font-medium text-center",children:"Integrations"}),(0,r.jsx)("th",{className:"px-6 py-3 font-medium text-center",children:"Health"}),(0,r.jsx)("th",{className:"px-6 py-3 font-medium text-right",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-white/5",children:a&&0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-white/30",children:"Loading customer data..."})}):0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-white/30",children:"No customers found."})}):e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-white/[0.02] transition-colors",children:[(0,r.jsxs)("td",{className:"px-6 py-4 font-medium text-white/80",children:[e.name,(0,r.jsxs)("div",{className:"text-xs text-white/30 font-mono mt-0.5",children:[e.id.slice(0,8),"..."]})]}),(0,r.jsx)("td",{className:"px-6 py-4 text-white/60",children:new Date(e.created_at).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-6 py-4 text-center text-white/60",children:e.member_count}),(0,r.jsx)("td",{className:"px-6 py-4 text-center text-white/60",children:e.workspace_count}),(0,r.jsx)("td",{className:"px-6 py-4 text-center text-white/60",children:e.integration_count}),(0,r.jsx)("td",{className:"px-6 py-4 text-center",children:(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ".concat(h(e.health_score)),children:[e.health_score,"%"]})}),(0,r.jsx)("td",{className:"px-6 py-4 text-right",children:(0,r.jsx)(i.$,{size:"icon",variant:"ghost",className:"h-8 w-8 hover:bg-white/10 text-white/40 hover:text-white",children:(0,r.jsx)(_,{className:"w-4 h-4"})})})]},e.id))})]})})})})]})}var C=a(28633),T=a(2818);function L(){let[e,t]=(0,s.useState)([]),a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=T.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1",r=new EventSource("".concat(e,"/dev/events"));return a.current=r,r.addEventListener("audit_log",e=>{try{let a=JSON.parse(e.data);t(e=>[a,...e].slice(0,50))}catch(e){console.error("Failed to parse log",e)}}),r.onerror=e=>{console.error("SSE Error:",e),r.close()},()=>{r.close()}},[]),(0,r.jsxs)(S.Zp,{className:"flex-1 bg-white/[0.02] border-white/5 flex flex-col min-h-[400px] overflow-hidden h-full",children:[(0,r.jsx)(S.aR,{className:"p-6 shrink-0 border-b border-white/5",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-orange-500/10 text-orange-400",children:(0,r.jsx)(c.A,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(S.ZB,{className:"text-lg text-white",children:"Live Activity Stream"}),(0,r.jsx)(S.BT,{className:"text-white/30 text-xs",children:"Real-time system events"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex gap-1",children:[1,2,3].map(e=>(0,r.jsx)("div",{className:"w-1 h-3 bg-orange-500/50 rounded-full animate-bounce",style:{animationDelay:"".concat(.1*e,"s")}},e))}),(0,r.jsx)("span",{className:"text-[10px] text-orange-400 uppercase font-bold tracking-widest leading-none",children:"Live"})]})]})}),(0,r.jsx)(S.Wu,{className:"p-0 overflow-y-auto flex-1 scrollbar-hide",children:(0,r.jsx)("div",{className:"divide-y divide-white/5",children:(0,r.jsx)(C.N,{initial:!1,children:0===e.length?(0,r.jsx)("div",{className:"p-12 text-center",children:(0,r.jsx)("p",{className:"text-white/20 text-sm font-medium",children:"Waiting for system events..."})}):e.map(e=>(0,r.jsxs)(g.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"p-4 hover:bg-white/[0.02] transition-colors flex items-start gap-4",children:[(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.action.includes("created")?"bg-orange-500":e.action.includes("deleted")?"bg-rose-500":e.action.includes("updated")?"bg-amber-500":"bg-white/20")})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsx)("span",{className:"text-sm font-bold text-white/90 font-mono tracking-tight",children:e.action}),(0,r.jsx)("span",{className:"text-[10px] text-white/20 font-mono",children:new Date(e.created_at).toLocaleTimeString([],{hour12:!0})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-xs text-white/40",children:[(0,r.jsx)("span",{className:"px-2 py-0.5 rounded bg-white/5 border border-white/10 uppercase tracking-widest text-[9px] font-bold",children:e.resource_type}),(0,r.jsxs)("span",{className:"font-mono text-[10px] truncate max-w-[150px]",children:["ID: ",e.id.split("-")[0],"..."]}),(0,r.jsx)("span",{className:"text-[10px] truncate max-w-[100px]",children:"system"===e.actor_id?"System":"User: ".concat(e.actor_id.slice(0,4),"...")})]})]})]},e.id))})})})]})}var P=a(81476);let E=(0,n.A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);function M(){let[e,t]=(0,s.useState)(null),[a,i]=(0,s.useState)(!0),n=async()=>{i(!0);try{let e=await p.F.get("/health/full");t(e)}catch(e){console.error("Failed to fetch health status:",e)}finally{i(!1)}};(0,s.useEffect)(()=>{n();let e=setInterval(n,3e4);return()=>clearInterval(e)},[]);let l=e=>{let t="online"===e||"connected"===e;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full animate-pulse ".concat(t?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]":"bg-red-500")}),(0,r.jsx)("span",{className:"text-[10px] font-medium uppercase tracking-wider ".concat(t?"text-emerald-500":"text-red-500"),children:t?"Operational":"Offline"})]})},o=[{title:"Backend API",icon:c.A,status:null==e?void 0:e.api},{title:"Primary DB",icon:P.A,status:null==e?void 0:e.database},{title:"Auth Layer",icon:E,status:null==e?void 0:e.firebase},{title:"Intelligence",icon:h.A,status:null==e?void 0:e.vertex_ai}];return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map((t,s)=>(0,r.jsx)(S.Zp,{className:"bg-white/[0.02] border-white/5 overflow-hidden group hover:border-white/10 transition-colors",children:(0,r.jsxs)(S.Wu,{className:"p-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-white/5 text-white/40 group-hover:text-white/80 transition-colors",children:(0,r.jsx)(t.icon,{className:"w-4 h-4"})}),(0,r.jsx)("span",{className:"text-sm font-medium text-white/80",children:t.title})]}),e||!a?l(t.status||"offline"):(0,r.jsx)("div",{className:"h-4 w-12 bg-white/5 animate-pulse rounded"})]})},s))})}var R=a(29602);function D(e){let{tabs:t,activeTab:a,onChange:s,className:i}=e;return(0,r.jsx)("div",{className:(0,R.cn)("flex space-x-1 bg-white/5 p-1 rounded-xl",i),children:t.map(e=>(0,r.jsxs)("button",{onClick:()=>s(e.id),className:(0,R.cn)("relative flex items-center gap-2 px-4 py-2 text-sm font-medium transition-colors rounded-lg z-10",a===e.id?"text-white":"text-white/50 hover:text-white/70"),children:[a===e.id&&(0,r.jsx)(g.P.div,{layoutId:"active-tab",className:"absolute inset-0 bg-white/10 rounded-lg -z-10",transition:{type:"spring",bounce:.2,duration:.6}}),e.icon&&(0,r.jsx)("span",{className:"w-4 h-4",children:e.icon}),e.label]},e.id))})}function F(e){let{id:t,activeTab:a,children:s,className:i}=e;return t!==a?null:(0,r.jsx)(g.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.2},className:i,children:s})}function O(){let[e,t]=(0,s.useState)("overview"),[a,n]=(0,s.useState)(!1),p=(0,x.useRouter)(),g=async()=>{n(!0);try{await (0,m.ri)(),p.push("/login")}catch(e){console.error("Logout failed:",e)}finally{n(!1)}},w=[{id:"overview",label:"Overview",icon:(0,r.jsx)(l,{className:"w-4 h-4"})},{id:"customers",label:"Customers",icon:(0,r.jsx)(o.A,{className:"w-4 h-4"})},{id:"product",label:"Product Health",icon:(0,r.jsx)(c.A,{className:"w-4 h-4"})},{id:"integrations",label:"Integrations",icon:(0,r.jsx)(d,{className:"w-4 h-4"})}];return(0,r.jsxs)("div",{className:"min-h-screen bg-[#050505] text-white selection:bg-orange-500/30 font-sans p-6 overflow-hidden flex flex-col",children:[(0,r.jsxs)("header",{className:"max-w-[1600px] mx-auto w-full flex items-center justify-between mb-8 shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-tr from-orange-600 to-orange-400 flex items-center justify-center shadow-lg shadow-orange-500/20",children:(0,r.jsx)(h.A,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Control Tower"}),(0,r.jsx)("p",{className:"text-white/40 text-xs uppercase tracking-[0.2em] font-bold",children:"Unclutr System Operations"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 border border-white/5",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_8px_rgba(16,185,129,0.5)]"}),(0,r.jsx)("span",{className:"text-xs font-medium text-emerald-400 uppercase tracking-wider",children:"System Operational"})]}),(0,r.jsx)("div",{className:"h-4 w-px bg-white/10"}),(0,r.jsxs)(i.$,{onClick:g,disabled:a,variant:"ghost",className:"text-red-400 hover:text-red-300 hover:bg-red-500/10 h-9",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]}),(0,r.jsxs)("main",{className:"max-w-[1600px] mx-auto w-full grid grid-cols-12 gap-8 flex-1 min-h-0",children:[(0,r.jsxs)("div",{className:"col-span-12 lg:col-span-9 flex flex-col gap-8 min-h-0 overflow-y-auto pr-2 scrollbar-hide pb-10",children:[(0,r.jsx)(N,{}),(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)(D,{tabs:w,activeTab:e,onChange:t})}),(0,r.jsxs)("div",{className:"flex-1 min-h-[400px]",children:[(0,r.jsxs)(F,{id:"overview",activeTab:e,className:"space-y-6",children:[(0,r.jsx)(M,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"h-64 rounded-xl border border-white/5 bg-white/[0.02] flex items-center justify-center text-white/20 text-sm",children:"Revenue Chart (Coming Soon)"}),(0,r.jsx)("div",{className:"h-64 rounded-xl border border-white/5 bg-white/[0.02] flex items-center justify-center text-white/20 text-sm",children:"User Growth Chart (Coming Soon)"})]})]}),(0,r.jsx)(F,{id:"customers",activeTab:e,children:(0,r.jsx)(I,{})}),(0,r.jsx)(F,{id:"product",activeTab:e,children:(0,r.jsxs)("div",{className:"p-12 text-center border border-white/5 rounded-xl bg-white/[0.02]",children:[(0,r.jsx)(c.A,{className:"w-12 h-12 text-white/10 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-white/50",children:"Product Health Metrics"}),(0,r.jsx)("p",{className:"text-sm text-white/30 mt-2",children:"Detailed charts for engagement, retention, and feature usage coming in Phase 4.1"})]})}),(0,r.jsx)(F,{id:"integrations",activeTab:e,children:(0,r.jsxs)("div",{className:"p-12 text-center border border-white/5 rounded-xl bg-white/[0.02]",children:[(0,r.jsx)(d,{className:"w-12 h-12 text-white/10 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-white/50",children:"Integration Status"}),(0,r.jsx)("p",{className:"text-sm text-white/30 mt-2",children:"Sync health, error rates, and API performance metrics coming in Phase 4.1"})]})})]})]}),(0,r.jsx)("div",{className:"col-span-12 lg:col-span-3 h-full min-h-[500px]",children:(0,r.jsx)(L,{})})]})]})}},14085:(e,t,a)=>{"use strict";a.d(t,{$:()=>c,r:()=>o});var r=a(95155),s=a(12115),i=a(12317),n=a(31027),l=a(29602);let o=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground transition-all active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:c=!1,...d}=e,h=c?i.DX:"button";return(0,r.jsx)(h,{className:(0,l.cn)(o({variant:s,size:n,className:a})),ref:t,...d})});c.displayName="Button"},35007:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>n,aR:()=>l});var r=a(95155),s=a(12115),i=a(29602);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground",a),...s})});n.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},53567:(e,t,a)=>{"use strict";a.d(t,{HK:()=>l,Oz:()=>h,g6:()=>d,st:()=>n,sx:()=>o,v:()=>c});var r=a(12115),s=a(55321),i=a(89664);let n=()=>{(0,r.useEffect)(()=>{(0,s.TT)().then(e=>{if(e)try{let e=(0,s.P5)(i.app);(0,s.$s)(e,"page_view",{page_path:window.location.pathname,page_title:document.title})}catch(e){}})},[])},l=()=>{(0,r.useEffect)(()=>{let e=e=>{let t=e.target.closest("button, a, [data-track]");if(t){let e=t.innerText||t.getAttribute("aria-label")||"";e=e.slice(0,50).trim();let a=t.id||t.getAttribute("data-id")||"unknown",r=t.tagName.toLowerCase();if(t.hasAttribute("data-no-track"))return;o("user_interaction",{event_category:"ui_interaction",event_action:"click",event_label:e,element_type:r,element_id:a,page_path:window.location.pathname})}};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[])},o=(e,t)=>{(0,s.TT)().then(a=>{if(a)try{let a=(0,s.P5)(i.app);(0,s.$s)(a,e,t)}catch(e){}})};function c(e,t){let a={event:e,timestamp:new Date().toISOString(),...t};o(e,t);try{let e=JSON.parse(localStorage.getItem("onboarding_events")||"[]");e.push(a),e.length>100&&e.shift(),localStorage.setItem("onboarding_events",JSON.stringify(e))}catch(e){}}function d(e,t){o("auth_".concat(e),{...t,timestamp:new Date().toISOString()})}function h(e,t){var a;o("error_occurred",{error_message:e.message,error_stack:null===(a=e.stack)||void 0===a?void 0:a.slice(0,500),...t,timestamp:new Date().toISOString()})}},25739:(e,t,a)=>{"use strict";a.d(t,{F:()=>l});var r=a(89664),s=a(2818);let i=s.env.NEXT_PUBLIC_API_URL?"".concat(s.env.NEXT_PUBLIC_API_URL,"/api/v1"):"/api/v1";class n extends Error{constructor(e,t,a){super(e),this.name="ApiError",this.status=t,this.data=a}}let l={async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.auth.currentUser,s=a?await a.getIdToken():null,l=localStorage.getItem("unclutr_company_id"),o={"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{},...l?{"X-Company-ID":l}:{},...t.headers||{}};l||e.startsWith("/execution");let c="".concat(i).concat(e),d=await fetch(c,{...t,cache:"no-store",headers:o});if(!d.ok){let e=await d.json().catch(()=>({detail:"Unknown error"}));throw new n(e.detail||d.statusText,d.status,e)}return d.json()},get(e,t){return this.request(e,{method:"GET",headers:t})},post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return this.request(e,{method:"POST",body:JSON.stringify(t),headers:a})},patch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return this.request(e,{method:"PATCH",body:JSON.stringify(t),headers:a})},put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return this.request(e,{method:"PUT",body:JSON.stringify(t),headers:a})},delete(e,t){return this.request(e,{method:"DELETE",headers:t})}}},5151:(e,t,a)=>{"use strict";a.d(t,{Rq:()=>c,fH:()=>u,ri:()=>x,f:()=>m,G6:()=>h,KF:()=>d});var r=a(5877),s=a(89664);window.fetch;let i=(e,t)=>{},n=(e,t)=>{console.error("[Firebase Error] ".concat(e,":"),t)};var l=a(53567),o=a(2818);let c=e=>{switch((null==e?void 0:e.code)||""){case"auth/popup-closed-by-user":return"The sign-in window was closed before finishing. Give it another shot!";case"auth/network-request-failed":return"A network hiccup occurred. Please check your connection and try again.";case"auth/invalid-email":return"That doesn't look like a valid email. Double-check for typos?";case"auth/user-disabled":return"This account has been disabled. Please reach out to our support team.";case"auth/too-many-requests":return"System's a bit busy. Please wait a moment before trying again.";case"auth/expired-action-code":return"This login link has expired. Let's send you a fresh one.";case"auth/invalid-action-code":return"This login link isn't valid. Please request a new one below.";case"auth/popup-blocked":return"The login popup was blocked by your browser. Please allow popups for Unclutr.";case"auth/operation-not-allowed":return"This sign-in method isn't enabled yet. We're looking into it.";default:var t;return(null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.includes("network"))?"Connection lost. Please try again.":"Something went wrong on our end. Please try again in a moment."}},d=async e=>{var t;let a="[Sync:".concat(null===(t=e.email)||void 0===t?void 0:t.split("@")[0],"]");i("".concat(a," Starting sync..."));try{let t=await e.getIdToken(),r=o.env.NEXT_PUBLIC_API_URL||"";r.endsWith("/")&&(r=r.slice(0,-1));let s=r.endsWith("/api/v1")?"".concat(r,"/auth/sync"):"".concat(r,"/api/v1/auth/sync"),n=new AbortController,l=setTimeout(()=>n.abort(),8e3),c=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},signal:n.signal});if(clearTimeout(l),!c.ok)throw Error("Sync failed: ".concat(c.status));let d=await c.json();return i("".concat(a," Sync Success"),d),d}catch(t){return n("".concat(a," Sync Error"),t),console.warn("".concat(a," Backend unavailable/Sync failed. Returning partial session.")),{onboarding_completed:!1,current_company_id:null,user_id:e.uid,email:e.email}}},h=async()=>{if("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname){i("signInWithGoogle - Using Popup (Localhost Optimization)");try{let e=new r.HF;e.setCustomParameters({prompt:"select_account"});let t=await (0,r.df)(s.auth,e);return t.user&&((0,l.g6)("login",{method:"google",mode:"popup"}),window.location.assign("/dashboard")),t}catch(e){throw n("signInWithGoogle (Popup)",e),(0,l.g6)("login_failed",{method:"google",mode:"popup",error:e.message}),(0,l.Oz)(e,{context:"google_signin_popup"}),e}}i("signInWithGoogle - Starting (Redirect)");try{let e=new r.HF;e.setCustomParameters({prompt:"select_account"}),await (0,r.$2)(s.auth,e)}catch(e){throw n("signInWithGoogle",e),e}},u=async()=>{try{let e=await (0,r.Q4)(s.auth);if(null==e?void 0:e.user)return(0,l.g6)("login",{method:"google",mode:"redirect"}),e;return null}catch(e){throw n("handleAuthRedirect",e),e}},m=async e=>{i("sendEmailSignInLink",{email:e});try{let t={url:"".concat(window.location.origin,"/auth/verify"),handleCodeInApp:!0};await (0,r.MN)(s.auth,e,t),window.localStorage.setItem("emailForSignIn",e),i("sendEmailSignInLink - Success",{email:e})}catch(e){throw n("sendEmailSignInLink",e),e}},x=async()=>{i("logout - Starting");try{await (0,r.CI)(s.auth),window.localStorage.removeItem("emailForSignIn"),(0,l.g6)("logout"),i("logout - Success")}catch(e){throw n("logout",e),(0,l.Oz)(e,{context:"logout"}),e}}},89664:(e,t,a)=>{"use strict";a.r(t),a.d(t,{app:()=>d,auth:()=>h,initRemoteConfig:()=>m,storage:()=>u});var r=a(49904),s=a(5877),i=a(55321),n=a(66919),l=a(65684),o=a(6802);let c={apiKey:"AIzaSyBV4-x1knQDLxrUw0A5gJCqpDkGYWtxiQ0",authDomain:(()=>{let e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e?"unclutr-monorep.firebaseapp.com":e})(),projectId:"unclutr-monorep",storageBucket:"unclutr-monorep.firebasestorage.app",messagingSenderId:"527397315020",appId:"1:527397315020:web:fb9ccca0b949751fa5bd69",measurementId:"G-Y6S6ESHRFN"};console.log("Firebase Config Loaded (Hardcoded Backup)"),console.log("[Firebase] Using authDomain: ".concat(c.authDomain));let d=0===(0,r.Dk)().length?(0,r.Wp)(c):(0,r.Dk)()[0],h=(0,s.xI)(d);(0,s.oM)(h,s.F0).catch(console.error);let u=(0,o.c7)(d);(0,i.TT)().then(e=>{if(e)try{(0,i.P5)(d)}catch(e){}});try{(0,n.FJ)(d)}catch(e){}let m=async()=>{{let e=(0,l.LO)(d);e.settings.minimumFetchIntervalMillis=36e5;try{await (0,l.LF)(e)}catch(e){console.error("Remote Config fetch failed",e)}return e}}},29602:(e,t,a)=>{"use strict";a.d(t,{Pf:()=>o,cn:()=>n,fw:()=>c,n4:()=>d,sY:()=>l});var r=a(43463),s=a(69795),i=a(80361);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}function l(e){return e instanceof Date?e:new Date("number"==typeof e?e:"string"!=typeof e||e.endsWith("Z")||/[+\-]\d{2}:?\d{2}$/.test(e)?e:e+"Z")}function o(e){let t=l(e);return new Intl.DateTimeFormat("en-IN",{timeZone:"Asia/Kolkata",day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(t)}function c(e){let t=l(e);return(0,i.B)(t,{addSuffix:!0}).replace(" seconds","s").replace(" second","s").replace(" minutes","m").replace(" minute","m").replace(" hours","h").replace(" hour","h").replace(" days","d").replace(" day","d").replace(" months","mo").replace(" month","mo").replace(" years","y").replace(" year","y")}function d(e){if(!e)return"No Phone";let t=String(e).replace(/\D/g,"");return 12===t.length&&t.startsWith("91")?"+91 ".concat(t.slice(2,7)," ").concat(t.slice(7)):10===t.length?"+91 ".concat(t.slice(0,5)," ").concat(t.slice(5)):t.length>10?"+".concat(t):t}},67401:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var r=a(12115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:d="",children:h,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:a,strokeWidth:n?24*Number(i)/Number(s):i,className:l("lucide",d),...!h&&!o(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(h)?h:[h]])}),h=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:o,...c}=a;return(0,r.createElement)(d,{ref:i,iconNode:t,className:l("lucide-".concat(s(n(e))),"lucide-".concat(e),o),...c})});return a.displayName=n(e),a}},23888:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(67401).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},11864:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(67401).A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},9110:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(67401).A)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]])},81476:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(67401).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},44857:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(67401).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},65236:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(67401).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},36527:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(67401).A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},21773:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(67401).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},86878:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(67401).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},92823:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(67401).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},67072:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(67401).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[5563,1431,1226,24,763,8441,1517,7358],()=>t(66751)),_N_E=e.O()}]);